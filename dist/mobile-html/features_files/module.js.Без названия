if(!JSON){var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}())}if(!String.prototype.trim){(function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}})()}(function(by,t,a6){var aV=false,F="147",bZ=42,p=by.roistatHost,ai="0.2",N="1.0",b6="roistat_visit_cookie_expire",bs="roistat_visit",au="roistat_first_visit",S="roistat_is_need_listen_requests",cs="roistat_phone",ah="roistat_referrer",b9="roistat_marker",aK="roistat_marker_old",a1="roistat_ab",bP="rs",u="roistat",J="leadhunter_expire",z=5*60*60,a7="roistat_leadHunterEnabled",aH="roistat_multiwidgetEnabled",bk="roistat_multiwidgetVKEnabled",A="roistat_multiwidgetFBEnabled",bM="roistat_multiwidgetTelegramEnabled",bV="roistat_onlineChatEnabled",d=7*24*60*60,b1={expires:d,path:"/"},O="roistat-promo",U="roistat-phone",s="roistat-phone-country",P="roistat-phone-region",v="roistat-phone-number",cl="roistat-phone-tel",bc="country",an="region",aO="number",bn="tel",k="roistat_call_tracking",G="roistat-js-script",aZ="roistat_phone_replacement",aP="roistat_phone_script_data",bY="roistat-visit-id",av="roistat_metrika_counter_id",g="roistat_marker_from_referrer",aY="roistat_emailtracking_email",b="roistat_emailtracking_tracking_email",a9="roistat_emailtracking_emails",cn="roistat_proxy_forms",b3="roistat_isMultiDomain",bS=["roistat_param1","roistat_param2","roistat_param3","roistat_param4","roistat_param5"],bt="roistat_debug",ay="roistat_settings_saved",bE="nocookie",aw=["yandex.ru"],af="beta_test";var ce=p.replace(/^cloud\./,"");var ca="collector."+ce;var bj={callTrackingEnabled:true,callTrackingManual:false,jsonpRequestTimeout:100};var bu={isVisitProcessed:false,visitFromUser:null,cookies:{},pageParams:{},source:{marker:null},isSettingsUpdating:false};
var b0={onVisitProcessed:[],onCallTrackingPhoneReceived:[],onSPAPageChanged:[]};if(by.roistatAlreadyStarted){if(typeof console!=="undefined"&&console.log){console.log("Call: roistat already started, skip")}return}by.roistatAlreadyStarted=true;if(by.roistatCookieDomain){b1.domain=by.roistatCookieDomain}by.roistat={version:F,getSource:function(){return bu.source.marker},visit:null,getVisit:function(){return roistat.visit},setVisit:function(cx){bu.visitFromUser=cx},registerOnVisitProcessedCallback:function(cx){bL(cx)},registerOnCalltrackingPhoneReceivedCallback:function(cx){aW(cx)},disableCallTracking:function(){bj.callTrackingEnabled=false},setCallTrackingManualMode:function(){bj.callTrackingManual=true},setJSONPRequestTimeout:function(cx){bj.jsonpRequestTimeout=cx},callTracking:{enabled:0,phone:"",sessionTime:0,replacementClasses:"",phonePrefix:""},emailtracking:{enabled:true,loaded:false,email:null,trackingEmail:null,emails:null,refresh:function(){o("Warning: used emailtracking refresh before module init")}},leadHunter:{isEnabled:true,onBeforeAppear:null,onAfterAppear:null,onBeforeSubmit:null,onAfterSubmit:null,additionalNotifyEmail:null,localization:{translateToRussian:null,translateToEnglish:null,},form:{title:null,subTitle:null,thankYouText:null,buttonText:null,nameLabel:null,contactLabel:null,isNameRequired:false,autoShowTime:null,isNeedExplicitAgreement:null,}},onlineChat:{isEnabled:true,},multiwidget:{isEnabled:true,vk:{isEnabled:false,link:null,},fb:{isEnabled:false,link:null,},telegram:{isEnabled:false,link:null,},},page:{params:{}},proxyForms:{enabled:true,loaded:false,settings:[]},authClientById:function(cx){ad(cx,a6)},authClientByEmail:function(cx){ad(a6,cx)}};var ad=function(cx,cA){if(!bu.isVisitProcessed){o("Visit is not processed, return");return}var cB=cx!==a6&&cx.length>0,cE=cA!==a6&&cA.length>0;if(!cB&&!cE){o("Invalid client params, return");return}var cC=l();if(cC<=0){o("Invalid arguments, return");return}var cD="roistat_authorized_client",cF=bw.get(cD),cz=cB?cx:cA;if(cF===cz){o('Client "'+cz+'" is already authorized, return');return}o("Auth client: "+cz);bw.set(cD,cz);var cy=y()+"/update-visit-by-client?visit="+cC+"&v="+F;if(cB){cy+="&client_id="+encodeURIComponent(cx)}if(cE){cy+="&client_email="+encodeURIComponent(cA)}at(cy)};var cg=function(cA,cy){var cz=cA.length;for(var cx=0;cx<cz;cx++){if(cy===cA[cx]){return true}}return false};var K=function(){return h(af)>0};var aB=function(){return by.roistatProjectId};var bO=function(){return aB().replace(/\D/g,"")};var aR=function(cx){var cy=bO();return cg(cx,cy)};var bU=function(cx){return JSON.parse(JSON.stringify(cx))};var a2=function(){var cy=bU(b1),cx=parseInt(bw.get(b6));cy.expires=cx>0?cx:d;return cy};var bL=function(cx){if(!bu.isVisitProcessed){b0.onVisitProcessed.push(cx)}else{cx()}};var bW=function(){bu.isVisitProcessed=true;o("[Roistat] visit id set. Processing callbacks");var cy=b0.onVisitProcessed.length;for(var cx=0;cx<cy;cx++){b0.onVisitProcessed[cx]()}if(by.roistatVisitCallback!==a6){by.roistatVisitCallback(by.roistat.getVisit())}};var aW=function(cx){b0.onCallTrackingPhoneReceived.push(cx)};var cf=function(){var cy=b0.onCallTrackingPhoneReceived.length;for(var cx=0;cx<cy;cx++){b0.onCallTrackingPhoneReceived[cx]()}};var aa=function aa(cx){b0.onSPAPageChanged.push(cx)};var bq=function bq(){o("[Roistat] SPA page changed. Processing callbacks");var cy=b0.onSPAPageChanged.length;for(var cx=0;cx<cy;cx++){b0.onSPAPageChanged[cx]()}};var Q=function(cB,cA){var cz=cB.className.split(" "),cy=false,cx;for(cx=0;cx<cz.length;cx++){if(cz[cx]===cA){cy=true;break}}if(!cy){cz.push(cA);cB.className=cz.join(" ")}};var br=function(cA,cz){var cy=cA.className.split(" "),cx;for(cx=0;cx<cy.length;cx++){if(cy[cx]===cz){cy.splice(cx,1);cA.className=cy.join(" ");break}}};var ae=function(cy){try{return decodeURIComponent(cy)}catch(cz){var cx;cx=q(cy);if(cx===null){return cy}return cx}};var bh={visitor_uid:function(){o("AmoCrmUID: starting collecting AmoCRM visitor_uid");if(!cw(by.AMOPIXEL_IDENTIFIER)||!C(by.AMOPIXEL_IDENTIFIER.getVisitorUid)){o("AmoCrmUID: AMOPIXEL_IDENTIFIER not an object or 'getVisitorUid()' function not found");return null}var cx=AMOPIXEL_IDENTIFIER.getVisitorUid();if(!ax(cx)){o("AmoCrmUID: visitor_uid value must be a string");return null}return cx}};var ac=function(){for(var cy in bh){var cx=bh[cy]();if(cx===null){continue}cm(cy,cx,b1)}};var aL=function(){return["_ym_uid","_ga"].concat(w(bh))};var q=function(cB){var cA={"%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FC":"%D1%8C","%FB":"%D1%8B","%FA":"%D1%8A","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D0":"%D0%A0","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DC":"%D0%AC","%DB":"%D0%AB","%DA":"%D0%AA","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF"};
var cy="";var cz=0;while(cz<cB.length){var cx=cB.substring(cz,cz+3);if(Object.prototype.hasOwnProperty.call(cA,cx)){cy+=cA[cx];cz+=3}else{cy+=cB.substring(cz,cz+1);cz++}}try{return decodeURIComponent(cy)}catch(cC){return null}};by.roistatVersion=F;var a0,E=[],bI=aR(["4227995881258865037","215381773260016033586","15824408914062546506955"]),i,bG=true,bK=t.location.href,aM="",ar="",aT=new Date().getTime(),b8=false,bR=by.roistatPhonePrefix?by.roistatPhonePrefix:"",ct=by.roistatPhonePrefixBind?by.roistatPhonePrefixBind:"",B=by.roistatCalltrackingScripts&&by.roistatCalltrackingScripts.join?by.roistatCalltrackingScripts.join(","):"";var h,cm;h=by.roistatGetCookie=function(cx){var cy=t.cookie.match(new RegExp("(?:^|; )"+cx.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return cy?ae(cy[1]):a6};cm=by.roistatSetCookie=function(cA,cC,cz){cz=cz||{};var cy=cz.expires;if(typeof cy=="number"&&cy){var cE=new Date();cE.setTime(cE.getTime()+cy*1000);cy=cz.expires=cE}if(cy&&cy.toUTCString){cz.expires=cy.toUTCString()}cC=encodeURIComponent(cC);var cx=cA+"="+cC;for(var cB in cz){cx+="; "+cB;var cD=cz[cB];if(cD!==true){cx+="="+cD}}t.cookie=cx};var a5=function(cy,cA,cz){var cx=cy[cA];cy[cA]=function(){if(cx){cx.apply(this,arguments)}cz.apply(this,arguments)}};var M=function(cz,cy,cA){if(cz.addEventListener){cz.addEventListener(cy,cA,false);return}var cx="on"+cy;if(cz.attachEvent){cz.attachEvent(cx,cA);return}if(cx in cz){a5(cz,cx,cA);return}if(cy in cz){a5(cz,cy,cA);return}o("Handler could not be attached")};var m=function(cA,cz){var cy=cA.length;for(var cx=0;cx<cy;cx++){cz(cA[cx])}};var w=function(cx){var cy=[];aS(cx,function(cz,cA){cy.push(cz)});return cy};var aS=function(cx,cz){for(var cy in cx){if(Object.prototype.hasOwnProperty.call(cx,cy)){cz(cy,cx[cy])}}};var aX=function(cx){return Object.prototype.toString.call(cx)==="[object Array]"};var ao=function(cy){if(typeof cy!=="object"){return false}for(var cx in cy){if(cy.hasOwnProperty(cx)){return true}}return false};var ci=function(cy){try{var cx=JSON.parse(cy);if(cx&&typeof cx==="object"){return cx}}catch(cz){}return null};if(t.getElementsByClassName==a6){t.getElementsByClassName=function(cy){var cx=[];var cC=new RegExp("\\b"+cy+"\\b");var cB=this.getElementsByTagName("*");for(var cA=0;cA<cB.length;cA++){var cz=cB[cA].className;if(cC.test(cz)){cx.push(cB[cA])}}return cx}}var ag=function(){return String.fromCharCode};var bX=function(cz){var cx="";for(var cy=0;cy<cz.length;++cy){cx+=ag()(bZ^cz.charCodeAt(cy))}return cx};var al=function(cx){return encodeURIComponent(bX(bB.encode(cx)))};var bB={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(cz){var cx="";var cG,cE,cC,cF,cD,cB,cA;var cy=0;cz=bB._utf8_encode(cz);while(cy<cz.length){cG=cz.charCodeAt(cy++);cE=cz.charCodeAt(cy++);cC=cz.charCodeAt(cy++);cF=cG>>2;cD=((cG&3)<<4)|(cE>>4);cB=((cE&15)<<2)|(cC>>6);cA=cC&63;if(isNaN(cE)){cB=cA=64}else{if(isNaN(cC)){cA=64}}cx=cx+this._keyStr.charAt(cF)+this._keyStr.charAt(cD)+this._keyStr.charAt(cB)+this._keyStr.charAt(cA)}return cx},decode:function(cz){var cx="";var cG,cE,cC;var cF,cD,cB,cA;var cy=0;cz=cz.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(cy<cz.length){cF=this._keyStr.indexOf(cz.charAt(cy++));cD=this._keyStr.indexOf(cz.charAt(cy++));cB=this._keyStr.indexOf(cz.charAt(cy++));cA=this._keyStr.indexOf(cz.charAt(cy++));cG=(cF<<2)|(cD>>4);cE=((cD&15)<<4)|(cB>>2);cC=((cB&3)<<6)|cA;cx=cx+String.fromCharCode(cG);if(cB!=64){cx=cx+String.fromCharCode(cE)}if(cA!=64){cx=cx+String.fromCharCode(cC)}}cx=bB._utf8_decode(cx);return cx},_utf8_encode:function(cy){cy=cy.replace(/\r\n/g,"\n");var cx="";for(var cA=0;cA<cy.length;cA++){var cz=cy.charCodeAt(cA);if(cz<128){cx+=String.fromCharCode(cz)}else{if((cz>127)&&(cz<2048)){cx+=String.fromCharCode((cz>>6)|192);cx+=String.fromCharCode((cz&63)|128)}else{cx+=String.fromCharCode((cz>>12)|224);cx+=String.fromCharCode(((cz>>6)&63)|128);cx+=String.fromCharCode((cz&63)|128)}}}return cx},_utf8_decode:function(cx){var cz="";var cB=0;var cC=0;var cA=0;var cy=0;while(cB<cx.length){cC=cx.charCodeAt(cB);if(cC<128){cz+=String.fromCharCode(cC);cB++}else{if((cC>191)&&(cC<224)){cA=cx.charCodeAt(cB+1);cz+=String.fromCharCode(((cC&31)<<6)|(cA&63));cB+=2}else{cA=cx.charCodeAt(cB+1);cy=cx.charCodeAt(cB+2);cz+=String.fromCharCode(((cC&15)<<12)|((cA&63)<<6)|(cy&63));cB+=3}}}return cz}};var a3=function(){return t[ag()(99,111,111,107,105,101)]};var W=function(){cp();var cx={c:cc()};return al(JSON.stringify(cx))};var bN=function(){var cx=l();return(cx===a6||cx===null)?bE:cx};var cc=function(){var cx=[];for(var cy in bu.cookies){if(!Object.prototype.hasOwnProperty.call(bu.cookies,cy)){continue}cx.push(cy+"="+bu.cookies[cy])}return cx.join("; ")};var cp=function(){var cx=j();for(var cy in cx){if(!Object.prototype.hasOwnProperty.call(cx,cy)){continue}bu.cookies[cy]=cx[cy]}};var V=function(cx){cm(b9,cx,a2());bu.source.marker=cx};var R=function(){return h(b9)};var e=function(){aS(by.roistat.page.params,function(cy,cx){bu.pageParams[cy]=cx
})};var j=function(){var cA=a3();var cB=cA.split("; ");var cx={};for(var cz=0;cz<cB.length;cz++){var cE=cB[cz];if(cE===""){continue}var cy=cE.split("=");if(cy.length<2){continue}var cD=cy[0].trim();var cC=cy[1].trim();cx[cD]=cC}return cx};var f=function(){return ag()(104,97,115,104)};var am=function(cx){return cx.split("http://").join("").split("https://").join("").split("#")[0].split("?")[0].split("www.").join("").replace(/\/+$/,"")};var bp={isAvailable:function(){var cx=false;if(!by.sessionStorage||!by.sessionStorage.setItem||!by.sessionStorage.getItem||!by.sessionStorage.removeItem){return cx}try{by.sessionStorage.setItem("testKey","testValue");cx=by.sessionStorage.getItem("testKey")==="testValue";by.sessionStorage.removeItem("testKey")}catch(cy){return false}return cx},remove:function(cx){if(this.isAvailable()){by.sessionStorage.removeItem(cx)}},setObject:function(cx,cy){if(this.isAvailable()){by.sessionStorage.setItem(cx,JSON.stringify(cy))}},getObject:function(cy){var cx=null;if(this.isAvailable()){cx=by.sessionStorage.getItem(cy);cx=JSON.parse(cx)}return cx},set:function(cx,cy){if(this.isAvailable()){by.sessionStorage.setItem(cx,cy)}},get:function(cy){var cx=null;if(this.isAvailable()){cx=by.sessionStorage.getItem(cy)}return cx}};var bw={isAvailable:function(){var cx=false;if(!by.localStorage||!by.localStorage.setItem||!by.localStorage.getItem||!by.localStorage.removeItem){return cx}try{by.localStorage.setItem("testKey","testValue");cx=by.localStorage.getItem("testKey")==="testValue";by.localStorage.removeItem("testKey")}catch(cy){return false}return cx},remove:function(cy){if(this.isAvailable()){by.localStorage.removeItem(cy)}else{var cx=new Date(1970,1,1);cm(cy,"",{expires:cx.toUTCString()})}},setObject:function(cx,cy){if(this.isAvailable()){localStorage.setItem(cx,JSON.stringify(cy))}},getObject:function(cy){var cx=null;if(this.isAvailable()){cx=localStorage.getItem(cy);cx=ci(cx)}return cx},set:function(cx,cy){if(this.isAvailable()){localStorage.setItem(cx,cy)}else{cm(cx,cy,b1)}},save:function(cy,cz,cx){if(this.isAvailable()){localStorage.setItem(cy,cz)}cm(cy,cz,cx)},get:function(cy){var cx=null;if(this.isAvailable()){cx=localStorage.getItem(cy)}if(cx===null){cx=h(cy)}return cx}};var bm=function(){return !bl(t.referrer)?t.referrer:null};var C=function(cx){return typeof cx==="function"};var cw=function(cx){return typeof cx==="object"};var ax=function(cx){return typeof cx==="string"};var H=function(cA,cz){cz=typeof cz!=="undefined"?cz:false;var cB=function(cE){var cD=null;var cF=new RegExp("[#&?]("+cA+"=[^#&?]+)");if(cF.test(cE)){cD=RegExp.$1.substring(RegExp.$1.indexOf("=")+1)}var cC=ae(cD);return cD&&cC?cC:cD};var cx=cB(bK);if(cz){var cy=t.referrer;if(cx===null&&cy){cx=cB(cy)}}return cx};var cd=function(cy,cz){var cx=false;if(cy&&cz){cx=cy.split(cz).join("")!==cy}return cx};if(H(bt)==="1"||j()[bt]==="1"){aV=true}var aG=function(){if("https:"===t.location.protocol){return"https:"}else{return"http:"}};var D=function(cy){var cx=t.createElement("img");cx.src=cy;o("sendRequestByUrl: "+cy)};var at=function(cy){o("sendApiRequestJSONP: init with url "+cy);var cx=t.createElement("script");cx.onload=cx.onreadystatechange=function(){var cA=this.readyState?this.readyState:"unknown";o("sendApiRequestJSONP: script state changed to "+cA)};cx.src=cy;cx.type="text/javascript";cx.async=true;var cz=t.getElementsByTagName("script")[0];cz.parentNode.insertBefore(cx,cz);o("sendApiRequestJSONP: script appended")};var bJ=function(){var cy=t.createElement("link"),cx=t.getElementsByTagName("head");cy.setAttribute("rel","stylesheet");cy.setAttribute("href",aG()+"//"+p+"/dist/module.css?"+F);if(cx.length>0){cx[0].appendChild(cy)}};var bC=function(){return bF()||cu()};var bF=function(){return aN()!==null};var cu=function(){return bz()!==null};var b7=function(){var cx=b4();if(cx!==null){cm(bs,cx,a2())}};var b4=function(){return aN()||bz()||null};var aN=function(){return H("roistat_visit")};var bz=function(){return bu.visitFromUser};var a=function(cx){if(bu.isSettingsUpdating||!t.hasFocus()){o("Already updating settings or document not in focus, return");return}var cy=y()+"/get-settings?v="+F+"&visit="+cx;o("Request new settings");bu.isSettingsUpdating=true;at(cy)};var ap=function(){return bw.get(ay)>0};var cj=function(){bw.set(ay,1)};var cq=function(){o("Call: Init");o("Counter version: "+F);if(H("roistat_ab_demo")==="1"){o("Roistat initialisation rejected: ab test preview mode");return}bJ();aQ();bT();if(!T()||cv()){b8=true;a8()}else{b7();var cx=l();bd();aE();b5();roistat.visit=cx;bu.source.marker=R();var cy=ap();if(!cy){a(cx)}else{bW()}}ch()};var aQ=function(){o("Call: initMarker");a0=bD();o("Call: inited marker: "+a0)};var bT=function(){o("Call: initReferrer");i=bm();o("Call: end initReferrer: "+i)};var bl=function(cz){if(!cz){return true}var cx=aF(cz);var cy=aF(t.domain);if(cx===cy){return true}var cA=bi();if(cA===null){return false}if(cd(cx,cA)&&cd(cy,cA)){return true}return false};var bi=function(){if(typeof b1.domain==="string"&&b1.domain!==""){return aF(b1.domain)
}return null};var aF=function(cx){var cy=cx.split("http://").join("").split("https://").join("").split("www.").join("");return cy.split("/")[0]};var bD=function(){var cC=h(g)>0;var cE=null;var cz=function(cH){return cH.split("_").join(":u:")};var cG=function(cI){var cH=false;m(aw,function(cJ){if(cI.indexOf(cJ)>-1){cH=true}});return cH};var cF=function(){var cH=false;var cI;cI=H(u,cC);if(cI!==null){cE=cI;cH=true}cI=H(bP,cC);if(cI!==null){cE=cI;cH=true}return cH};var cA=function(){var cH=false;var cI=R();if(cI){cE=cI;cH=true;bG=false}return cH};var cy=function(){var cH=false;var cJ=H("utm_source",cC);if(cJ!==null){cH=true;cE=":utm:"+cz(cJ);var cL=["utm_medium","utm_campaign","utm_content","utm_term"];var cI;for(var cK=0;cK<cL.length;cK++){cI=H(cL[cK],cC);if(cI!==null){cE=cE+"_"+cz(cI)}}}return cH};var cB=function(){var cJ,cI,cH=false;cI=H("_openstat",cC);if(!cI){return false}if(cD(cI)){cJ=cI}else{cJ=encodeURI(bB.decode(cI));if(!cD(cJ)){cJ=cI}}if(cJ){cJ=cz(cJ).split(";").join("_");cE=":openstat:"+cJ;cH=true}return cH};var cD=function(cH){return cH.match(/^([^;]*(;[^;]*){3})$/)!==null};var cx=function(){var cH=false;var cI=t.referrer;if(bl(cI)){return cH}var cJ=H("from",cC);if(cJ!==null&&!cd(cJ,"http")){if(!cG(cJ)){cH=true;cE=cz(cJ)}}return cH};if(cF()){bQ("Init marker: init from RS param "+cE);return cE}if(cy()){bQ("Init marker: init from UTM "+cE);return cE}if(cB()){bQ("Init marker: init from OpenStat "+cE);return cE}if(cx()){bQ("Init marker: init from custom tag "+cE);return cE}bQ("Init marker: try init from cookie "+cE);cA();return cE};var l=function(){return bw.get(bs)};var I=function(){o("Call: saveReferrer");bw.set(ah,i)};var bo=function(){o("Call: removeReferrer");bw.remove(ah)};var ch=function(){cm(aK,ae(a0),a2())};var b5=function(){o("Call: refreshPromoCode");var cx=function(){return h(bs)};Z(cx());if(!by.onload){by.onload=function(){Z(cx())}}setTimeout(function(){Z(cx())},50);setTimeout(function(){Z(cx())},200);setTimeout(function(){Z(cx())},2000);setTimeout(function(){Z(cx())},10000)};by.roistatPromoCodeRefresh=b5;var ck=function(){var cx=[];var cy=t.getElementsByClassName(O);if(cy&&cy.length){cx=cy}return cx};var Z=function(cx){var cA=ck();o("setPromoCode: "+cx+" in "+cA.length+" elements");for(var cz=0;cz<cA.length;cz++){var cy=cA[cz];cy.innerHTML=cx?cx:""}};var ba=function(){var cz=bD(),cy=h(aK),cB=cz!==null,cA=true;var cD=ae(ae(cz)).toLowerCase().split("+").join(" "),cC=ae(ae(cy)).toLowerCase().split("+").join(" ");if(cz&&cy){cA=cD!==cC}var cx=cB&&cA;ar="Call: needOverrideByMarker (result "+(cx?"true":"false")+") with current "+cz+":"+cD+" and old "+cy+":"+cC;bQ(ar);return cx};var ak=function(){var cy=function(cG){return/[\u0400-\u04FF]/.test(cG)};var cF=false,cC=i,cx=bw.get(ah),cE=by.location.host;if(!cC||!cE){bQ("Call: needOverrideByReferrer (result "+(cF?"true":"false")+"), skip because one of params is empty");return cF}cE=aF(cE);cC=ae(cC);cx=ae(cx);var cA=aF(cC);if(cd(cC,"xn--")&&cy(cE)){bQ("Call: needOverrideByReferrer (result "+(cF?"true":"false")+"), skip because of bugs with punycode in FF");return cF}if(!cA){bQ("Call: needOverrideByReferrer (result "+(cF?"true":"false")+"), skip because current referrer is null");return cF}if(!cx){cF=!cd(cA,cE);bQ("Call: needOverrideByReferrer (result "+(cF?"true":"false")+"), compare current referrer and host");return cF}if(cd(cC,cx)){bQ("Call: needOverrideByReferrer (result "+(cF?"true":"false")+"), skip because the same referrer");return cF}var cD=cE.split(".").length>2&&cA.split(".").length>2;var cB=by.roistatCookieDomain!==a6&&by.roistatCookieDomain!==cE;var cz=cA.split(".").slice(1).join(".")===cE.split(".").slice(1).join(".");if(cD&&cB&&cz){bQ("Call: needOverrideByReferrer (result "+(cF?"true":"false")+"), skip because sub domains of same domain");return cF}cF=!(cd(cA,cE)||(cd(cE,cA)));bQ("Call: needOverrideByReferrer (result "+(cF?"true":"false")+") referrerHost: "+cA+", currentHost: "+cE);return cF};var be=function(){return H("utm_nooverride")==="1"};var cv=function(){return !bC()&&!be()&&(ba()||ak())};var bf=function(cy,cx){return(cy&&cx&&cy!=cx)};var aI=function(cz){var cx=["cookieExpire"];var cB=cz.leadHunterEnabled;if(Number(bw.get(a7))!==Number(cz.leadHunterEnabled)){bw.set(a7,Number(cz.leadHunterEnabled))}if(cB){var cA={expires:z,path:"/"};if(b1.domain){cA.domain=b1.domain}cm(J,1,cA)}for(var cy in cz){if(!Object.prototype.hasOwnProperty.call(cz,cy)){continue}if(!cB&&cy.indexOf("leadHunter")>=0){continue}if(!Y(cx,cy)){bw.set("roistat_"+cy,cz[cy])}}};var b2=function(cx){if(!cx){return}roistat.multiwidget={isEnabled:cx.is_enabled,vk:{isEnabled:cx.vk.is_enabled,link:cx.vk.link,},fb:{isEnabled:cx.fb.is_enabled,link:cx.fb.link,},telegram:{isEnabled:cx.telegram.is_enabled,link:cx.telegram.link,},};if(Number(bw.get(aH))!==Number(cx.is_enabled)){bw.set(aH,Number(cx.is_enabled))}if(Number(bw.get(bk))!==Number(cx.vk.is_enabled)){bw.set(bk,Number(cx.vk.is_enabled))}if(Number(bw.get(A))!==Number(cx.fb.is_enabled)){bw.set(A,Number(cx.fb.is_enabled))}if(Number(bw.get(bM))!==cx.telegram.is_enabled){bw.set(bM,Number(cx.telegram.is_enabled))
}};var cr=function(cz,cB,cy,cA,cx,cC){aI(cz);roistat.callTracking.enabled=cB.is_enabled;roistat.emailtracking.loaded=true;roistat.emailtracking.email=cy.email;roistat.emailtracking.trackingEmail=cy.trackingEmail;roistat.emailtracking.emails=cy.emails;roistat.proxyForms.loaded=true;roistat.proxyForms.settings=cA;b2(cx);roistat.onlineChat.isEnabled=cC.is_enabled;if(Number(bw.get(bV))!==Number(cC.is_enabled)){bw.set(bV,Number(cC.is_enabled))}};by.roistatModuleSetVisitCookie=function(cC,cJ,cA,cy,cI,cx,cK,cE){o("Call: roistatModuleSetVisitCookie("+cC+")");var cF;if(typeof cA.cookieExpire!=="number"){cF=a2().expires}else{cF=cA.cookieExpire}var cD=h(bs);var cH={expires:cF,path:"/"};if(b1.domain){cH.domain=b1.domain}cm(bs,cC,cH);if(!(h(bs)>0)){bw.save(bs,cC,cH)}if(!bw.get(au)){var cz={expires:10*365*24*60*60,path:"/"};if(b1.domain){cz.domain=b1.domain}bw.save(au,cC,cz)}var cG=cA.abTests;if((typeof cG!=="undefined")&&bw.isAvailable()){bw.setObject("abTesting",cG)}applyTests();var cB=cA.isNeedToListenRequests;if((typeof cB!=="undefined")&&bw.isAvailable()){bw.set(S,cB)}Z(cC);if(cJ){V(cJ);cm(aK,cJ,cH)}o("Call: pre renderPromoCode");aE();b5();if(bf(cD,cC)){o("roistatModuleSetVisitCookie: visit changed from "+cD+" to "+cC)}if(by.roistatCallback!==a6){by.roistatCallback(cC,cJ)}if(!cK){cK={}}cr(cA,cy,cI,cx,cK.multiwidget_settings,cE);roistat.callTracking.phone=cy.phone;roistat.callTracking.sessionTime=cy.sessionTime;roistat.callTracking.replacementClasses=cy.replacementClasses;roistat.callTracking.phoneScriptsJson=cy.scripts;roistat.visit=cC;cf();cj();bW()};by.roistatUpdateSettings=function(cx){o("Set settings.");bu.isSettingsUpdating=false;cr(cx.js_settings,cx.calltracking,cx.emailtracking,cx.proxy_forms,cx.multiwidget.multiwidget_settings,cx.online_chat);cj();bW()};var T=function(){var cx;if(by.roistatIsInitVisit===true){cx=false}else{cx=h(bs)>0}bQ("Call: alreadyVisited (return "+(cx?"true":"false")+")");return cx};var c=function(cx){return encodeURIComponent?encodeURIComponent(cx):encodeURI(cx)};var aA=function(){return i?c(i):""};var y=function(){return aG()+"//"+p+"/api/site/"+N+"/"+aB()};var bH=function(){var cx={expires:1,path:"/"};if(b1.domain){cx.domain=b1.domain}cm(a1,"",cx)};var a8=function(){o("Call: setVisitIdCookie");var cy=function(){var cG=aB(),cD=aA(),cA=by.roistatIsInitVisit===true?l():0,cF=h(a1),cB=bw.get(au);cF=cF?cF:"";cB=cB?cB:"";a0=a0&&(!ak()||bG)?ae(ae(a0)):"";var cE=encodeURIComponent(bK);o("Calltracking: enabled="+bj.callTrackingEnabled+",manual="+bj.callTrackingManual);var cC=JSON.stringify(by.roistat.page.params);return y()+"/addVisit?v="+F+"&marker="+encodeURIComponent(a0)+"&visit="+cA+"&first_visit="+cB+"&phone_prefix="+bR+"&phone_prefix_bind="+ct+"&phone_scripts_bind="+B+"&referrer="+cD+"&page="+cE+"&ab="+c(cF)+"&"+f()+"="+W()+(cC==="{}"?"":"&page_params="+encodeURIComponent(cC))+((!bj.callTrackingEnabled||bj.callTrackingManual)?"&call_tracking_disabled=1":"")+(E.length>0?"&log="+encodeURIComponent(JSON.stringify(E)):"")};var cx=function(cA){setTimeout(function(){o("Call: setVisitIdCookie script creation after timeout");var cB=t.createElement("script");cB.onload=cB.onreadystatechange=function(){var cD=this.readyState?this.readyState:"unknown";o("Call: setVisitIdCookie script state changed to "+cD)};cB.src=cA;cB.type="text/javascript";cB.async=true;cB.id=G;var cC=t.getElementsByTagName("script")[0];cC.parentNode.insertBefore(cB,cC);o("Call: setVisitIdCookie appended "+((t.getElementById(G))?"true":"false"));o("Call: sendJSONPRequest to URL "+cA);bH()},bj.jsonpRequestTimeout)};if(a0){V(a0)}ac();var cz=cy();cx(cz);i?I():bo()};var bd=function(){o("Call: sendAbTests");var cy=function(){var cC=aB(),cB=h(bs);return aG()+"//"+p+"/site-api/"+ai+"/"+cC+"/visit/"+cB+"/addAbVariant"};var cz=h(a1);if(!cz){return}var cA=cy();cA=cA+"?ab="+c(cz);var cx=t.createElement("img");cx.src=cA;bH()};var aq={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return(aq.Android()||aq.BlackBerry()||aq.iOS()||aq.Opera()||aq.Windows())}};var az={isIE:function(cz,cB){var cC="IE",cy=t.createElement("B"),cx=t.documentElement,cA;if(cz){cC+=" "+cz;if(cB){cC=cB+" "+cC}}cy.innerHTML="<!--[if "+cC+']><b id="iecctest"></b><![endif]-->';cx.appendChild(cy);cA=!!t.getElementById("iecctest");cx.removeChild(cy);return cA}};var bA=function(){return new Date().getTime()};var L=function(){var cx="";by.onerror=function(cD,cC,cz,cB,cA){var cy=!cB?"":", column: "+cB;cy+=!cA?"":", error: "+cA;cx=cx+", Error: "+cD+", url: "+cC+", line: "+cz+cy};setTimeout(function(){var cF=false,cG="";var cB=ck();for(var cE=0;cE<cB.length;cE++){var cA=cB[cE];if(cA!==null&&!cA.innerHTML){cF=true;cG="Promo HTML: "+cA.innerHTML}}if(!(h(bs)>0)){cF=true;cG=cG+"; roistat_visit = "+h(bs)
}if(cF){var cz=t.getElementById(G);var cy=cz?1:0;var cC=by.navigator.userAgent;cG=encodeURIComponent(cG);var cD=t.createElement("img");cD.src=aG()+"//"+p+"/site-api/"+ai+"/"+aB()+"/debug?message="+cG+"&agent="+cC+"&"+f()+"="+W()+"&jserror="+cx+"&scriptResponse="+cy+"&version="+F+"&debug="+aM}},20000)};var a4=function(){var cz=t.getElementsByTagName("body");var cA=t.documentElement;var cy=0,cB=0;if(cz.length){var cx=cz[0];cy=by.innerWidth||cA.clientWidth||cx.clientWidth;cB=by.innerHeight||cA.clientHeight||cx.clientHeight}else{cy=by.innerWidth||cA.clientWidth;cB=by.innerHeight||cA.clientHeight}return{width:cy,height:cB}};var aE=function(){var cC=t.getElementsByClassName("roistat-promo-wrap");if(cC.length){o("PromoCode: old promo code length - exit");return}var cA=function(){var cJ=t.createElement("div");cJ.innerHTML=roistatPromoCode;var cH=t.getElementsByTagName("body");if(cH.length){cH[0].appendChild(cJ)}o("PromoCode: appended to body "+roistatPromoCode.length);var cI=t.getElementsByClassName("roistat-promo-wrap")[0];if(!cI){o("PromoCode: roistat-promo-wrap not found, skip");return}var cG=cI.style;var cE,cF,cD;setInterval(function(){cE=a4();cF=cI.offsetWidth;cD=cI.offsetHeight*2;switch(roistatPosition){case"top_left":cG.left=0;cG.top=0;break;case"top":cG.left=((cE.width-cF)/2)+"px";cG.top=0;break;case"top_right":cG.right=0;cG.top=0;break;case"left":cG.left=0;cG.top=((cE.height-cD)/2)+"px";break;case"right":cG.right=0;cG.top=((cE.height-cD)/2)+"px";break;case"bottom_left":cG.left=0;cG.bottom=0;break;case"bottom":cG.left=((cE.width-cF)/2)+"px";cG.bottom=0;break;case"bottom_right":cG.right=0;cG.bottom=0;break;default:cG.left=0;cG.top=0}},500)};var cx=bw.getObject("promo_code_options");if(cx){by.roistatPromoCode=cx.template;by.roistatPosition=cx.position;cA()}else{var cB=t.getElementsByTagName("head")[0]||t.documentElement;var cz=t.createElement("script");cz.src=aG()+"//"+p+"/site-api/"+ai+"/"+aB()+"/getPromoCode";cB.insertBefore(cz,cB.firstChild);o("PromoCode: loading started");var cy=false;cz.onload=cz.onreadystatechange=function(){if(!cy&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){cy=true;cz.onload=cz.onreadystatechange=null;if(cB&&cz.parentNode){cB.removeChild(cz)}}if(!cy){return}o("PromoCode: loaded");if(typeof roistatPromoCode==="undefined"||roistatPromoCode.length<1){o("PromoCode: is disabled");return}cx={template:roistatPromoCode,position:roistatPosition};bw.setObject("promo_code_options",cx);cA()}}};var Y=function(cy,cz){for(var cx=0;cx<cy.length;cx++){if(cy[cx]===cz){return true}}return false};var o=function(cy){var cz=bA()-aT;var cx="["+(cz/1000)+"s] "+cy;aM=aM+"; "+cx;if(typeof console!=="undefined"&&console.log&&aV){console.log(cx)}};var bQ=function(cx){o(cx);if(!bI){return}E.push(cx)};var aj=function aj(){var cB=by.onpopstate;var cC=by.history.pushState;var cx=by.history.replaceState;M(by,"popstate",function cA(cD){o("[Roistat]: popstate event catch");bq();if(K()&&typeof cB==="function"){cB(cD)}});M(by.history,"pushState",function cz(cE,cF,cD){o("[Roistat]: pushState event catch");bq();if(K()&&typeof cC==="function"){cC.apply(this,[cE,cF,cD])}});M(by.history,"replaceState",function cy(cE,cF,cD){o("[Roistat]: replaceState event catch");bq();if(K()&&typeof cx==="function"){cx.apply(this,[cE,cF,cD])}})};(function bb(){aj();if(by.onRoistatModuleLoaded!==a6&&typeof by.onRoistatModuleLoaded==="function"){by.onRoistatModuleLoaded()}})();cq();(function aD(){var cN="roistat-leadhunter-form-template",cQ="roistat-leadhunter-pulsator-template",cM="roistat-leadhunter-pulsator-settings",cC="roistat-online-chat-pulsator-template",cF="roistat-online-chat-iframe-template",cH="roistat-multiwidget-pulsator-template",cD="roistat-multiwidget-pulsator-settings";var cS="empty",cB=false,cy=true,cK=false;var cT=function(cW,cV,cU){if(cW.addEventListener){cW.addEventListener(cV,cU,false)}else{if(cW.attachEvent){cW.attachEvent("on"+cV,cU)}else{o("Handler could not be attached")}}};var cP={leadHunter:function(){var ez="roistat-lh-form",df="roistat-lh-form",eB="roistat-lh-head-text",ds="roistat-lh-head",dd="roistat-lh-thank-you",dS="roistat-lh-thank-you",cZ="roistat-lh-close",c0="roistat-lh-submit",dB="roistat-lh-hidden",ef="roistat-lh-wrap",dh="roistat-lh-popup-wrapper",dR="roistat-lh-popup",ey="roistat-lh-popup-iframe",eA="roistat-lh-agreement",dN="roistat-lh-agreement roistat-lh-mobile",eN="roistat-lh-agreement-input",ep="roistat-lh-agreement-link",cU="roistat-lh-agreement-doc",ev="roistat-lh-alert-row",d1="roistat-lh-agreement",dM="roistat-lh-popup-iframe",d3="roistat_leadHunterUrl",er="roistat_leadHunterAppearanceUrl",dE="roistat_leadHunterTargetPagesList",dc="roistat_leadHunterCaught",d9="roistat_leadHunterMinTime",dv="roistat_leadHunterAutoShowTime",d7="roistat_leadHunterPulsatorEnabled",dw="roistat-lh-pulsator-icon",dT="roistat-lh-pulsator-fill",dK="roistat-lh-load-done",dg="roistat-lh-close-modal",eg="roistat-lh-setting-size",ew="roistat-lh-before-submit",d4="roistat-lh-before-submit-done",eD="roistat-lh-after-submit",ej="roistat-lh-event-data",ek="roistat-lh-translate-form",es="ru",cX="en",eL={topLeft:{bottom:"80%",right:"auto",},topRight:{bottom:"80%",right:"3%",},bottomRight:{bottom:"10%",right:"3%",},bottomLeft:{bottom:"10%",right:"auto",},};
var db=0.3,dk=0.001,de=false,dn=0,dj=0,dp=0,eE=0,dm=0,dC=false,c3=false,dX="",c6=cK&&bw.get(aH),dl,eu,dV,d2,ee,dr,eM,eI,eq,eK,c7,eF,ec,dW,dL,da,cY,dA,dq,dx,en;var eH={pulsator:{previousClass:""},leave:{isShowEnabled:false,},timeoutId:0};var eC=function(eS){var eR=encodeURIComponent?encodeURIComponent:encodeURI;return eR(eS)};var ei=function(){if(!by.roistat.leadHunter.isEnabled){return false}if(by.roistatLeadHunterInited){return false}by.roistatLeadHunterInited=true;if(bw.get(a7)<1){o("LeadHunter: disabled");return false}return true};var dz=function(){cY=bw.get(d3);if(!cY){o("LeadHunter: not active cause of empty url");return false}dA=bw.get(er);eE=bw.get(d9);dm=by.roistat.leadHunter.form.autoShowTime===null?bw.get(dv):by.roistat.leadHunter.form.autoShowTime;cB=bw.get(d7)==1;cW();return true};var dG=function(){return bw.get(dc)>0};var cW=function(){if(!(h(J)>0)){o("LeadHunter: not active, expired for this visit");dC=true}};var eQ=function(){var eX=function(e4,e2){var e1;if(cd(e2,"*")){var e3=new RegExp(e2.split("*").join(".*"));e1=e3.test(e4)}else{e1=e4===e2}o("LeadHunter: compare current: "+e4+", setting: "+e2+" with result = "+(e1?1:0));return e1};var eS=bw.get(dE),eR=by.location.href,eU=false,eT=false,eZ="",eV=0,eY;eY=eS?eS.split(","):[];if(!eR||eY.length===0){eU=true}else{eZ=am(eR);var e0;for(var eW=0;eW<eY.length;eW++){e0=eY[eW].split("www.").join("").split("http://").join("").split("https://").join("").replace(/\/+$/,"");if(/^!/.test(e0)){if(eX(eZ,e0.split(/^!/).join(""))){eT=true;break}}else{eV++;if(eX(eZ,e0)){eU=true;break}}}}if(eT){o('LeadHunter: current page "'+eZ+'" is disabled by list');return false}if(!eU&&eV>0){o('LeadHunter: current page "'+eZ+'" is not listed');return false}o('LeadHunter: current page "'+eR+'", cleaned: "'+eZ+'" is not disabled in '+eY.length+" list of pages");return true};var c4=function(){dx=en.src;var eR={version:F,additionalNotifyEmail:by.roistat.leadHunter.additionalNotifyEmail,projectKey:aB(),language:dX,visitId:bN(),moduleTargetOrigin:by.location.origin,referrer:by.location.href,windowWidth:by.innerWidth||0,iframeWrapperWidth:d2.offsetWidth||0,sendRequestUrl:bw.get(d3),message:dK,};en.contentWindow.postMessage(eR,dx);d8()};var dJ=function(){c3=true;c2("click");c4();ed()};var c1=function(){var eR=by.location.hash;if(!eR){return}if(cd(eR,"roistat-lead-hunter")){dJ()}};var dH=function c9(){o("LeadHunter: binding timeout");if(dC){o("LeadHunter: leadhunter is expired, no timeout show allowed");return}if(de){o("LeadHunter: leadhunter was shown, no timeout show allowed");return}if(dm>0){var eR=(dn-bA())+dm*1000;o("LeadHunter: binding timeout with delay "+eR+" ms");clearTimeout(eH.timeoutId);eH.timeoutId=setTimeout(function(){o("LeadHunter: form auto activate with autoTime = "+dm);if(!de){c3=true;c2("auto");c4();ed()}},eR)}else{o("LeadHunter: auto show time is not positive, feature disabled")}};var et=function(){eq.onclick=ee.onclick=dZ;eK.onclick=dD;if(eF){cT(eF,"click",dO)}if(ec){cT(ec,"change",eO)}var eS=t.getElementsByClassName("roistat-lh-input");for(var eV=0;eV<eS.length;eV++){cT(eS[eV],"keyup",function(eX){eX=eX||event;var eW=(eX.keyCode?eX.keyCode:eX.which);if(eW==13){dD()}})}var eT=by.onresize;by.onresize=function(eW){if(eT){eT(eW)}ex(eW)};if(!dC){var eR=t.onmouseout;t.onmouseout=function(eW){if(eR){eR(eW)}eb(eW)}}if(cB&&!c6){dl.onmouseover=function(){Q(dl,"roistat-lh-pulsator-hover")};dl.onmouseout=function(){br(dl,"roistat-lh-pulsator-hover")};dl.onclick=function(){dJ()}}var eU=by.onhashchange;by.onhashchange=function(){if(eU){eU.apply(this,arguments)}c1()}};var eJ=function(){if(cB&&!c6){dl.onmouseover=function(){Q(dl,"roistat-lh-pulsator-hover")};dl.onmouseout=function(){br(dl,"roistat-lh-pulsator-hover")};dl.onclick=function(){dJ()}}ee.onclick=dZ;en=t.getElementById(dM);cT(en,"load",function(){c4();eG()});var eS=by.onresize;by.onresize=function(eU){if(eS){eS(eU)}ex(eU)};if(!dC){var eR=t.onmouseout;t.onmouseout=function(eU){if(eR){eR(eU)}eb(eU)}}var eT=by.onhashchange;by.onhashchange=function(){if(eT){eT.apply(this,arguments)}c1()}};var dY=function(eS){var eR=t.getElementsByClassName(eS);if(eR.length>0){return eR[0]}else{return null}};var dU=function(){var eU=dY("roistat-lh-title");if(eU&&roistat.leadHunter.form.title){eU.innerHTML=roistat.leadHunter.form.title}var eS=dY("roistat-lh-sub-title");if(eS&&roistat.leadHunter.form.subTitle){eS.innerHTML=roistat.leadHunter.form.subTitle}var eT=dY("roistat-lh-thank-you");if(eT&&roistat.leadHunter.form.thankYouText){eT.innerHTML=roistat.leadHunter.form.thankYouText}var eW=dY("roistat-lh-submit");if(eW&&roistat.leadHunter.form.buttonText){eW.value=roistat.leadHunter.form.buttonText}var eV=dY("roistat-lh-text-label-name");if(eV&&roistat.leadHunter.form.nameLabel){eV.innerHTML=roistat.leadHunter.form.nameLabel}var eR=dY("roistat-lh-text-label-contact");if(eR&&roistat.leadHunter.form.contactLabel){eR.innerHTML=roistat.leadHunter.form.contactLabel}};var di=function(eS,eW,eV){var eR;if(!eS){o("LeadHunter: deactivating, empty form")
}else{o("LeadHunter: rendering hidden form")}ee=t.createElement("div");d2=t.createElement("div");d2.innerHTML=eS;ee.className=dB;d2.className=dB;if(eW&&cB&&eV&&!c6){var eT=typeof eV.position==="string"&&eV.position!==""?eV.position:"bottomRight";eR=t.createElement("div");eR.innerHTML=eW;dl=eR.childNodes.item(0);eu=dl.childNodes.item(1);dV=dl.childNodes.item(2).childNodes.item(0);eu.setAttribute("style","background: "+eV.button.background+";");dV.setAttribute("style","fill: "+eV.button.color+";");dl.setAttribute("style","bottom: "+eL[eT].bottom+";right:"+eL[eT].right+";");eH.pulsator.previousClass=dl.className;dl.className=dB;t.body.appendChild(dl)}t.body.appendChild(ee);t.body.appendChild(d2);dr=t.getElementById(ds);eM=t.getElementById(df);eI=t.getElementById(dS);eq=t.getElementById(cZ);eK=t.getElementById(c0);c7=t.getElementById(eA);ec=t.getElementById(eN);eF=t.getElementById(ep);dW=t.getElementById(cU);dL=t.getElementById(ev);da=t.getElementById(d1);var eU=dY(dh);dq=eU&&eU.getAttribute("data-is-iframe");if(dq){eJ()}else{dU();et();c1();eG()}};var c8=function(){var eR=bw.get(cN),eT=bw.get(cQ),eS=bw.getObject(cM);di(bB.decode(eR),bB.decode(eT),eS)};var dF=function(){var eS=d2.clientWidth,eR=d2.clientHeight;d2.setAttribute("style",d2.getAttribute("style")+" width: "+eS+"px; height: "+eR+"px;");if(eM!==null){eM.className=dB}if(dr!==null){dr.className=dB}if(c7!==null){c7.className=dB}if(eI!==null){eI.setAttribute("style","width: "+eS+"px; height: "+eR+"px; display: table-cell;");eI.className=dd}setTimeout(function(){o("LeadHunter: close form after timeout");dZ()},7000)};var ed=function(){var eS=Math.round((eo()-d2.clientHeight)/2);var eR=Math.round((eP()-d2.clientWidth)/2);d2.setAttribute("style","left: "+eR+"px; top: "+Math.max(0,eS)+"px;")};var c2=function(eS){if(by.roistat.leadHunter.onBeforeAppear){o("LeadHunter: process user defined onBeforeAppear");by.roistat.leadHunter.onBeforeAppear(eS);if(dq){d8()}}d2.setAttribute("style","left:20px;top:-20px;opacity:0");ee.className=ef;d2.className=dR;if(eM!==null){eM.className=ez}if(dr!==null){dr.className=eB}if(c7!==null){c7.className=dN}if(eI!==null){eI.setAttribute("style","");eI.className=dB}ee.setAttribute("style","opacity:0;");de=true;setTimeout(function(){ee.setAttribute("style","opacity:.5;")},10);var eT=h(bs),eR=dA+"?visit_id="+eT;D(eR);if(by.roistat.leadHunter.onAfterAppear){o("LeadHunter: process user defined onAfterAppear");by.roistat.leadHunter.onAfterAppear(eT,ee,d2,eM);if(dq){d8()}}};var eh=function d0(){dn=bA();var eR=false;var eS=by.onload;by.onload=function(){if(eS){eS()}if(!eR){eR=true;o("LeadHunter: form initialized in window.onload");c8()}};setTimeout(function(){if(!eR){eR=true;o("LeadHunter: form initialized after timeout");c8()}},5000)};var eG=function dI(){o("LeadHunter: tuning appearance for page");if(!eQ()){o("LeadHunter: disabled on page");eH.leave.isShowEnabled=false;clearTimeout(eH.timeoutId);if(dl){cy=false;dl.className=dB}}else{o("LeadHunter: enabled on page");if(!dG()){eH.leave.isShowEnabled=true;dH()}if(dl){cy=false;dl.className=eH.pulsator.previousClass}}};var dt=function ea(){o("LeadHunter: processing single page application state change");dn=bA();eG()};var em=function dP(){aa(dt);M(by,"message",function eR(eU){var eT=typeof eU.data==="string"?eU.data:eU.data.message;if(eT===dg){dZ()}if(eT===eg){en.setAttribute("style","width: "+eU.data.width+"px !important; height: "+eU.data.height+"px !important;");ex()}if(eT===ew){var eV=eU.data.caughtLeadData;if(by.roistat.leadHunter.onBeforeSubmit){o("LeadHunter: process user defined onBeforeSubmit");var eS=by.roistat.leadHunter.onBeforeSubmit(eV);if(eS){eV=eS}}c5();en.contentWindow.postMessage({caughtLead:eV,message:d4},dx)}if(eT===eD){if(by.roistat.leadHunter.onAfterSubmit){o("LeadHunter: process user defined onAfterSubmit");by.roistat.leadHunter.onAfterSubmit({name:eU.data.name,phone:eU.data.phone})}}})};function d8(){var eR={apiData:by.roistat.leadHunter.form,message:ej};en.contentWindow.postMessage(eR,dx)}function d6(){if(!ei()){return}if(!dz()){return}o("LeadHunter: activated");eh();em()}function eo(){return(by.innerHeight?by.innerHeight:t.documentElement.clientHeight==0?t.body.clientHeight:t.documentElement.clientHeight)}function eP(){return(by.innerWidth?by.innerWidth:t.documentElement.clientWidth==0?t.body.clientWidth:t.documentElement.clientWidth)}function eb(eT){eT=eT||event;dp=eT.clientY;var eR=dp/eo(),eV=dj>0&&dj>eR,eS=eR<dk,eU=(bA()-dn)>eE*1000;if(eV&&eS&&!de&&eU&&eH.leave.isShowEnabled){o("LeadHunter: show modal with because move up ("+dj+" -> "+eR+") and in modal zone and show on leave enabled");c2("exit");c4();dQ(eT)}if(eR<db){dj=eR}}function ex(eR){if(c3){ed()}else{eR=eR||event;dQ(eR)}}function dQ(eU){var eR=eU.clientX-Math.round(d2.clientWidth/2)||d2.offsetLeft;eR=Math.max(20,Math.min(eR,eP()-d2.offsetWidth-20));var eV=eR+d2.offsetWidth>eP()-40;if(eV){var eS=(eR+d2.clientWidth-20)-(eP()-40);eR=eR-eS}var eT=eP()-40>d2.offsetWidth?"":"width:"+(d2.offsetWidth-40)+"px;";d2.setAttribute("style","left:"+eR+"px; top: 0px; "+eT)
}function c5(){by.roistatSetCookie(dc,1,b1)}function dZ(){c5();ee.setAttribute("style","opacity:0");d2.style.top="-"+d2.offsetHeight*2+"px";setTimeout(function(){d2.className=ee.className=dB},500)}function dD(){var e5=t.getElementById("roistat-lh-phone-input"),eT=t.getElementById("roistat-lh-name-input"),eV,e3;eV=e5===null?"":e5.value;e3=eT===null?"":eT.value;var e0={name:e3,phone:eV,isNeedCallback:null,callbackPhone:null,fields:{}};if(by.roistat.leadHunter.onBeforeSubmit){o("LeadHunter: process user defined onBeforeSubmit");var eW=by.roistat.leadHunter.onBeforeSubmit(e0);if(eW){e0=eW}}var e2=e0.phone.length<1;var e4=e0.phone.indexOf("_")===-1;var eY=!e2&&e4;var e1=e0.name.length<1;var eS=!e1||!by.roistat.leadHunter.form.isNameRequired;if(!eY){e5.setAttribute("style","border: 2px solid #E0571A;");return}if(!eS){eT.setAttribute("style","border: 2px solid #E0571A;");return}var eR=cY+"?v="+F+"&lead-hunt-input="+encodeURIComponent(e0.phone)+"&lead-name="+encodeURIComponent(e0.name)+"&visit="+bN();if(e0.isNeedCallback!==null&&e0.isNeedCallback!==a6){eR=eR+"&is_need_callback="+(e0.isNeedCallback>0?1:0)}if(e0.callbackPhone){eR=eR+"&callback_phone="+e0.callbackPhone}if(by.roistat.leadHunter.additionalNotifyEmail!==null){eR=eR+"&additional_email="+encodeURIComponent(by.roistat.leadHunter.additionalNotifyEmail)}var eU=0;if(e0.fields&&typeof e0.fields==="object"){for(var eX in e0.fields){if(e0.fields.hasOwnProperty(eX)){++eU}}}if(eU>0){eR=eR+"&fields="+eC(JSON.stringify(e0.fields))}eR=eR+"&t="+bA();var eZ=t.createElement("img");eZ.src=eR;e5.setAttribute("style","");c5();if(eI===null){dZ();dy()}else{dF()}if(by.roistat.leadHunter.onAfterSubmit){o("LeadHunter: process user defined onAfterSubmit");by.roistat.leadHunter.onAfterSubmit({name:e3,phone:eV})}}function dO(eR){if(eR.preventDefault){eR.preventDefault()}else{eR.returnValue=false}dW.style.display==="block"?dW.style.display="none":dW.setAttribute("style","display: block; padding: 0 30px; width:"+d2.clientWidth+"px;");ex()}function eO(){eK.disabled===true?eK.disabled=false:eK.disabled=true;dL.style.display==="block"?dL.style.display="none":dL.style.display="block"}function dy(){t.onmousemove=null;ee.onresize=null}var du=function(eX,e0){if(!eX||!e0){o("LeadHunter: skip phone mask render due to empty input or mask");return}o("LeadHunter: render phone mask "+e0+" for input: "+eX.value);if(by.roistatRenderPhoneMaskMutex){return}by.roistatRenderPhoneMaskMutex=true;var eU="_",eT="x",eW="х",eV=e0.toLowerCase().split(eT).join(eU).split(eW).join(eU);var eS=function(e1){if(eX.setSelectionRange){eX.setSelectionRange(e1,e1)}else{if(eX.createTextRange){var e2=eX.createTextRange();e2.collapse(true);e2.moveEnd("character",e1);e2.moveStart("character",e1);e2.select()}}};var eY=function(e1){if(!e1){return 0}var e2=e1.indexOf(eU);if(e2<0){return e1.length}return e2};var eZ=function(e1){eS(eY(e1))};var eR=function(fa){var fb=eV.split("");if(!fa){return eV}var e1=fa.split("");var fc=[],e9,e6,e8,e5,e3,e2,e7;for(var e4=0;e4<fb.length;e4++){e6=fb[e4];if(e4>=e1.length){fc.push(e6);continue}e3=((e4+1)<fb.length)?fb[e4+1]:null;e2=((e4+1)<e1.length)?e1[e4+1]:null;e7=((e4+2)<e1.length)?e1[e4+2]:null;e9=e1[e4];e8=parseInt(e9)>=0;e5=(e6===eU)&&e8;if(!e5){fc.push(e6);continue}if(e2===eU&&e3!==eU&&e7!==e3){fc.push(e6);continue}fc.push(e9)}return fc.join("")};setTimeout(function(){var e1=eR(eX.value);if(eX.value!==e1){eX.value=e1}eZ(e1);by.roistatRenderPhoneMaskMutex=false},1)};var el=function(eR,eT,eS){bw.set(cN,bB.encode(eR));bw.set(cQ,bB.encode(eT));bw.setObject(cM,eS)};var d5=function(eR){dX=eR;if(en===a6){return}cV()};var cV=function(){var eR={language:dX,message:ek};en.contentWindow.postMessage(eR,dx)};bL(d6);by.roistatLeadHunterShow=dJ;by.roistatRenderPhoneMask=du;by.roistat.leadHunter.localization.translateToRussian=function(){d5(es)};by.roistat.leadHunter.localization.translateToEnglish=function(){d5(cX)}},multiwidget:function(){var dq="roistat-multiwidget-hidden",dw="roistat-multiwidget-pulsator-phone",du="roistat-multiwidget-pulsator-popup-item-lead-hunter",c9="roistat-multiwidget-pulsator-fill",dy="roistat-multiwidget-pulsator-fill-svg",di="roistat-multiwidget-pulsator-img-icon",c8="roistat-multiwidget-pulsator-popup-item-chat",cX="roistat-multiwidget-pulsator-popup-item-facebook",c0="roistat-multiwidget-pulsator-popup-item-vk",dh="roistat-multiwidget-pulsator-popup-item-telegram",dl="roistat-multiwidget-pulsator-items-popup-holder",c2="roistat-multiwidget-pulsator-popup-tail";var c7,dk,dd,dv,cU,cZ,dx,df,c4,cW,c5,cY;var dt={topLeft:{bottom:"unset",right:"unset",top:"20px",left:"35px",},topRight:{bottom:"unset",right:"35px",top:"20px",left:"unset",},bottomRight:{bottom:"20px",right:"35px",top:"unset",left:"unset",},bottomLeft:{bottom:"20px",right:"unset",top:"unset",left:"35px",},};var c1={topLeft:{bottom:"unset",right:"unset",top:"110px",left:"0",},topRight:{bottom:"unset",right:"0",top:"110px",left:"unset",},bottomRight:{bottom:"110px",right:"0",top:"unset",left:"unset",},bottomLeft:{bottom:"110px",right:"unset",top:"unset",left:"0",},};
var dc={topLeft:{"border-top-color":"white","border-right-color":"transparent","border-bottom-color":"transparent","border-left-color":"white",bottom:"unset",right:"unset",top:"-14px",left:"40px",},topRight:{"border-top-color":"white","border-right-color":"transparent","border-bottom-color":"transparent","border-left-color":"white",bottom:"unset",right:"34px",top:"-14px",left:"unset",},bottomRight:{"border-top-color":"transparent","border-right-color":"white","border-bottom-color":"white","border-left-color":"transparent",bottom:"-14px",right:"40px",top:"unset",left:"unset",},bottomLeft:{"border-top-color":"transparent","border-right-color":"white","border-bottom-color":"white","border-left-color":"transparent",bottom:"-14px",right:"unset",top:"unset",left:"34px",},};function dp(dA){o("Multiwidget: "+dA)}function dg(){dk=c7.getElementsByClassName(dw)[0];dd=c7.getElementsByClassName(dl)[0];dv=c7.getElementsByClassName(c2)[0];df=dd.getElementsByClassName(du)[0];c4=dd.getElementsByClassName(c8)[0];cW=dd.getElementsByClassName(c0)[0];c5=dd.getElementsByClassName(cX)[0];cY=dd.getElementsByClassName(dh)[0];cU=dk.getElementsByClassName(c9)[0];cZ=dk.getElementsByClassName(dy);dx=dk.getElementsByClassName(di)[0]}function da(){dd.classList.toggle(dq)}function dz(){dp("add pulsator events");cT(dk,"click",function(){da()});cT(df,"click",function(){dp("opening leadhunter via multiwidget");by.roistatLeadHunterShow();da()});cT(c4,"click",function(){dp("opening online chat via multiwidget");by.roistatOnlineChatShow();da()});cT(cW,"click",function(){by.open(by.roistat.multiwidget.vk.link,"_blank")});cT(c5,"click",function(){by.open(by.roistat.multiwidget.fb.link,"_blank")});cT(cY,"click",function(){by.open(by.roistat.multiwidget.telegram.link,"_blank")})}function de(){dp("hiding disabled multiwidget options");var dA=Number(bw.get(a7)),dB=Number(bw.get(bV)),dC=Number(bw.get(bk)),dD=Number(bw.get(A)),dE=Number(bw.get(bM));if(!dA||!cB||!cy){dp("hiding leadhunter option");df.classList.add(dq)}if(!dB){dp("hiding online chat option");c4.classList.add(dq)}if(!dC){dp("hiding vk-messenger option");cW.classList.add(dq)}if(!dD){dp("hiding fb-messenger option");c5.classList.add(dq)}if(!dE){dp("hiding telegram-messenger option");cY.classList.add(dq)}}function cV(){var dB=bw.getObject(cD);dp("start filling pulsator");if(dB){cU.setAttribute("style","background: "+dB.button_color+";");dx.setAttribute("style","fill: "+dB.icon_color+";");for(var dA=0;dA<cZ.length;dA++){cZ[dA].setAttribute("style","fill: "+dB.button_color+";")}}}function dm(){var dA=bw.getObject(cD);return typeof dA.position==="string"&&dA.position!==""?dA.position:"bottomRight"}function dj(){var dA=dm();c7.setAttribute("style","top: "+dt[dA].top+";right:"+dt[dA].right+";bottom:"+dt[dA].bottom+";left:"+dt[dA].left+";")}function db(){var dA=dm();var dB=dA==="topLeft"||dA==="bottomLeft"?"margin-right":"margin-left";dk.setAttribute("style",dB+": auto")}function dn(){var dA=dm();dd.setAttribute("style","top: "+c1[dA].top+";right:"+c1[dA].right+";bottom:"+c1[dA].bottom+";left:"+c1[dA].left+";")}function c3(){var dA=dm();dv.setAttribute("style","top: "+dc[dA].top+";right:"+dc[dA].right+";bottom:"+dc[dA].bottom+";left:"+dc[dA].left+";border-top-color:"+dc[dA]["border-top-color"]+";border-right-color:"+dc[dA]["border-right-color"]+";border-bottom-color:"+dc[dA]["border-bottom-color"]+";border-left-color:"+dc[dA]["border-left-color"]+";")}function dr(){dj();db();dn();c3()}function c6(){var dB=bB.decode(bw.get(cH));if(dB){dp("appending multiwidget pulsator");var dA=t.createElement("div");dA.innerHTML=dB;c7=dA.childNodes.item(0);t.body.appendChild(c7);dg();de();cV();dr();dz()}}function ds(){dp("activated");c6()}bL(ds)},onlineChat:function(){var du="iframe-module-created",dv="iframe-online-chat-opened",dl="iframe-online-chat-invite-message",dx="roistat-online-chat-init",cU="roistat-online-chat-reload",dN="roistat_chat_id",dk="roistat_chat_session",cV="roistat_chat_custom_position",dd,dh,c1,dq,da;var cW="roistat-online-chat-popup-iframe",dD="roistat-online-chat-hidden",dO="roistat-online-chat-popup-wrapper",dp="roistat-online-chat-popup-mouse-track",dA="roistat-online-chat-popup-mouse-track-active",dj="roistat-multiwidget-pulsator-holder",c7=".roistat-multiwidget-pulsator-items-popup",dz=".roistat-online-chat-popup-wrapper";var dB=false,c2=bw.get(aH),df=false,dg=0,dE=0;var c6;var dH={topLeft:{top:"130px",right:"unset",bottom:"unset",left:"30px",},topRight:{top:"130px",right:"30px",bottom:"unset",left:"unset",},bottomRight:{top:"unset",right:"30px",bottom:"130px",left:"unset",},bottomLeft:{top:"unset",right:"unset",bottom:"130px",left:"30px",},};var c8={topLeft:{top:"unset",bottom:"0",height:"20px",},topRight:{top:"unset",bottom:"0",height:"20px",},bottomLeft:{top:"0",bottom:"unset",height:"50px",},bottomRight:{top:"0",bottom:"unset",height:"50px",},};var c4=function(dQ){o("onlineChat: "+dQ)};var dL=function(){function dQ(){return Math.random().toString(36).substr(2,8)}return dQ()+dQ()+dQ()+dQ()
};var dy=function(){var dQ=bw.get(dk);if(!dQ){dQ=dL();bw.set(dk,dQ)}return dQ};var dG=function(){var dQ={message:du,detail:{version:F,projectKey:aB(),visitId:bN(),chatId:h(dN),moduleTargetOrigin:by.location.origin,referrer:by.location.href,params:da,sessionUniqueKey:dy(),},};dq.contentWindow.postMessage(dQ,dq.src)};var dn=function(){var dQ={message:dv,detail:{isOpened:ds()},};dq.contentWindow.postMessage(dQ,dq.src)};var db=function(){var dQ={message:cU,detail:{chatId:h(dN),},};dq.contentWindow.postMessage(dQ,dq.src)};var dF=function(){M(by,"message",function dQ(dU){var dT=typeof dU.data==="string"?dU.data:dU.data.message;var dS=typeof dU.data!=="string"?dU.data.detail:{};c4("event: "+dT+" "+JSON.stringify(dS));switch(dT){case du:dG();break;case dx:c4("saving chat id = "+dS.chatId);cm(dN,dS.chatId);break;case dl:c4("rendering invite message");di(dS.message);break}});M(by,"focus",function dR(){c4("send message for reloading chat...");db()})};var di=function(dX){var dT="<div class='roistat-online-chat-message'><img src='"+dX.operator.avatar+"' class='roistat-online-chat-message-avatar'></img><div class='roistat-online-chat-message-content'><div class='roistat-online-chat-message-name'><span class='roistat-online-chat-message-name-text'>"+dX.operator.name+"</span><div class='roistat-online-chat-message-name-online-status'></div></div><div class='roistat-online-chat-message-text'>"+dX.text+"</div></div><div class='roistat-online-chat-message-close'>х</div></div>";var dW=t.createElement("div");dW.innerHTML=dT;var dQ=t.getElementsByClassName(dj)[0];var dY=cZ()?"beforeend":"afterbegin";dQ.insertAdjacentHTML(dY,dT);var dV=dQ.getElementsByClassName("roistat-online-chat-message-close");var dR=dQ.getElementsByClassName("roistat-online-chat-message");var dU=dV[cZ()?dV.length-1:0];var dS=dR[cZ()?dV.length-1:0];setTimeout(function(){dS.remove()},15000);cT(dS,"click",function(dZ){dZ.stopPropagation();if(!ds()){c0()}dt()});cT(dU,"click",function(dZ){dZ.stopPropagation();dS.remove()})};var dt=function(){var dR=t.getElementsByClassName(dj)[0];var dQ=dR.getElementsByClassName("roistat-online-chat-message");while(dQ.length>0){dQ[0].remove()}};var dc=function(){dq=t.getElementById(cW);cT(dq,"load",function(){c5()});cT(t,"click",function(dQ){if(ds()&&(dQ.target.closest(c7)===null&&dQ.target.closest(dz)===null)){c0()}})};var dK=function(dS){var dR=c1.getBoundingClientRect().x;var dQ=c1.getBoundingClientRect().y;df=true;c9();dg=dS.pageX-dR;if(cZ()){dE=dS.pageY+dQ}else{dE=dS.pageY-dQ}};var c3=function(){df=false;dw();de()};var c9=function(){dh.classList.add(dA)};var dw=function(){dh.classList.remove(dA)};var dm=function(dY){if(df){var dQ=c1.getBoundingClientRect();var dX=dQ.width;var dW=400;var dR=50;var d1=0;var dT=by.innerHeight-dW;var dZ=dY.pageX-dg;var dV=dR;var dS=by.innerWidth-dR-dX;if(cZ()){d1=by.innerHeight-(dY.pageY+dQ.y)-20}else{d1=dY.pageY-dE}var d0=dI();var dU=d0==="bottomLeft"||d0==="bottomRight"?"top":"bottom";if(dZ>=dV&&dZ<=dS){c1.style.left=dZ+"px";if(!dC()){c1.style.right="unset"}}if(d1>=50&&d1<=dT){c1.style[dU]=d1+"px"}}};var de=function(){var dQ={position:dI(),top:c1.style.top,left:c1.style.left,bottom:c1.style.bottom,right:c1.style.right,};bw.setObject(cV,dQ)};var dI=function(){var dQ=bw.getObject(cD);return typeof dQ.position==="string"&&dQ.position!==""?dQ.position:"bottomRight"};var cZ=function(){var dQ=dI();return dQ==="topLeft"||dQ==="topRight"};var dC=function(){var dQ=dI();return dQ==="topLeft"||dQ==="bottomLeft"};var cY=function(){var dQ=dI();c1=dd.getElementsByClassName(dO)[0];c1.setAttribute("style","top: "+dH[dQ].top+";right:"+dH[dQ].right+";bottom:"+dH[dQ].bottom+";left:"+dH[dQ].left+";")};var cX=function(){var dQ=dI();dh.setAttribute("style","top: "+c8[dQ].top+";bottom:"+c8[dQ].bottom+";height:"+c8[dQ].height+";")};var dr=function(){c4("iframe appending to page");var dQ=bB.decode(bw.get(cF));dd=t.createElement("div");dd.className=dD;dd.innerHTML=dQ;t.body.appendChild(dd);dh=t.getElementsByClassName(dp)[0];cY();dc()};var dM=function(){var dR=bB.decode(bw.get(cC));if(dR&&!c2){c4("pulsator appending to page");var dQ=t.createElement("div");dQ.innerHTML=dR;c6=dQ.childNodes.item(0);t.body.appendChild(c6);dP()}};var dP=function(){cT(c6,"click",function(){c0()})};var ds=function(){return !dd.classList.contains(dD)};var c0=function(){setTimeout(function(){df=false},3000);dd.classList.toggle(dD);if(ds()){dt()}dn()};var c5=function(){dB=true;by.roistatOnlineChatShow=c0;c4("chat window initialized")};function dJ(){dM();dr();dF()}bL(dJ)},};function cL(cU){o("Widgets: "+cU)}function cx(cU){return cU!==cS}function cA(cU,cW,cV){bw.set(cN,bB.encode(cU));bw.set(cQ,bB.encode(cW));bw.setObject(cM,cV)}function cG(cV,cU){bw.set(cH,bB.encode(cV));bw.setObject(cD,cU)}function cE(cV,cU){bw.set(cC,bB.encode(cV));bw.set(cF,bB.encode(cU))}function cJ(cU,cW,cV){cA(cU,cW,cV);bw.set(cH,bB.encode(cS));bw.set(cF,bB.encode(cS));cK=false;cP.leadHunter()}function cz(c5,c1,cZ){cL("start initing widgets");var cW=c5.form_template,c6=c5.pulsator_template,cY=c5.pulsator_settings,c2=cZ.pulsator_template,cX=cZ.iframe_template,c3=c1.pulsator_template,cU=c1.pulsator_settings,c0=Number(bw.get(a7)),c4=Number(bw.get(aH)),cV=Number(bw.get(bV));
cA(cW,c6,cY);cG(c3,cU);cE(c2,cX);cK=true;if(c0){cL("leadhunter enabled. Start processing");cP.leadHunter()}if(cV){cL("online chat enabled. Start processing");cP.onlineChat()}if(c4){cL("multiwidget enabled. Start processing");cP.multiwidget()}}function cR(){var cV=bw.get(cN),c4=bw.get(cQ),cX=bw.getObject(cM),c0=bw.get(cC),cW=bw.get(cF),c2=bw.get(cH),cU=bw.getObject(cD);by.roistatLeadhunterForm=cJ;by.roistatMultiwidget=cz;if(!cV||!c4||!cX||!c2||!cU||!c0){cL("requesting data from server");at(aG()+"//"+p+"/api/site/"+N+"/"+aB()+"/multiwidget?domain="+encodeURIComponent(t.domain))}else{var c5=bB.decode(c2);var c1=bB.decode(cW);if(!cx(c5)||!cx(c1)){cL("initing LeadHunter form");by.roistatLeadhunterForm(bB.decode(cV),bB.decode(c4),cX)}else{cL("initing multiwidget form");var cY={pulsator_template:c5,pulsator_settings:cU,},cZ={form_template:bB.decode(cV),pulsator_template:bB.decode(c4),pulsator_settings:cX,},c3={iframe_template:c1,pulsator_template:bB.decode(c0),};by.roistatMultiwidget(cZ,cY,c3)}}}function cI(){var cU=false;var cV=by.onload;by.onload=function(){if(cV){cV()}if(!cU){cU=true;cL("form initialized in window.onload");cR()}};setTimeout(function(){if(!cU){cU=true;cL("form initialized after timeout");cR()}},5000)}function cO(){cL("activated");cI()}bL(cO);by.roistatSaveLeadHunterTemplates=cA;by.roistatSaveMultiwidgetTemplate=cG;by.roistatSaveOnlineChatTemplate=cE})();(function n(){var cK=function(){return h(cs)};var cI=function(){return bw.get(aP)};var cB=function(){return bw.get(aZ)};var cO=function(cQ){return cQ!=null&&cQ!==a6&&cQ!==""};var cN=function(){var cQ=[];var cR=t.getElementsByClassName(U);if(cR&&cR.length){cQ=cR}return cQ};var cz=function(){var cQ=[];var cR=t.getElementsByClassName(s);if(cR&&cR.length){cQ=cR}return cQ};var cy=function(){var cQ=[];var cR=t.getElementsByClassName(P);if(cR&&cR.length){cQ=cR}return cQ};var cD=function(){var cQ=[];var cR=t.getElementsByClassName(v);if(cR&&cR.length){cQ=cR}return cQ};var cG=function(){var cQ=[];var cR=t.getElementsByClassName(cl);if(cR&&cR.length){cQ=cR}return cQ};var cx=function(c3,cR){o("CallTracking: RenderPhone phone = "+c3);var cW=function(c5){return c5.split(/[^0-9]/).join("")};var cX=function(c8,da){var dd=null;if(!c8){return dd}var c5=da.split(",");if(c5.length<2){dd=da}else{var c6=c8.getAttribute("data-prefix");if(c6){for(var c9=0;c9<c5.length;c9++){var db=c5[c9];var dc=cW(db);if(dc.indexOf("8")===0){dc="7"+dc.substring(1)}var c7=dc.split(c6)[0]==="";if(c7){dd=db;break}}}if(dd===null){dd=c5[0]}o("CallTracking._getPhoneForElement: Prepared phone = "+dd+" for data-prefix = "+c6)}return dd};var cU=function(c9,c7){var c5=cX(c9,c7);if(!c5||!c9){return}if(c9.tagName.toLowerCase()!=="a"){return}var c8=c9.getAttribute("href");if(cd(c8,"tel:")){var c6=cW(c5);if(c6.indexOf("8")===0){c6="7"+c6.substring(1)}c9.setAttribute("href","tel:+"+c6);cV(c9,c5)}};var cV=function(c6,c5){if(!c6.hasAttribute("title")){return}c6.setAttribute("title",c5)};var cZ=function(c7,c6){var c5=cX(c7,c6);if(!c5||!c7){return}c7.innerHTML=c5};var c4=function(c5){var c6=cN();o("CallTracking: render phone default classes for "+c6.length+" elements");m(c6,function(c7){cZ(c7,c5);cU(c7,c5)});m(cz(),function(c8){var c7=cW(cX(c8,c5)).slice(0,1);cZ(c8,c7)});m(cy(),function(c8){var c9=cX(c8,c5).match(/\((.*)\)/);if(c9!==null){var c7=c9[1];cZ(c8,c7)}});m(cD(),function(c9){var c7=cX(c9,c5).match(/\)(.*)/);if(c7!==null){var da=cW(c7[1]);var c8=da.slice(-1*da.length,-4)+"-"+da.slice(-4,-2)+"-"+da.slice(-2);cZ(c9,c8)}});m(cG(),function(c7){cU(c7,c5)})};var c2=function(c5,da){if(!da){return}o("CallTracking: render phone user replacement for "+da.length+" replacements");for(var c9=0;c9<da.length;c9++){var dc=da[c9];if(!dc){continue}var c7=dc[0];dc=dc.substr(1);var db=[];if(c7==="#"){var c8=t.getElementById(dc);if(c8!==null){db.push(c8)}}else{db=t.getElementsByClassName(dc);cT(dc,c5)}if(!db||db.length<1){continue}o("CallTracking: render phone for "+dc+", "+db.length+" elements");for(var c6=0;c6<db.length;c6++){cZ(db[c6],c5);cU(db[c6],c5)}}};var cY=function(c5){for(var c6=0;c6<c5.length;c6++){c2(c5[c6].phone,c5[c6].css_selectors);c1(c5[c6].phone,c5[c6].replaceable_numbers)}};var c1=function(c7,c6){if(!c6||c6.length===0){return}var c5=function(){var di=db();var dh=t.getElementsByTagName("*");var dc=dh.length;for(var dg=0;dg<dc;dg++){var dj=dh[dg];c8(dj,di,cX(dj,c7));var df=dj.childNodes.length;for(var dd=0;dd<df;dd++){var de=dj.childNodes[dd];da(de,di,cX(de,c7))}}};var c8=function(dg,df,dc){if(!c9(dg)){return}var dh=dg.getAttribute("href").replace("tel:","");var de=df.length;for(var dd=0;dd<de;dd++){if(df[dd].test(dh)){cU(dg,cX(dg,dc))}}};var c9=function(dd){if(dd.tagName.toLowerCase()!=="a"){return false}var dc=dd.getAttribute("href");return ax(dc)&&dc.indexOf("tel:")===0};var db=function(){var de=[];for(var dc=0;dc<c6.length;dc++){var dd="[\\s()[\\]{}\\-+.]*";var df=c6[dc].split("").join(dd);de.push(new RegExp("[+(]?"+df,"g"))}return de};var da=function(df,de,dc){if(df.nodeType!==Node.TEXT_NODE){return
}for(var dd=0;dd<de.length;dd++){if(df.textContent&&de[dd].test(df.textContent)){df.textContent=df.textContent.replace(de[dd],dc)}else{if(df.innerText&&de[dd].test(df.innerText)){df.innerText=df.innerText.replace(de[dd],dc)}}}};c5()};var cT=function(c6,c5){m(cS(c6+"-"+bc),function(c8){var c7=cW(cX(c8,c5)).slice(0,1);cZ(c8,c7)});m(cS(c6+"-"+an),function(c8){var c9=cX(c8,c5).match(/\((.*)\)/);if(c9!==null){var c7=c9[1];cZ(c8,c7)}});m(cS(c6+"-"+aO),function(c9){var c7=cX(c9,c5).match(/\)(.*)/);if(c7!==null){var da=cW(c7[1]);var c8=da.slice(-1*da.length,-4)+"-"+da.slice(-4,-2)+"-"+da.slice(-2);cZ(c9,c8)}});m(cS(c6+"-"+bn),function(c7){cU(c7,c5)})};var cS=function(c6){var c5=[];var c7=t.getElementsByClassName(c6);if(c7&&c7.length){c5=c7}return c5};var c0=function c0(){var c6=cB();if(c6){c6=c6.split("\n");for(var c5=0;c5<c6.length;c5++){c6[c5]="."+c6[c5]}}if(cR instanceof Array){cY(cR)}else{c4(c3);c2(c3,c6)}};(function cQ(){c0();var c5=[300,5000,15000];c5.forEach(function(c6){setTimeout(c0,c6)})})()};var cA=function(cQ){bw.save(k,cQ,b1)};var cJ=function(){if(by.roistat.callTracking.phone){var cQ={expires:parseInt(by.roistat.callTracking.sessionTime),path:"/"};if(b1.domain){cQ.domain=b1.domain}cm(cs,by.roistat.callTracking.phone,cQ);cA(1);bw.save(aZ,by.roistat.callTracking.replacementClasses,b1);bw.save(aP,by.roistat.callTracking.phoneScriptsJson,b1)}};var cH=function(cQ,cU,cS,cR){o("CallTracking: reuse phone "+cQ+" for time "+cU+" and replacements "+cS);if(!cO(cQ)){o("CallTracking: new phone is invalid");roistat.callTracking.phone=null;cf();return}roistat.callTracking.enabled=1;roistat.callTracking.phone=cQ;roistat.callTracking.sessionTime=cU;roistat.callTracking.replacementClasses=cS;roistat.callTracking.phoneScriptsJson=cR;cf();cJ();var cV={expires:parseInt(cU),path:"/"};if(b1.domain){cV.domain=b1.domain}cm(cs,cQ,cV);bw.save(aP,cR,b1);bw.save(aZ,cS,b1);var cT=ci(cR);if(cT==null){cx(cQ)}else{cx(cQ,cT)}};var cC=function(){o("CallTracking: request new phone");var cQ=h(bs);var cU=R();var cT=cU?cU:a0;var cS=encodeURIComponent(bK);var cR=y()+"/get-phone?visit="+cQ+"&marker="+(cT?cT:"")+"&prefix="+bR+"&prefix_bind="+ct+"&phone_scripts_bind="+B+"&page="+cS;at(cR)};var cE=function(){bR=by.roistatPhonePrefix?by.roistatPhonePrefix:"";ct=by.roistatPhonePrefixBind?by.roistatPhonePrefixBind:"";B=by.roistatCalltrackingScripts&&by.roistatCalltrackingScripts.join?by.roistatCalltrackingScripts.join(","):"";o("CallTracking: refresh phone with prefix: "+bR+", binding: "+ct+", scripts: "+B);cC()};var cP=function(){var cQ=bw.get(k)>0;var cR=bj.callTrackingEnabled;return cQ&&cR};var cF=function(cQ){cA(cQ.is_enabled)};var cM=function cM(){var cQ=cK();if(!cO(cQ)){o("CallTracking: invalid phone "+cQ+", requesting a new one");cC()}else{o("CallTracking: render phone "+cQ);var cR=ci(cI());if(cR==null){cx(cQ)}else{cx(cQ,cR)}}};var cL=function(){o("CallTracking: init");cJ();if(!cP()){o("CallTracking: disabled, skip");return}if(bj.callTrackingManual){o("CallTracking: init finish because off manual");return}cM();aa(cM)};by.roistatCallTrackingRefresh=cE;by.roistatRequestNewPhone=cC;by.roistatReusePhone=cH;by.roistatCalltrackingUpdateSettings=cF;bL(cL)})();(function r(){var cz=function(cF){o("Emailtracking: "+cF)};var cD=function(cF,cH,cG){bw.save(aY,cF,b1);bw.save(b,cH,b1);bw.save(a9,JSON.stringify(cG),b1)};var cy=function(){var cF=(by.roistat.emailtracking.email&&by.roistat.emailtracking.trackingEmail)||ao(by.roistat.emailtracking.emails);if(by.roistat.emailtracking.loaded&&cF){cz("save loaded email: "+by.roistat.emailtracking.email);cD(by.roistat.emailtracking.email,by.roistat.emailtracking.trackingEmail,by.roistat.emailtracking.emails)}else{cz("settings save skip, because not loaded");by.roistat.emailtracking.email=bw.get(aY);by.roistat.emailtracking.email=by.roistat.emailtracking.email?by.roistat.emailtracking.email:null;by.roistat.emailtracking.email=by.roistat.emailtracking.email==="null"?null:by.roistat.emailtracking.email;cz("email loaded from storage: "+by.roistat.emailtracking.email);by.roistat.emailtracking.trackingEmail=bw.get(b);by.roistat.emailtracking.trackingEmail=by.roistat.emailtracking.trackingEmail?by.roistat.emailtracking.trackingEmail:null;by.roistat.emailtracking.trackingEmail=by.roistat.emailtracking.trackingEmail==="null"?null:by.roistat.emailtracking.trackingEmail;cz("tracking email loaded from storage: "+by.roistat.emailtracking.trackingEmail);by.roistat.emailtracking.emails=ci(bw.get(a9));by.roistat.emailtracking.emails=by.roistat.emailtracking.emails?by.roistat.emailtracking.emails:null;cz("emails loaded from storage: "+JSON.stringify(by.roistat.emailtracking.emails))}};var cB=function(cF){cD(cF.email,cF.trackingEmail,cF.emails)};var cA=function(){var cF=(!!by.roistat.emailtracking.email&&!!by.roistat.emailtracking.trackingEmail)||ao(by.roistat.emailtracking.emails);return by.roistat.emailtracking.enabled&&cF};var cx=function(){if(!cA()){cz("emailtracking disabled, skip swapping");return}var cG=function(cK,cL,cJ){if(cK.href){if(cL.test(cK.href)){cK.href=cK.href.replace(cL,cJ);
return true}}if(cK.nodeType!==3){return false}if(cK.textContent&&cL.test(cK.textContent)){cK.textContent=cK.textContent.replace(cL,cJ);return true}else{if(cK.innerText&&cL.test(cK.innerText)){cK.innerText=cK.innerText.replace(cL,cJ);return true}}return false};var cF=function(cJ){return cJ.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};var cH=function(cL,cK){var cJ=!cK.match(/[a-z]/);return cJ?cL.toUpperCase():cL};var cI=function(cR,cT){var cU=cF(cR);var cL=new RegExp("(^|\\s)(mailto:)?("+cU+")($|\\s|\\?)","gi");var cV=function(c0,cY,cW,cX,cZ){cW=cW||"";return cY+cW+cH(cT,cX)+cZ};cz("starting to replace email "+cR+" to "+cT+" with regexp "+cL);var cK=t.getElementsByTagName("*");var cN=cK.length;cz("found "+cN+" nodes on page");var cQ=0;for(var cP=0;cP<cN;cP++){var cM=cK[cP];var cS=cM.childNodes.length;if(cS>0){for(var cO=0;cO<cS;cO++){var cJ=cM.childNodes[cO];if(cG(cJ,cL,cV)){cQ++}}}if(cG(cM,cL,cV)){cQ++}}cz("successfully replaced "+cQ+" nodes")};if(by.roistat.emailtracking.emails){aS(by.roistat.emailtracking.emails,cI)}else{cI(by.roistat.emailtracking.email,by.roistat.emailtracking.trackingEmail)}};var cC=function(){cz("process email swap");cx();setTimeout(function(){cx()},300);setTimeout(function(){cx()},5000);setTimeout(function(){cx()},15000)};var cE=function(){cz("init");aa(cC);cy();cC()};by.roistatEmailtrackingUpdateSettings=cB;by.roistat.emailtracking.refresh=cx;bL(cE)})();(function aU(){var cA=function(cC){o("MultiDomain: "+cC)};var cz=function(){return bw.get(b3)>0};var cy=function(cG){var cH=function(cJ){if(!cJ){return false}if(cd(cJ,"roistat_visit")){return false}var cI=aF(cJ);var cL=aF(t.domain);var cK=new RegExp(/^((https?:)?\/\/)?([A-ZА-ЯЁ0-9\_\-\~]+\.)+[A-ZА-ЯЁ0-9\_\-\~]+/i);return cI!==cL&&cK.test(cJ)};var cF=function(cL){var cM=cL.split("#");var cK=cM[0].split("?");var cI="";var cJ="";if(cK.length===2){cI=cK[1]}if(cI){cJ="&"}cI=cI+cJ+"roistat_visit="+roistat.getVisit();cK[1]=cI;cM[0]=cK.join("?");return cM.join("#")};if(cG.tagName.toLowerCase()!=="a"){return}var cE=cG.getAttribute("href");var cD=false;if(cH(cE)){var cC=cF(cE);cA("update url "+cE+" > "+cC);cG.setAttribute("href",cC);cD=true}return cD};var cx=function(){if(!cz()){cA("disabled, skip");return}var cC=t.getElementsByTagName("a");var cD=cC.length;cA("found "+cD+" <a> nodes on page");var cG=0;for(var cE=0;cE<cD;cE++){var cF=cC[cE];if(cy(cF)){cG++}}cA("replaced "+cG+" nodes")};var cB=function(){cA("init");cx();setTimeout(function(){cx()},300);setTimeout(function(){cx()},5000);setTimeout(function(){cx()},15000)};bL(cB)})();(function cb(){var cx=60*1000;var cG=2*60*1000;var cz="roistat_last_settings_update_time";var cy=function(cI){o("SettingsUpdater: "+cI)};var cC=function(){return bw.get(cz)};var cE=function(){bw.set(cz,bA())};var cF=function(){var cJ=cC();var cI=!(cJ>0);cy("is first update check: lastUpdateTime="+cJ+", result="+(cI?1:0));return cI};var cH=function(){var cK=bA()-cG;var cJ=cC();var cI=cJ<=cK;cy("expiration check: _minTime="+cK+", lastUpdateTime="+cJ+", result="+(cI?1:0));return cI};var cB=function(){var cI=h(bs);a(cI)};var cA=function(cI){cy("update settings and save last update time");by.roistatCalltrackingUpdateSettings(cI.calltracking);by.roistatEmailtrackingUpdateSettings(cI.emailtracking);by.roistatSaveLeadHunterTemplates(cI.leadhunter_templates.form_template,cI.leadhunter_templates.pulsator_template,cI.leadhunter_templates.pulsator_settings);by.roistatSaveMultiwidgetTemplate(cI.multiwidget_templates.pulsator_template,cI.multiwidget.pulsator_settings);by.roistatSaveOnlineChatTemplate(cI.online_chat_templates.pulsator_template,cI.online_chat_templates.iframe_template);by.roistatSaveProxyFormSettings(cI.proxy_forms);aI(cI.js_settings);b2(cI.multiwidget.multiwidget_settings);if(Number(bw.get(bV))!==Number(cI.online_chat.is_enabled)){bw.set(bV,Number(cI.online_chat.is_enabled))}bu.isSettingsUpdating=false;cE()};var cD=function(){cy("init");if(cF()){cy("in first update we just start first timer and skip");cE();return}if(!cH()){cy("update is not not expired, skip");return}cy("start to update settings");cB()};bL(function(){by.roistatUpdateSettings=cA;setTimeout(function(){cD()},3000);cy("set interval to update settings");setInterval(function(){cD()},cx)})})();(function bg(cB,cx,cD){var cA={};var cy=function(cF){var cE=encodeURIComponent?encodeURIComponent:encodeURI;return cE(cF)};var cz=function(cL,cF){o("Reach goal start");if(!cL){cL={}}var cI={leadName:"",formTitle:"",name:"",phone:"",email:"",price:"",text:"",fields:"",client_fields:"",is_need_callback:"",callback_phone:"",visit:bN(),is_skip_sending:0,items:"",placeholders_data:"",};for(var cH in cI){if(!Object.prototype.hasOwnProperty.call(cI,cH)){continue}if(!Object.prototype.hasOwnProperty.call(cL,cH)){continue}if(!cL[cH]){continue}if(cH==="fields"||cH==="client_fields"||cH==="items"||cH==="placeholders_data"){cL[cH]=JSON.stringify(cL[cH])}cI[cH]=cy(cL[cH])}var cK=aB();var cJ=aG()+"//"+p+"/api/site/"+N+"/"+cK+"/reach-goal?v=2";for(var cG in cI){if(!Object.prototype.hasOwnProperty.call(cI,cG)){continue
}cJ=cJ+"&"+cG+"="+cI[cG]}if(cF!==cD){var cE=Math.random().toString();cA[cE]=cF;cJ+="&callback_key="+cE}at(cJ);o("Reach goal completed")};var cC=cB.roistatGoal={reach:function(cF,cE){cz(cF,cE)},callAfterReachCallback:function(cE){if(Object.prototype.hasOwnProperty.call(cA,cE)){cA[cE]();delete cA[cE]}}}})(by,t,a6);(function co(cz,cx,cA){var cy=function(cF){if(cF instanceof Array||cF===null||typeof cF!=="object"){o("Invalid event data");return""}var cC=[];for(var cE in cF){if(Object.prototype.hasOwnProperty.call(cF,cE)){var cD=cF[cE];if(typeof cD==="string"||typeof cD==="number"){cC.push("data["+encodeURIComponent(cE)+"]="+encodeURIComponent(cD))}else{o("Event data property ignored: "+cE)}}}return cC.length>0?"&"+cC.join("&"):""};var cB=function(cE,cF){o("Send event start");var cC=l();var cD=y()+"/event/register?visit="+cC+"&event="+cE+cy(cF);at(cD);o("Send event completed")};cz.roistat.event={send:function(cC,cD){cB(cC,cD)}}})(by,t,a6);(function bx(cH,cJ,cA){var cK=cH.roistatIsInitVisit===true?20000:10000;var cz=(new Date()).getTime();var cy=function(cO){return"approve_visit_"+cO};var cG=function(cO){bp.set(cy(cO),1)};var cL=function(cO){return bp.get(cy(cO))>0};var cx,cC,cN=[];if(cJ.addEventListener){cx=function(cP,cO,cQ){return cP.addEventListener(cO,cQ,false)};cC=function(cP,cO,cQ){return cP.removeEventListener(cO,cQ,false)}}else{cx=function(cP,cO,cQ){return cP.attachEvent("on"+cO,cQ)};cC=function(cP,cO,cQ){return cP.detachEvent("on"+cO,cQ)}}var cF=function(cR){if(cN.length>30){return}cR=cR||cH.event;if(!cR||!cR.screenX){return}var cQ=(new Date()).getTime();var cT,cS=null;if(cN.length>0){cS=cN[cN.length-1]}if(cS){cT=cQ-cS.time}else{cT=cQ-cz}if(cT<300){return}cT=cT-300;var cV=0;var cO=cR.screenX;var cU=cR.screenY;if(cS){cV=parseInt(Math.sqrt(Math.pow(cS.y-cU,2)+Math.pow(cS.x-cO,2)))}var cP={time:cQ,pauseBeforeMove:cT,x:cO,y:cU,distance:cV};cN.push(cP)};var cE=function(){var cO=[];m(cN,function(cP){var cQ=[cP.pauseBeforeMove,cP.distance];cO.push(cQ.join(":"))});if(cO.length===0){cO.push("0:0")}return cO.join("|")};var cB=function(){for(var cO in cH){if(cd(cO,"yaCounter")){return true}}return false};var cI=function(){cC(cJ,"mousemove",cF);var cO=l();o("VisitApprove: start for visit "+cO);if(cL(cO)){o("VisitApprove: visit already approved, skip");return}cG(cO);ac();var cP=y()+"/approve?v="+F+"&visit="+cO;if(cM()){cP+="&hash="+W()}if(cD()){cP+="&page_params="+encodeURIComponent(JSON.stringify(cH.roistat.page.params));e()}cP+="&mv="+cE();cP+="&pl="+(cH.navigator?cH.navigator.platform:"");cP+="&ym="+(cB()?"1":"0");at(cP)};var cM=function(){var cS=bu.cookies,cR=j();var cU=aL();for(var cP=0;cP<cU.length;cP++){var cT=cU[cP];var cV=Object.prototype.hasOwnProperty.call(cS,cT)?cS[cT]:cA;var cO=Object.prototype.hasOwnProperty.call(cR,cT)?cR[cT]:cA;var cQ=typeof cO==="string"&&cO.length>0;if(cQ&&cV!==cO){return true}}return false};var cD=function(){var cT=bu.pageParams,cQ=cH.roistat.page.params;for(var cP=0;cP<bS.length;cP++){var cO=bS[cP];var cR=Object.prototype.hasOwnProperty.call(cT,cO)?cT[cO]:null;var cS=Object.prototype.hasOwnProperty.call(cQ,cO)?cQ[cO]:null;if(cS!==cR){return true}}return false};setTimeout(function(){cI()},cK);cx(cJ,"mousemove",cF)})(by,t,a6);(function ab(cC,cD,cy){var cA=function(){return H("roistat_ab_demo")==="1"};var cE=function(cH){return new RegExp(cH.split(".").join("\\.").split("*").join(".*").split("?").join("."))};var cB=function(cM){var cH=cC.location.href,cK=cM.filter,cQ=cM.filterValue;var cN;switch(cK){case"except":case"pages":var cI,cP,cO=false;cP=cH?am(cH):"";cN=cQ?cQ.split("\n"):[];if(cP&&cN.length!==0){for(var cJ=0;cJ<cN.length;cJ++){var cL=cN[cJ].trim();if(cL.length===0){continue}cI=cE(cL);if(cI.test(cP)){cO=true;break}}}return(cK==="pages")?cO:!cO;break;case"all":default:return true}};var cx=function(cJ){var cH=cD.getElementsByTagName("head")[0],cI;cI=cD.createElement("style");cI.setAttribute("type","text/css");if(cI.styleSheet){cI.styleSheet.cssText=cJ.value}else{cI.innerText=cJ.value}cH.appendChild(cI)};var cz=function(cH){if(cB(cH)){switch(cH.type){case"css":cx(cH);break}}};cC.applyTests=function(){var cH=bw.getObject("abTesting");var cJ,cI;for(cJ in cH){if(!Object.prototype.hasOwnProperty.call(cH,cJ)){continue}cI=cH[cJ];cz(cI)}};var cF=function(){o("Call: apply demo AB test");var cH=H("roistat_ab_data");var cI;if(cH===null){return}else{cI=JSON.parse(bB.decode(cH))}if(typeof cI!=="object"){o("Error: testValue is not an object.");return}cz(cI)};function cG(){var cH=cA();if(!b8&&!cH){applyTests()}if(cH){cF()}}cG()})(by,t,a6);(function aJ(cy,cx,cz){if(!ca){return}setTimeout(function(){(function(cG,cF,cJ,cI,cD,cB,cE){cG[cD]={COUNTER_ID:cB,HOST:cE};var cC=cF.location.protocol=="https:"?"https://":"http://";var cA=cF.createElement(cJ);cA.async=1;cA.src=cC+cE+cI;var cH=cF.getElementsByTagName(cJ)[0];cH.parentNode.insertBefore(cA,cH)})(cy,cx,"script","/counter.js","datamap",aB(),ca)},1000)})(by,t,a6);(function bv(cz,cx,cA){var cB=function(){var cC=cz.roistatMetrikaCounterId;if(cC){bw.set(av,cC)
}};var cy=function(cH){var cC="yaCounter"+cH;var cG=100,cE=0,cF=60000;var cD=function(){cE+=cG;o("YandexMetrika: trying to access counter "+cH);if(cz[cC]===cA){if(cE<cF){setTimeout(cD,cG);cG*=2}return}var cI={};cI[bY]=l();cz[cC].params(cI);o("YandexMetrika: visit id "+cI[bY]+" sent to counter "+cH)};setTimeout(cD,cG)};bL(function(){cB();var cE=bw.get(av);if(!cE){o("YandexMetrika: counter id not found");return}var cD=String(cE).split(",");o("YandexMetrika: counters: "+cD);for(var cC=0;cC<cD.length;cC++){if(cD[cC].trim()===""){continue}cy(cD[cC])}})})(by,t,a6);(function X(cH,cL){var cP=function(cS){o("Proxy Forms: "+cS)};var cE=function(){if(cH.roistat.proxyForms.loaded&&cH.roistat.proxyForms.settings.length>0){cP("save loaded settings");cM(cH.roistat.proxyForms.settings)}else{cP("settings not loaded, getting from storage");cH.roistat.proxyForms.settings=bw.getObject(cn)||[]}};var cM=function(cS){bw.setObject(cn,cS)};var cI=function(){cP("init form listener");cA(cH.roistat.proxyForms.settings);cx(cH.roistat.proxyForms.settings)};var cR=function(cS){return cS.hasOwnProperty("hosts")&&cS.hasOwnProperty("is_excluding_hosts")&&aX(cS.hosts)&&cS.hosts.length>0};var cC=function(cT){if(!cR(cT)){return true}var cU=cg(cT.hosts,cH.location.host);var cS=Boolean(cT.is_excluding_hosts);return cS?!cU:cU};var cz=function(cT){var cS=[];m(cT,function(cU){if(cC(cU)){cS.push(cU)}});return cS};var cx=function(cS){var cU=[];m(cS,function(cV){if(cV.type==="js-button"){cU.push(cV)}});if(cU.length<1){cP("no button settings");return}var cT;if(cL.addEventListener){cT=function(cV){cD(cU,cV,cV.target,cB)};cL.addEventListener("click",cT,true)}else{if(cL.attachEvent){cT=function(){var cV=cH.event;cD(cU,cV,cV.srcElement,cB,true)};cL.attachEvent("onclick",cT)}else{cP("Listener could not be attached")}}};var cA=function(cT){var cS=[];m(cT,function(cV){if(cV.type==="form"){cS.push(cV)}});if(cS.length<1){cP("no form settings");return}if(cL.addEventListener){var cU=function(cV){cD(cS,cV,cV.target,cQ)};cL.addEventListener("submit",cU,true)}else{if(cL.attachEvent){setInterval(function(){cS=cz(cS);var cV=cL.getElementsByTagName("form");m(cV,function(cW){if(cW.getAttribute("data-roistat-proxy-form-checked")==="true"){return}cW.setAttribute("data-roistat-proxy-form-checked","true");m(cS,function(cX){if(cy(cW,cX.selector)){cW.attachEvent("onsubmit",function(){cH.event.returnValue=false;cQ(cX,cH.event.srcElement)})}})})},2000)}else{cP("Listener could not be attached")}}};var cD=function(cV,cW,cX,cU,cS){var cY=cz(cV);var cT=null;m(cY,function(cZ){if(cy(cX,cZ.selector)){cT=cZ}});if(cT===null){cP("No matched settings found for listener");return}cU(cW,cT,cX,cS)};var cQ=function(cW,cU,cV,cT){var cS=cK(cV,cU);if(!cN(cS,cU)){return}cT?cW.returnValue=false:cW.preventDefault();cF(cS,cU,function(){HTMLFormElement.prototype.submit.call(cV)})};var cB=function(cU,cT){var cS=cK(null,cT);if(!cN(cS,cT)){return}cF(cS,cT)};var cF=function(cS,cV,cX){var cW={};var cU=cG(cV.crm)&&cV.crm.hasOwnProperty("is_enabled");var cT=cU?cV.crm.is_enabled:true;cW.leadName=cV.hasOwnProperty("lead_name")?cV.lead_name:"Новый лид с формы "+cV.title;cW.formTitle=cV.title;cW.name=cS.name;cW.phone=cS.phone;cW.email=cS.email;cW.text=cS.comment;cW.fields=cS.fields;cW.placeholders_data=cS.placeholdersData;cW.is_need_callback=cV.is_need_callback>0?1:0;cW.is_skip_sending=!cT;cH.roistatGoal.reach(cW,cX)};var cG=function(cS){return(typeof cS==="number"&&!isNaN(cS))||(typeof cS==="string"&&cS!=="")||(typeof cS==="object"&&cS!==null)||(typeof cS==="boolean"&&cS)||aX(cS)};var cN=function(cS,cU){var cT=[],cW=["name","email","phone","comment"];m(cW,function(cX){if(cU.hasOwnProperty(cX)&&cU[cX].required>0){cT.push(cX)}});if(aX(cU.fields)){m(cU.fields,function(cX){if(cX.required>0){cT.push(cX)}})}var cV=true;m(cT,function(cX){if(!cS.hasOwnProperty(cX)||!cG(cS[cX])){cV=false}});return cV};var cK=function(cU,cT){var cS={};cS.name=cT.name?cJ(cU,cT.name.value,cT.name.type):"";cS.phone=cT.phone?cJ(cU,cT.phone.value,cT.phone.type):"";cS.email=cT.email?cJ(cU,cT.email.value,cT.email.type):"";cS.comment=cT.comment?cJ(cU,cT.comment.value,cT.comment.type):"";cS.fields={};cS.placeholdersData={orderPage:bK,};if(aX(cT.fields)){m(cT.fields,function(cV){cS.fields[cV.name]=cJ(cU,cV.value,cV.type)})}return cS};var cJ=function(cT,cW,cS){switch(cS){case"plain":return cW||"";case"input":var cV=cT.querySelector('input[name="'+cW+'"]');return cV?cV.value:"";case"js":try{return(new Function(cW))()}catch(cU){return""}}};var cO=function(){cP("init");if(!cH.roistat.proxyForms.enabled){cP("disabled");return}cE();cI()};var cy=function(cU,cS){if(typeof Element!=="undefined"&&Element.prototype.matches){return cU.matches(cS)}else{if(typeof Element!=="undefined"&&Element.prototype.matchesSelector){return cU.matchesSelector(cS)}else{if(cL.querySelectorAll){var cV=cL.querySelectorAll(cS);for(var cT=0;cT<cV.length;cT++){if(cV[cT]===cU){return true}}return false}}}return false};bL(cO);cH.roistatSaveProxyFormSettings=cM})(by,t);(function x(){if(by.onRoistatAllModulesLoaded!==a6&&typeof by.onRoistatAllModulesLoaded==="function"){by.onRoistatAllModulesLoaded()
}})();(function aC(cE,cH,cB){var cx=function(){return bw.get(S)*1>0};var cG=function(cN){o("Request listener: "+cN)};var cM=/^(8|7|380|45|370|375|1|48|357|44|373|371|49|971|996|995|972|420|33|90|34|55|61|52|60|374|43|41|351)?(\d){9,13}$/g;var cF=/^[^\s]+[@][^\s]+$/g;var cA=["mc.yandex.ru","google-analytics.com","google.ru","google.com","stats.g.doubleclick.net"];var cz=function cz(){cG("listen");if(cE.XMLHttpRequest){XMLHttpRequest.prototype.oldSend=XMLHttpRequest.prototype.send;function cP(cS){var cR=this;cI(cR.responseURL,cS,function(){cR.oldSend(cS)})}XMLHttpRequest.prototype.send=cP}if(cE.ActiveXObject){var cO=cQ;function cQ(cT){var cR=new cO(cT);var cU={};if(cT.toLowerCase()==="msxml2.xmlhttp"){cU={_ax:cR,_status:"fake",responseText:"",responseXml:null,readyState:0,status:0,statusText:0,onReadyStateChange:null};var cS="";cU._onReadyStateChange=function(){var cV=cU;return function(){cV.readyState=cV._ax.readyState;if(cV.readyState===4){cV.responseText=cV._ax.responseText;cV.responseXml=cV._ax.responseXml;cV.status=cV._ax.status;cV.statusText=cV._ax.statusText}if(cV.onReadyStateChange){cV.onReadyStateChange()}}}();cU.open=function(cZ,cX,cY,cV,cW){cS=cX;cY=(cY!==false);this._ax.onReadyStateChange=this._onReadyStateChange;return this._ax.open(cZ,cX,cY,cV,cW)};cU.send=function(cV){var cW=this;cI(cS,cV,function(){this._ax.send(cV)})}}else{cU=cR}return cU}cE.ActiveXObject=cQ}if(cE.fetch){var cN=fetch;fetch=function(cR,cS){cI(cR.url,cS||{});return cN(cR,cS||{})}}cE.addEventListener("submit",function(cU){var cW=cU.target.elements;var cV={};for(var cT=0;cT<cW.length;cT++){var cS=cW[cT];var cR=cS.getAttribute("name");cV[cR]=cS.value}cI("",cV)})};function cC(cN){var cQ={};if(cN.length===0){return cQ}var cP=cN.split("?");if(cP.length<2){return cQ}var cO=cP[1];cQ=cy(cO);return cQ}function cy(cO){var cP=cO.split("&"),cR={};for(var cN=0;cN<cP.length;cN++){var cQ=cP[cN].split("=");if(cQ.length<2){continue}cR[cQ[0]]=cQ[1]}return cR}function cK(c4){cG("data: "+JSON.stringify(c4));var cX={email:["email","Email","EMAIL","mail","MAIL","Mail"],phone:["phone","Phone","PHONE","tel","Tel","TEL"],name:["name","Name","NAME","full_name","Full_Name","FULL_NAME"],};var cU={email:"",phone:"",name:""};for(var cN in cX){var c0=cX[cN];for(var cZ in c0){if(c0.hasOwnProperty(cZ)){if(c4.hasOwnProperty(c0[cZ])){cU[cN]=c4[c0[cZ]];break}}}}cG("new data: "+JSON.stringify(cU));var cP=cU.phone.length===0;var cT=cU.email.length===0;if(!cP&&!cT){return cU}var cO=new RegExp(cF);var cS=new RegExp(cM);var cV=Object.keys(c4);for(var c1=0;c1<cV.length;c1++){var cY=decodeURIComponent(String(c4[cV[c1]]));if(cT){var cQ=cY.match(cO);if(cQ&&cQ.length>0){var cW=cU.email;cU.email=cQ[0];cG("parsing email, before: "+cW+", after: "+cU.email)}}if(cP){var c3=cY.replace(/[\s-.()+*_—:;'"`]/g,"");var c2=c3.match(cS);if(c2&&c2.length>0){var cR=cU.phone;cU.phone=cY;cG("parsing phone, before: "+cR+", after: "+cU.phone)}}}return cU}var cD=function(cN){var cO=aF(cN);return !Y(cA,cO)};function cI(cP,cO,cN){if(cP.length>0&&!cD(cP)){return}var cR=cC(cP);var cT=cO;if(typeof cT==="string"){cT=cy(cT)}cG("data before parsing "+JSON.stringify({get:cR,post:cT}));var cS=cK(cR);var cQ=cK(cT);cG("data after parsing "+JSON.stringify({get:cS,post:cQ}));cJ(cS,cQ,cN)}function cJ(cN,cP,cT){var cS=cN.email.length>0?cN.email:cP.email;var cO=cN.phone.length>0?cN.phone:cP.phone;var cR=cN.name.length>0?cN.name:cP.name;if(cS.length==0&&cO.length==0){cT();return}setTimeout(function(){cT()},100);var cQ={leadName:"Автоматический лид с сайта",name:cR,phone:cO,email:cS,is_skip_sending:1};cG("phone or email is not empty, reaching goal "+JSON.stringify(cQ));roistatGoal.reach(cQ)}(function cL(){if(!cx()){cG("disabled, skip");return}cz()})()})(by,t,a6)})(window,document,undefined);