function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(s,k,a){"use strict";a.$,a._,a.Promise;s.Mango.sbjs=function o(s,a,u){function c(n,e){if(!a[n]){if(!s[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[n]={exports:{}};s[n][0].call(i.exports,function(e){var t=s[n][1][e];return c(t||e)},i,i.exports,o,s,a,u)}return a[n].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){var r=e("./init"),i={init:function(e){this.get=r(e),e&&e.callback&&"function"==typeof e.callback&&e.callback(this.get)}};t.exports=i},{"./init":6}],2:[function(e,t,n){var r=e("./terms"),i=e("./helpers/utils"),o={containers:{current:"mgo_sb_current",current_extra:"mgo_sb_current_add",first:"mgo_sb_first",first_extra:"mgo_sb_first_add",session:"mgo_sb_session",udata:"mgo_sb_udata",promocode:"mgo_sb_promo"},service:{migrations:"mgo_sb_migrations"},delimiter:"|*|",aliases:{main:{type:"typ",source:"src",medium:"mdm",campaign:"cmp",content:"cnt",term:"trm",mango:"mango"},extra:{fire_date:"fd",entrance_point:"ep",referer:"rf"},session:{pages_seen:"pgs",current_page:"cpg"},udata:{visits:"vst",ip:"uip",agent:"uag"},promo:"code"},pack:{main:function(e){return o.aliases.main.type+"="+e.type+o.delimiter+o.aliases.main.source+"="+e.source+o.delimiter+o.aliases.main.medium+"="+e.medium+o.delimiter+o.aliases.main.campaign+"="+e.campaign+o.delimiter+o.aliases.main.content+"="+e.content+o.delimiter+o.aliases.main.term+"="+e.term+o.delimiter+o.aliases.main.mango+"="+e.mango},extra:function(e){return o.aliases.extra.fire_date+"="+i.setDate(new Date,e)+o.delimiter+o.aliases.extra.entrance_point+"="+k.location.href+o.delimiter+o.aliases.extra.referer+"="+(k.referrer||r.none)},user:function(e,t){return o.aliases.udata.visits+"="+e+o.delimiter+o.aliases.udata.ip+"="+t+o.delimiter+o.aliases.udata.agent+"="+navigator.userAgent},session:function(e){return o.aliases.session.pages_seen+"="+e+o.delimiter+o.aliases.session.current_page+"="+k.location.href},promo:function(e){return o.aliases.promo+"="+i.setLeadingZeroToInt(i.randomInt(e.min,e.max),e.max.toString().length)}}};t.exports=o},{"./helpers/utils":5,"./terms":9}],3:[function(e,t,n){var c=e("../data").delimiter;t.exports={encodeData:function(e){return encodeURIComponent(e).replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},decodeData:function(t){try{return decodeURIComponent(t).replace(/\%21/g,"!").replace(/\%7E/g,"~").replace(/\%2A/g,"*").replace(/\%27/g,"'").replace(/\%28/g,"(").replace(/\%29/g,")")}catch(e){try{return unescape(t)}catch(e){return""}}},set:function(e,t,n,r,i){var o={};n&&(o.expires=60*n),o.domain=!r||i||r.match(/[а-яё]/)?"":r,a.Cookies.set(this.encodeData(e),this.encodeData(t),o)},get:function(e){var t=a.Cookies.get(this.encodeData(e));return void 0!==t?this.decodeData(t):null},destroy:function(e,t,n){this.set(e,"",-1,t,n)},parse:function(e){var t=[],n={};if("string"==typeof e)t.push(e);else for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);for(var i,o=0;o<t.length;o++){n[this.unsbjs(t[o])]={},i=this.get(t[o])?this.get(t[o]).split(c):[];for(var s=0;s<i.length;s++){var a=i[s].split("="),u=a.splice(0,1);u.push(a.join("=")),n[this.unsbjs(t[o])][u[0]]=this.decodeData(u[1])}}return n},unsbjs:function(e){return e.replace("mgo_sb_","")}}},{"../data":2}],4:[function(e,t,n){t.exports={parse:function(e){for(var r=this.parseOptions,t=r.parser[r.strictMode?"strict":"loose"].exec(e),i={},n=14;n--;)i[r.key[n]]=t[n]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(e,t,n){t&&(i[r.q.name][t]=n)}),i},parseOptions:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},getParam:function(e){for(var t={},n=(e||s.location.search.substring(1)).split("&"),r=0;r<n.length;r++){var i,o=n[r].split("=");void 0===t[o[0]]?t[o[0]]=o[1]:"string"==typeof t[o[0]]?(i=[t[o[0]],o[1]],t[o[0]]=i):t[o[0]].push(o[1])}return t},getHost:function(e){return this.parse(e).host.replace("www.","")}}},{}],5:[function(e,t,n){t.exports={escapeRegexp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},setDate:function(e,t){var n=e.getTimezoneOffset()/60,r=e.getHours(),i=t||0===t?t:-n;return e.setHours(r+n+i),e.getFullYear()+"-"+this.setLeadingZeroToInt(e.getMonth()+1,2)+"-"+this.setLeadingZeroToInt(e.getDate(),2)+" "+this.setLeadingZeroToInt(e.getHours(),2)+":"+this.setLeadingZeroToInt(e.getMinutes(),2)+":"+this.setLeadingZeroToInt(e.getSeconds(),2)},setLeadingZeroToInt:function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}},{}],6:[function(e,t,n){var v=e("./data"),b=e("./terms"),_=e("./helpers/cookies"),w=e("./helpers/uri"),A=e("./helpers/utils"),S=e("./params"),C=e("./migrations");t.exports=function(e){var n,s,r,i,o,a,u,t,c=S.fetch(e),l=w.getParam(),p=c.domain.host,h=c.domain.isolate,f=c.lifetime;function d(e){if(-1<w.getHost(k.referrer).indexOf("market.yandex"))return function(e){var t={utm_source:"market.yandex.ru",utm_medium:b.referer.referral,utm_campaign:b.none,utm_content:w.getParam().frommarket||b.none};switch(e){case b.traffic.utm:n=b.traffic.utm;break;case b.traffic.referral:n=b.traffic.referral}return s=void 0!==l.utm_source?l.utm_source:t.utm_source,r=void 0!==l.utm_medium?l.utm_medium:t.utm_medium,i=void 0!==l.utm_campaign?l.utm_campaign:t.utm_campaign,o=void 0!==l.utm_content?l.utm_content:t.utm_content,u=void 0!==l.mango?l.mango:b.none,a=m()||b.none,v.pack.main({type:n,source:s,medium:r,campaign:i,content:o,term:a,mango:u})}(e);switch(e){case b.traffic.utm:n=b.traffic.utm,s=void 0!==l.utm_source?l.utm_source:void 0!==l.gclid?"google":void 0!==l.yclid?"yandex":b.none,r=void 0!==l.utm_medium?void 0===l.utm_source||"yandex"!==l.utm_source&&"yandex.ru"!==l.utm_source||l.utm_medium!==b.referer.referral?l.utm_medium:(n=b.traffic.organic,s="yandex",b.referer.organic):void 0!==l.gclid||void 0!==l.yclid?"cpc":b.none,i=void 0!==l.utm_campaign?l.utm_campaign:void 0!==l[c.campaign_param]?l[c.campaign_param]:void 0!==l.gclid?"google_cpc":void 0!==l.yclid?"yandex_cpc":b.none,u=void 0!==l.mango?l.mango:b.none,o=l.utm_content||b.none,a=m()||b.none;break;case b.traffic.organic:n=b.traffic.organic,s=s||w.getHost(k.referrer),r=b.referer.organic,i=b.none,o=b.none,a=b.none,u=b.none;break;case b.traffic.referral:s=s||w.getHost(k.referrer),r=r||b.referer.referral,i=b.none,o=w.parse(k.referrer).path,a=b.none,u=b.none,"yandex"!==s&&"yandex.ru"!==s||r!==b.referer.referral?n=b.traffic.referral:(n=b.traffic.organic,s="yandex",r=b.referer.organic);break;case b.traffic.typein:n=b.traffic.typein,s=c.typein_attributes.source,r=c.typein_attributes.medium,i=b.none,o=b.none,a=b.none,u=b.none;break;default:n=b.oops,s=b.oops,r=b.oops,i=b.oops,o=b.oops,a=b.oops,u=b.oops}var t={type:n,source:s,medium:r,campaign:i,content:o,term:a,mango:u};return v.pack.main(t)}function m(){var e=k.referrer;if(l.utm_term)return l.utm_term;if(!(e&&w.parse(e).host&&w.parse(e).host.match(/^(?:.*\.)?yandex\..{2,9}$/i)))return!1;try{return w.getParam(w.parse(k.referrer).query).text}catch(e){return!1}}function y(e){var t=k.referrer;switch(e){case b.traffic.organic:return t&&g(t)&&function(e){var t=new RegExp("^(?:.*\\.)?"+A.escapeRegexp("yandex")+"\\..{2,9}$"),n=new RegExp("^(?:.*\\.)?"+A.escapeRegexp("market.yandex")+"\\..{2,9}$"),r=new RegExp(".*"+A.escapeRegexp("text")+"=.*"),i=new RegExp("^(?:www\\.)?"+A.escapeRegexp("google")+"\\..{2,9}$");{if(w.parse(e).host.match(n))return;if(w.parse(e).query&&w.parse(e).host.match(t)&&w.parse(e).query.match(r))return s="yandex";if(w.parse(e).host.match(i))return s="google";if(!w.parse(e).query)return;for(var o=0;o<c.organics.length;o++){if(w.parse(e).host.match(new RegExp("^(?:.*\\.)?"+A.escapeRegexp(c.organics[o].host)+"$","i"))&&w.parse(e).query.match(new RegExp(".*"+A.escapeRegexp(c.organics[o].param)+"=.*","i")))return s=c.organics[o].display||c.organics[o].host,1;if(o+1===c.organics.length)return}}}(t);case b.traffic.referral:return t&&g(t)&&function(e){{if(!(0<c.referrals.length))return s=w.getHost(e),1;for(var t=0;t<c.referrals.length;t++){if(w.parse(e).host.match(new RegExp("^(?:.*\\.)?"+A.escapeRegexp(c.referrals[t].host)+"$","i")))return s=c.referrals[t].display||c.referrals[t].host,r=c.referrals[t].medium||b.referer.referral,1;if(t+1===c.referrals.length)return s=w.getHost(e),1}}}(t);default:return}}function g(e){if(c.domain){if(h)return w.getHost(e)!==w.getHost(p);var t=new RegExp("^(?:.*\\.)?"+A.escapeRegexp(p)+"$","i");return!w.getHost(e).match(t)}return w.getHost(e)!==w.getHost(k.location.href)}return C.go(f,p,h),_.set(v.containers.current,function(){var e;if(void 0!==l.utm_source||void 0!==l.utm_medium||void 0!==l.utm_campaign||void 0!==l.utm_content||void 0!==l.utm_term||void 0!==l.mango||void 0!==l.gclid||void 0!==l.yclid||void 0!==l[c.campaign_param])e=d(b.traffic.utm);else if(y(b.traffic.organic))e=d(b.traffic.organic);else if(!_.get(v.containers.session)&&y(b.traffic.referral))e=d(b.traffic.referral);else{if(_.get(v.containers.first)||_.get(v.containers.current))return _.get(v.containers.current);e=d(b.traffic.typein)}return e}(),f,p,h),_.get(v.containers.first)||_.set(v.containers.first,_.get(v.containers.current),f,p,h),_.get(v.containers.session)?(t=parseInt(_.parse(v.containers.session)[_.unsbjs(v.containers.session)][v.aliases.session.pages_seen])||1,t+=1):t=1,_.set(v.containers.session,v.pack.session(t),c.session_length,p,h),c.promocode&&!_.get(v.containers.promocode)&&_.set(v.containers.promocode,v.pack.promo(c.promocode),f,p,h),_.parse(v.containers)}},{"./data":2,"./helpers/cookies":3,"./helpers/uri":4,"./helpers/utils":5,"./migrations":7,"./params":8,"./terms":9}],7:[function(e,t,n){var c=e("./data"),l=e("./helpers/cookies");t.exports={go:function(e,t,n){var r=this.migrations,i={l:e,d:t,i:n};if(l.get(c.containers.first)||l.get(c.service.migrations)){if(!l.get(c.service.migrations))for(s=0;s<r.length;s++)r[s].go(r[s].id,i)}else{for(var o=[],s=0;s<r.length;s++)o.push(r[s].id);var a="";for(s=0;s<o.length;s++)a+=o[s]+"=1",s<o.length-1&&(a+=c.delimiter);l.set(c.service.migrations,a,i.l,i.d,i.i)}},migrations:[{id:"1418474375998",version:"1.0.0-beta",go:function(e,t){function n(e,t,n){return t||n?e:c.delimiter}var r=e+"=1",i=e+"=0";try{var o=[];for(var s in c.containers)c.containers.hasOwnProperty(s)&&o.push(c.containers[s]);for(var a,u=0;u<o.length;u++){l.get(o[u])&&(a=l.get(o[u]).replace(/(\|)?\|(\|)?/g,n),l.destroy(o[u],t.d,t.i),l.destroy(o[u],t.d,!t.i),l.set(o[u],a,t.l,t.d,t.i))}l.get(c.containers.session)&&l.set(c.containers.session,c.pack.session(0),t.l,t.d,t.i),l.set(c.service.migrations,r,t.l,t.d,t.i)}catch(e){l.set(c.service.migrations,i,t.l,t.d,t.i)}}}]}},{"./data":2,"./helpers/cookies":3}],8:[function(e,t,n){var o=e("./terms"),s=e("./helpers/uri");t.exports={fetch:function(e){var t=e||{},n={};if(n.lifetime=this.validate.checkFloat(t.lifetime)||6,n.lifetime=parseInt(30*n.lifetime*24*60),n.session_length=this.validate.checkInt(t.session_length)||30,n.timezone_offset=this.validate.checkInt(t.timezone_offset),n.campaign_param=t.campaign_param||!1,n.user_ip=t.user_ip||o.none,t.promocode?(n.promocode={},n.promocode.min=parseInt(t.promocode.min)||1e5,n.promocode.max=parseInt(t.promocode.max)||999999):n.promocode=!1,t.typein_attributes&&t.typein_attributes.source&&t.typein_attributes.medium?(n.typein_attributes={},n.typein_attributes.source=t.typein_attributes.source,n.typein_attributes.medium=t.typein_attributes.medium):n.typein_attributes={source:"(direct)",medium:"(none)"},t.domain&&this.validate.isString(t.domain)?n.domain={host:t.domain,isolate:!1}:t.domain&&t.domain.host?n.domain=t.domain:n.domain={host:s.getHost(k.location.hostname),isolate:!1},n.referrals=[],t.referrals&&0<t.referrals.length)for(var r=0;r<t.referrals.length;r++)t.referrals[r].host&&n.referrals.push(t.referrals[r]);if(n.organics=[],t.organics&&0<t.organics.length)for(var i=0;i<t.organics.length;i++)t.organics[i].host&&t.organics[i].param&&n.organics.push(t.organics[i]);return n.organics.push({host:"bing.com",param:"q",display:"bing"}),n.organics.push({host:"yahoo.com",param:"p",display:"yahoo"}),n.organics.push({host:"about.com",param:"q",display:"about"}),n.organics.push({host:"aol.com",param:"q",display:"aol"}),n.organics.push({host:"ask.com",param:"q",display:"ask"}),n.organics.push({host:"globososo.com",param:"q",display:"globo"}),n.organics.push({host:"go.mail.ru",param:"q",display:"go.mail.ru"}),n.organics.push({host:"rambler.ru",param:"query",display:"rambler"}),n.organics.push({host:"tut.by",param:"query",display:"tut.by"}),n.referrals.push({host:"t.co",display:"twitter.com"}),n.referrals.push({host:"plus.url.google.com",display:"plus.google.com"}),n},validate:{checkFloat:function(e){return!(!e||!this.isNumeric(parseFloat(e)))&&parseFloat(e)},checkInt:function(e){return!(!e||!this.isNumeric(parseInt(e)))&&parseInt(e)},isNumeric:function(e){return!isNaN(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)}}}},{"./helpers/uri":4,"./terms":9}],9:[function(e,t,n){t.exports={traffic:{utm:"utm",organic:"organic",referral:"referral",typein:"typein"},referer:{referral:"referral",organic:"organic",social:"social"},none:"(none)",oops:"(Houston, we have a problem)"}},{}]},{},[1])(1)}(window,document,window.Mango=window.Mango||{}),function(H,J,e){"use strict";var t=e.$,n=e._,q=e.Promise,r;r=function(){var e,t,n;return function o(s,a,u){function c(n,e){if(!a[n]){if(!s[n]){var t="function"==typeof _dereq_&&_dereq_;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[n]={exports:{}};s[n][0].call(i.exports,function(e){var t=s[n][1][e];return c(t||e)},i,i.exports,o,s,a,u)}return a[n].exports}for(var l="function"==typeof _dereq_&&_dereq_,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){t.exports=function(e){var r=e._SomePromiseArray;function t(e){var t=new r(e),n=t.promise();return t.setHowMany(1),t.setUnwrap(),t.init(),n}e.any=t,e.prototype.any=function(){return t(this)}}},{}],2:[function(e,t,n){var r;try{throw new Error}catch(e){r=e}var i=e("./schedule"),o=e("./queue"),s=e("./util");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i}function u(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function c(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function l(e){this._normalQueue._pushOne(e),this._queueTick()}a.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},a.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(e,t){t?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},a.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(a.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?u.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},a.prototype.invoke=function(e,t,n){this._trampolineEnabled?c.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},a.prototype.settlePromises=function(e){this._trampolineEnabled?l.call(this,e):this._schedule(function(){e._settlePromises()})}):(a.prototype.invokeLater=u,a.prototype.invoke=c,a.prototype.settlePromises=l),a.prototype._drainQueue=function(e){for(;0<e.length();){var t,n,r=e.shift();"function"==typeof r?(t=e.shift(),n=e.shift(),r.call(t,n)):r._settlePromises()}},a.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},t.exports=a,t.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){t.exports=function(o,s,a,u){function n(e,t){this._reject(t)}function c(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(n,n,null,this,e)}function l(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)}function p(e,t){t.promiseRejectionQueued||this._reject(e)}var h=!1;o.prototype.bind=function(e){h||(h=!0,o.prototype._propagateFrom=u.propagateFromFunction(),o.prototype._boundValue=u.boundValueFunction());var t=a(e),n=new o(s);n._propagateFrom(this,1);var r,i=this._target();return n._setBoundTo(t),t instanceof o?(r={promiseRejectionQueued:!1,promise:n,target:i,bindingPromise:t},i._then(s,c,void 0,n,r),t._then(l,p,void 0,n,r),n._setOnCancel(t)):n._resolveCallback(i),n},o.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},o.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},o.bind=function(e,t){return o.resolve(t).bind(e)}}},{}],4:[function(e,t,n){var r;void 0!==q&&(r=q);var i=e("./promise")();i.noConflict=function(){try{q===i&&(q=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){var r,i,o=Object.create;o&&(r=o(null),i=o(null),r[" size"]=i[" size"]=0),t.exports=function(i){var r,o=e("./util"),s=o.canEvaluate;o.isIdentifier;function t(e,t){var n;if(null!=e&&(n=e[t]),"function"==typeof n)return n;var r="Object "+o.classString(e)+" has no method '"+o.toString(t)+"'";throw new i.TypeError(r)}function n(e){return t(e,this.pop()).apply(e,this)}function a(e){return e[this]}function u(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}i.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(n,void 0,void 0,t,void 0)},i.prototype.get=function(e){var t,n;return n="number"==typeof e?u:s&&null!==(t=r(e))?t:a,this._then(n,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(u,e,t){e.exports=function(e,t,n,r){var i=u("./util"),o=i.tryCatch,s=i.errorObj,a=e._async;e.prototype.break=e.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),a.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(e,t){var n;if(i.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else void 0!==e&&("function"==typeof e?t||(n=o(e).call(this._boundValue()))===s&&(this._attachExtraTrace(n.e),a.throwLater(n.e)):e._resultCancelled(this))},e.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,e)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){t.exports=function(p){var h=e("./util"),f=e("./es5").keys,d=h.tryCatch,m=h.errorObj;return function(u,c,l){return function(e){var t=l._boundValue();e:for(var n=0;n<u.length;++n){var r=u[n];if(r===Error||null!=r&&r.prototype instanceof Error){if(e instanceof r)return d(c).call(t,e)}else if("function"==typeof r){var i=d(r).call(t,e);if(i===m)return i;if(i)return d(c).call(t,e)}else if(h.isObject(e)){for(var o=f(r),s=0;s<o.length;++s){var a=o[s];if(r[a]!=e[a])continue e}return d(c).call(t,e)}}return p}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){t.exports=function(o){var s=!1,n=[];function a(){this._trace=new a.CapturedTrace(u())}function u(){var e=n.length-1;if(0<=e)return n[e]}return o.prototype._promiseCreated=function(){},o.prototype._pushContext=function(){},o.prototype._popContext=function(){return null},o._peekContext=o.prototype._peekContext=function(){},a.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},a.prototype._popContext=function(){if(void 0===this._trace)return null;var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t},a.CapturedTrace=null,a.create=function(){if(s)return new a},a.deactivateLongStackTraces=function(){},a.activateLongStackTraces=function(){var e=o.prototype._pushContext,t=o.prototype._popContext,n=o._peekContext,r=o.prototype._peekContext,i=o.prototype._promiseCreated;a.deactivateLongStackTraces=function(){o.prototype._pushContext=e,o.prototype._popContext=t,o._peekContext=n,o.prototype._peekContext=r,o.prototype._promiseCreated=i,s=!1},s=!0,o.prototype._pushContext=a.prototype._pushContext,o.prototype._popContext=a.prototype._popContext,o._peekContext=o.prototype._peekContext=u,o.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},a}},{}],9:[function(K,e,t){e.exports=function(s,n){var r,i,o,a=s._getDomain,u=s._async,c=K("./errors").Warning,l=K("./util"),p=l.canAttachTrace,h=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,f=null,y=null,g=!1,e=!(0==l.env("BLUEBIRD_DEBUG")),t=!(0==l.env("BLUEBIRD_WARNINGS")||!e&&!l.env("BLUEBIRD_WARNINGS")),v=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!e&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),b=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(t||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));s.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},s.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),u.invokeLater(this._notifyUnhandledRejection,this,void 0))},s.prototype._notifyUnhandledRejectionIsHandled=function(){z("rejectionHandled",r,void 0,this)},s.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},s.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},s.prototype._notifyUnhandledRejection=function(){var e;this._isRejectionUnhandled()&&(e=this._settledValue(),this._setUnhandledRejectionIsNotified(),z("unhandledRejection",i,e,this))},s.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},s.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},s.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},s.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},s.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},s.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},s.prototype._warn=function(e,t,n){return I(e,t,n||this)},s.onPossiblyUnhandledRejection=function(e){var t=a();i="function"==typeof e?null===t?e:l.domainBind(t,e):void 0},s.onUnhandledRejectionHandled=function(e){var t=a();r="function"==typeof e?null===t?e:l.domainBind(t,e):void 0};var _=function(){};s.longStackTraces=function(){if(u.haveItemsQueued()&&!$.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");var e,t;!$.longStackTraces&&q()&&(e=s.prototype._captureStackTrace,t=s.prototype._attachExtraTrace,$.longStackTraces=!0,_=function(){if(u.haveItemsQueued()&&!$.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");s.prototype._captureStackTrace=e,s.prototype._attachExtraTrace=t,n.deactivateLongStackTraces(),u.enableTrampoline(),$.longStackTraces=!1},s.prototype._captureStackTrace=R,s.prototype._attachExtraTrace=U,n.activateLongStackTraces(),u.disableTrampolineIfNecessary())},s.hasLongStackTraces=function(){return $.longStackTraces&&q()};var w=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return l.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!l.global.dispatchEvent(n)}}if("function"!=typeof Event)return(e=J.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(e),function(e,t){var n=J.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!l.global.dispatchEvent(n)};var e=new Event("CustomEvent");return l.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!l.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),A=l.isNode?function(){return process.emit.apply(process,arguments)}:l.global?function(e){var t="on"+e.toLowerCase(),n=l.global[t];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function S(e,t){return{promise:t}}var C={promiseCreated:S,promiseFulfilled:S,promiseRejected:S,promiseResolved:S,promiseCancelled:S,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:S},k=function(e){var t=!1;try{t=A.apply(null,arguments)}catch(e){u.throwLater(e),t=!0}var n=!1;try{n=w(e,C[e].apply(null,arguments))}catch(e){u.throwLater(e),n=!0}return n||t};function x(){return!1}function E(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+l.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function P(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?l.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function T(){return this._onCancelField}function O(e){this._onCancelField=e}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function F(e,t){var n;0!=(1&t)&&(void 0===(n=(this._cancellationParent=e)._branchesRemainingToCancel)&&(n=0),e._branchesRemainingToCancel=n+1),0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}s.config=function(e){var t;if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?s.longStackTraces():!e.longStackTraces&&s.hasLongStackTraces()&&_()),"warnings"in e&&(t=e.warnings,$.warnings=!!t,b=$.warnings,l.isObject(t)&&"wForgottenReturn"in t&&(b=!!t.wForgottenReturn)),"cancellation"in e&&e.cancellation&&!$.cancellation){if(u.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");s.prototype._clearCancellationData=M,s.prototype._propagateFrom=F,s.prototype._onCancel=T,s.prototype._setOnCancel=O,s.prototype._attachCancellationCallback=P,s.prototype._execute=E,D=F,$.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!$.monitoring?($.monitoring=!0,s.prototype._fireEvent=k):!e.monitoring&&$.monitoring&&($.monitoring=!1,s.prototype._fireEvent=x)),s},s.prototype._fireEvent=x,s.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},s.prototype._onCancel=function(){},s.prototype._setOnCancel=function(e){},s.prototype._attachCancellationCallback=function(e){},s.prototype._captureStackTrace=function(){},s.prototype._attachExtraTrace=function(){},s.prototype._clearCancellationData=function(){},s.prototype._propagateFrom=function(e,t){};var D=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function j(){var e=this._boundTo;return void 0!==e&&e instanceof s?e.isFulfilled()?e.value():void 0:e}function R(){this._trace=new V(this._peekContext())}function U(e,t){var n,r;p(e)&&(void 0!==(n=this._trace)&&t&&(n=n._parent),void 0!==n?n.attachExtraTrace(e):e.__stackCleaned__||(r=N(e),l.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(e,"__stackCleaned__",!0)))}function I(e,t,n){var r,i,o;$.warnings&&(r=new c(e),t?n._attachExtraTrace(r):$.longStackTraces&&(i=s._peekContext())?i.attachExtraTrace(r):(o=N(r),r.stack=o.message+"\n"+o.stack.join("\n")),k("warning",r)||B(r,"",!0))}function L(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||f.test(r),o=i&&W(r);i&&!o&&(g&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function N(e){var t=e.stack,n=e.toString(),t="string"==typeof t&&0<t.length?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||f.test(r))break}return 0<n&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"];return{message:n,stack:"SyntaxError"==e.name?t:L(t)}}function B(e,t,n){var r,i;"undefined"!=typeof console&&(i=l.isObject(e)?(r=e.stack,t+y(r,e)):t+String(e),"function"==typeof o?o(i,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(i))}function z(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){u.throwLater(e)}"unhandledRejection"===e?k(e,n,r)||i||B(n,"Unhandled rejection "):k(e,r)}function H(e){if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():l.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{var t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function q(){return"function"==typeof X}var W=function(){return!1},G=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Y(e){var t=e.match(G);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function V(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);X(this,V),32<t&&this.uncycle()}l.inherits(V,Error),(n.CapturedTrace=V).prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(r=(e=this._length=r)-1;0<=r;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<e;++r){var s=n[t[r].stack];if(void 0!==s&&s!==r){0<s&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var a=0<r?t[r-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=r-2;0<=c;--c)t[c]._length=u,u++;return}}}},V.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=N(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(L(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],s=-1,a=r.length-1;0<=a;--a)if(r[a]===o){s=a;break}for(a=s;0<=a;--a){var u=r[a];if(t[i]!==u)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),l.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),l.notEnumerableProp(e,"__stackCleaned__",!0)}};var X=function(){function e(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():H(t)}var t=/^\s*at\s*/;if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,f=t,y=e;var n=Error.captureStackTrace;return W=function(e){return h.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&0<=i.stack.split("\n")[0].indexOf("stackDetection@"))return f=/@/,y=e,g=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(y=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?H(t):t.toString()},null):(f=t,y=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(o=function(e){console.warn(e)},l.isNode&&process.stderr.isTTY?o=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(o=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var $={warnings:!1,longStackTraces:!1,cancellation:!1,monitoring:!1};return v&&s.longStackTraces(),{longStackTraces:function(){return $.longStackTraces},warnings:function(){return $.warnings},cancellation:function(){return $.cancellation},monitoring:function(){return $.monitoring},propagateFromFunction:function(){return D},boundValueFunction:function(){return j},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&b){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=L(a),c=u.length-1;0<=c;--c){var l=u[c];if(!d.test(l)){var p=l.match(m);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(0<u.length)for(var h=u[0],c=0;c<a.length;++c)if(a[c]===h){0<c&&(s="\n"+a[c-1]);break}}var f="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;r._warn(f,!0,t)}},setBounds:function(e,t){if(q()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){if(c=Y(i[u])){n=c.fileName,s=c.line;break}}for(var c,u=0;u<o.length;++u){if(c=Y(o[u])){r=c.fileName,a=c.line;break}}s<0||a<0||!n||!r||n!==r||a<=s||(W=function(e){if(h.test(e))return!0;var t=Y(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:I,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),I(n)},CapturedTrace:V,fireDomEvent:w,fireGlobalEvent:A}}},{"./errors":12,"./util":36}],10:[function(e,t,n){t.exports=function(n){function r(){return this.value}function i(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(e){return e instanceof n&&e.suppressUnhandledRejections(),this._then(r,void 0,void 0,{value:e},void 0)},n.prototype.throw=n.prototype.thenThrow=function(e){return this._then(i,void 0,void 0,{reason:e},void 0)},n.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,i,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},n.prototype.catchReturn=function(e){if(arguments.length<=1)return e instanceof n&&e.suppressUnhandledRejections(),this._then(void 0,r,void 0,{value:e},void 0);var t=arguments[1];t instanceof n&&t.suppressUnhandledRejections();return this.caught(e,function(){return t})}}},{}],11:[function(e,t,n){t.exports=function(e,n){var r=e.reduce,t=e.all;function i(){return t(this)}e.prototype.each=function(e){return r(this,e,n,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,n,n)},e.each=function(e,t){return r(e,t,n,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,t){return r(e,t,n,n)}}},{}],12:[function(e,t,n){var r,i,o=e("./es5"),s=o.freeze,a=e("./util"),u=a.inherits,c=a.notEnumerableProp;function l(t,n){function r(e){if(!(this instanceof r))return new r(e);c(this,"message","string"==typeof e?e:n),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(r,Error),r}var p=l("Warning","warning"),h=l("CancellationError","cancellation error"),f=l("TimeoutError","timeout error"),d=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(e){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<m.length;++y)"function"==typeof Array.prototype[m[y]]&&(d.prototype[m[y]]=Array.prototype[m[y]]);o.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;function v(e){if(!(this instanceof v))return new v(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}d.prototype.toString=function(){var e=Array(4*g+1).join(" "),t="\n"+e+"AggregateError of:\n";g++,e=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];t+=(r=i.join("\n"))+"\n"}return g--,t},u(v,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:h,TimeoutError:f,OperationalError:v,RejectionError:v,AggregateError:d}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:p}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r,i,o,s,a=function(){return void 0===this}();a?t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:a,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}}:(r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,s=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},t.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return o}},isES5:a,propertyIsWritable:function(){return!0}})},{}],14:[function(e,t,n){t.exports=function(e,r){var i=e.map;e.prototype.filter=function(e,t){return i(this,e,t,r)},e.filter=function(e,t,n){return i(e,t,n,r)}}},{}],15:[function(e,t,n){t.exports=function(a,s,u){var c=e("./util"),l=a.CancellationError,p=c.errorObj,h=e("./catch_filter")(u);function i(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function f(e){this.finallyHandler=e}function d(e,t){return null!=e.cancelPromise&&(1<arguments.length?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,1)}function m(){return g.call(this,this.promise._target()._settledValue())}function y(e){if(!d(this,e))return p.e=e,p}function g(e){var t=this.promise,n=this.handler;if(!this.called){this.called=!0;var r=this.isFinallyHandler()?n.call(t._boundValue()):n.call(t._boundValue(),e);if(r===u)return r;if(void 0!==r){t._setReturnedNonUndefined();var i=s(r,t);if(i instanceof a){if(null!=this.cancelPromise){if(i._isCancelled()){var o=new l("late cancellation observer");return t._attachExtraTrace(o),p.e=o,p}i.isPending()&&i._attachCancellationCallback(new f(this))}return i._then(m,y,void 0,this,void 0)}}}return t.isRejected()?(d(this),p.e=e,p):(d(this),e)}return i.prototype.isFinallyHandler=function(){return 0===this.type},f.prototype._resultCancelled=function(){d(this.finallyHandler)},a.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new i(this,t,e),void 0)},a.prototype.lastly=a.prototype.finally=function(e){return this._passThrough(e,0,g,g)},a.prototype.tap=function(e){return this._passThrough(e,1,g)},a.prototype.tapCatch=function(e){var t=arguments.length;if(1===t)return this._passThrough(e,1,void 0,g);for(var n=new Array(t-1),r=0,i=0;i<t-1;++i){var o=arguments[i];if(!c.isObject(o))return a.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+c.classString(o)));n[r++]=o}n.length=r;var s=arguments[i];return this._passThrough(h(n,s,this),1,void 0,g)},i}},{"./catch_filter":7,"./util":36}],16:[function(n,e,t){e.exports=function(a,r,s,u,e,c){var l=n("./errors").TypeError,t=n("./util"),p=t.errorObj,h=t.tryCatch,f=[];function d(e,t,n,r){var i,o;c.cancellation()?(i=new a(s),o=this._finallyPromise=new a(s),this._promise=i.lastly(function(){return o}),i._captureStackTrace(),i._setOnCancel(this)):(this._promise=new a(s))._captureStackTrace(),this._stack=r,this._generatorFunction=e,this._receiver=t,this._generator=void 0,this._yieldHandlers="function"==typeof n?[n].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}t.inherits(d,e),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,c.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){var e,t;this._isResolved()||(t=void 0!==this._generator.return?(this._promise._pushContext(),h(this._generator.return).call(this._generator,void 0)):(e=new a.CancellationError("generator .return() sentinel"),a.coroutine.returnSentinel=e,this._promise._attachExtraTrace(e),this._promise._pushContext(),h(this._generator.throw).call(this._generator,e)),this._promise._popContext(),this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t))},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=h(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=h(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){var e;this._yieldedPromise instanceof a&&(e=this._yieldedPromise,this._yieldedPromise=null,e.cancel())},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var t=this._promise;if(e===p)return this._cleanup(),this._cancellationPhase?t.cancel():t._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?t.cancel():t._resolveCallback(n);var r,i=u(n,this._promise);i instanceof a||null!==(i=function(e,t,n){for(var r=0;r<t.length;++r){n._pushContext();var i=h(t[r])(e);if(n._popContext(),i===p){n._pushContext();var o=a.reject(p.e);return n._popContext(),o}var s=u(i,n);if(s instanceof a)return s}return null}(i,this._yieldHandlers,this._promise))?0==(50397184&(r=(i=i._target())._bitField))?(this._yieldedPromise=i)._proxy(this,null):0!=(33554432&r)?a._async.invoke(this._promiseFulfilled,this,i._value()):0!=(16777216&r)?a._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled():this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},a.coroutine=function(r,e){if("function"!=typeof r)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=Object(e).yieldHandler,o=d,s=(new Error).stack;return function(){var e=r.apply(this,arguments),t=new o(void 0,void 0,i,s),n=t.promise();return t._generator=e,t._promiseFulfilled(void 0),n}},a.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new l("expecting a function but got "+t.classString(e));f.push(e)},a.spawn=function(e){if(c.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var t=new d(e,this),n=t.promise();return t._run(a.spawn),n}}},{"./errors":12,"./util":36}],17:[function(a,e,t){e.exports=function(e,i,t,n,r,o){var s=a("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var e,t=arguments.length-1;0<t&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var r=new i(n).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(t,e,n){e.exports=function(f,e,o,d,s,m){var a=f._getDomain,u=t("./util"),y=u.tryCatch,g=u.errorObj,c=f._async;function l(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=a();this._callback=null===i?t:u.domainBind(i,t),this._preservedValues=r===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],c.invoke(this._asyncInit,this,void 0)}function n(e,t,n,r){if("function"!=typeof t)return o("expecting a function but got "+u.classString(t));var i=0;if(void 0!==n){if("object"!=typeof n||null===n)return f.reject(new TypeError("options argument must be an object but it is "+u.classString(n)));if("number"!=typeof n.concurrency)return f.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(n.concurrency)));i=n.concurrency}return new l(e,t,i="number"==typeof i&&isFinite(i)&&1<=i?i:0,r).promise()}u.inherits(l,e),l.prototype._asyncInit=function(){this._init$(void 0,-2)},l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){var n=this._values,r=this.length(),i=this._preservedValues,o=this._limit;if(t<0){if(n[t=-1*t-1]=e,1<=o&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=o&&this._inFlight>=o)return n[t]=e,this._queue.push(t),!1;null!==i&&(i[t]=e);var s=this._promise,a=this._callback,u=s._boundValue();s._pushContext();var c=y(a).call(u,e,t,r),l=s._popContext();if(m.checkForgottenReturns(c,l,null!==i?"Promise.filter":"Promise.map",s),c===g)return this._reject(c.e),!0;var p=d(c,this._promise);if(p instanceof f){var h=(p=p._target())._bitField;if(0==(50397184&h))return 1<=o&&this._inFlight++,(n[t]=p)._proxy(this,-1*(t+1)),!1;if(0==(33554432&h))return 0!=(16777216&h)?this._reject(p._reason()):this._cancel(),!0;c=p._value()}n[t]=c}return r<=++this._totalResolved&&(null!==i?this._filter(n,i):this._resolve(n),!0)},l.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;0<e.length&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},l.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},l.prototype.preservedValues=function(){return this._preservedValues},f.prototype.map=function(e,t){return n(this,e,t,null)},f.map=n}},{"./util":36}],19:[function(t,e,n){e.exports=function(s,a,e,u,c){var l=t("./util"),p=l.tryCatch;s.method=function(r){if("function"!=typeof r)throw new s.TypeError("expecting a function but got "+l.classString(r));return function(){var e=new s(a);e._captureStackTrace(),e._pushContext();var t=p(r).apply(this,arguments),n=e._popContext();return c.checkForgottenReturns(t,n,"Promise.method",e),e._resolveFromSyncValue(t),e}},s.attempt=s.try=function(e){if("function"!=typeof e)return u("expecting a function but got "+l.classString(e));var t,n,r,i=new s(a);i._captureStackTrace(),i._pushContext(),r=1<arguments.length?(c.deprecated("calling Promise.try with more than 1 argument"),t=arguments[1],n=arguments[2],l.isArray(t)?p(e).apply(n,t):p(e).call(n,t)):p(e)();var o=i._popContext();return c.checkForgottenReturns(r,o,"Promise.try",i),i._resolveFromSyncValue(r),i},s.prototype._resolveFromSyncValue=function(e){e===l.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){var s=e("./util"),a=s.maybeWrapAsError,u=e("./errors").OperationalError,c=e("./es5");var l=/^(?:name|message|stack|cause)$/;function p(e){var t,n;if((n=e)instanceof Error&&c.getPrototypeOf(n)===Error.prototype){(t=new u(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=c.keys(e),i=0;i<r.length;++i){var o=r[i];l.test(o)||(t[o]=e[o])}return t}return s.markAsOriginatingFromRejection(e),e}t.exports=function(i,o){return function(e,t){var n,r;null!==i&&(e?(n=p(a(e)),i._attachExtraTrace(n),i._reject(n)):o?(r=[].slice.call(arguments,1),i._fulfill(r)):i._fulfill(t),i=null)}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){e.exports=function(e){var r=t("./util"),i=e._async,o=r.tryCatch,s=r.errorObj;function a(e,t){if(!r.isArray(e))return u.call(this,e,t);var n=o(t).apply(this._boundValue(),[null].concat(e));n===s&&i.throwLater(n.e)}function u(e,t){var n=this._boundValue(),r=void 0===e?o(t).call(n,null):o(t).call(n,null,e);r===s&&i.throwLater(r.e)}function c(e,t){var n;e||((n=new Error(e+"")).cause=e,e=n);var r=o(t).call(this._boundValue(),e);r===s&&i.throwLater(r.e)}e.prototype.asCallback=e.prototype.nodeify=function(e,t){var n;return"function"==typeof e&&(n=u,void 0!==t&&Object(t).spread&&(n=a),this._then(n,c,void 0,this,e)),this}}},{"./util":36}],22:[function(O,M,e){M.exports=function(){function u(){return new p("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")}function a(){return new x.PromiseInspection(this._target())}function s(e){return x.reject(new p(e))}function c(){}var l={},f=O("./util"),d=f.isNode?function(){var e=process.domain;return void 0===e&&(e=null),e}:function(){return null};f.notEnumerableProp(x,"_getDomain",d);var e=O("./es5"),t=O("./async"),m=new t;e.defineProperty(x,"_async",{value:m});var n=O("./errors"),p=x.TypeError=n.TypeError;x.RangeError=n.RangeError;var y=x.CancellationError=n.CancellationError;x.TimeoutError=n.TimeoutError,x.OperationalError=n.OperationalError,x.RejectionError=n.OperationalError,x.AggregateError=n.AggregateError;var g=function(){},h={},v={},b=O("./thenables")(x,g),_=O("./promise_array")(x,g,b,s,c),r=O("./context")(x),i=r.create,w=O("./debuggability")(x,r),A=(w.CapturedTrace,O("./finally")(x,b,v)),S=O("./catch_filter")(v),o=O("./nodeback"),C=f.errorObj,k=f.tryCatch;function x(e){e!==g&&function(e,t){if(null==e||e.constructor!==x)throw new p("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new p("expecting a function but got "+f.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function E(e){this.promise._resolveCallback(e)}function P(e){this.promise._rejectCallback(e,!1)}function T(e){var t=new x(g);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return x.prototype.toString=function(){return"[object Promise]"},x.prototype.caught=x.prototype.catch=function(e){var t=arguments.length;if(1<t){for(var n=new Array(t-1),r=0,i=0;i<t-1;++i){var o=arguments[i];if(!f.isObject(o))return s("Catch statement predicate: expecting an object but got "+f.classString(o));n[r++]=o}return n.length=r,e=arguments[i],this.then(void 0,S(n,e,this))}return this.then(void 0,e)},x.prototype.reflect=function(){return this._then(a,a,void 0,this,void 0)},x.prototype.then=function(e,t){var n;return w.warnings()&&0<arguments.length&&"function"!=typeof e&&"function"!=typeof t&&(n=".then() only accepts functions but was passed: "+f.classString(e),1<arguments.length&&(n+=", "+f.classString(t)),this._warn(n)),this._then(e,t,void 0,void 0,void 0)},x.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},x.prototype.spread=function(e){return"function"!=typeof e?s("expecting a function but got "+f.classString(e)):this.all()._then(e,void 0,void 0,h,void 0)},x.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},x.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},x.prototype.error=function(e){return this.caught(f.originatesFromRejection,e)},x.getNewLibraryCopy=M.exports,x.is=function(e){return e instanceof x},x.fromNode=x.fromCallback=function(e){var t=new x(g);t._captureStackTrace();var n=1<arguments.length&&!!Object(arguments[1]).multiArgs,r=k(e)(o(t,n));return r===C&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},x.all=function(e){return new _(e).promise()},x.resolve=x.fulfilled=x.cast=function(e){var t=b(e);return t instanceof x||((t=new x(g))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},x.reject=x.rejected=function(e){var t=new x(g);return t._captureStackTrace(),t._rejectCallback(e,!0),t},x.setScheduler=function(e){if("function"!=typeof e)throw new p("expecting a function but got "+f.classString(e));return m.setScheduler(e)},x.prototype._then=function(e,t,n,r,i){var o=void 0!==i,s=o?i:new x(g),a=this._target(),u=a._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&u)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var c,l,p,h=d();return 0!=(50397184&u)?(p=a._settlePromiseCtx,0!=(33554432&u)?(l=a._rejectionHandler0,c=e):0!=(16777216&u)?(l=a._fulfillmentHandler0,c=t,a._unsetRejectionIsUnhandled()):(p=a._settlePromiseLateCancellationObserver,l=new y("late cancellation observer"),a._attachExtraTrace(l),c=t),m.invoke(p,a,{handler:null===h?c:"function"==typeof c&&f.domainBind(h,c),promise:s,receiver:r,value:l})):a._addCallbacks(e,t,s,r,h),s},x.prototype._length=function(){return 65535&this._bitField},x.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},x.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},x.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},x.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},x.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},x.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},x.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},x.prototype._isFinal=function(){return 0<(4194304&this._bitField)},x.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},x.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},x.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},x.prototype._setAsyncGuaranteed=function(){m.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},x.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==l)return void 0===t&&this._isBound()?this._boundValue():t},x.prototype._promiseAt=function(e){return this[4*e-4+2]},x.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4]},x.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},x.prototype._boundValue=function(){},x.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=l),this._addCallbacks(t,n,r,i,null)},x.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=l),this._addCallbacks(n,r,i,o,null)},x.prototype._addCallbacks=function(e,t,n,r,i){var o,s=this._length();return 65531<=s&&(s=0,this._setLength(0)),0===s?(this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:f.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:f.domainBind(i,t))):(this[2+(o=4*s-4)]=n,this[3+o]=r,"function"==typeof e&&(this[o]=null===i?e:f.domainBind(i,e)),"function"==typeof t&&(this[1+o]=null===i?t:f.domainBind(i,t))),this._setLength(s+1),s},x.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},x.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(u(),!1);var n=b(e,this);if(!(n instanceof x))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var i,o=r._bitField;if(0==(50397184&o)){var s=this._length();0<s&&r._migrateCallback0(this);for(var a=1;a<s;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else{0!=(33554432&o)?this._fulfill(r._value()):0!=(16777216&o)?this._reject(r._reason()):(i=new y("late cancellation observer"),r._attachExtraTrace(i),this._reject(i))}}else this._reject(u())}},x.prototype._rejectCallback=function(e,t,n){var r,i=f.ensureErrorObject(e),o=i===e;o||n||!w.warnings()||(r="a promise was rejected with a non-error: "+f.classString(e),this._warn(r,!0)),this._attachExtraTrace(i,!!t&&o),this._reject(e)},x.prototype._resolveFromExecutor=function(e){var t,n,r;e!==g&&((t=this)._captureStackTrace(),this._pushContext(),r=!0,n=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,r)}),r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0))},x.prototype._settlePromiseFromHandler=function(e,t,n,r){var i,o;0==(65536&r._bitField)&&(r._pushContext(),t===h?n&&"number"==typeof n.length?i=k(e).apply(this._boundValue(),n):(i=C).e=new p("cannot .spread() a non-array: "+f.classString(n)):i=k(e).call(t,n),o=r._popContext(),0==(65536&r._bitField)&&(i===v?r._reject(n):i===C?r._rejectCallback(i.e,!1):(w.checkForgottenReturns(i,o,"",r,this),r._resolveCallback(i))))},x.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},x.prototype._followee=function(){return this._rejectionHandler0},x.prototype._setFollowee=function(e){this._rejectionHandler0=e},x.prototype._settlePromise=function(e,t,n,r){var i=e instanceof x,o=this._bitField,s=0!=(134217728&o);0!=(65536&o)?(i&&e._invokeInternalOnCancel(),n instanceof A&&n.isFinallyHandler()?(n.cancelPromise=e,k(t).call(n,r)===C&&e._reject(C.e)):t===a?e._fulfill(a.call(n)):n instanceof c?n._promiseCancelled(e):i||e instanceof _?e._cancel():n.cancel()):"function"==typeof t?i?(s&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof c?n._isResolved()||(0!=(33554432&o)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):i&&(s&&e._setAsyncGuaranteed(),0!=(33554432&o)?e._fulfill(r):e._reject(r))},x.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof x?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof x&&n._reject(i)},x.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},x.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},x.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[2+t]=this[3+t]=this[t]=this[1+t]=void 0},x.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,0<(65535&t)&&(0!=(134217728&t)?this._settlePromises():m.settlePromises(this))}},x.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return m.fatalError(e,f.isNode);0<(65535&t)?m.settlePromises(this):this._ensurePossibleRejectionHandled()}},x.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},x.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},x.prototype._settlePromises=function(){var e,t,n=this._bitField,r=65535&n;0<r&&(0!=(16842752&n)?(e=this._fulfillmentHandler0,this._settlePromise0(this._rejectionHandler0,e,n),this._rejectPromises(r,e)):(t=this._rejectionHandler0,this._settlePromise0(this._fulfillmentHandler0,t,n),this._fulfillPromises(r,t)),this._setLength(0)),this._clearCancellationData()},x.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},x.defer=x.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new x(g),resolve:E,reject:P}},f.notEnumerableProp(x,"_makeSelfResolutionError",u),O("./method")(x,g,b,s,w),O("./bind")(x,g,b,w),O("./cancel")(x,_,s,w),O("./direct_resolve")(x),O("./synchronous_inspection")(x),O("./join")(x,_,b,g,m,d),(x.Promise=x).version="3.5.0",O("./map.js")(x,_,s,b,g,w),O("./call_get.js")(x),O("./using.js")(x,s,b,i,g,w),O("./timers.js")(x,g,w),O("./generators.js")(x,s,g,b,c,w),O("./nodeify.js")(x),O("./promisify.js")(x,g),O("./props.js")(x,_,b,s),O("./race.js")(x,g,b,s),O("./reduce.js")(x,_,s,b,g,w),O("./settle.js")(x,_,w),O("./some.js")(x,_,s),O("./filter.js")(x,g),O("./each.js")(x,g),O("./any.js")(x),f.toFastProperties(x),f.toFastProperties(x.prototype),T({a:1}),T({b:2}),T({c:3}),T(1),T(function(){}),T(void 0),T(!1),T(new x(g)),w.setBounds(t.firstLineError,f.lastLineError),x}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(r,e,t){e.exports=function(a,n,u,s,e){var c=r("./util");c.isArray;function t(e){var t=this._promise=new a(n);e instanceof a&&t._propagateFrom(e,3),t._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return c.inherits(t,e),t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function e(t,n){var r,i=u(this._values,this._promise);if(i instanceof a){var o=(i=i._target())._bitField;if(this._values=i,0==(50397184&o))return this._promise._setAsyncGuaranteed(),i._then(e,this._reject,void 0,this,n);if(0==(33554432&o))return 0!=(16777216&o)?this._reject(i._reason()):this._cancel();i=i._value()}null!==(i=c.asArray(i))?0!==i.length?this._iterate(i):-5===n?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(n)):(r=s("expecting an array or an iterable object but got "+c.classString(i)).reason(),this._promise._rejectCallback(r,!1))},t.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t,this._values=this.shouldCopyValues()?new Array(t):this._values;for(var n=this._promise,r=!1,i=null,o=0;o<t;++o){var s=u(e[o],n),i=s instanceof a?(s=s._target())._bitField:null;r?null!==i&&s.suppressUnhandledRejections():null!==i?0==(50397184&i)?(s._proxy(this,o),this._values[o]=s):r=0!=(33554432&i)?this._promiseFulfilled(s._value(),o):0!=(16777216&i)?this._promiseRejected(s._reason(),o):this._promiseCancelled(o):r=this._promiseFulfilled(s,o)}r||n._setAsyncGuaranteed()},t.prototype._isResolved=function(){return null===this._values},t.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},t.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},t.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},t.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},t.prototype._promiseCancelled=function(){return this._cancel(),!0},t.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},t.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof a)e.cancel();else for(var t=0;t<e.length;++t)e[t]instanceof a&&e[t].cancel()}},t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(e){return e},t}},{"./util":36}],24:[function(r,e,t){e.exports=function(c,l){var f={},d=r("./util"),p=r("./nodeback"),h=d.withAppended,m=d.maybeWrapAsError,e=d.canEvaluate,y=r("./errors").TypeError,g={__isPromisified__:!0},t=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),v=function(e){return d.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function s(e){return!t.test(e)}function b(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function _(e,t,n,r){for(var i,o,s,a,u=d.inheritedDataKeys(e),c=[],l=0;l<u.length;++l){var p=u[l],h=e[p],f=r===v||v(p,h,e);"function"!=typeof h||b(h)||(i=e,o=p,s=t,a=void 0,(a=d.getDataPropertyOrDefault(i,o+s,g))&&b(a))||!r(p,h,e,f)||c.push(p,h)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new y("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(c,t,n),c}var n,w=function(e){return e.replace(/([$])/,"\\$")};var A=e?n:function(i,o,e,t,n,s){var a=function(){return this}(),u=i;function r(){var e=o;o===f&&(e=this);var t=new c(l);t._captureStackTrace();var n="string"==typeof u&&this!==a?this[u]:i,r=p(t,s);try{n.apply(e,h(arguments,r))}catch(e){t._rejectCallback(m(e),!0,!0)}return t._isFateSealed()||t._setAsyncGuaranteed(),t}return"string"==typeof u&&(i=t),d.notEnumerableProp(r,"__isPromisified__",!0),r};function S(e,t,n,r,i){for(var o=new RegExp(w(t)+"$"),s=_(e,t,o,n),a=0,u=s.length;a<u;a+=2){var c,l=s[a],p=s[a+1],h=l+t;r===A?e[h]=A(l,f,l,p,t,i):(c=r(p,function(){return A(l,f,l,p,t,i)}),d.notEnumerableProp(c,"__isPromisified__",!0),e[h]=c)}return d.toFastProperties(e),e}c.promisify=function(e,t){if("function"!=typeof e)throw new y("expecting a function but got "+d.classString(e));if(b(e))return e;var n,r=void 0===(t=Object(t)).context?f:t.context,i=!!t.multiArgs,o=A(n=e,r,void 0,n,null,i);return d.copyDescriptors(e,o,s),o},c.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new y("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var i=t.filter;"function"!=typeof i&&(i=v);var o=t.promisifier;if("function"!=typeof o&&(o=A),!d.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=d.inheritedDataKeys(e),a=0;a<s.length;++a){var u=e[s[a]];"constructor"!==s[a]&&d.isClass(u)&&(S(u.prototype,r,i,o,n),S(u,r,i,o,n))}return S(e,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(d,e,t){e.exports=function(r,e,i,o){var a,t=d("./util"),s=t.isObject,u=d("./es5");"function"==typeof Map&&(a=Map);var n,c,l=(c=0,function(e){n=e.size,c=0;var t=new Array(2*e.size);return e.forEach(p,t),t});function p(e,t){this[c]=e,this[c+n]=t,c++}function h(e){var t=!1;if(void 0!==a&&e instanceof a)i=l(e),t=!0;else for(var n=u.keys(e),r=n.length,i=new Array(2*r),o=0;o<r;++o){var s=n[o];i[o]=e[s],i[o+r]=s}this.constructor$(i),this._isMap=t,this._init$(void 0,t?-6:-3)}function f(e){var t,n=i(e);return s(n)?(t=n instanceof r?n._then(r.props,void 0,void 0,void 0,void 0):new h(n).promise(),n instanceof r&&t._propagateFrom(n,2),t):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}t.inherits(h,e),h.prototype._init=function(){},h.prototype._promiseFulfilled=function(e,t){var n;if(this._values[t]=e,++this._totalResolved>=this._length){if(this._isMap)n=function(e){for(var t=new a,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],o=e[r];t.set(i,o)}return t}(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},h.prototype.shouldCopyValues=function(){return!1},h.prototype.getActualLength=function(e){return e>>1},r.prototype.props=function(){return f(this)},r.props=f}},{"./es5":13,"./util":36}],26:[function(e,t,n){function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i&o]=e,this[1+i&o]=t,this[2+i&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=r},{}],27:[function(e,t,n){t.exports=function(c,l,p,h){var f=e("./util"),d=function(t){return t.then(function(e){return n(e,t)})};function n(e,t){var n=p(e);if(n instanceof c)return d(n);if(null===(e=f.asArray(e)))return h("expecting an array or an iterable object but got "+f.classString(e));var r=new c(l);void 0!==t&&r._propagateFrom(t,3);for(var i=r._fulfill,o=r._reject,s=0,a=e.length;s<a;++s){var u=e[s];(void 0!==u||s in e)&&c.cast(u)._then(i,o,void 0,r,null)}return r}c.race=function(e){return n(e,void 0)},c.prototype.race=function(){return n(this,void 0)}}},{"./util":36}],28:[function(t,e,n){e.exports=function(s,e,i,n,o,a){var u=s._getDomain,c=t("./util"),l=c.tryCatch;function p(e,t,n,r){this.constructor$(e);var i=u();this._fn=null===i?t:c.domainBind(i,t),void 0!==n&&(n=s.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function h(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function r(e,t,n,r){return"function"!=typeof t?i("expecting a function but got "+c.classString(t)):new p(e,t,n,r).promise()}function f(e){this.accum=e,this.array._gotAccum(e);var t=n(this.value,this.array._promise);return t instanceof s?(this.array._currentCancellable=t)._then(d,void 0,void 0,this,void 0):d.call(this,t)}function d(e){var t,n=this.array,r=n._promise,i=l(n._fn);r._pushContext(),(t=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length))instanceof s&&(n._currentCancellable=t);var o=r._popContext();return a.checkForgottenReturns(t,o,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),t}c.inherits(p,e),p.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},p.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},p.prototype._init=function(){},p.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},p.prototype.shouldCopyValues=function(){return!1},p.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},p.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof s&&this._currentCancellable.cancel(),this._initialValue instanceof s&&this._initialValue.cancel())},p.prototype._iterate=function(e){var t=(this._values=e).length,n=void 0!==this._initialValue?(i=this._initialValue,0):(i=s.resolve(e[0]),1);if(!(this._currentCancellable=i).isRejected())for(;n<t;++n)var r={accum:null,value:e[n],index:n,length:t,array:this},i=i._then(f,void 0,void 0,r,void 0);void 0!==this._eachValues&&(i=i._then(this._eachComplete,void 0,void 0,this,void 0)),i._then(h,h,void 0,i,this)},s.prototype.reduce=function(e,t){return r(this,e,t,null)},s.reduce=r}},{"./util":36}],29:[function(e,t,n){var r,i,o,s,a=e("./util"),u=a.getNativePromise();o=a.isNode&&"undefined"==typeof MutationObserver?(r=global.setImmediate,i=process.nextTick,a.isRecentNode?function(e){r.call(global,e)}:function(e){i.call(process,e)}):"function"==typeof u&&"function"==typeof u.resolve?(s=u.resolve(),function(e){s.then(e)}):"undefined"==typeof MutationObserver||void 0!==H&&H.navigator&&(H.navigator.standalone||H.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var n=J.createElement("div"),r={attributes:!0},i=!1,o=J.createElement("div");new MutationObserver(function(){n.classList.toggle("foo"),i=!1}).observe(o,r);return function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(n,r),i||(i=!0,o.classList.toggle("foo"))}}(),t.exports=o},{"./util":36}],30:[function(o,e,t){e.exports=function(e,t,n){var r=e.PromiseInspection;function i(e){this.constructor$(e)}o("./util").inherits(i,t),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},i.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},e.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(l,e,t){e.exports=function(e,t,i){var n=l("./util"),r=l("./errors").RangeError,o=l("./errors").AggregateError,s=n.isArray,a={};function u(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(e,t){if((0|t)!==t||t<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new u(e),r=n.promise();return n.setHowMany(t),n.init(),r}n.inherits(u,t),u.prototype._init=function(){var e;this._initialized&&(0!==this._howMany?(this._init$(void 0,-5),e=s(this._values),!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))):this._resolve([]))},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(e){this._howMany=e},u.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(a),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new o,t=this.length();t<this._values.length;++t)this._values[t]!==a&&e.push(this._values[t]);return 0<e.length?this._reject(e):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(e){this._values.push(e)},u.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new r(t)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=c,e.prototype.some=function(e){return c(this,e)},e._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(e,t,n){t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){t.exports=function(a,u){var c=e("./util"),l=c.errorObj,i=c.isObject;var o={}.hasOwnProperty;return function(e,t){if(i(e)){if(e instanceof a)return e;var n=function(e){try{return e.then}catch(e){return l.e=e,l}}(e);if(n===l){t&&t._pushContext();var r=a.reject(n.e);return t&&t._popContext(),r}if("function"==typeof n){if(function(e){try{return o.call(e,"_promise0")}catch(e){return!1}}(e)){r=new a(u);return e._then(r._fulfill,r._reject,void 0,r,null),r}return function(e,t,n){var r=new a(u),i=r;n&&n._pushContext();r._captureStackTrace(),n&&n._popContext();var o=!0,s=c.tryCatch(t).call(e,function(e){if(!r)return;r._resolveCallback(e),r=null},function(e){if(!r)return;r._rejectCallback(e,o,!0),r=null});o=!1,r&&s===l&&(r._rejectCallback(s.e,!0,!0),r=null);return i}(e,n,t)}}return e}}},{"./util":36}],34:[function(e,t,n){t.exports=function(i,o,a){var u=e("./util"),c=i.TimeoutError;function l(e){this.handle=e}l.prototype._resultCancelled=function(){clearTimeout(this.handle)};function s(e){return t(+this).thenReturn(e)}var t=i.delay=function(e,t){var n,r;return void 0!==t?(n=i.resolve(t)._then(s,null,null,e,void 0),a.cancellation()&&t instanceof i&&n._setOnCancel(t)):(n=new i(o),r=setTimeout(function(){n._fulfill()},+e),a.cancellation()&&n._setOnCancel(new l(r)),n._captureStackTrace()),n._setAsyncGuaranteed(),n};i.prototype.delay=function(e){return t(e,this)};function n(e){return clearTimeout(this.handle),e}function r(e){throw clearTimeout(this.handle),e}i.prototype.timeout=function(e,i){var o,s;e=+e;var t=new l(setTimeout(function(){var e,t,n,r;o.isPending()&&(e=o,n=s,r="string"!=typeof(t=i)?t instanceof Error?t:new c("operation timed out"):new c(t),u.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel())},e));return a.cancellation()?(s=this.then(),(o=s._then(n,r,void 0,t,void 0))._setOnCancel(t)):o=this._then(n,r,void 0,t,void 0),o}}},{"./util":36}],35:[function(s,e,t){e.exports=function(h,f,d,t,e,m){var y=s("./util"),n=s("./errors").TypeError,r=s("./util").inherits,g=y.errorObj,v=y.tryCatch,i={};function c(e){setTimeout(function(){throw e},0)}function b(i,o){var s=0,a=i.length,u=new h(e);return function e(){if(a<=s)return u._fulfill();var t,n,r=(t=i[s++],(n=d(t))!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&n._setDisposable(t._getDisposer()),n);if(r instanceof h&&r._isDisposable()){try{r=d(r._getDisposer().tryDispose(o),i.promise)}catch(e){return c(e)}if(r instanceof h)return r._then(e,c,null,null,null)}e()}(),u}function _(e,t,n){this._data=e,this._promise=t,this._context=n}function o(e,t,n){this.constructor$(e,t,n)}function w(e){return _.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function A(e){this.length=e,this.promise=null,this[e-1]=null}_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():i},_.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==i?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},_.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},r(o,_),o.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},A.prototype._resultCancelled=function(){for(var e=this.length,t=0;t<e;++t){var n=this[t];n instanceof h&&n.cancel()}},h.using=function(){var e=arguments.length;if(e<2)return f("you must pass at least 2 arguments to Promise.using");var t,o=arguments[e-1];if("function"!=typeof o)return f("expecting a function but got "+y.classString(o));var s=!0;2===e&&Array.isArray(arguments[0])?(e=(t=arguments[0]).length,s=!1):(t=arguments,e--);for(var n=new A(e),r=0;r<e;++r){var i,a,u=t[r];_.isDisposer(u)?(u=(i=u).promise())._setDisposable(i):(a=d(u))instanceof h&&(u=a._then(w,null,null,{resources:n,index:r},void 0)),n[r]=u}for(var c=new Array(n.length),r=0;r<c.length;++r)c[r]=h.resolve(n[r]).reflect();var l=h.all(c).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return g.e=n.error(),g;if(!n.isFulfilled())return void l.cancel();e[t]=n.value()}p._pushContext(),o=v(o);var r=s?o.apply(void 0,e):o(e),i=p._popContext();return m.checkForgottenReturns(r,i,"Promise.using",p),r}),p=l.lastly(function(){var e=new h.PromiseInspection(l);return b(n,e)});return(n.promise=p)._setOnCancel(n),p},h.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},h.prototype._isDisposable=function(){return 0<(131072&this._bitField)},h.prototype._getDisposer=function(){return this._disposer},h.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},h.prototype.disposer=function(e){if("function"==typeof e)return new o(e,this,t());throw new n}}},{"./errors":12,"./util":36}],36:[function(e,t,n){var c=e("./es5"),r="undefined"==typeof navigator,i={e:{}},o,s="undefined"!=typeof self?self:void 0!==H?H:"undefined"!=typeof global?global:void 0!==this?this:null;function a(){try{var e=o;return o=null,e.apply(this,arguments)}catch(e){return i.e=e,i}}function u(e){return o=e,a}var l=function(t,n){var r={}.hasOwnProperty;function e(){for(var e in this.constructor=t,(this.constructor$=n).prototype)r.call(n.prototype,e)&&"$"!==e.charAt(e.length-1)&&(this[e+"$"]=n.prototype[e])}return e.prototype=n.prototype,t.prototype=new e,t.prototype};function p(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function h(e){return"function"==typeof e||"object"==typeof e&&null!==e}function f(e){return p(e)?new Error(k(e)):e}function d(e,t){for(var n=e.length,r=new Array(n+1),i=0;i<n;++i)r[i]=e[i];return r[i]=t,r}function m(e,t,n){if(!c.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function y(e,t,n){if(p(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return c.defineProperty(e,t,r),e}function g(e){throw e}var v=function(){function a(e){for(var t=0;t<i.length;++t)if(i[t]===e)return 1}var i=[Array.prototype,Object.prototype,Function.prototype];if(c.isES5){var u=Object.getOwnPropertyNames;return function(e){for(var t,n=[],r=Object.create(null);null!=e&&!a(e);){try{t=u(e)}catch(e){return n}for(var i=0;i<t.length;++i){var o,s=t[i];r[s]||(r[s]=!0,null!=(o=Object.getOwnPropertyDescriptor(e,s))&&null==o.get&&null==o.set&&n.push(s))}e=c.getPrototypeOf(e)}return n}}var o={}.hasOwnProperty;return function(e){if(a(e))return[];var t=[];e:for(var n in e)if(o.call(e,n))t.push(n);else{for(var r=0;r<i.length;++r)if(o.call(i[r],n))continue e;t.push(n)}return t}}(),b=/this\s*\.\s*\S+\s*=/;function _(e){try{if("function"==typeof e){var t=c.names(e.prototype),n=c.isES5&&1<t.length,r=0<t.length&&!(1===t.length&&"constructor"===t[0]),i=b.test(e+"")&&0<c.names(e).length;if(n||r||i)return!0}return!1}catch(e){return!1}}function w(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}var A=/^[a-z$_][a-z$_0-9]*$/i;function S(e){return A.test(e)}function C(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r}function k(e){try{return e+""}catch(e){return"[no string representation]"}}function x(e){return null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function E(e){try{y(e,"isOperational",!0)}catch(e){}}function P(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function T(e){return x(e)&&c.propertyIsWritable(e,"stack")}var O="stack"in new Error?function(e){return T(e)?e:new Error(k(e))}:function(e){if(T(e))return e;try{throw new Error(k(e))}catch(e){return e}};function M(e){return{}.toString.call(e)}function F(e,t,n){for(var r=c.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{c.defineProperty(t,o,c.getDescriptor(e,o))}catch(e){}}}var D=function(e){return c.isArray(e)?e:null},j,D;"undefined"!=typeof Symbol&&Symbol.iterator&&(j="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n},D=function(e){return c.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?j(e):null});var R="undefined"!=typeof process&&"[object process]"===M(process).toLowerCase(),U="undefined"!=typeof process&&void 0!==process.env;function I(e){return U?process.env[e]:void 0}function L(){if("function"==typeof q)try{var e=new q(function(){});if("[object Promise]"==={}.toString.call(e))return q}catch(e){}}function N(e,t){return e.bind(t)}var B={isClass:_,isIdentifier:S,inheritedDataKeys:v,getDataPropertyOrDefault:m,thrower:g,isArray:c.isArray,asArray:D,notEnumerableProp:y,isPrimitive:p,isObject:h,isError:x,canEvaluate:r,errorObj:i,tryCatch:u,inherits:l,withAppended:d,maybeWrapAsError:f,toFastProperties:w,filledRange:C,toString:k,canAttachTrace:T,ensureErrorObject:O,originatesFromRejection:P,markAsOriginatingFromRejection:E,classString:M,copyDescriptors:F,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:R,hasEnvVariables:U,env:I,global:s,getNativePromise:L,domainBind:N},z;B.isRecentNode=B.isNode&&(z=process.versions.node.split(".").map(Number),0===z[0]&&10<z[1]||0<z[0]),B.isNode&&B.toFastProperties(process);try{throw new Error}catch(e){B.lastLineError=e}t.exports=B},{"./es5":13}]},{},[4])(4)},H.Mango.Promise=r()}(window,document,window.Mango=window.Mango||{}),function(u,e){"use strict";var c,s,l,r,a,n,i,o,p,h,f,d,t,m,y,g,v,b,_,w,A,S,C,k,x,E,P,T,O,M,F;e.$,e._,e.Promise;function D(e){return null==e?String(e):E[P.call(e)]||"object"}function j(e){return"function"==D(e)}function R(e){return null!=e&&e==e.window}function U(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function I(e){return"object"==D(e)}function L(e){return I(e)&&!R(e)&&Object.getPrototypeOf(e)==Object.prototype}function N(e){var t=!!e&&"length"in e&&e.length,n=l.type(e);return"function"!=n&&!R(e)&&("array"==n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function B(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function z(e){return e in t?t[e]:t[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function H(e,t){return"number"!=typeof t||m[B(e)]?t:t+"px"}function q(e){return"children"in e?h.call(e.children):l.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function W(e,t){for(var n=e?e.length:0,r=0;r<n;r++)this[r]=e[r];this.length=n,this.selector=t||""}function G(e,t){return null==t?l(e):l(e).filter(t)}function Y(e,t,n,r){return j(t)?t.call(e,n,r):t}function V(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function X(e,t){var n=e.className||"",r=n&&n.baseVal!==c;if(t===c)return r?n.baseVal:n;r?n.baseVal=t:e.className=t}function $(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?l.parseJSON(t):t):t}catch(e){return t}}e.$=(o=(i=[]).concat,p=i.filter,h=i.slice,f=u.document,d={},t={},m={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},y=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,b=/^(?:body|html)$/i,_=/([A-Z])/g,w=["val","css","html","text","data","width","height","offset"],A=f.createElement("table"),S=f.createElement("tr"),C={tr:f.createElement("tbody"),tbody:A,thead:A,tfoot:A,td:S,th:S,"*":f.createElement("div")},k=/complete|loaded|interactive/,x=/^[\w-]*$/,P=(E={}).toString,T={},O=f.createElement("div"),M={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},F=Array.isArray||function(e){return e instanceof Array},T.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=O).appendChild(e),r=~T.qsa(i,t).indexOf(e),o&&O.removeChild(e),r},a=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},n=function(n){return p.call(n,function(e,t){return n.indexOf(e)==t})},T.fragment=function(e,t,n){var r,i,o;return g.test(e)&&(r=l(f.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(v,"<$1></$2>")),t===c&&(t=y.test(e)&&RegExp.$1),t in C||(t="*"),(o=C[t]).innerHTML=""+e,r=l.each(h.call(o.childNodes),function(){o.removeChild(this)})),L(n)&&(i=l(r),l.each(n,function(e,t){-1<w.indexOf(e)?i[e](t):i.attr(e,t)})),r},T.Z=function(e,t){return new W(e,t)},T.isZ=function(e){return e instanceof T.Z},T.init=function(e,t){var n,r;if(!e)return T.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&y.test(e))n=T.fragment(e,RegExp.$1,t),e=null;else{if(t!==c)return l(t).find(e);n=T.qsa(f,e)}else{if(j(e))return l(f).ready(e);if(T.isZ(e))return e;if(F(e))r=e,n=p.call(r,function(e){return null!=e});else if(I(e))n=[e],e=null;else if(y.test(e))n=T.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==c)return l(t).find(e);n=T.qsa(f,e)}}return T.Z(n,e)},(l=function(e,t){return T.init(e,t)}).extend=function(t){var n,e=h.call(arguments,1);return"boolean"==typeof t&&(n=t,t=e.shift()),e.forEach(function(e){!function e(t,n,r){for(s in n)r&&(L(n[s])||F(n[s]))?(L(n[s])&&!L(t[s])&&(t[s]={}),F(n[s])&&!F(t[s])&&(t[s]=[]),e(t[s],n[s],r)):n[s]!==c&&(t[s]=n[s])}(t,e,n)}),t},T.qsa=function(e,t){var n,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,s=x.test(o);return e.getElementById&&s&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:h.call(s&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},l.contains=f.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},l.type=D,l.isFunction=j,l.isWindow=R,l.isArray=F,l.isPlainObject=L,l.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},l.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},l.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},l.camelCase=a,l.trim=function(e){return null==e?"":String.prototype.trim.call(e)},l.uuid=0,l.support={},l.expr={},l.noop=function(){},l.map=function(e,t){var n,r,i,o,s=[];if(N(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&s.push(n);else for(i in e)null!=(n=t(e[i],i))&&s.push(n);return 0<(o=s).length?l.fn.concat.apply([],o):o},l.each=function(e,t){var n,r;if(N(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},l.grep=function(e,t){return p.call(e,t)},u.JSON&&(l.parseJSON=JSON.parse),l.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){E["[object "+t+"]"]=t.toLowerCase()}),l.fn={constructor:T.Z,length:0,forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,splice:i.splice,indexOf:i.indexOf,concat:function(){for(var e,t=[],n=0;n<arguments.length;n++)e=arguments[n],t[n]=T.isZ(e)?e.toArray():e;return o.apply(T.isZ(this)?this.toArray():this,t)},map:function(n){return l(l.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return l(h.apply(this,arguments))},ready:function(e){return k.test(f.readyState)&&f.body?e(l):f.addEventListener("DOMContentLoaded",function(){e(l)},!1),this},get:function(e){return e===c?h.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return i.every.call(this,function(e,t){return!1!==n.call(e,t,e)}),this},filter:function(t){return j(t)?this.not(this.not(t)):l(p.call(this,function(e){return T.matches(e,t)}))},add:function(e,t){return l(n(this.concat(l(e,t))))},is:function(e){return 0<this.length&&T.matches(this[0],e)},not:function(t){var n,r=[];return j(t)&&t.call!==c?this.each(function(e){t.call(this,e)||r.push(this)}):(n="string"==typeof t?this.filter(t):N(t)&&j(t.item)?h.call(t):l(t),this.forEach(function(e){n.indexOf(e)<0&&r.push(e)})),l(r)},has:function(e){return this.filter(function(){return I(e)?l.contains(this,e):l(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!I(e)?e:l(e)},last:function(){var e=this[this.length-1];return e&&!I(e)?e:l(e)},find:function(e){var n=this,t=e?"object"==typeof e?l(e).filter(function(){var t=this;return i.some.call(n,function(e){return l.contains(e,t)})}):1==this.length?l(T.qsa(this[0],e)):this.map(function(){return T.qsa(this,e)}):l();return t},closest:function(n,r){var i=[],o="object"==typeof n&&l(n);return this.each(function(e,t){for(;t&&!(o?0<=o.indexOf(t):T.matches(t,n));)t=t!==r&&!U(t)&&t.parentNode;t&&i.indexOf(t)<0&&i.push(t)}),l(i)},parents:function(e){for(var t=[],n=this;0<n.length;)n=l.map(n,function(e){if((e=e.parentNode)&&!U(e)&&t.indexOf(e)<0)return t.push(e),e});return G(t,e)},parent:function(e){return G(n(this.pluck("parentNode")),e)},children:function(e){return G(this.map(function(){return q(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||h.call(this.childNodes)})},siblings:function(e){return G(this.map(function(e,t){return p.call(q(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return l.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=f.createElement(e),f.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var n,r,i=j(t);return this[0]&&!i&&(n=l(t).get(0),r=n.parentNode||1<this.length),this.each(function(e){l(this).wrapAll(i?t.call(this,e):r?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){var t;for(l(this[0]).before(e=l(e));(t=e.children()).length;)e=t.first();l(e).append(this)}return this},wrapInner:function(i){var o=j(i);return this.each(function(e){var t=l(this),n=t.contents(),r=o?i.call(this,e):i;n.length?n.wrapAll(r):t.append(r)})},unwrap:function(){return this.parent().each(function(){l(this).replaceWith(l(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=l(this);(t===c?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return l(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return l(this.pluck("nextElementSibling")).filter(e||"*")},html:function(n){return 0 in arguments?this.each(function(e){var t=this.innerHTML;l(this).empty().append(Y(this,n,e,t))}):0 in this?this[0].innerHTML:null},text:function(n){return 0 in arguments?this.each(function(e){var t=Y(this,n,e,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,n){var e;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(I(t))for(s in t)V(this,s,t[s]);else V(this,t,Y(this,n,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:c},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){V(this,e)},this)})},prop:function(t,n){return t=M[t]||t,1 in arguments?this.each(function(e){this[t]=Y(this,n,e,this[t])}):this[0]&&this[0][t]},removeProp:function(e){return e=M[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var n="data-"+e.replace(_,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?$(r):c},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=Y(this,t,e,this.value)})):this[0]&&(this[0].multiple?l(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(o){if(o)return this.each(function(e){var t=l(this),n=Y(this,o,e,t.offset()),r=t.offsetParent().offset(),i={top:n.top-r.top,left:n.left-r.left};"static"==t.css("position")&&(i.position="relative"),t.css(i)});if(!this.length)return null;if(f.documentElement!==this[0]&&!l.contains(f.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+u.pageXOffset,top:e.top+u.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,t){if(arguments.length<2){var n=this[0];if("string"==typeof e){if(!n)return;return n.style[a(e)]||getComputedStyle(n,"").getPropertyValue(e)}if(F(e)){if(!n)return;var r={},i=getComputedStyle(n,"");return l.each(e,function(e,t){r[t]=n.style[a(t)]||i.getPropertyValue(t)}),r}}var o="";if("string"==D(e))t||0===t?o=B(e)+":"+H(e,t):this.each(function(){this.style.removeProperty(B(e))});else for(s in e)e[s]||0===e[s]?o+=B(s)+":"+H(s,e[s])+";":this.each(function(){this.style.removeProperty(B(s))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(l(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&i.some.call(this,function(e){return this.test(X(e))},z(e))},addClass:function(n){return n?this.each(function(e){var t;"className"in this&&(r=[],t=X(this),Y(this,n,e,t).split(/\s+/g).forEach(function(e){l(this).hasClass(e)||r.push(e)},this),r.length&&X(this,t+(t?" ":"")+r.join(" ")))}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===c)return X(this,"");r=X(this),Y(this,t,e,r).split(/\s+/g).forEach(function(e){r=r.replace(z(e)," ")}),X(this,r.trim())}})},toggleClass:function(n,r){return n?this.each(function(e){var t=l(this);Y(this,n,e,X(this)).split(/\s+/g).forEach(function(e){(r===c?!t.hasClass(e):r)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===c?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===c?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=b.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(l(e).css("margin-top"))||0,n.left-=parseFloat(l(e).css("margin-left"))||0,r.top+=parseFloat(l(t[0]).css("border-top-width"))||0,r.left+=parseFloat(l(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||f.body;e&&!b.test(e.nodeName)&&"static"==l(e).css("position");)e=e.offsetParent;return e})}},l.fn.detach=l.fn.remove,["width","height"].forEach(function(r){var i=r.replace(/./,function(e){return e[0].toUpperCase()});l.fn[r]=function(t){var e,n=this[0];return t===c?R(n)?n["inner"+i]:U(n)?n.documentElement["scroll"+i]:(e=this.offset())&&e[r]:this.each(function(e){(n=l(this)).css(r,Y(this,t,e,n[r]()))})}}),["after","prepend","before","append"].forEach(function(t,s){var a=s%2;l.fn[t]=function(){var n,r,i=l.map(arguments,function(e){var t=[];return"array"==(n=D(e))?(e.forEach(function(e){return e.nodeType!==c?t.push(e):l.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(T.fragment(e)))}),t):"object"==n||null==e?e:T.fragment(e)}),o=1<this.length;return i.length<1?this:this.each(function(e,t){r=a?t:t.parentNode,t=0==s?t.nextSibling:1==s?t.firstChild:2==s?t:null;var n=l.contains(f.documentElement,r);i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!r)return l(e).remove();r.insertBefore(e,t),n&&function e(t,n){n(t);for(var r=0,i=t.childNodes.length;r<i;r++)e(t.childNodes[r],n)}(e,function(e){var t;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||(t=e.ownerDocument?e.ownerDocument.defaultView:u).eval.call(t,e.innerHTML)})})})},l.fn[a?t+"To":"insert"+(s?"Before":"After")]=function(e){return l(e)[t](this),this}}),T.Z.prototype=W.prototype=l.fn,T.uniq=n,T.deserializeValue=$,l.zepto=T,l)}(window,(document,window.Mango=window.Mango||{})),function(u,k,e){"use strict";!function(l){function c(e){return"string"==typeof e}var p,t=1,h=Array.prototype.slice,f=l.isFunction,d={},o={},n="onfocusin"in u,r={focus:"focusin",blur:"focusout"},m={mouseenter:"mouseover",mouseleave:"mouseout"};function y(e){return e._zid||(e._zid=t++)}function s(e,t,n,r){var i,o;return(t=g(t)).ns&&(o=t.ns,i=new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)")),(d[y(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||y(e.fn)===y(n))&&(!r||e.sel==r)})}function g(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function v(e,t){return e.del&&!n&&e.e in r||!!t}function b(e){return m[e]||n&&r[e]||e}function _(i,e,t,o,s,a,u){var n=y(i),c=d[n]||(d[n]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return l(k).ready(t);var n=g(e);n.fn=t,n.sel=s,n.e in m&&(t=function(e){var t=e.relatedTarget;if(!t||t!==this&&!l.contains(this,t))return n.fn.apply(this,arguments)});var r=(n.del=a)||t;n.proxy=function(e){if(!(e=S(e)).isImmediatePropagationStopped()){e.data=o;var t=r.apply(i,e._args==p?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},n.i=c.length,c.push(n),"addEventListener"in i&&i.addEventListener(b(n.e),n.proxy,v(n,u))})}function w(t,e,n,r,i){var o=y(t);(e||"").split(/\s/).forEach(function(e){s(t,e,n,r).forEach(function(e){delete d[o][e.i],"removeEventListener"in t&&t.removeEventListener(b(e.e),e.proxy,v(e,i))})})}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",l.event={add:_,remove:w},l.proxy=function(e,t){var n=2 in arguments&&h.call(arguments,2);if(f(e)){var r=function(){return e.apply(t,n?n.concat(h.call(arguments)):arguments)};return r._zid=y(e),r}if(c(t))return n?(n.unshift(e[t],e),l.proxy.apply(null,n)):l.proxy(e[t],e);throw new TypeError("expected function")},l.fn.bind=function(e,t,n){return this.on(e,t,n)},l.fn.unbind=function(e,t){return this.off(e,t)},l.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var a=function(){return!0},A=function(){return!1},i=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function S(r,i){return!i&&r.isDefaultPrevented||(i=i||r,l.each(e,function(e,t){var n=i[e];r[e]=function(){return this[t]=a,n&&n.apply(i,arguments)},r[t]=A}),(i.defaultPrevented!==p?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(r.isDefaultPrevented=a)),r}function C(e){var t,n={originalEvent:e};for(t in e)i.test(t)||e[t]===p||(n[t]=e[t]);return S(n,e)}l.fn.delegate=function(e,t,n){return this.on(t,e,n)},l.fn.undelegate=function(e,t,n){return this.off(t,e,n)},l.fn.live=function(e,t){return l(k.body).delegate(this.selector,e,t),this},l.fn.die=function(e,t){return l(k.body).undelegate(this.selector,e,t),this},l.fn.on=function(t,i,n,o,s){var a,u,r=this;return t&&!c(t)?(l.each(t,function(e,t){r.on(e,i,n,t,s)}),r):(c(i)||f(o)||!1===o||(o=n,n=i,i=p),o!==p&&!1!==n||(o=n,n=p),!1===o&&(o=A),r.each(function(e,r){s&&(a=function(e){return w(r,e.type,o),o.apply(this,arguments)}),i&&(u=function(e){var t,n=l(e.target).closest(i,r).get(0);if(n&&n!==r)return t=l.extend(C(e),{currentTarget:n,liveFired:r}),(a||o).apply(n,[t].concat(h.call(arguments,1)))}),_(r,t,o,n,i,u||a)}))},l.fn.off=function(e,n,t){var r=this;return e&&!c(e)?(l.each(e,function(e,t){r.off(e,n,t)}),r):(c(n)||f(t)||!1===t||(t=n,n=p),!1===t&&(t=A),r.each(function(){w(this,e,t,n)}))},l.fn.trigger=function(e,t){return(e=c(e)||l.isPlainObject(e)?l.Event(e):S(e))._args=t,this.each(function(){e.type in r&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):l(this).triggerHandler(e,t)})},l.fn.triggerHandler=function(n,r){var i,o;return this.each(function(e,t){(i=C(c(n)?l.Event(n):n))._args=r,i.target=t,l.each(s(t,n.type||n),function(e,t){if(o=t.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){l.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),l.Event=function(e,t){c(e)||(e=(t=e).type);var n=k.createEvent(o[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),S(n)}}(e.$)}(window,document,window.Mango=window.Mango||{}),function(D,e){"use strict";!function(g){var v,b,l=+new Date,_=D.document,u=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,A=/^(?:text|application)\/xml/i,S="application/json",C="text/html",k=/^\s*$/,x=_.createElement("a");function E(e,t,n,r){if(e.global)return i=t||_,o=n,s=r,a=g.Event(o),g(i).trigger(a,s),!a.isDefaultPrevented();var i,o,s,a}function P(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===E(t,n,"ajaxBeforeSend",[e,t]))return!1;E(t,n,"ajaxSend",[e,t])}function T(e,t,n,r){var i=n.context,o="success";n.success.call(i,e,o,t),r&&r.resolveWith(i,[e,o,t]),E(n,i,"ajaxSuccess",[t,n,e]),s(o,t,n)}function O(e,t,n,r,i){var o=r.context;r.error.call(o,n,t,e),i&&i.rejectWith(o,[n,t,e]),E(r,o,"ajaxError",[n,r,e||t]),s(t,n,r)}function s(e,t,n){var r,i=n.context;n.complete.call(i,t,e),E(n,i,"ajaxComplete",[t,n]),(r=n).global&&!--g.active&&E(r,null,"ajaxStop")}function M(){}function F(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function c(e,t,n,r){return g.isFunction(t)&&(r=n,n=t,t=void 0),g.isFunction(n)||(r=n,n=void 0),{url:e,data:t,success:n,dataType:r}}x.href=D.location.href,g.active=0,g.ajaxJSONP=function(n,r){if(!("type"in n))return g.ajax(n);function e(e){g(a).triggerHandler("error",e||"abort")}var i,o,t=n.jsonpCallback,s=(g.isFunction(t)?t():t)||"Zepto"+l++,a=_.createElement("script"),u=D[s],c={abort:e};return r&&r.promise(c),g(a).on("load error",function(e,t){clearTimeout(o),g(a).off().remove(),"error"!=e.type&&i?T(i[0],c,n,r):O(null,t||"error",c,n,r),D[s]=u,i&&g.isFunction(u)&&u(i[0]),u=i=void 0}),!1===P(c,n)?e("abort"):(D[s]=function(){i=arguments},a.src=n.url.replace(/\?(.+)=\?/,"?$1="+s),_.head.appendChild(a),0<n.timeout&&(o=setTimeout(function(){e("timeout")},n.timeout))),c},g.ajaxSettings={type:"GET",beforeSend:M,success:M,error:M,complete:M,context:null,global:!0,xhr:function(){return new D.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:S,xml:"application/xml, text/xml",html:C,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:M},g.ajax=function(e){var t,n,r,i,o=g.extend({},e||{}),s=g.Deferred&&g.Deferred();for(v in g.ajaxSettings)void 0===o[v]&&(o[v]=g.ajaxSettings[v]);(r=o).global&&0==g.active++&&E(r,null,"ajaxStart"),o.crossDomain||((t=_.createElement("a")).href=o.url,t.href=t.href,o.crossDomain=x.protocol+"//"+x.host!=t.protocol+"//"+t.host),o.url||(o.url=D.location.toString()),-1<(n=o.url.indexOf("#"))&&(o.url=o.url.slice(0,n)),(i=o).processData&&i.data&&"string"!=g.type(i.data)&&(i.data=g.param(i.data,i.traditional)),!i.data||i.type&&"GET"!=i.type.toUpperCase()&&"jsonp"!=i.dataType||(i.url=F(i.url,i.data),i.data=void 0);var a=o.dataType,u=/\?.+=\?/.test(o.url);if(u&&(a="jsonp"),!1!==o.cache&&(e&&!0===e.cache||"script"!=a&&"jsonp"!=a)||(o.url=F(o.url,"_="+Date.now())),"jsonp"==a)return u||(o.url=F(o.url,o.jsonp?o.jsonp+"=?":!1===o.jsonp?"":"callback=?")),g.ajaxJSONP(o,s);function c(e,t){h[e.toLowerCase()]=[e,t]}var l,p=o.accepts[a],h={},f=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:D.location.protocol,d=o.xhr(),m=d.setRequestHeader;if(s&&s.promise(d),o.crossDomain||c("X-Requested-With","XMLHttpRequest"),c("Accept",p||"*/*"),(p=o.mimeType||p)&&(-1<p.indexOf(",")&&(p=p.split(",",2)[0]),d.overrideMimeType&&d.overrideMimeType(p)),(o.contentType||!1!==o.contentType&&o.data&&"GET"!=o.type.toUpperCase())&&c("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(b in o.headers)c(b,o.headers[b]);if(d.setRequestHeader=c,!(d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=M,clearTimeout(l);var e,t=!1;if(200<=d.status&&d.status<300||304==d.status||0==d.status&&"file:"==f){if(a=a||((n=(n=o.mimeType||d.getResponseHeader("content-type"))&&n.split(";",2)[0])&&(n==C?"html":n==S?"json":w.test(n)?"script":A.test(n)&&"xml")||"text"),"arraybuffer"==d.responseType||"blob"==d.responseType)e=d.response;else{e=d.responseText;try{e=function(e,t,n){if(n.dataFilter==M)return e;var r=n.context;return n.dataFilter.call(r,e,t)}(e,a,o),"script"==a?(0,eval)(e):"xml"==a?e=d.responseXML:"json"==a&&(e=k.test(e)?null:g.parseJSON(e))}catch(e){t=e}if(t)return O(t,"parsererror",d,o,s)}T(e,d,o,s)}else O(d.statusText||null,d.status?"error":"abort",d,o,s)}var n})===P(d,o))return d.abort(),O(null,"abort",d,o,s),d;var y=!("async"in o)||o.async;if(d.open(o.type,o.url,y,o.username,o.password),o.xhrFields)for(b in o.xhrFields)d[b]=o.xhrFields[b];for(b in h)m.apply(d,h[b]);return 0<o.timeout&&(l=setTimeout(function(){d.onreadystatechange=M,d.abort(),O(null,"timeout",d,o,s)},o.timeout)),d.send(o.data?o.data:null),d},g.get=function(){return g.ajax(c.apply(null,arguments))},g.post=function(){var e=c.apply(null,arguments);return e.type="POST",g.ajax(e)},g.getJSON=function(){var e=c.apply(null,arguments);return e.dataType="json",g.ajax(e)},g.fn.load=function(e,t,n){if(!this.length)return this;var r,i=this,o=e.split(/\s/),s=c(e,t,n),a=s.success;return 1<o.length&&(s.url=o[0],r=o[1]),s.success=function(e){i.html(r?g("<div>").html(e.replace(u,"")).find(r):e),a&&a.apply(i,arguments)},g.ajax(s),this};var r=encodeURIComponent;g.param=function(e,t){var n=[];return n.add=function(e,t){g.isFunction(t)&&(t=t()),null==t&&(t=""),this.push(r(e)+"="+r(t))},function n(r,e,i,o){var s,a=g.isArray(e),u=g.isPlainObject(e);g.each(e,function(e,t){s=g.type(t),o&&(e=i?o:o+"["+(u||"object"==s||"array"==s?e:"")+"]"),!o&&a?r.add(t.name,t.value):"array"==s||!i&&"object"==s?n(r,t,i,e):r.add(e,t)})}(n,e,t),n.join("&").replace(/%20/g,"+")}}(e.$)}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";var o;(o=e.$).fn.serializeArray=function(){var n,r,t=[],i=function(e){if(e.forEach)return e.forEach(i);t.push({name:n,value:e})};return this[0]&&o.each(this[0].elements,function(e,t){r=t.type,(n=t.name)&&"fieldset"!=t.nodeName.toLowerCase()&&!t.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&"file"!=r&&("radio"!=r&&"checkbox"!=r||t.checked)&&i(o(t).val())}),t},o.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},o.fn.submit=function(e){var t;return 0 in arguments?this.bind("submit",e):this.length&&(t=o.Event("submit"),this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()),this}}((window,document,window.Mango=window.Mango||{})),function(t){"use strict";!function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;t.getComputedStyle=function(e,t){try{return n(e,t)}catch(e){return null}}}}()}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";var h;(h=e.$).Callbacks=function(r){r=h.extend({},r);var t,n,i,o,s,a,u=[],c=!r.once&&[],l=function(e){for(t=r.memory&&e,n=!0,a=o||0,o=0,s=u.length,i=!0;u&&a<s;++a)if(!1===u[a].apply(e[0],e[1])&&r.stopOnFalse){t=!1;break}i=!1,u&&(c?c.length&&l(c.shift()):t?u.length=0:p.disable())},p={add:function(){var e,n;return u&&(e=u.length,(n=function(e){h.each(e,function(e,t){"function"==typeof t?r.unique&&p.has(t)||u.push(t):t&&t.length&&"string"!=typeof t&&n(t)})})(arguments),i?s=u.length:t&&(o=e,l(t))),this},remove:function(){return u&&h.each(arguments,function(e,t){for(var n;-1<(n=h.inArray(t,u,n));)u.splice(n,1),i&&(n<=s&&--s,n<=a&&--a)}),this},has:function(e){return!(!u||!(e?-1<h.inArray(e,u):u.length))},empty:function(){return s=u.length=0,this},disable:function(){return u=c=t=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,t||p.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!u||n&&!c||(t=[e,(t=t||[]).slice?t.slice():t],i?c.push(t):l(t)),this},fire:function(){return p.fireWith(this,arguments)},fired:function(){return!!n}};return p}}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";var l,p;function h(e){var i=[["resolve","done",l.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",l.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",l.Callbacks({memory:1})]],o="pending",s={state:function(){return o},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var t=arguments;return h(function(o){l.each(i,function(e,r){var i=l.isFunction(t[e])&&t[e];a[r[1]](function(){var e,t,n=i&&i.apply(this,arguments);n&&l.isFunction(n.promise)?n.promise().done(o.resolve).fail(o.reject).progress(o.notify):(e=this===s?o.promise():this,t=i?[n]:arguments,o[r[0]+"With"](e,t))})}),t=null}).promise()},promise:function(e){return null!=e?l.extend(e,s):s}},a={};return l.each(i,function(e,t){var n=t[2],r=t[3];s[t[1]]=n.add,r&&n.add(function(){o=r},i[1^e][2].disable,i[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?s:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a}l=e.$,p=Array.prototype.slice,l.when=function(e){function t(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?p.call(arguments):e,r===i?c.notifyWith(n,r):--u||c.resolveWith(n,r)}}var i,n,r,o=p.call(arguments),s=o.length,a=0,u=1!==s||e&&l.isFunction(e.promise)?s:0,c=1===u?e:h();if(1<s)for(i=new Array(s),n=new Array(s),r=new Array(s);a<s;++a)o[a]&&l.isFunction(o[a].promise)?o[a].promise().done(t(a,r,o)).fail(c.reject).progress(t(a,n,i)):--u;return u||c.resolveWith(r,o),c.promise()},l.Deferred=h}((window,document,window.Mango=window.Mango||{})),function(rt){"use strict";rt.$,rt._,rt.Promise;(function(){var _,i="Expected a function",w=1,A=2,n=9007199254740991,S="[object Arguments]",C="[object Array]",k="[object Boolean]",x="[object Date]",E="[object Error]",r="[object Function]",o="[object GeneratorFunction]",P="[object Number]",T="[object Object]",O="[object RegExp]",M="[object String]",t=/[&<>"'`]/g,s=RegExp(t.source),e="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,h=e||a||Function("return this")();function u(e,t){return e.push.apply(e,t),e}function c(t){return function(e){return null==e?_:e[t]}}var l,p=(l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==l?_:l[e]});var f,d,m=Array.prototype,y=Object.prototype,F=y.hasOwnProperty,g=0,D=y.toString,v=h._,b=Object.create,j=y.propertyIsEnumerable,R=h.isFinite,U=(f=Object.keys,d=Object,function(e){return f(d(e))}),I=Math.max;function L(e){return e instanceof N?e:new N(e)}function N(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t}function B(e,t,n,r){return e===_||xe(e,y[n])&&!F.call(r,n)?t:e}function z(e){return Fe(e)?b(e):{}}function H(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(_,n)},t)}(N.prototype=z(L.prototype)).constructor=N;var q,W,G=(q=J,function(e,t){if(null==e)return e;if(!Te(e))return q(e,t);for(var n=e.length,r=W?n:-1,i=Object(e);(W?r--:++r<n)&&!1!==t(i[r],r,i););return e});function Y(e,t,n){for(var r=-1,i=e.length;++r<i;){var o,s,a=e[r],u=t(a);null!=u&&(o===_?u==u:n(u,o))&&(o=u,s=a)}return s}function V(e,r){var i=[];return G(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i}function X(e,t,n,r,i){var o=-1,s=e.length;for(n=n||he,i=i||[];++o<s;){var a=e[o];0<t&&n(a)?1<t?X(a,t-1,n,r,i):u(i,a):r||(i[i.length]=a)}return i}var $,K=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),s=o.length;s--;){var a=o[$?s:++r];if(!1===t(i[a],a,i))break}return e};function J(e,t){return e&&K(e,t,We)}function Z(t,e){return V(e,function(e){return Me(t[e])})}function Q(e,t){return t<e}function ee(e,t,n,r,i){return e===t||(null==e||null==t||!Fe(e)&&!De(t)?e!=e&&t!=t:function(t,n,e,r,i,o){var s=Pe(t),a=Pe(n),u=C,c=C;s||(u=(u=D.call(t))==S?T:u);a||(c=(c=D.call(n))==S?T:c);var l=u==T&&!0,p=c==T&&!0,h=u==c;o=o||[];var f=be(o,function(e){return e[0]==t}),d=be(o,function(e){return e[0]==n});if(f&&d)return f[1]==n;if(o.push([t,n]),o.push([n,t]),h&&!l){var m=s?function(e,t,n,r,i,o){var s=i&A,a=e.length,u=t.length;if(a!=u&&!(s&&a<u))return!1;var c=-1,l=!0,p=i&w?[]:_;for(;++c<a;){var h=e[c],f=t[c];if(void 0!==_){void 0,l=!1;break}if(p){if(!ue(t,function(e,t){if(!ye(p,t)&&(h===e||n(h,e,r,i,o)))return p.push(t)})){l=!1;break}}else if(h!==f&&!n(h,f,r,i,o)){l=!1;break}}return l}(t,n,e,r,i,o):function(e,t,n){switch(n){case k:case x:case P:return xe(+e,+t);case E:return e.name==t.name&&e.message==t.message;case O:case M:return e==t+""}return!1}(t,n,u);return o.pop(),m}if(!(i&A)){var y=l&&F.call(t,"__wrapped__"),g=p&&F.call(n,"__wrapped__");if(y||g){var v=y?t.value():t,b=g?n.value():n,m=e(v,b,r,i,o);return o.pop(),m}}if(!h)return!1;m=function(e,t,n,r,i,o){var s=i&A,a=We(e),u=a.length,c=We(t).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var p=a[l];if(!(s?p in t:F.call(t,p)))return!1}var h=!0,f=s;for(;++l<u;){p=a[l];var d=e[p],m=t[p];if(void 0!==_||d!==m&&!n(d,m,r,i,o)){h=!1;break}f=f||"constructor"==p}{var y,g;h&&!f&&(y=e.constructor,g=t.constructor,y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(h=!1))}return h}(t,n,e,r,i,o);return o.pop(),m}(e,t,ee,n,r,i))}function te(e){return"function"==typeof e?e:null==e?Xe:("object"==typeof e?ie:c)(e)}function ne(e,t){return e<t}function re(e,r){var i=-1,o=Te(e)?Array(e.length):[];return G(e,function(e,t,n){o[++i]=r(e,t,n)}),o}function ie(r){var i=U(r);return function(e){var t=i.length;if(null==e)return!t;for(e=Object(e);t--;){var n=i[t];if(!(n in e&&ee(r[n],e[n],_,w|A)))return!1}return!0}}function oe(o,s){return s=I(s===_?o.length-1:s,0),function(){for(var e=arguments,t=-1,n=I(e.length-s,0),r=Array(n);++t<n;)r[t]=e[s+t];t=-1;for(var i=Array(s+1);++t<s;)i[t]=e[t];return i[s]=r,o.apply(this,i)}}function se(e,t,n){var r=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(n=i<n?i:n)<0&&(n+=i),i=n<t?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function ae(e){return se(e,0,e.length)}function ue(e,r){var i;return G(e,function(e,t,n){return!(i=r(e,t,n))}),!!i}function ce(e,t,n,r){n=n||{};for(var i,o,s,a,u=-1,c=t.length;++u<c;){var l=t[u],p=r?r(n[l],e[l],l,n,e):_;i=n,o=l,s=p===_?e[l]:p,a=void 0,a=i[o],F.call(i,o)&&xe(a,s)&&(s!==_||o in i)||(i[o]=s)}return n}function le(s){return oe(function(e,t){var n=-1,r=t.length,i=1<r?t[r-1]:_,i=3<s.length&&"function"==typeof i?(r--,i):_;for(e=Object(e);++n<r;){var o=t[n];o&&s(e,o,n,i)}return e})}function pe(a,e,u,c){if("function"!=typeof a)throw new TypeError(i);var r,l=1&e,p=(r=a,function(){var e=arguments,t=z(r.prototype),n=r.apply(t,e);return Fe(n)?n:t});return function e(){for(var t=-1,n=arguments.length,r=-1,i=c.length,o=Array(i+n),s=this&&this!==h&&this instanceof e?p:a;++r<i;)o[r]=c[r];for(;n--;)o[r++]=arguments[++t];return s.apply(l?u:this,o)}}function he(e){return Pe(e)||Ee(e)}function fe(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}var de=String;function me(e){return e&&e.length?e[0]:_}function ye(e,t,n){for(var r=e?e.length:0,i=((n="number"==typeof n?n<0?I(r+n,0):n:0)||0)-1,o=t==t;++i<r;){var s=e[i];if(o?s===t:s!=s)return i}return-1}function ge(e){var t=L(e);return t.__chain__=!0,t}var ve,be=(ve=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=null==n?0:Ie(n);return i<0&&(i=I(r+i,0)),function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,te(t),i)},function(e,t,n){var r,i=Object(e);Te(e)||(r=te(t),e=We(e),t=function(e){return r(i[e],e,i)});var o=ve(e,t,n);return-1<o?i[r?e[o]:o]:_});function _e(e,t){return G(e,te(t))}function we(e,t,n){return r=e,i=te(t),o=n,s=arguments.length<3,G(r,function(e,t,n){o=s?(s=!1,e):i(o,e,t,n)}),o;var r,i,o,s}function Ae(e,t){var n;if("function"!=typeof t)throw new TypeError(i);return e=Ie(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=_),n}}var Se=oe(function(e,t,n){return pe(e,33,t,n)}),Ce=oe(function(e,t){return H(e,1,t)}),ke=oe(function(e,t,n){return H(e,Le(t)||0,n)});function xe(e,t){return e===t||e!=e&&t!=t}function Ee(e){return De(t=e)&&Te(t)&&F.call(e,"callee")&&(!j.call(e,"callee")||D.call(e)==S);var t}var Pe=Array.isArray;function Te(e){return null!=e&&("number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=n)&&!Me(e);var t}function Oe(e){return De(e)&&D.call(e)==x}function Me(e){var t=Fe(e)?D.call(e):"";return t==r||t==o}function Fe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function De(e){return!!e&&"object"==typeof e}function je(e){return"number"==typeof e||De(e)&&D.call(e)==P}function Re(e){return Fe(e)&&D.call(e)==O}function Ue(e){return"string"==typeof e||!Pe(e)&&De(e)&&D.call(e)==M}var Ie=Number,Le=Number;function Ne(e){return"string"==typeof e?e:null==e?"":e+""}var Be=le(function(e,t){ce(t,U(t),e)}),ze=le(function(e,t){ce(t,fe(t),e)}),He=le(function(e,t,n,r){ce(t,Ge(t),e,r)});var qe=oe(function(e){return e.push(_,B),He.apply(_,e)});var We=U,Ge=fe,Ye=oe(function(e,t){return null==e?{}:(n=e,r=re(X(t,1),de),n=Object(n),we(r,function(e,t){return t in n&&(e[t]=n[t]),e},{}));var n,r});function Ve(e){return e?re(We(t=e),function(e){return t[e]}):[];var t}function Xe(e){return e}var $e=te;function Ke(r,t,e){var n=We(t),i=Z(t,n);null!=e||Fe(t)&&(i.length||!n.length)||(e=t,t=r,r=this,i=Z(t,We(t)));var o=!(Fe(e)&&"chain"in e&&!e.chain),s=Me(r);return G(i,function(e){var n=t[e];r[e]=n,s&&(r.prototype[e]=function(){var e=this.__chain__;if(o||e){var t=r(this.__wrapped__);return(t.__actions__=ae(this.__actions__)).push({func:n,args:arguments,thisArg:r}),t.__chain__=e,t}return n.apply(r,u([this.value()],arguments))})}),r}function Je(e,t){var n=(n=L.iteratee||$e)===$e?te:n;return arguments.length?n(e,t):n}function Ze(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}var Qe,et,tt,nt=(Qe=function(e,t,n){var r,i,o;F.call(e,n)?e[n].push(t):(r=e,o=[t],"__proto__"==(i=n)&&defineProperty?defineProperty(r,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[i]=o)},function(e,t){var n=Pe(e)?Ze:baseAggregator,r=et?et():{};return n(e,Qe,Je(t,2),r)});L.assignIn=ze,L.before=Ae,L.bind=Se,L.chain=ge,L.compact=function(e){return V(e,Boolean)},L.concat=function(){for(var e=arguments.length,t=Array(e?e-1:0),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return e?u(Pe(n)?ae(n):[n],X(t,1)):[]},L.create=function(e,t){var n=z(e);return t?Be(n,t):n},L.defaults=qe,L.defer=Ce,L.delay=ke,L.filter=function(e,t){return V(e,te(t))},L.flatten=function(e){return(e?e.length:0)?X(e,1):[]},L.flattenDeep=function(e){return(e?e.length:0)?X(e,1/0):[]},L.iteratee=$e,L.keys=We,L.map=function(e,t){return re(e,te(t))},L.matches=function(e){return ie(Be({},e))},L.mixin=Ke,L.negate=function(t){if("function"!=typeof t)throw new TypeError(i);return function(){var e=arguments;return!t.apply(this,e)}},L.once=function(e){return Ae(2,e)},L.pick=Ye,L.slice=function(e,t,n){var r=e?e.length:0;return t=null==t?0:+t,n=n===_?r:+n,r?se(e,t,n):[]},L.sortBy=function(e,r){var i=0;return r=te(r),re(re(e,function(e,t,n){return{value:e,index:i++,criteria:r(e,t,n)}}).sort(function(e,t){return function(e,t){if(e!==t){var n=e!==_,r=null===e,i=e==e,o=t!==_,s=null===t,a=t==t;if(!s&&t<e||r&&o&&a||!n&&a||!i)return 1;if(!r&&e<t||s&&n&&i||!o&&i||!a)return-1}return 0}(e.criteria,t.criteria)||e.index-t.index}),c("value"))},L.tap=function(e,t){return t(e),e},L.thru=function(e,t){return t(e)},L.toArray=function(e){return Te(e)?e.length?ae(e):[]:Ve(e)},L.values=Ve,L.groupBy=nt,L.forIn=function(e,t){return null==e?e:K(e,Je(t,3),Ge)},L.extend=ze,Ke(L,L),L.clone=function(e){return Fe(e)?Pe(e)?ae(e):ce(e,U(e)):e},L.escape=function(e){return(e=Ne(e))&&s.test(e)?e.replace(t,p):e},L.every=function(e,t,n){return r=e,i=te(t=n?_:t),o=!0,G(r,function(e,t,n){return o=!!i(e,t,n)}),o;var r,i,o},L.find=be,L.forEach=_e,L.has=function(e,t){return null!=e&&F.call(e,t)},L.head=me,L.identity=Xe,L.indexOf=ye,L.isArguments=Ee,L.isArray=Pe,L.isBoolean=function(e){return!0===e||!1===e||De(e)&&D.call(e)==k},L.isDate=Oe,L.isEmpty=function(e){return Te(e)&&(Pe(e)||Ue(e)||Me(e.splice)||Ee(e))?!e.length:!U(e).length},L.isEqual=function(e,t){return ee(e,t)},L.isFinite=function(e){return"number"==typeof e&&R(e)},L.isFunction=Me,L.isNaN=function(e){return je(e)&&e!=+e},L.isNull=function(e){return null===e},L.isNumber=je,L.isObject=Fe,L.isRegExp=Re,L.isString=Ue,L.isUndefined=function(e){return e===_},L.last=function(e){var t=e?e.length:0;return t?e[t-1]:_},L.max=function(e){return e&&e.length?Y(e,Xe,Q):_},L.min=function(e){return e&&e.length?Y(e,Xe,ne):_},L.noConflict=function(){return h._===this&&(h._=v),this},L.noop=function(){},L.reduce=we,L.result=function(e,t,n){var r=null==e?_:e[t];return r===_&&(r=n),Me(r)?r.call(e):r},L.size=function(e){return null==e?0:(e=Te(e)?e:U(e)).length},L.some=function(e,t,n){return ue(e,te(t=n?_:t))},L.uniqueId=function(e){var t=++g;return Ne(e)+t},L.each=_e,L.first=me,Ke(L,(tt={},J(L,function(e,t){F.call(L.prototype,t)||(tt[t]=e)}),tt),{chain:!1}),L.VERSION="4.14.2",G(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?String.prototype:m)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(e);L.prototype[e]=function(){var t=arguments;if(!i||this.__chain__)return this[r](function(e){return n.apply(Pe(e)?e:[],t)});var e=this.value();return n.apply(Pe(e)?e:[],t)}}),L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=function(){return e=this.__wrapped__,we(this.__actions__,function(e,t){return t.func.apply(t.thisArg,u([e],t.args))},e);var e},rt._=L}).call(this)}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._,e.Promise;e.Backbone=function(e,d,t){var n=Array.prototype.slice;e.VERSION="1.3.3",e.$=t;var r=e.Events={},a=/\s+/,u=function(e,t,n,r,i){var o=0,s;if(n&&typeof n==="object"){if(r!==void 0&&"context"in i&&i.context===void 0)i.context=r;for(s=d.keys(n);o<s.length;o++){t=u(e,t,s[o],n[s[o]],i)}}else if(n&&a.test(n)){for(s=n.split(a);o<s.length;o++){t=e(t,s[o],r,i)}}else{t=e(t,n,r,i)}return t};r.on=function(e,t,n){return c(this,e,t,n)};var c=function(e,t,n,r,i){e._events=u(s,e._events||{},t,n,{context:r,ctx:e,listening:i});if(i){var o=e._listeners||(e._listeners={});o[i.id]=i}return e};r.listenTo=function(e,t,n){if(!e)return this;var r=e._listenId||(e._listenId=d.uniqueId("l"));var i=this._listeningTo||(this._listeningTo={});var o=i[r];if(!o){var s=this._listenId||(this._listenId=d.uniqueId("l"));o=i[r]={obj:e,objId:r,id:s,listeningTo:i,count:0}}c(e,t,n,this,o);return this};var s=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]);var o=r.context,s=r.ctx,a=r.listening;if(a)a.count++;i.push({callback:n,context:o,ctx:o||s,listening:a})}return e};r.off=function(e,t,n){if(!this._events)return this;this._events=u(i,this._events,e,t,{context:n,listeners:this._listeners});return this},r.stopListening=function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=e?[e._listenId]:d.keys(r);for(var o=0;o<i.length;o++){var s=r[i[o]];if(!s)break;s.obj.off(t,n,this)}return this};var i=function(e,t,n,r){if(!e)return;var i=0,o;var s=r.context,a=r.listeners;if(!t&&!n&&!s){var u=d.keys(a);for(;i<u.length;i++){o=a[u[i]];delete a[o.id];delete o.listeningTo[o.objId]}return}var c=t?[t]:d.keys(e);for(;i<c.length;i++){t=c[i];var l=e[t];if(!l)break;var p=[];for(var h=0;h<l.length;h++){var f=l[h];if(n&&n!==f.callback&&n!==f.callback._callback||s&&s!==f.context){p.push(f)}else{o=f.listening;if(o&&--o.count===0){delete a[o.id];delete o.listeningTo[o.objId]}}}if(p.length){e[t]=p}else{delete e[t]}}return e};r.once=function(e,t,n){var r=u(o,{},e,t,d.bind(this.off,this));if(typeof e==="string"&&n==null)t=void 0;return this.on(r,t,n)},r.listenToOnce=function(e,t,n){var r=u(o,{},t,n,d.bind(this.stopListening,this,e));return this.listenTo(e,r)};var o=function(e,t,n,r){if(n){var i=e[t]=d.once(function(){r(t,i);n.apply(this,arguments)});i._callback=n}return e};r.trigger=function(e){if(!this._events)return this;var t=Math.max(0,arguments.length-1);var n=Array(t);for(var r=0;r<t;r++)n[r]=arguments[r+1];u(l,this._events,e,void 0,n);return this};var l=function(e,t,n,r){if(e){var i=e[t];var o=e.all;if(i&&o)o=o.slice();if(i)p(i,r);if(o)p(o,[t].concat(r))}return e},p=function(e,t){var n,r=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,o);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,o,s);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,o,s,a);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}};return r.bind=r.on,r.unbind=r.off,d.extend(e,r),e}({},e._,e.$)}((window,document,window.Mango=window.Mango||{})),function(e,t){"use strict";var n,s,r;t.$,t._,t.Promise;function i(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var o=function(e,t,n){return 1===arguments.length?o.get(e):o.set(e,t,n)};o._document=e.document,o._cacheKeyPrefix="cookey.",o._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC");var t="http:"!==location.protocol;return o.defaults={path:"/",secure:t,samesite:t?"None":"Lax"},o.get=function(e){o._cachedDocumentCookie!==o._document.cookie&&o._renewCache();var t=o._cache[o._cacheKeyPrefix+e];return t===s?s:decodeURIComponent(t)},o.set=function(e,t,n){return(n=o._getExtendedOptions(n)).expires=o._getExpiresDate(t===s?-1:n.expires),o._document.cookie=o._generateCookieString(e,t,n),o},o.expire=function(e,t){return o.set(e,s,t)},o._getExtendedOptions=function(e){return{path:e&&e.path||o.defaults.path,domain:e&&e.domain||o.defaults.domain,expires:e&&e.expires||o.defaults.expires,secure:e&&e.secure!==s?e.secure:o.defaults.secure,samesite:e&&e.samesite||o.defaults.samesite}},o._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},o._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?o._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!o._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},o._generateCookieString=function(e,t,n){var r=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return r+=(n=n||{}).path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toUTCString():"",r+=n.secure?";secure":"",r+=n.samesite?";samesite="+n.samesite:""},o._getCacheFromString=function(e){for(var t={},n=e?e.split("; "):[],r=0;r<n.length;r++){var i=o._getKeyValuePairFromCookieString(n[r]);t[o._cacheKeyPrefix+i.key]===s&&(t[o._cacheKeyPrefix+i.key]=i.value)}return t},o._getKeyValuePairFromCookieString=function(e){var t,n=(n=e.indexOf("="))<0?e.length:n,r=e.substr(0,n);try{t=decodeURIComponent(r)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+r+'"',e)}return{key:t,value:e.substr(n+1)}},o._renewCache=function(){o._cache=o._getCacheFromString(o._document.cookie),o._cachedDocumentCookie=o._document.cookie},o._areEnabled=function(){var e="cookies.js",t="1"===o.set(e,1).get(e);return o.expire(e),t},o.enabled=o._areEnabled(),o}r="object"==typeof(n=void 0===e?this:e).document?i(n):i,t.Cookies=r}(window,(document,window.Mango=window.Mango||{})),function(J){"use strict";(function(h){function f(e){if(null===e||e===h)throw new TypeError("Cannot call method on "+e);return Object(e)}function i(e){if("[object Window]"===E.call(e))try{return O(e)}catch(e){return P.call([],T)}return O(e)}function o(t,e,n){if(!k.call(t,v))try{R(t,v,{enumerable:!1,configurable:!1,writable:!1,value:{}})}catch(e){t[v]={}}t[v]["@@"+e]=n}function e(){}function t(e){return e!=v&&!k.call(N,e)}function s(e){return e!=v&&k.call(N,e)}function n(t){var n={enumerable:!1,configurable:!0,get:e,set:function(e){p(this,t,{enumerable:!1,configurable:!0,writable:!0,value:e}),o(this,t,!0)}};try{R(C,t,n)}catch(e){C[t]=n.value}return j(N[t]=R(c(t),"constructor",B))}function r(e){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return n(y.concat(e||"",m,++d))}function a(e){return N[e]}function u(e){return i(e).filter(e===C?(t=e,function(e){return k.call(t,v)&&k.call(t[v],"@@"+e)}):s).map(a);var t}var c,l,p,d,m,y,g,v,b,_,w,A,S,C,k,x,E,P,T,O,M,F,D,j,R,U,I,L,N,B,z,H,q,W,G,Y;function V(e){if(q[e])return q[e].exports;var t=q[e]={exports:{},id:e,loaded:!1};return H[e].call(t.exports,t,t.exports,V),t.loaded=!0,t.exports}function X(e){this.name="__st"+(1e9*Math.random()>>>0)+Y+++"__",e&&e.forEach&&e.forEach(function(e){this.set.apply(this,e)},this)}J.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"assign"in Object||Object.defineProperty(Object,"assign",{value:function(e,t){var n=f(e);if(1===arguments.length)return n;for(var r,i=Array.prototype.slice.call(arguments,1),o=0;o<i.length;o++)for(var s=i[o],a=s===h||null===s?[]:(r=f(s),Object.keys(r)),u=0;u<a.length;u++){var c,l=a[u],p=Object.getOwnPropertyDescriptor(r,l);p!==h&&p.enumerable&&(c=r[l],n[l]=c)}return n}}),"isNaN"in Number||(Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)}),"Symbol"in this||(c=Object,l=this,d=0,m=""+Math.random(),g=(y="__symbol:").length,v="__symbol@@"+m,b="defineProperty",_="defineProperties",w="getOwnPropertyNames",A="getOwnPropertyDescriptor",S="propertyIsEnumerable",C=c.prototype,k=C.hasOwnProperty,x=C[S],E=C.toString,P=Array.prototype.concat,T="object"==typeof J?c.getOwnPropertyNames(J):[],O=c[w],M=c[A],F=c.create,D=c.keys,j=c.freeze||c,R=c[b],U=c[_],I=M(c,w),L=function(e){var t=""+e;return s(t)?k.call(this,t)&&this[v]["@@"+t]:x.call(this,e)},N=F(null),B={value:r},z=function(e,t,n){var r,i=""+t;return s(i)?(p(e,i,n.enumerable?((r=F(n)).enumerable=!1,r):n),o(e,i,!!n.enumerable)):R(e,t,n),e},I.value=z,R(c,b,I),I.value=u,R(c,"getOwnPropertySymbols",I),I.value=function(e){return i(e).filter(t)},R(c,w,I),I.value=function(t,n){var e=u(n);return e.length?D(n).concat(e).forEach(function(e){L.call(n,e)&&z(t,e,n[e])}):U(t,n),t},R(c,_,I),I.value=L,R(C,S,I),I.value=r,R(l,"Symbol",I),I.value=function(e){var t=y.concat(y,e,m);return t in C?N[t]:n(t)},R(r,"for",I),I.value=function(e){if(t(e))throw new TypeError(e+" is not a symbol");return k.call(N,e)?e.slice(2*g,-m.length):void 0},R(r,"keyFor",I),I.value=function(e,t){var n=M(e,t);return n&&s(t)&&(n.enumerable=L.call(e,t)),n},R(c,A,I),I.value=function(e,t){return 1===arguments.length||void 0===t?F(e):(n=t,r=F(e),i(n).forEach(function(e){L.call(n,e)&&z(r,e,n[e])}),r);var n,r},R(c,"create",I),I.value=function(){var e=E.call(this);return"[object String]"===e&&s(this)?"[object Symbol]":e},R(C,"toString",I),p=function(e,t,n){var r=M(C,t);delete C[t],R(e,t,n),e!==C&&R(C,t,r)}),!1 in this&&(q={},V.m=H={0:function(e,t,n){(function(e){var t=n(80);try{(e||{}).Promise=t,J.Promise=t}catch(e){}}).call(t,function(){return this}())},80:function(K,e){(function($){!function(){function r(){return Y[U][I]||"Symbol(species)"}function i(e){return e&&"object"==typeof e}function u(e){return"function"==typeof e}function c(e,t){return e instanceof t}function t(e,t,n){if(!t(e))throw p(n)}function n(){try{return S.apply(C,arguments)}catch(e){return W.e=e,W}}function l(e,t){return S=e,C=t,n}function e(t,n){function r(){for(var e=0;e<o;)n(i[e],i[e+1]),i[e++]=A,i[e++]=A;o=0,i.length>t&&(i.length=t)}var i=M(t),o=0;return function(e,t){i[o++]=e,i[o++]=t,2===o&&Y.nextTick(r)}}function a(e,t){var n,r,i,o,s=0;if(!e)throw p(B);var a=e[Y[U].iterator];if(u(a))r=a.call(e);else{if(!u(e.next)){if(c(e,M)){for(n=e.length;s<n;)t(e[s],s++);return s}throw p(B)}r=e}for(;!(i=r.next()).done;)if((o=l(t)(i.value,s++))===W)throw u(r.return)&&r.return(),o.e;return s}function p(e){return new TypeError(e)}function o(e){return(e?"":z)+(new F).stack}function s(e,t){var n="on"+e.toLowerCase(),r=E[n];P&&P.listeners(e).length?e===q?P.emit(e,t._v,t):P.emit(e,t):r?r({reason:t._v,promise:t}):Y[e](t._v,t)}function h(e){return e&&e._s}function f(e){return h(e)?new e(w):(n=new e(function(e,t){if(n)throw p();r=e,i=t}),t(r,u),t(i,u),n);var n,r,i}function d(t,n){return function(e){O&&(t[N]=o(!0)),n===j?v(t,e):g(t,n,e)}}function m(e,t){function n(e){return r.push(e.replace(/^\s+|\s+$/g,""))}var r=[];return O&&(t[N]&&n(t[N]),function e(t){t&&L in t&&(e(t._next),n(t[L]+""),e(t._p))}(t)),(e&&e.stack?e.stack:e)+("\n"+r.join("\n")).replace(G,"")}function y(e,t){return e(t)}function g(e,t,n){var r=0,i=e._c;if(e._s===R)for(e._s=t,e._v=n,t===D&&(O&&c(n,F)&&(n.longStack=m(n,e)),X(e));r<i;)V(e,e[r++]);return e}function v(e,t){if(t===e&&t)return g(e,D,p(H)),e;if(t!==k&&(u(t)||i(t))){var n=l(b)(t);if(n===W)return g(e,D,n.e),e;u(n)?(O&&h(t)&&(e._next=t),h(t)?_(e,t,n):Y.nextTick(function(){_(e,t,n)})):g(e,j,t)}else g(e,j,t);return e}function b(e){return e.then}function _(t,n,e){var r=l(e,n)(function(e){n&&(n=k,v(t,e))},function(e){n&&(n=k,g(t,D,e))});r===W&&n&&(g(t,D,r.e),n=k)}function w(){}var A,S,C,k=null,x="object"==typeof J,E=x?J:$,P=E.process,T=E.console,O=!1,M=Array,F=Error,D=1,j=2,R=3,U="Symbol",I="species",L="_pt",N="_st",B="Invalid argument",z="\nFrom previous ",H="Chaining cycle detected for promise",q="unhandledRejection",W={e:k},G=/^.+\/node_modules\/yaku\/.+\n?/gm,Y=K.exports=function(e){var t;if(!i(this)||this._s!==A)throw p("Invalid this");if(this._s=R,O&&(this[L]=o()),e!==w){if(!u(e))throw p(B);(t=l(e)(d(this,j),d(this,D)))===W&&g(this,D,t.e)}};(function(e,t){for(var n in t)e[n]=t[n]})((Y.default=Y).prototype,{then:function(e,t){if(void 0===this._s)throw p();return n=this,r=f(Y.speciesConstructor(this,Y)),o=t,u(i=e)&&(r._onFulfilled=i),u(o)&&(n._uh&&s("rejectionHandled",n),r._onRejected=o),O&&(r._p=n),n[n._c++]=r,n._s!==R&&V(n,r),r;var n,r,i,o},catch:function(e){return this.then(A,e)},finally:function(t){function e(e){return Y.resolve(t()).then(function(){return e})}return this.then(e,e)},_c:0,_p:k}),Y.resolve=function(e){return h(e)?e:v(f(this),e)},Y.reject=function(e){return g(f(this),D,e)},Y.race=function(e){function t(e){g(i,j,e)}function n(e){g(i,D,e)}var r=this,i=f(r),o=l(a)(e,function(e){r.resolve(e).then(t,n)});return o===W?r.reject(o.e):i},Y.all=function(e){function n(e){g(i,D,e)}var r=this,i=f(r),o=[],s=l(a)(e,function(e,t){r.resolve(e).then(function(e){o[t]=e,--s||g(i,j,o)},n)});return s===W?r.reject(s.e):(s||g(i,j,[]),i)},Y.Symbol=E[U]||{},l(function(){Object.defineProperty(Y,r(),{get:function(){return this}})})(),Y.speciesConstructor=function(e,t){var n=e.constructor;return n&&n[r()]||t},Y.unhandledRejection=function(e,t){T&&T.error("Uncaught (in promise)",O?t.longStack:m(e,t))},Y.rejectionHandled=w,Y.enableLongStackTrace=function(){O=!0},Y.nextTick=x?function(e){setTimeout(e)}:P.nextTick,Y._s=1;var V=e(999,function(e,t){var n,r=e._s!==D?t._onFulfilled:t._onRejected;return r===A?void g(t,e._s,e._v):(n=l(y)(r,e._v))===W?void g(t,D,n.e):void v(t,n)}),X=e(9,function(e){!function e(t){if(t._umark)return 1;t._umark=!0;for(var n,r=0,i=t._c;r<i;)if((n=t[r++])._onRejected||e(n))return 1}(e)&&(e._uh=1,s(q,e))})}()}).call(e,function(){return this}())}},V.c=q,V.p="",V(0)),"Map"in this&&function(){try{return 2===new Map([[1,1],[2,2]]).size}catch(e){return}}()||function(i){var r,o=Symbol("undef"),t=Symbol("NaN");function s(e){return Number.isNaN(e)?t:e}function n(e){return e===t?NaN:e}function a(e,t){var n=0,r=!1;return{next:function(){if(e.size&&n!==e._keys.length||(r=!0),r)return{value:void 0,done:!0};for(;n<=e._keys.length&&e._keys[n]===o;)n++;return e.size&&n!==e._keys.length?{value:t.call(e,n++),done:!1}:{value:void 0,done:!0}}}}function u(e,t){return"function"==typeof e[t]}function c(){if(!(this instanceof c))throw new TypeError('Constructor Map requires "new"');var e=arguments[0];Object.defineProperty(this,"_keys",{configurable:!0,enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_values",{configurable:!0,enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_size",{configurable:!0,enumerable:!1,writable:!0,value:0});try{Object.defineProperty(c.prototype,"size",{configurable:!0,enumerable:!1,get:function(){return this._size},set:h}),Object.defineProperty(this,"size",{configurable:!0,enumerable:!1,get:function(){return this._size},set:h}),r=!0}catch(e){r=!1,Object.defineProperty(this,"size",{configurable:!0,enumerable:!1,writable:!0,value:0})}e&&u(e,"forEach")&&(e instanceof c||u(e,"clear")&&u(e,"delete")&&u(e,"entries")&&u(e,"forEach")&&u(e,"get")&&u(e,"has")&&u(e,"keys")&&u(e,"set")&&u(e,"values")?e.forEach(function(e,t){this.set.apply(this,[t,e])},this):e.forEach(function(e){this.set.apply(this,e)},this))}Object.defineProperty(c,"prototype",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(c.prototype,"get",{configurable:!0,enumerable:!1,writable:!0,value:function(e){var t=this._keys.indexOf(s(e));return-1!==t?this._values[t]:h}}),Object.defineProperty(c.prototype,"set",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){var n=this._keys.indexOf(s(e));return-1!==n?this._values[n]=t:(this._keys.push(s(e)),this._values.push(t),++this._size,r||(this.size=this._size)),this}}),Object.defineProperty(c.prototype,"has",{configurable:!0,enumerable:!1,writable:!0,value:function(e){return-1!==this._keys.indexOf(s(e))}}),Object.defineProperty(c.prototype,"delete",{configurable:!0,enumerable:!1,writable:!0,value:function(e){var t=this._keys.indexOf(s(e));return-1!==t&&(this._keys[t]=o,this._values[t]=o,--this._size,r||(this.size=this._size),!0)}}),Object.defineProperty(c.prototype,"clear",{configurable:!0,enumerable:!1,writable:!0,value:function(){this._keys=[],this._values=[],this._size=0,r||(this.size=this._size)}}),Object.defineProperty(c.prototype,"values",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=a(this,function(e){return this._values[e]});return e[Symbol.iterator]=this.values.bind(this),e}}),Object.defineProperty(c.prototype,"keys",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=a(this,function(e){return n(this._keys[e])});return e[Symbol.iterator]=this.keys.bind(this),e}});function e(){var e=a(this,function(e){return[n(this._keys[e]),this._values[e]]});return e[Symbol.iterator]=this.entries.bind(this),e}Object.defineProperty(c.prototype,Symbol.iterator,{configurable:!0,enumerable:!1,writable:!0,value:e}),Object.defineProperty(c.prototype,"entries",{configurable:!0,enumerable:!1,writable:!0,value:e}),Object.defineProperty(c.prototype,"forEach",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){t=t||i;for(var n=this.entries(),r=n.next();!1===r.done;)e.call(t,r.value[1],r.value[0],this),r=n.next()}}),Object.defineProperty(c.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:c});try{Object.defineProperty(c,Symbol.species,{configurable:!0,enumerable:!1,get:function(){return c}})}catch(e){}"name"in c||Object.defineProperty(c,"name",{configurable:!0,enumerable:!1,writable:!1,value:"Map"});try{Object.defineProperty(i,"Map",{configurable:!0,enumerable:!1,writable:!0,value:c})}catch(e){Object.defineProperty(i,"Map",{configurable:!0,enumerable:!0,writable:!0,value:c})}}(this),function(e){if("WeakMap"in e){var t={};return"test"===new WeakMap([[t,"test"]]).get(t)}}(this)||(W=this,G=Object.defineProperty,Y=Date.now()%1e9,X.prototype.set=function(e,t){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid value used as weak map key");var n=e[this.name];return n&&n[0]===e?n[1]=t:G(e,this.name,{value:[e,t],writable:!0}),this},X.prototype.get=function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:h},X.prototype.delete=function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=h,!0)},X.prototype.has=function(e){var t=e[this.name];return!!t&&t[0]===e},(X.prototype.constructor=X).name="WeakMap",W.WeakMap=X),"Set"in this&&2===new Set([1,2]).size||function(i){var r=Symbol("undef"),t=Symbol("NaN");function n(e){return Number.isNaN(e)?t:e}function o(e){return e===t?NaN:e}function s(e,t){var n=0;return{next:function(){for(;e._values[n]===r;)n++;return n===e._values.length?{value:void 0,done:!0}:{value:t.call(e,n++),done:!1}}}}function e(e){var t=e;this._values=[],this.size=this._size=0,t&&"function"==typeof t.forEach&&t.forEach(function(e){this.add.call(this,e)},this)}try{Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e}})}catch(e){}e.prototype.add=function(e){return e=n(e),-1===this._values.indexOf(e)&&(this._values.push(e),this.size=++this._size),this},e.prototype.has=function(e){return-1!==this._values.indexOf(n(e))},e.prototype.delete=function(e){var t=this._values.indexOf(n(e));return-1!==t&&(this._values[t]=r,this.size=--this._size,!0)},e.prototype.clear=function(){this._values=[],this.size=this._size=0},e.prototype[Symbol.iterator]=e.prototype.values=e.prototype.keys=function(){var e=s(this,function(e){return o(this._values[e])});return e[Symbol.iterator]=this.keys.bind(this),e},e.prototype.entries=function(){var e=s(this,function(e){return[o(this._values[e]),o(this._values[e])]});return e[Symbol.iterator]=this.entries.bind(this),e},e.prototype.forEach=function(e,t){t=t||i;for(var n=this.entries(),r=n.next();!1===r.done;)e.call(t,r.value[1],r.value[0],this),r=n.next()},(e.prototype.constructor=e.prototype.constructor=e.prototype[Symbol.species]=e).name="Set",i.Set=e}(this)}).call("object"==typeof J&&J||"object"==typeof self&&self||"object"==typeof global&&global||{})}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";e.Mango.moment=function(){"use strict";var t,e;function c(){return t.apply(null,arguments)}function n(e){t=e}function s(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function a(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function u(e){var t;for(t in e){return false}return true}function o(e){return e===void 0}function l(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function r(e,t){var n=[],r;for(r=0;r<e.length;++r){n.push(t(e[r],r))}return n}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){for(var n in t){if(p(t,n)){e[n]=t[n]}}if(p(t,"toString")){e.toString=t.toString}if(p(t,"valueOf")){e.valueOf=t.valueOf}return e}function f(e,t,n,r){return zn(e,t,n,r,true).utc()}function d(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function m(e){if(e._pf==null){e._pf=d()}return e._pf}if(Array.prototype.some){e=Array.prototype.some}else{e=function(e){var t=Object(this);var n=t.length>>>0;for(var r=0;r<n;r++){if(r in t&&e.call(this,t[r],r,t)){return true}}return false}}var y=e;function g(e){if(e._isValid==null){var t=m(e);var n=y.call(t.parsedDateParts,function(e){return e!=null});var r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict){r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=r}else{return r}}return e._isValid}function v(e){var t=f(NaN);if(e!=null){h(m(t),e)}else{m(t).userInvalidated=true}return t}var b=c.momentProperties=[];function _(e,t){var n,r,i;if(!o(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!o(t._i)){e._i=t._i}if(!o(t._f)){e._f=t._f}if(!o(t._l)){e._l=t._l}if(!o(t._strict)){e._strict=t._strict}if(!o(t._tzm)){e._tzm=t._tzm}if(!o(t._isUTC)){e._isUTC=t._isUTC}if(!o(t._offset)){e._offset=t._offset}if(!o(t._pf)){e._pf=m(t)}if(!o(t._locale)){e._locale=t._locale}if(b.length>0){for(n=0;n<b.length;n++){r=b[n];i=t[r];if(!o(i)){e[r]=i}}}return e}var w=false;function A(e){_(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(w===false){w=true;c.updateOffset(this);w=false}}function S(e){return e instanceof A||e!=null&&e._isAMomentObject!=null}function C(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function k(e){var t=+e,n=0;if(t!==0&&isFinite(t)){n=C(t)}return n}function x(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0,s;for(s=0;s<r;s++){if(n&&e[s]!==t[s]||!n&&k(e[s])!==k(t[s])){o++}}return o+i}function E(e){if(c.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function P(i,o){var s=true;return h(function(){if(c.deprecationHandler!=null){c.deprecationHandler(null,i)}if(s){var e=[];var t;for(var n=0;n<arguments.length;n++){t="";if(typeof arguments[n]==="object"){t+="\n["+n+"] ";for(var r in arguments[0]){t+=r+": "+arguments[0][r]+", "}t=t.slice(0,-2)}else{t=arguments[n]}e.push(t)}E(i+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack);s=false}return o.apply(this,arguments)},o)}var T={},O;function M(e,t){if(c.deprecationHandler!=null){c.deprecationHandler(e,t)}if(!T[e]){E(t);T[e]=true}}function F(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function D(e){var t,n;for(n in e){t=e[n];if(F(t)){this[n]=t}else{this["_"+n]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function j(e,t){var n=h({},e),r;for(r in t){if(p(t,r)){if(a(e[r])&&a(t[r])){n[r]={};h(n[r],e[r]);h(n[r],t[r])}else if(t[r]!=null){n[r]=t[r]}else{delete n[r]}}}for(r in e){if(p(e,r)&&!p(t,r)&&a(e[r])){n[r]=h({},n[r])}}return n}function R(e){if(e!=null){this.set(e)}}if(c.suppressDeprecationWarnings=false,c.deprecationHandler=null,Object.keys){O=Object.keys}else{O=function(e){var t,n=[];for(t in e){if(p(e,t)){n.push(t)}}return n}}var U=O,I={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,n){var r=this._calendar[e]||this._calendar["sameElse"];return F(r)?r.call(t,n):r}var N={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function B(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(t||!n){return t}this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var z="Invalid date";function H(){return this._invalidDate}var q="%d",W=/\d{1,2}/;function G(e){return this._ordinal.replace("%d",e)}var Y={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function V(e,t,n,r){var i=this._relativeTime[n];return F(i)?i(e,t,n,r):i.replace(/%d/i,e)}function X(e,t){var n=this._relativeTime[e>0?"future":"past"];return F(n)?n(t):n.replace(/%s/i,t)}var $={};function K(e,t){var n=e.toLowerCase();$[n]=$[n+"s"]=$[t]=e}function J(e){return typeof e==="string"?$[e]||$[e.toLowerCase()]:undefined}function Z(e){var t={},n,r;for(r in e){if(p(e,r)){n=J(r);if(n){t[n]=e[r]}}}return t}var Q={};function ee(e,t){Q[e]=t}function te(e){var t=[];for(var n in e){t.push({unit:n,priority:Q[n]})}t.sort(function(e,t){return e.priority-t.priority});return t}function ne(t,n){return function(e){if(e!=null){ie(this,t,e);c.updateOffset(this,n);return this}else{return re(this,t)}}}function re(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function ie(e,t,n){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](n)}}function oe(e){e=J(e);if(F(this[e])){return this[e]()}return this}function se(e,t){if(typeof e==="object"){e=Z(e);var n=te(e);for(var r=0;r<n.length;r++){this[n[r].unit](e[n[r].unit])}}else{e=J(e);if(F(this[e])){return this[e](t)}}return this}function ae(e,t,n){var r=""+Math.abs(e),i=t-r.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var ue=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ce=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,le={},pe={};function he(e,t,n,r){var i=r;if(typeof r==="string"){i=function(){return this[r]()}}if(e){pe[e]=i}if(t){pe[t[0]]=function(){return ae(i.apply(this,arguments),t[1],t[2])}}if(n){pe[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)}}}function fe(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function de(r){var i=r.match(ue),e,o;for(e=0,o=i.length;e<o;e++){if(pe[i[e]]){i[e]=pe[i[e]]}else{i[e]=fe(i[e])}}return function(e){var t="",n;for(n=0;n<o;n++){t+=F(i[n])?i[n].call(e,r):i[n]}return t}}function me(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=ye(t,e.localeData());le[t]=le[t]||de(t);return le[t](e)}function ye(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}ce.lastIndex=0;while(n>=0&&ce.test(e)){e=e.replace(ce,r);ce.lastIndex=0;n-=1}return e}var ge=/\d/,ve=/\d\d/,be=/\d{3}/,_e=/\d{4}/,we=/[+-]?\d{6}/,Ae=/\d\d?/,Se=/\d\d\d\d?/,Ce=/\d\d\d\d\d\d?/,ke=/\d{1,3}/,xe=/\d{1,4}/,Ee=/[+-]?\d{1,6}/,Pe=/\d+/,Te=/[+-]?\d+/,Oe=/Z|[+-]\d\d:?\d\d/gi,Me=/Z|[+-]\d\d(?::?\d\d)?/gi,Fe=/[+-]?\d+(\.\d{1,3})?/,De=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,je={};function Re(e,n,r){je[e]=F(n)?n:function(e,t){return e&&r?r:n}}function Ue(e,t){if(!p(je,e)){return new RegExp(Ie(e))}return je[e](t._strict,t._locale)}function Ie(e){return Le(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function Le(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ne={};function Be(e,n){var t,r=n;if(typeof e==="string"){e=[e]}if(l(n)){r=function(e,t){t[n]=k(e)}}for(t=0;t<e.length;t++){Ne[e[t]]=r}}function ze(e,i){Be(e,function(e,t,n,r){n._w=n._w||{};i(e,n._w,n,r)})}function He(e,t,n){if(t!=null&&p(Ne,e)){Ne[e](t,n._a,n,e)}}var qe=0,We=1,Ge=2,Ye=3,Ve=4,Xe=5,$e=6,Ke=7,Je=8,Ze;if(Array.prototype.indexOf){Ze=Array.prototype.indexOf}else{Ze=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}var Qe=Ze;function et(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}he("M",["MM",2],"Mo",function(){return this.month()+1}),he("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),he("MMMM",0,0,function(e){return this.localeData().months(this,e)}),K("month","M"),ee("month",8),Re("M",Ae),Re("MM",Ae,ve),Re("MMM",function(e,t){return t.monthsShortRegex(e)}),Re("MMMM",function(e,t){return t.monthsRegex(e)}),Be(["M","MM"],function(e,t){t[We]=k(e)-1}),Be(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);if(i!=null){t[We]=i}else{m(n).invalidMonth=e}});var tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,nt="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function rt(e,t){if(!e){return s(this._months)?this._months:this._months["standalone"]}return s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tt).test(t)?"format":"standalone"][e.month()]}var it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function ot(e,t){if(!e){return s(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tt.test(t)?"format":"standalone"][e.month()]}function st(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(r=0;r<12;++r){o=f([2e3,r]);this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase();this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase()}}if(n){if(t==="MMM"){i=Qe.call(this._shortMonthsParse,s);return i!==-1?i:null}else{i=Qe.call(this._longMonthsParse,s);return i!==-1?i:null}}else{if(t==="MMM"){i=Qe.call(this._shortMonthsParse,s);if(i!==-1){return i}i=Qe.call(this._longMonthsParse,s);return i!==-1?i:null}else{i=Qe.call(this._longMonthsParse,s);if(i!==-1){return i}i=Qe.call(this._shortMonthsParse,s);return i!==-1?i:null}}}function at(e,t,n){var r,i,o;if(this._monthsParseExact){return st.call(this,e,t,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(r=0;r<12;r++){i=f([2e3,r]);if(n&&!this._longMonthsParse[r]){this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i");this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[r]){o="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[r]=new RegExp(o.replace(".",""),"i")}if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e)){return r}else if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e)){return r}else if(!n&&this._monthsParse[r].test(e)){return r}}}function ut(e,t){var n;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=k(t)}else{t=e.localeData().monthsParse(t);if(!l(t)){return e}}}n=Math.min(e.date(),et(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function ct(e){if(e!=null){ut(this,e);c.updateOffset(this,true);return this}else{return re(this,"Month")}}function lt(){return et(this.year(),this.month())}var pt=De;function ht(e){if(this._monthsParseExact){if(!p(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!p(this,"_monthsShortRegex")){this._monthsShortRegex=pt}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var ft=De;function dt(e){if(this._monthsParseExact){if(!p(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!p(this,"_monthsRegex")){this._monthsRegex=ft}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function mt(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,o;for(i=0;i<12;i++){o=f([2e3,i]);t.push(this.monthsShort(o,""));n.push(this.months(o,""));r.push(this.months(o,""));r.push(this.monthsShort(o,""))}t.sort(e);n.sort(e);r.sort(e);for(i=0;i<12;i++){t[i]=Le(t[i]);n[i]=Le(n[i])}for(i=0;i<24;i++){r[i]=Le(r[i])}this._monthsRegex=new RegExp("^("+r.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function yt(e){return gt(e)?366:365}function gt(e){return e%4===0&&e%100!==0||e%400===0}he("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),he(0,["YY",2],0,function(){return this.year()%100}),he(0,["YYYY",4],0,"year"),he(0,["YYYYY",5],0,"year"),he(0,["YYYYYY",6,true],0,"year"),K("year","y"),ee("year",1),Re("Y",Te),Re("YY",Ae,ve),Re("YYYY",xe,_e),Re("YYYYY",Ee,we),Re("YYYYYY",Ee,we),Be(["YYYYY","YYYYYY"],qe),Be("YYYY",function(e,t){t[qe]=e.length===2?c.parseTwoDigitYear(e):k(e)}),Be("YY",function(e,t){t[qe]=c.parseTwoDigitYear(e)}),Be("Y",function(e,t){t[qe]=parseInt(e,10)}),c.parseTwoDigitYear=function(e){return k(e)+(k(e)>68?1900:2e3)};var vt=ne("FullYear",true);function bt(){return gt(this.year())}function _t(e,t,n,r,i,o,s){var a=new Date(e,t,n,r,i,o,s);if(e<100&&e>=0&&isFinite(a.getFullYear())){a.setFullYear(e)}return a}function wt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function At(e,t,n){var r=7+t-n,i=(7+wt(e,0,r).getUTCDay()-t)%7;return-i+r-1}function St(e,t,n,r,i){var o=(7+n-r)%7,s=At(e,r,i),a=1+7*(t-1)+o+s,u,c;if(a<=0){u=e-1;c=yt(u)+a}else if(a>yt(e)){u=e+1;c=a-yt(e)}else{u=e;c=a}return{year:u,dayOfYear:c}}function Ct(e,t,n){var r=At(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,o,s;if(i<1){s=e.year()-1;o=i+kt(s,t,n)}else if(i>kt(e.year(),t,n)){o=i-kt(e.year(),t,n);s=e.year()+1}else{s=e.year();o=i}return{week:o,year:s}}function kt(e,t,n){var r=At(e,t,n),i=At(e+1,t,n);return(yt(e)-r+i)/7}function xt(e){return Ct(e,this._week.dow,this._week.doy).week}he("w",["ww",2],"wo","week"),he("W",["WW",2],"Wo","isoWeek"),K("week","w"),K("isoWeek","W"),ee("week",5),ee("isoWeek",5),Re("w",Ae),Re("ww",Ae,ve),Re("W",Ae),Re("WW",Ae,ve),ze(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=k(e)});var Et={dow:0,doy:6};function Pt(){return this._week.dow}function Tt(){return this._week.doy}function Ot(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Mt(e){var t=Ct(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function Ft(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Dt(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}he("d",0,"do","day"),he("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),he("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),he("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),he("e",0,0,"weekday"),he("E",0,0,"isoWeekday"),K("day","d"),K("weekday","e"),K("isoWeekday","E"),ee("day",11),ee("weekday",11),ee("isoWeekday",11),Re("d",Ae),Re("e",Ae),Re("E",Ae),Re("dd",function(e,t){return t.weekdaysMinRegex(e)}),Re("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Re("dddd",function(e,t){return t.weekdaysRegex(e)}),ze(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);if(i!=null){t.d=i}else{m(n).invalidWeekday=e}}),ze(["d","e","E"],function(e,t,n,r){t[r]=k(e)});var jt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Rt(e,t){if(!e){return s(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return s(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var Ut="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function It(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var Lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Nt(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Bt(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(r=0;r<7;++r){o=f([2e3,1]).day(r);this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase();this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase();this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase()}}if(n){if(t==="dddd"){i=Qe.call(this._weekdaysParse,s);return i!==-1?i:null}else if(t==="ddd"){i=Qe.call(this._shortWeekdaysParse,s);return i!==-1?i:null}else{i=Qe.call(this._minWeekdaysParse,s);return i!==-1?i:null}}else{if(t==="dddd"){i=Qe.call(this._weekdaysParse,s);if(i!==-1){return i}i=Qe.call(this._shortWeekdaysParse,s);if(i!==-1){return i}i=Qe.call(this._minWeekdaysParse,s);return i!==-1?i:null}else if(t==="ddd"){i=Qe.call(this._shortWeekdaysParse,s);if(i!==-1){return i}i=Qe.call(this._weekdaysParse,s);if(i!==-1){return i}i=Qe.call(this._minWeekdaysParse,s);return i!==-1?i:null}else{i=Qe.call(this._minWeekdaysParse,s);if(i!==-1){return i}i=Qe.call(this._weekdaysParse,s);if(i!==-1){return i}i=Qe.call(this._shortWeekdaysParse,s);return i!==-1?i:null}}}function zt(e,t,n){var r,i,o;if(this._weekdaysParseExact){return Bt.call(this,e,t,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(r=0;r<7;r++){i=f([2e3,1]).day(r);if(n&&!this._fullWeekdaysParse[r]){this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i");this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[r]){o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")}if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e)){return r}else if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e)){return r}else if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e)){return r}else if(!n&&this._weekdaysParse[r].test(e)){return r}}}function Ht(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=Ft(e,this.localeData());return this.add(e-t,"d")}else{return t}}function qt(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Wt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Dt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Gt=De;function Yt(e){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){Zt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!p(this,"_weekdaysRegex")){this._weekdaysRegex=Gt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Vt=De;function Xt(e){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){Zt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!p(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Vt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var $t=De,Kt;function Jt(e){if(this._weekdaysParseExact){if(!p(this,"_weekdaysRegex")){Zt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!p(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=$t}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Zt(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i=[],o,s,a,u,c;for(o=0;o<7;o++){s=f([2e3,1]).day(o);a=this.weekdaysMin(s,"");u=this.weekdaysShort(s,"");c=this.weekdays(s,"");t.push(a);n.push(u);r.push(c);i.push(a);i.push(u);i.push(c)}t.sort(e);n.sort(e);r.sort(e);i.sort(e);for(o=0;o<7;o++){n[o]=Le(n[o]);r[o]=Le(r[o]);i[o]=Le(i[o])}this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Qt(){return this.hours()%12||12}function en(){return this.hours()||24}function tn(e,t){he(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function nn(e,t){return t._meridiemParse}function rn(e){return(e+"").toLowerCase().charAt(0)==="p"}function on(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}}he("H",["HH",2],0,"hour"),he("h",["hh",2],0,Qt),he("k",["kk",2],0,en),he("hmm",0,0,function(){return""+Qt.apply(this)+ae(this.minutes(),2)}),he("hmmss",0,0,function(){return""+Qt.apply(this)+ae(this.minutes(),2)+ae(this.seconds(),2)}),he("Hmm",0,0,function(){return""+this.hours()+ae(this.minutes(),2)}),he("Hmmss",0,0,function(){return""+this.hours()+ae(this.minutes(),2)+ae(this.seconds(),2)}),tn("a",true),tn("A",false),K("hour","h"),ee("hour",13),Re("a",nn),Re("A",nn),Re("H",Ae),Re("h",Ae),Re("k",Ae),Re("HH",Ae,ve),Re("hh",Ae,ve),Re("kk",Ae,ve),Re("hmm",Se),Re("hmmss",Ce),Re("Hmm",Se),Re("Hmmss",Ce),Be(["H","HH"],Ye),Be(["k","kk"],function(e,t,n){var r=k(e);t[Ye]=r===24?0:r}),Be(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e);n._meridiem=e}),Be(["h","hh"],function(e,t,n){t[Ye]=k(e);m(n).bigHour=true}),Be("hmm",function(e,t,n){var r=e.length-2;t[Ye]=k(e.substr(0,r));t[Ve]=k(e.substr(r));m(n).bigHour=true}),Be("hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[Ye]=k(e.substr(0,r));t[Ve]=k(e.substr(r,2));t[Xe]=k(e.substr(i));m(n).bigHour=true}),Be("Hmm",function(e,t,n){var r=e.length-2;t[Ye]=k(e.substr(0,r));t[Ve]=k(e.substr(r))}),Be("Hmmss",function(e,t,n){var r=e.length-4;var i=e.length-2;t[Ye]=k(e.substr(0,r));t[Ve]=k(e.substr(r,2));t[Xe]=k(e.substr(i))});var sn=ne("Hours",true),an={calendar:I,longDateFormat:N,invalidDate:z,ordinal:q,dayOfMonthOrdinalParse:W,relativeTime:Y,months:nt,monthsShort:it,week:Et,weekdays:jt,weekdaysMin:Lt,weekdaysShort:Ut,meridiemParse:/[ap]\.?m?\.?/i},un={},cn={},ln;function pn(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){var t=0,n,r,i,o;while(t<e.length){o=pn(e[t]).split("-");n=o.length;r=pn(e[t+1]);r=r?r.split("-"):null;while(n>0){i=fn(o.slice(0,n).join("-"));if(i){return i}if(r&&r.length>=n&&x(o,r,true)>=n-1){break}n--}t++}return null}function fn(e){var t=null;if(!un[e]&&typeof module!=="undefined"&&module&&module.exports){try{t=ln._abbr;require("./locale/"+e);dn(t)}catch(e){}}return un[e]}function dn(e,t){var n;if(e){if(o(t)){n=gn(e)}else{n=mn(e,t)}if(n){ln=n}}return ln._abbr}function mn(e,t){if(t!==null){var n=an;t.abbr=e;if(un[e]!=null){M("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=un[e]._config}else if(t.parentLocale!=null){if(un[t.parentLocale]!=null){n=un[t.parentLocale]._config}else{if(!cn[t.parentLocale]){cn[t.parentLocale]=[]}cn[t.parentLocale].push({name:e,config:t});return null}}un[e]=new R(j(n,t));if(cn[e]){cn[e].forEach(function(e){mn(e.name,e.config)})}dn(e);return un[e]}else{delete un[e];return null}}function yn(e,t){if(null!=t){var n,r=an;null!=un[e]&&(r=un[e]._config),t=j(r,t),(n=new R(t)).parentLocale=un[e],un[e]=n,dn(e)}else null!=un[e]&&(null!=un[e].parentLocale?un[e]=un[e].parentLocale:null!=un[e]&&delete un[e]);return un[e]}function gn(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return ln}if(!s(e)){t=fn(e);if(t){return t}e=[e]}return hn(e)}function vn(){return U(un)}function bn(e){var t;var n=e._a;if(n&&m(e).overflow===-2){t=n[We]<0||n[We]>11?We:n[Ge]<1||n[Ge]>et(n[qe],n[We])?Ge:n[Ye]<0||n[Ye]>24||n[Ye]===24&&(n[Ve]!==0||n[Xe]!==0||n[$e]!==0)?Ye:n[Ve]<0||n[Ve]>59?Ve:n[Xe]<0||n[Xe]>59?Xe:n[$e]<0||n[$e]>999?$e:-1;if(m(e)._overflowDayOfYear&&(t<qe||t>Ge)){t=Ge}if(m(e)._overflowWeeks&&t===-1){t=Ke}if(m(e)._overflowWeekday&&t===-1){t=Je}m(e).overflow=t}return e}var _n=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,An=/Z|[+-]\d\d(?::?\d\d)?/,Sn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]],Cn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],kn=/^\/?Date\((\-?\d+)/i;function xn(e){var t,n,r=e._i,i=_n.exec(r)||wn.exec(r),o,s,a,u;if(i){m(e).iso=true;for(t=0,n=Sn.length;t<n;t++){if(Sn[t][1].exec(i[1])){s=Sn[t][0];o=Sn[t][2]!==false;break}}if(s==null){e._isValid=false;return}if(i[3]){for(t=0,n=Cn.length;t<n;t++){if(Cn[t][1].exec(i[3])){a=(i[2]||" ")+Cn[t][0];break}}if(a==null){e._isValid=false;return}}if(!o&&a!=null){e._isValid=false;return}if(i[4]){if(An.exec(i[4])){u="Z"}else{e._isValid=false;return}}e._f=s+(a||"")+(u||"");jn(e)}else{e._isValid=false}}var En=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function Pn(e){var t,n,r,i,o,s;var a={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};var u="YXWVUTSRQPONZABCDEFGHIKLM";var c,l;t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");n=En.exec(t);if(n){r=n[1]?"ddd"+(n[1].length===5?", ":" "):"";i="D MMM "+(n[2].length>10?"YYYY ":"YY ");o="HH:mm"+(n[4]?":ss":"");if(n[1]){var p=new Date(n[2]);var h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][p.getDay()];if(n[1].substr(0,3)!==h){m(e).weekdayMismatch=true;e._isValid=false;return}}switch(n[5].length){case 2:if(l===0){c=" +0000"}else{l=u.indexOf(n[5][1].toUpperCase())-12;c=(l<0?" -":" +")+(""+l).replace(/^-?/,"0").match(/..$/)[0]+"00"}break;case 4:c=a[n[5]];break;default:c=a[" GMT"]}n[5]=c;e._i=n.splice(1).join("");s=" ZZ";e._f=r+i+o+s;jn(e);m(e).rfc2822=true}else{e._isValid=false}}function Tn(e){var t=kn.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}xn(e);if(e._isValid===false){delete e._isValid}else{return}Pn(e);if(e._isValid===false){delete e._isValid}else{return}c.createFromInputFallback(e)}function On(e,t,n){if(e!=null){return e}if(t!=null){return t}return n}function Mn(e){var t=new Date(c.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function Fn(e){var t,n,r=[],i,o;if(e._d){return}i=Mn(e);if(e._w&&e._a[Ge]==null&&e._a[We]==null){Dn(e)}if(e._dayOfYear!=null){o=On(e._a[qe],i[qe]);if(e._dayOfYear>yt(o)||e._dayOfYear===0){m(e)._overflowDayOfYear=true}n=wt(o,0,e._dayOfYear);e._a[We]=n.getUTCMonth();e._a[Ge]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=r[t]=i[t]}for(;t<7;t++){e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[Ye]===24&&e._a[Ve]===0&&e._a[Xe]===0&&e._a[$e]===0){e._nextDay=true;e._a[Ye]=0}e._d=(e._useUTC?wt:_t).apply(null,r);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[Ye]=24}}function Dn(e){var t,n,r,i,o,s,a,u;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){o=1;s=4;n=On(t.GG,e._a[qe],Ct(Hn(),1,4).year);r=On(t.W,1);i=On(t.E,1);if(i<1||i>7){u=true}}else{o=e._locale._week.dow;s=e._locale._week.doy;var c=Ct(Hn(),o,s);n=On(t.gg,e._a[qe],c.year);r=On(t.w,c.week);if(t.d!=null){i=t.d;if(i<0||i>6){u=true}}else if(t.e!=null){i=t.e+o;if(t.e<0||t.e>6){u=true}}else{i=o}}if(r<1||r>kt(n,o,s)){m(e)._overflowWeeks=true}else if(u!=null){m(e)._overflowWeekday=true}else{a=St(n,r,i,o,s);e._a[qe]=a.year;e._dayOfYear=a.dayOfYear}}function jn(e){if(e._f===c.ISO_8601){xn(e);return}if(e._f===c.RFC_2822){Pn(e);return}e._a=[];m(e).empty=true;var t=""+e._i,n,r,i,o,s,a=t.length,u=0;i=ye(e._f,e._locale).match(ue)||[];for(n=0;n<i.length;n++){o=i[n];r=(t.match(Ue(o,e))||[])[0];if(r){s=t.substr(0,t.indexOf(r));if(s.length>0){m(e).unusedInput.push(s)}t=t.slice(t.indexOf(r)+r.length);u+=r.length}if(pe[o]){if(r){m(e).empty=false}else{m(e).unusedTokens.push(o)}He(o,r,e)}else if(e._strict&&!r){m(e).unusedTokens.push(o)}}m(e).charsLeftOver=a-u;if(t.length>0){m(e).unusedInput.push(t)}if(e._a[Ye]<=12&&m(e).bigHour===true&&e._a[Ye]>0){m(e).bigHour=undefined}m(e).parsedDateParts=e._a.slice(0);m(e).meridiem=e._meridiem;e._a[Ye]=Rn(e._locale,e._a[Ye],e._meridiem);Fn(e);bn(e)}function Rn(e,t,n){var r;if(n==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,n)}else if(e.isPM!=null){r=e.isPM(n);if(r&&t<12){t+=12}if(!r&&t===12){t=0}return t}else{return t}}function Un(e){var t,n,r,i,o;if(e._f.length===0){m(e).invalidFormat=true;e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){o=0;t=_({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[i];jn(t);if(!g(t)){continue}o+=m(t).charsLeftOver;o+=m(t).unusedTokens.length*10;m(t).score=o;if(r==null||o<r){r=o;n=t}}h(e,n||t)}function In(e){if(e._d){return}var t=Z(e._i);e._a=r([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Fn(e)}function Ln(e){var t=new A(bn(Nn(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Nn(e){var t=e._i,n=e._f;e._locale=e._locale||gn(e._l);if(t===null||n===undefined&&t===""){return v({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(S(t)){return new A(bn(t))}else if(i(t)){e._d=t}else if(s(n)){Un(e)}else if(n){jn(e)}else{Bn(e)}if(!g(e)){e._d=null}return e}function Bn(e){var t=e._i;if(o(t)){e._d=new Date(c.now())}else if(i(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){Tn(e)}else if(s(t)){e._a=r(t.slice(0),function(e){return parseInt(e,10)});Fn(e)}else if(a(t)){In(e)}else if(l(t)){e._d=new Date(t)}else{c.createFromInputFallback(e)}}function zn(e,t,n,r,i){var o={};if(n===true||n===false){r=n;n=undefined}if(a(e)&&u(e)||s(e)&&e.length===0){e=undefined}o._isAMomentObject=true;o._useUTC=o._isUTC=i;o._l=n;o._i=e;o._f=t;o._strict=r;return Ln(o)}function Hn(e,t,n,r){return zn(e,t,n,r,false)}c.createFromInputFallback=P("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),c.ISO_8601=function(){},c.RFC_2822=function(){};var qn=P("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return v()}}),Wn=P("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return v()}});function Gn(e,t){var n,r;if(t.length===1&&s(t[0])){t=t[0]}if(!t.length){return Hn()}n=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](n)){n=t[r]}}return n}function Yn(){var e;return Gn("isBefore",[].slice.call(arguments,0))}function Vn(){var e;return Gn("isAfter",[].slice.call(arguments,0))}var Xn=function(){return Date.now?Date.now():+new Date},$n=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Kn(e){for(var t in e){if(!($n.indexOf(t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var n=false;for(var r=0;r<$n.length;++r){if(e[$n[r]]){if(n){return false}if(parseFloat(e[$n[r]])!==k(e[$n[r]])){n=true}}}return true}function Jn(){return this._isValid}function Zn(){return _r(NaN)}function Qn(e){var t=Z(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,s=t.day||0,a=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=Kn(t);this._milliseconds=+l+c*1e3+u*6e4+a*1e3*60*60;this._days=+s+o*7;this._months=+i+r*3+n*12;this._data={};this._locale=gn();this._bubble()}function er(e){return e instanceof Qn}function tr(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function nr(e,n){he(e,0,0,function(){var e=this.utcOffset();var t="+";if(e<0){e=-e;t="-"}return t+ae(~~(e/60),2)+n+ae(~~e%60,2)})}nr("Z",":"),nr("ZZ",""),Re("Z",Me),Re("ZZ",Me),Be(["Z","ZZ"],function(e,t,n){n._useUTC=true;n._tzm=ir(Me,e)});var rr=/([\+\-]|\d\d)/gi;function ir(e,t){var n=(t||"").match(e);if(n===null){return null}var r=n[n.length-1]||[];var i=(r+"").match(rr)||["-",0,0];var o=+(i[1]*60)+k(i[2]);return o===0?0:i[0]==="+"?o:-o}function or(e,t){var n,r;if(t._isUTC){n=t.clone();r=(S(e)||i(e)?e.valueOf():Hn(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);c.updateOffset(n,false);return n}else{return Hn(e).local()}}function sr(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function ar(e,t,n){var r=this._offset||0,i;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=ir(Me,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&t){i=sr(this)}this._offset=e;this._isUTC=true;if(i!=null){this.add(i,"m")}if(r!==e){if(!t||this._changeInProgress){kr(this,_r(e-r,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;c.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?r:sr(this)}}function ur(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function cr(e){return this.utcOffset(0,e)}function lr(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(sr(this),"m")}}return this}function pr(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=ir(Oe,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function hr(e){if(!this.isValid()){return false}e=e?Hn(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function fr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function dr(){if(!o(this._isDSTShifted)){return this._isDSTShifted}var e={};_(e,this);e=Nn(e);if(e._a){var t=e._isUTC?f(e._a):Hn(e._a);this._isDSTShifted=this.isValid()&&x(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function mr(){return this.isValid()?!this._isUTC:false}function yr(){return this.isValid()?this._isUTC:false}function gr(){return this.isValid()?this._isUTC&&this._offset===0:false}c.updateOffset=function(){};var vr=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,br=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function _r(e,t){var n=e,r=null,i,o,s;if(er(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(l(e)){n={};if(t){n[t]=e}else{n.milliseconds=e}}else if(!!(r=vr.exec(e))){i=r[1]==="-"?-1:1;n={y:0,d:k(r[Ge])*i,h:k(r[Ye])*i,m:k(r[Ve])*i,s:k(r[Xe])*i,ms:k(tr(r[$e]*1e3))*i}}else if(!!(r=br.exec(e))){i=r[1]==="-"?-1:1;n={y:wr(r[2],i),M:wr(r[3],i),w:wr(r[4],i),d:wr(r[5],i),h:wr(r[6],i),m:wr(r[7],i),s:wr(r[8],i)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){s=Sr(Hn(n.from),Hn(n.to));n={};n.ms=s.milliseconds;n.M=s.months}o=new Qn(n);if(er(e)&&p(e,"_locale")){o._locale=e._locale}return o}function wr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ar(e,t){var n={milliseconds:0,months:0};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function Sr(e,t){var n;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=or(t,e);if(e.isBefore(t)){n=Ar(e,t)}else{n=Ar(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function Cr(i,o){return function(e,t){var n,r;if(t!==null&&!isNaN(+t)){M(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");r=e;e=t;t=r}e=typeof e==="string"?+e:e;n=_r(e,t);kr(this,n,i);return this}}function kr(e,t,n,r){var i=t._milliseconds,o=tr(t._days),s=tr(t._months);if(!e.isValid()){return}r=r==null?true:r;if(i){e._d.setTime(e._d.valueOf()+i*n)}if(o){ie(e,"Date",re(e,"Date")+o*n)}if(s){ut(e,re(e,"Month")+s*n)}if(r){c.updateOffset(e,o||s)}}_r.fn=Qn.prototype,_r.invalid=Zn;var xr=Cr(1,"add"),Er=Cr(-1,"subtract");function Pr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Tr(e,t){var n=e||Hn(),r=or(n,this).startOf("day"),i=c.calendarFormat(this,r)||"sameElse";var o=t&&(F(t[i])?t[i].call(this,n):t[i]);return this.format(o||this.localeData().calendar(i,this,Hn(n)))}function Or(){return new A(this)}function Mr(e,t){var n=S(e)?e:Hn(e);if(!(this.isValid()&&n.isValid())){return false}t=J(!o(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(t).valueOf()}}function Fr(e,t){var n=S(e)?e:Hn(e);if(!(this.isValid()&&n.isValid())){return false}t=J(!o(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(t).valueOf()<n.valueOf()}}function Dr(e,t,n,r){r=r||"()";return(r[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(r[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function jr(e,t){var n=S(e)?e:Hn(e),r;if(!(this.isValid()&&n.isValid())){return false}t=J(t||"millisecond");if(t==="millisecond"){return this.valueOf()===n.valueOf()}else{r=n.valueOf();return this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()}}function Rr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Ur(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ir(e,t,n){var r,i,o,s;if(!this.isValid()){return NaN}r=or(e,this);if(!r.isValid()){return NaN}i=(r.utcOffset()-this.utcOffset())*6e4;t=J(t);if(t==="year"||t==="month"||t==="quarter"){s=Lr(this,r);if(t==="quarter"){s=s/3}else if(t==="year"){s=s/12}}else{o=this-r;s=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-i)/864e5:t==="week"?(o-i)/6048e5:o}return n?s:C(s)}function Lr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,o;if(t-r<0){i=e.clone().add(n-1,"months");o=(t-r)/(r-i)}else{i=e.clone().add(n+1,"months");o=(t-r)/(i-r)}return-(n+o)||0}function Nr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Br(){if(!this.isValid()){return null}var e=this.clone().utc();if(e.year()<0||e.year()>9999){return me(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}if(F(Date.prototype.toISOString)){return this.toDate().toISOString()}return me(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function zr(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var n="["+e+'("]';var r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var i="-MM-DD[T]HH:mm:ss.SSS";var o=t+'[")]';return this.format(n+r+i+o)}function Hr(e){if(!e){e=this.isUtc()?c.defaultFormatUtc:c.defaultFormat}var t=me(this,e);return this.localeData().postformat(t)}function qr(e,t){if(this.isValid()&&(S(e)&&e.isValid()||Hn(e).isValid())){return _r({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Wr(e){return this.from(Hn(),e)}function Gr(e,t){if(this.isValid()&&(S(e)&&e.isValid()||Hn(e).isValid())){return _r({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Yr(e){return this.to(Hn(),e)}function Vr(e){var t;if(e===undefined){return this._locale._abbr}else{t=gn(e);if(t!=null){this._locale=t}return this}}c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xr=P("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function $r(){return this._locale}function Kr(e){e=J(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Jr(e){e=J(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Zr(){return this._d.valueOf()-(this._offset||0)*6e4}function Qr(){return Math.floor(this.valueOf()/1e3)}function ei(){return new Date(this.valueOf())}function ti(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ni(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ri(){return this.isValid()?this.toISOString():null}function ii(){return g(this)}function oi(){return h({},m(this))}function si(){return m(this).overflow}function ai(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function ui(e,t){he(0,[e,e.length],0,t)}function ci(e){return fi.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function li(e){return fi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function pi(){return kt(this.year(),1,4)}function hi(){var e=this.localeData()._week;return kt(this.year(),e.dow,e.doy)}function fi(e,t,n,r,i){var o;if(e==null){return Ct(this,r,i).year}else{o=kt(e,r,i);if(t>o){t=o}return di.call(this,e,t,n,r,i)}}function di(e,t,n,r,i){var o=St(e,t,n,r,i),s=wt(o.year,0,o.dayOfYear);this.year(s.getUTCFullYear());this.month(s.getUTCMonth());this.date(s.getUTCDate());return this}function mi(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}he(0,["gg",2],0,function(){return this.weekYear()%100}),he(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ui("gggg","weekYear"),ui("ggggg","weekYear"),ui("GGGG","isoWeekYear"),ui("GGGGG","isoWeekYear"),K("weekYear","gg"),K("isoWeekYear","GG"),ee("weekYear",1),ee("isoWeekYear",1),Re("G",Te),Re("g",Te),Re("GG",Ae,ve),Re("gg",Ae,ve),Re("GGGG",xe,_e),Re("gggg",xe,_e),Re("GGGGG",Ee,we),Re("ggggg",Ee,we),ze(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=k(e)}),ze(["gg","GG"],function(e,t,n,r){t[r]=c.parseTwoDigitYear(e)}),he("Q",0,"Qo","quarter"),K("quarter","Q"),ee("quarter",7),Re("Q",ge),Be("Q",function(e,t){t[We]=(k(e)-1)*3}),he("D",["DD",2],"Do","date"),K("date","D"),ee("date",9),Re("D",Ae),Re("DD",Ae,ve),Re("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Be(["D","DD"],Ge),Be("Do",function(e,t){t[Ge]=k(e.match(Ae)[0],10)});var yi=ne("Date",true);function gi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}he("DDD",["DDDD",3],"DDDo","dayOfYear"),K("dayOfYear","DDD"),ee("dayOfYear",4),Re("DDD",ke),Re("DDDD",be),Be(["DDD","DDDD"],function(e,t,n){n._dayOfYear=k(e)}),he("m",["mm",2],0,"minute"),K("minute","m"),ee("minute",14),Re("m",Ae),Re("mm",Ae,ve),Be(["m","mm"],Ve);var vi=ne("Minutes",false);he("s",["ss",2],0,"second"),K("second","s"),ee("second",15),Re("s",Ae),Re("ss",Ae,ve),Be(["s","ss"],Xe);var bi=ne("Seconds",false),_i;for(he("S",0,0,function(){return~~(this.millisecond()/100)}),he(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),he(0,["SSS",3],0,"millisecond"),he(0,["SSSS",4],0,function(){return this.millisecond()*10}),he(0,["SSSSS",5],0,function(){return this.millisecond()*100}),he(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),he(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),he(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),he(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),K("millisecond","ms"),ee("millisecond",16),Re("S",ke,ge),Re("SS",ke,ve),Re("SSS",ke,be),_i="SSSS";_i.length<=9;_i+="S"){Re(_i,Pe)}function wi(e,t){t[$e]=k(("0."+e)*1e3)}for(_i="S";_i.length<=9;_i+="S"){Be(_i,wi)}var Ai=ne("Milliseconds",false);function Si(){return this._isUTC?"UTC":""}function Ci(){return this._isUTC?"Coordinated Universal Time":""}he("z",0,0,"zoneAbbr"),he("zz",0,0,"zoneName");var ki=A.prototype;function xi(e){return Hn(1e3*e)}function Ei(){return Hn.apply(null,arguments).parseZone()}function Pi(e){return e}ki.add=xr,ki.calendar=Tr,ki.clone=Or,ki.diff=Ir,ki.endOf=Jr,ki.format=Hr,ki.from=qr,ki.fromNow=Wr,ki.to=Gr,ki.toNow=Yr,ki.get=oe,ki.invalidAt=si,ki.isAfter=Mr,ki.isBefore=Fr,ki.isBetween=Dr,ki.isSame=jr,ki.isSameOrAfter=Rr,ki.isSameOrBefore=Ur,ki.isValid=ii,ki.lang=Xr,ki.locale=Vr,ki.localeData=$r,ki.max=Wn,ki.min=qn,ki.parsingFlags=oi,ki.set=se,ki.startOf=Kr,ki.subtract=Er,ki.toArray=ti,ki.toObject=ni,ki.toDate=ei,ki.toISOString=Br,ki.inspect=zr,ki.toJSON=ri,ki.toString=Nr,ki.unix=Qr,ki.valueOf=Zr,ki.creationData=ai,ki.year=vt,ki.isLeapYear=bt,ki.weekYear=ci,ki.isoWeekYear=li,ki.quarter=ki.quarters=mi,ki.month=ct,ki.daysInMonth=lt,ki.week=ki.weeks=Ot,ki.isoWeek=ki.isoWeeks=Mt,ki.weeksInYear=hi,ki.isoWeeksInYear=pi,ki.date=yi,ki.day=ki.days=Ht,ki.weekday=qt,ki.isoWeekday=Wt,ki.dayOfYear=gi,ki.hour=ki.hours=sn,ki.minute=ki.minutes=vi,ki.second=ki.seconds=bi,ki.millisecond=ki.milliseconds=Ai,ki.utcOffset=ar,ki.utc=cr,ki.local=lr,ki.parseZone=pr,ki.hasAlignedHourOffset=hr,ki.isDST=fr,ki.isLocal=mr,ki.isUtcOffset=yr,ki.isUtc=gr,ki.isUTC=gr,ki.zoneAbbr=Si,ki.zoneName=Ci,ki.dates=P("dates accessor is deprecated. Use date instead.",yi),ki.months=P("months accessor is deprecated. Use month instead",ct),ki.years=P("years accessor is deprecated. Use year instead",vt),ki.zone=P("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ur),ki.isDSTShifted=P("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",dr);var Ti=R.prototype;function Oi(e,t,n,r){var i=gn();var o=f().set(r,t);return i[n](o,e)}function Mi(e,t,n){if(l(e)){t=e;e=undefined}e=e||"";if(t!=null){return Oi(e,t,n,"month")}var r;var i=[];for(r=0;r<12;r++){i[r]=Oi(e,r,n,"month")}return i}function Fi(e,t,n,r){if(typeof e==="boolean"){if(l(t)){n=t;t=undefined}t=t||""}else{t=e;n=t;e=false;if(l(t)){n=t;t=undefined}t=t||""}var i=gn(),o=e?i._week.dow:0;if(n!=null){return Oi(t,(n+o)%7,r,"day")}var s;var a=[];for(s=0;s<7;s++){a[s]=Oi(t,(s+o)%7,r,"day")}return a}function Di(e,t){return Mi(e,t,"months")}function ji(e,t){return Mi(e,t,"monthsShort")}function Ri(e,t,n){return Fi(e,t,n,"weekdays")}function Ui(e,t,n){return Fi(e,t,n,"weekdaysShort")}function Ii(e,t,n){return Fi(e,t,n,"weekdaysMin")}Ti.calendar=L,Ti.longDateFormat=B,Ti.invalidDate=H,Ti.ordinal=G,Ti.preparse=Pi,Ti.postformat=Pi,Ti.relativeTime=V,Ti.pastFuture=X,Ti.set=D,Ti.months=rt,Ti.monthsShort=ot,Ti.monthsParse=at,Ti.monthsRegex=dt,Ti.monthsShortRegex=ht,Ti.week=xt,Ti.firstDayOfYear=Tt,Ti.firstDayOfWeek=Pt,Ti.weekdays=Rt,Ti.weekdaysMin=Nt,Ti.weekdaysShort=It,Ti.weekdaysParse=zt,Ti.weekdaysRegex=Yt,Ti.weekdaysShortRegex=Xt,Ti.weekdaysMinRegex=Jt,Ti.isPM=rn,Ti.meridiem=on,dn("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=k(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),c.lang=P("moment.lang is deprecated. Use moment.locale instead.",dn),c.langData=P("moment.langData is deprecated. Use moment.localeData instead.",gn);var Li=Math.abs;function Ni(){var e=this._data;return this._milliseconds=Li(this._milliseconds),this._days=Li(this._days),this._months=Li(this._months),e.milliseconds=Li(e.milliseconds),e.seconds=Li(e.seconds),e.minutes=Li(e.minutes),e.hours=Li(e.hours),e.months=Li(e.months),e.years=Li(e.years),this}function Bi(e,t,n,r){var i=_r(t,n);e._milliseconds+=r*i._milliseconds;e._days+=r*i._days;e._months+=r*i._months;return e._bubble()}function zi(e,t){return Bi(this,e,t,1)}function Hi(e,t){return Bi(this,e,t,-1)}function qi(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Wi(){var e,t,n,r,i,o=this._milliseconds,s=this._days,a=this._months,u=this._data;if(!(0<=o&&0<=s&&0<=a||o<=0&&s<=0&&a<=0))o+=864e5*qi(Yi(a)+s),a=s=0;return u.milliseconds=o%1e3,e=C(o/1e3),u.seconds=e%60,t=C(e/60),u.minutes=t%60,n=C(t/60),u.hours=n%24,s+=C(n/24),i=C(Gi(s)),a+=i,s-=qi(Yi(i)),r=C(a/12),a%=12,u.days=s,u.months=a,u.years=r,this}function Gi(e){return e*4800/146097}function Yi(e){return e*146097/4800}function Vi(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=J(e))||"year"===e)return t=this._days+r/864e5,n=this._months+Gi(t),"month"===e?n:n/12}function Xi(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN}function $i(e){return function(){return this.as(e)}}var Ki=$i("ms"),Ji=$i("s"),Zi=$i("m"),Qi=$i("h"),eo=$i("d"),to=$i("w"),no=$i("M"),ro=$i("y");function io(e){return e=J(e),this.isValid()?this[e+"s"]():NaN}function oo(e){return function(){return this.isValid()?this._data[e]:NaN}}var so=oo("milliseconds"),ao=oo("seconds"),uo=oo("minutes"),co=oo("hours"),lo=oo("days"),po=oo("months"),ho=oo("years");function fo(){return C(this.days()/7)}var mo=Math.round,yo={ss:44,s:45,m:45,h:22,d:26,M:11};function go(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function vo(e,t,n){var r=_r(e).abs(),i=mo(r.as("s")),o=mo(r.as("m")),s=mo(r.as("h")),a=mo(r.as("d")),u=mo(r.as("M")),c=mo(r.as("y")),l=(i<=yo.ss?["s",i]:i<yo.s&&["ss",i])||o<=1&&["m"]||o<yo.m&&["mm",o]||s<=1&&["h"]||s<yo.h&&["hh",s]||a<=1&&["d"]||a<yo.d&&["dd",a]||u<=1&&["M"]||u<yo.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=0<+e,l[4]=n,function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}.apply(null,l)}function bo(e){return void 0!==e?"function"==typeof e&&(mo=e,!0):mo}function _o(e,t){if(void 0===yo[e])return!1;if(void 0===t)return yo[e];if(yo[e]=t,"s"===e)yo.ss=t-1;return!0}function wo(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var r=_r(e).abs(),i=mo(r.as("s")),o=mo(r.as("m")),s=mo(r.as("h")),a=mo(r.as("d")),u=mo(r.as("M")),c=mo(r.as("y")),l=(i<=yo.ss?["s",i]:i<yo.s&&["ss",i])||o<=1&&["m"]||o<yo.m&&["mm",o]||s<=1&&["h"]||s<yo.h&&["hh",s]||a<=1&&["d"]||a<yo.d&&["dd",a]||u<=1&&["M"]||u<yo.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=0<+e,l[4]=n,function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}.apply(null,l)}(this,!e,t);if(e)n=t.pastFuture(+this,n);return t.postformat(n)}var Ao=Math.abs;function So(){if(!this.isValid()){return this.localeData().invalidDate()}var e=Ao(this._milliseconds)/1e3;var t=Ao(this._days);var n=Ao(this._months);var r,i,o;r=C(e/60);i=C(r/60);e%=60;r%=60;o=C(n/12);n%=12;var s=o;var a=n;var u=t;var c=i;var l=r;var p=e;var h=this.asSeconds();if(!h){return"P0D"}return(h<0?"-":"")+"P"+(s?s+"Y":"")+(a?a+"M":"")+(u?u+"D":"")+(c||l||p?"T":"")+(c?c+"H":"")+(l?l+"M":"")+(p?p+"S":"")}var Co=Qn.prototype;return Co.isValid=function(){return this._isValid},Co.abs=function(){var e=this._data;return this._milliseconds=Li(this._milliseconds),this._days=Li(this._days),this._months=Li(this._months),e.milliseconds=Li(e.milliseconds),e.seconds=Li(e.seconds),e.minutes=Li(e.minutes),e.hours=Li(e.hours),e.months=Li(e.months),e.years=Li(e.years),this},Co.add=function(e,t){return Bi(this,e,t,1)},Co.subtract=function(e,t){return Bi(this,e,t,-1)},Co.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;{if("month"===(e=J(e))||"year"===e)return t=this._days+r/864e5,n=this._months+Gi(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Yi(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}},Co.asMilliseconds=Ki,Co.asSeconds=Ji,Co.asMinutes=Zi,Co.asHours=Qi,Co.asDays=eo,Co.asWeeks=to,Co.asMonths=no,Co.asYears=ro,Co.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN},Co._bubble=function(){var e,t,n,r,i,o=this._milliseconds,s=this._days,a=this._months,u=this._data;0<=o&&0<=s&&0<=a||o<=0&&s<=0&&a<=0||(o+=864e5*qi(Yi(a)+s),a=s=0);return u.milliseconds=o%1e3,e=C(o/1e3),u.seconds=e%60,t=C(e/60),u.minutes=t%60,n=C(t/60),u.hours=n%24,s+=C(n/24),i=C(Gi(s)),a+=i,s-=qi(Yi(i)),r=C(a/12),a%=12,u.days=s,u.months=a,u.years=r,this},Co.get=function(e){return e=J(e),this.isValid()?this[e+"s"]():NaN},Co.milliseconds=so,Co.seconds=ao,Co.minutes=uo,Co.hours=co,Co.days=lo,Co.weeks=function(){return C(this.days()/7)},Co.months=po,Co.years=ho,Co.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var r=_r(e).abs(),i=mo(r.as("s")),o=mo(r.as("m")),s=mo(r.as("h")),a=mo(r.as("d")),u=mo(r.as("M")),c=mo(r.as("y")),l=(i<=yo.ss?["s",i]:i<yo.s&&["ss",i])||o<=1&&["m"]||o<yo.m&&["mm",o]||s<=1&&["h"]||s<yo.h&&["hh",s]||a<=1&&["d"]||a<yo.d&&["dd",a]||u<=1&&["M"]||u<yo.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=0<+e,l[4]=n,function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}.apply(null,l)}(this,!e,t);e&&(n=t.pastFuture(+this,n));return t.postformat(n)},Co.toISOString=So,Co.toString=So,Co.toJSON=So,Co.locale=Vr,Co.localeData=$r,Co.toIsoString=P("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",So),Co.lang=Xr,he("X",0,0,"unix"),he("x",0,0,"valueOf"),Re("x",Te),Re("X",/[+-]?\d+(\.\d{1,3})?/),Be("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),Be("x",function(e,t,n){n._d=new Date(k(e))}),c.version="2.18.1",function(e){t=e}(Hn),c.fn=ki,c.min=function(){return Gn("isBefore",[].slice.call(arguments,0))},c.max=function(){return Gn("isAfter",[].slice.call(arguments,0))},c.now=function(){return Date.now?Date.now():+new Date},c.utc=f,c.unix=function(e){return Hn(1e3*e)},c.months=function(e,t){return Mi(e,t,"months")},c.isDate=i,c.locale=dn,c.invalid=v,c.duration=_r,c.isMoment=S,c.weekdays=function(e,t,n){return Fi(e,t,n,"weekdays")},c.parseZone=function(){return Hn.apply(null,arguments).parseZone()},c.localeData=gn,c.isDuration=er,c.monthsShort=function(e,t){return Mi(e,t,"monthsShort")},c.weekdaysMin=function(e,t,n){return Fi(e,t,n,"weekdaysMin")},c.defineLocale=mn,c.updateLocale=function(e,t){{var n,r;null!=t?(r=an,null!=un[e]&&(r=un[e]._config),t=j(r,t),(n=new R(t)).parentLocale=un[e],un[e]=n,dn(e)):null!=un[e]&&(null!=un[e].parentLocale?un[e]=un[e].parentLocale:null!=un[e]&&delete un[e])}return un[e]},c.locales=function(){return U(un)},c.weekdaysShort=function(e,t,n){return Fi(e,t,n,"weekdaysShort")},c.normalizeUnits=J,c.relativeTimeRounding=function(e){return void 0!==e?"function"==typeof e&&(mo=e,!0):mo},c.relativeTimeThreshold=function(e,t){if(void 0===yo[e])return!1;if(void 0===t)return yo[e];yo[e]=t,"s"===e&&(yo.ss=t-1);return!0},c.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},c.prototype=ki,c}()}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";!function(o){"use strict";var e="0.5.13",s={},a={},c={},u={},t,n=o.version.split("."),r=+n[0],i=+n[1];if(r<2||r===2&&i<6){j("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+o.version+". See momentjs.com")}function l(e){if(e>96){return e-87}else if(e>64){return e-29}return e-48}function p(e){var t=0,n=e.split("."),r=n[0],i=n[1]||"",o=1,s,a=0,u=1;if(e.charCodeAt(0)===45){t=1;u=-1}for(t;t<r.length;t++){s=l(r.charCodeAt(t));a=60*a+s}for(t=0;t<i.length;t++){o=o/60;s=l(i.charCodeAt(t));a+=s*o}return a*u}function h(e){for(var t=0;t<e.length;t++){e[t]=p(e[t])}}function f(e,t){for(var n=0;n<t;n++){e[n]=Math.round((e[n-1]||0)+e[n]*6e4)}e[t-1]=Infinity}function d(e,t){var n=[],r;for(r=0;r<t.length;r++){n[r]=e[t[r]]}return n}function m(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),i=t[4].split(" ");h(n);h(r);h(i);f(i,r.length);return{name:t[0],abbrs:d(t[1].split(" "),r),offsets:d(n,r),untils:i,population:t[5]|0}}function y(e){if(e){this._set(m(e))}}function g(e){var t=e.toTimeString();var n=t.match(/\([a-z ]+\)/i);if(n&&n[0]){n=n[0].match(/[A-Z]/g);n=n?n.join(""):undefined}else{n=t.match(/[A-Z]{3,5}/g);n=n?n[0]:undefined}if(n==="GMT"){n=undefined}this.at=+e;this.abbr=n;this.offset=e.getTimezoneOffset()}function v(e){this.zone=e;this.offsetScore=0;this.abbrScore=0}function b(e,t){var n,r;while(r=((t.at-e.at)/12e4|0)*6e4){n=new g(new Date(e.at+r));if(n.offset===e.offset){e=n}else{t=n}}return e}function _(){var e=(new Date).getFullYear()-2,t=new g(new Date(e,0,1)),n=[t],r,i,o;for(o=1;o<48;o++){i=new g(new Date(e,o,1));if(i.offset!==t.offset){r=b(t,i);n.push(r);n.push(new g(new Date(r.at+6e4)))}t=i}for(o=0;o<4;o++){n.push(new g(new Date(e+o,0,1)));n.push(new g(new Date(e+o,6,1)))}return n}function w(e,t){if(e.offsetScore!==t.offsetScore){return e.offsetScore-t.offsetScore}if(e.abbrScore!==t.abbrScore){return e.abbrScore-t.abbrScore}return t.zone.population-e.zone.population}function A(e,t){var n,r;h(t);for(n=0;n<t.length;n++){r=t[n];u[r]=u[r]||{};u[r][e]=true}}function S(e){var t=e.length,n={},r=[],i,o,s;for(i=0;i<t;i++){s=u[e[i].offset]||{};for(o in s){if(s.hasOwnProperty(o)){n[o]=true}}}for(i in n){if(n.hasOwnProperty(i)){r.push(c[i])}}return r}function C(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e){var t=c[x(e)];if(t){return t}j("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n=_(),r=n.length,i=S(n),o=[],s,a,u;for(a=0;a<i.length;a++){s=new v(P(i[a]),r);for(u=0;u<r;u++){s.scoreOffsetAt(n[u])}o.push(s)}o.sort(w);return o.length>0?o[0].zone.name:undefined}function k(e){if(!t||e){t=C()}return t}function x(e){return(e||"").toLowerCase().replace(/\//g,"_")}function E(e){var t,n,r,i;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){r=e[t].split("|");n=r[0];i=x(n);s[i]=e[t];c[i]=n;if(r[5]){A(i,r[2].split(" "))}}}function P(e,t){e=x(e);var n=s[e];var r;if(n instanceof y){return n}if(typeof n==="string"){n=new y(n);s[e]=n;return n}if(a[e]&&t!==P&&(r=P(a[e],P))){n=s[e]=new y;n._set(r);n.name=c[e];return n}return null}function T(){var e,t=[];for(e in c){if(c.hasOwnProperty(e)&&(s[e]||s[a[e]])&&c[e]){t.push(c[e])}}return t.sort()}function O(e){var t,n,r,i;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){n=e[t].split("|");r=x(n[0]);i=x(n[1]);a[r]=i;c[r]=n[0];a[i]=r;c[i]=n[1]}}function M(e){E(e.zones);O(e.links);R.dataVersion=e.version}function F(e){if(!F.didShowError){F.didShowError=true;j("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")}return!!P(e)}function D(e){return!!(e._a&&e._tzm===undefined)}function j(e){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e)}}function R(e){var t=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],r=P(n),i=o.utc.apply(null,t);if(r&&!o.isMoment(e)&&D(i)){i.add(r.parse(i),"minutes")}i.tz(n);return i}y.prototype={_set:function(e){this.name=e.name;this.abbrs=e.abbrs;this.untils=e.untils;this.offsets=e.offsets;this.population=e.population},_index:function(e){var t=+e,n=this.untils,r;for(r=0;r<n.length;r++){if(t<n[r]){return r}}},parse:function(e){var t=+e,n=this.offsets,r=this.untils,i=r.length-1,o,s,a,u;for(u=0;u<i;u++){o=n[u];s=n[u+1];a=n[u?u-1:u];if(o<s&&R.moveAmbiguousForward){o=s}else if(o>a&&R.moveInvalidForward){o=a}if(t<r[u]-o*6e4){return n[u]}}return n[i]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},v.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.offset(e.at)-e.offset);if(this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr){this.abbrScore++}},R.version=e,R.dataVersion="",R._zones=s,R._links=a,R._names=c,R.add=E,R.link=O,R.load=M,R.zone=P,R.zoneExists=F,R.guess=k,R.names=T,R.Zone=y,R.unpack=m,R.unpackBase60=p,R.needsOffset=D,R.moveInvalidForward=true,R.moveAmbiguousForward=false;var U=o.fn;function I(e){return function(){if(this._z){return this._z.abbr(this)}return e.call(this)}}function L(e){return function(){this._z=null;return e.apply(this,arguments)}}o.tz=R,o.defaultZone=null,o.updateOffset=function(e,t){var n=o.defaultZone,r;if(e._z===undefined){if(n&&D(e)&&!e._isUTC){e._d=o.utc(e._a)._d;e.utc().add(n.parse(e),"minutes")}e._z=n}if(e._z){r=e._z.offset(e);if(Math.abs(r)<16){r=r/60}if(e.utcOffset!==undefined){e.utcOffset(-r,t)}else{e.zone(r,t)}}},U.tz=function(e){if(e){this._z=P(e);if(this._z){o.updateOffset(this)}else{j("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/.")}return this}if(this._z){return this._z.name}},U.zoneName=I(U.zoneName),U.zoneAbbr=I(U.zoneAbbr),U.utc=L(U.utc),o.tz.setDefault=function(e){if(r<2||r===2&&i<9){j("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+o.version+".")}o.defaultZone=e?P(e):null;return o};var N=o.momentProperties;if(Object.prototype.toString.call(N)==="[object Array]"){N.push("_z");N.push("_a")}else if(N){N._z=null}}(e.moment)}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";(function(){var e=this.moment;e.fn.round=function(e,t,n){n=n||"round";var r,i={hours:{name:"Hours",maxValue:24},minutes:{name:"Minutes",maxValue:60},seconds:{name:"Seconds",maxValue:60},milliseconds:{name:"Milliseconds",maxValue:1e3}},o={mm:i.milliseconds.name,milliseconds:i.milliseconds.name,Milliseconds:i.milliseconds.name,s:i.seconds.name,seconds:i.seconds.name,Seconds:i.seconds.name,m:i.minutes.name,minutes:i.minutes.name,Minutes:i.minutes.name,H:i.hours.name,h:i.hours.name,hours:i.hours.name,Hours:i.hours.name},s=0,a=!1,u=1;if(1<t.length&&"mm"!==t&&"s"!==t.slice(-1)&&(t+="s"),!i[t=o[t].toLowerCase()])throw new Error('The value to round is not valid. Possibles ["hours", "minutes", "seconds", "milliseconds"]');var c="get"+i[t].name,l="set"+i[t].name;for(var p in i)p===t?(s=this._d[c](),r=i[p].maxValue,a=!0):a&&(u*=i[p].maxValue,s+=this._d["get"+i[p].name]()/u,this._d["set"+i[p].name](0));return s=Math[n](s/e)*e,s=Math.min(s,r),this._d[l](s),this},e.fn.ceil=function(e,t){return this.round(e,t,"ceil")},e.fn.floor=function(e,t){return this.round(e,t,"floor")},null!=("undefined"!=typeof module&&null!==module?module.exports:void 0)&&(module.exports=e)}).call(e.Mango)}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";!function(o){"use strict";var e="0.5.13",s={},a={},c={},u={},t,n=o.version.split("."),r=+n[0],i=+n[1];if(r<2||r===2&&i<6){j("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+o.version+". See momentjs.com")}function l(e){if(e>96){return e-87}else if(e>64){return e-29}return e-48}function p(e){var t=0,n=e.split("."),r=n[0],i=n[1]||"",o=1,s,a=0,u=1;if(e.charCodeAt(0)===45){t=1;u=-1}for(t;t<r.length;t++){s=l(r.charCodeAt(t));a=60*a+s}for(t=0;t<i.length;t++){o=o/60;s=l(i.charCodeAt(t));a+=s*o}return a*u}function h(e){for(var t=0;t<e.length;t++){e[t]=p(e[t])}}function f(e,t){for(var n=0;n<t;n++){e[n]=Math.round((e[n-1]||0)+e[n]*6e4)}e[t-1]=Infinity}function d(e,t){var n=[],r;for(r=0;r<t.length;r++){n[r]=e[t[r]]}return n}function m(e){var t=e.split("|"),n=t[2].split(" "),r=t[3].split(""),i=t[4].split(" ");h(n);h(r);h(i);f(i,r.length);return{name:t[0],abbrs:d(t[1].split(" "),r),offsets:d(n,r),untils:i,population:t[5]|0}}function y(e){if(e){this._set(m(e))}}function g(e){var t=e.toTimeString();var n=t.match(/\([a-z ]+\)/i);if(n&&n[0]){n=n[0].match(/[A-Z]/g);n=n?n.join(""):undefined}else{n=t.match(/[A-Z]{3,5}/g);n=n?n[0]:undefined}if(n==="GMT"){n=undefined}this.at=+e;this.abbr=n;this.offset=e.getTimezoneOffset()}function v(e){this.zone=e;this.offsetScore=0;this.abbrScore=0}function b(e,t){var n,r;while(r=((t.at-e.at)/12e4|0)*6e4){n=new g(new Date(e.at+r));if(n.offset===e.offset){e=n}else{t=n}}return e}function _(){var e=(new Date).getFullYear()-2,t=new g(new Date(e,0,1)),n=[t],r,i,o;for(o=1;o<48;o++){i=new g(new Date(e,o,1));if(i.offset!==t.offset){r=b(t,i);n.push(r);n.push(new g(new Date(r.at+6e4)))}t=i}for(o=0;o<4;o++){n.push(new g(new Date(e+o,0,1)));n.push(new g(new Date(e+o,6,1)))}return n}function w(e,t){if(e.offsetScore!==t.offsetScore){return e.offsetScore-t.offsetScore}if(e.abbrScore!==t.abbrScore){return e.abbrScore-t.abbrScore}return t.zone.population-e.zone.population}function A(e,t){var n,r;h(t);for(n=0;n<t.length;n++){r=t[n];u[r]=u[r]||{};u[r][e]=true}}function S(e){var t=e.length,n={},r=[],i,o,s;for(i=0;i<t;i++){s=u[e[i].offset]||{};for(o in s){if(s.hasOwnProperty(o)){n[o]=true}}}for(i in n){if(n.hasOwnProperty(i)){r.push(c[i])}}return r}function C(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e){var t=c[x(e)];if(t){return t}j("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}var n=_(),r=n.length,i=S(n),o=[],s,a,u;for(a=0;a<i.length;a++){s=new v(P(i[a]),r);for(u=0;u<r;u++){s.scoreOffsetAt(n[u])}o.push(s)}o.sort(w);return o.length>0?o[0].zone.name:undefined}function k(e){if(!t||e){t=C()}return t}function x(e){return(e||"").toLowerCase().replace(/\//g,"_")}function E(e){var t,n,r,i;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){r=e[t].split("|");n=r[0];i=x(n);s[i]=e[t];c[i]=n;if(r[5]){A(i,r[2].split(" "))}}}function P(e,t){e=x(e);var n=s[e];var r;if(n instanceof y){return n}if(typeof n==="string"){n=new y(n);s[e]=n;return n}if(a[e]&&t!==P&&(r=P(a[e],P))){n=s[e]=new y;n._set(r);n.name=c[e];return n}return null}function T(){var e,t=[];for(e in c){if(c.hasOwnProperty(e)&&(s[e]||s[a[e]])&&c[e]){t.push(c[e])}}return t.sort()}function O(e){var t,n,r,i;if(typeof e==="string"){e=[e]}for(t=0;t<e.length;t++){n=e[t].split("|");r=x(n[0]);i=x(n[1]);a[r]=i;c[r]=n[0];a[i]=r;c[i]=n[1]}}function M(e){E(e.zones);O(e.links);R.dataVersion=e.version}function F(e){if(!F.didShowError){F.didShowError=true;j("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")}return!!P(e)}function D(e){return!!(e._a&&e._tzm===undefined)}function j(e){if(typeof console!=="undefined"&&typeof console.error==="function"){console.error(e)}}function R(e){var t=Array.prototype.slice.call(arguments,0,-1),n=arguments[arguments.length-1],r=P(n),i=o.utc.apply(null,t);if(r&&!o.isMoment(e)&&D(i)){i.add(r.parse(i),"minutes")}i.tz(n);return i}y.prototype={_set:function(e){this.name=e.name;this.abbrs=e.abbrs;this.untils=e.untils;this.offsets=e.offsets;this.population=e.population},_index:function(e){var t=+e,n=this.untils,r;for(r=0;r<n.length;r++){if(t<n[r]){return r}}},parse:function(e){var t=+e,n=this.offsets,r=this.untils,i=r.length-1,o,s,a,u;for(u=0;u<i;u++){o=n[u];s=n[u+1];a=n[u?u-1:u];if(o<s&&R.moveAmbiguousForward){o=s}else if(o>a&&R.moveInvalidForward){o=a}if(t<r[u]-o*6e4){return n[u]}}return n[i]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return this.offsets[this._index(e)]}},v.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.offset(e.at)-e.offset);if(this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr){this.abbrScore++}},R.version=e,R.dataVersion="",R._zones=s,R._links=a,R._names=c,R.add=E,R.link=O,R.load=M,R.zone=P,R.zoneExists=F,R.guess=k,R.names=T,R.Zone=y,R.unpack=m,R.unpackBase60=p,R.needsOffset=D,R.moveInvalidForward=true,R.moveAmbiguousForward=false;var U=o.fn;function I(e){return function(){if(this._z){return this._z.abbr(this)}return e.call(this)}}function L(e){return function(){this._z=null;return e.apply(this,arguments)}}o.tz=R,o.defaultZone=null,o.updateOffset=function(e,t){var n=o.defaultZone,r;if(e._z===undefined){if(n&&D(e)&&!e._isUTC){e._d=o.utc(e._a)._d;e.utc().add(n.parse(e),"minutes")}e._z=n}if(e._z){r=e._z.offset(e);if(Math.abs(r)<16){r=r/60}if(e.utcOffset!==undefined){e.utcOffset(-r,t)}else{e.zone(r,t)}}},U.tz=function(e){if(e){this._z=P(e);if(this._z){o.updateOffset(this)}else{j("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/.")}return this}if(this._z){return this._z.name}},U.zoneName=I(U.zoneName),U.zoneAbbr=I(U.zoneAbbr),U.utc=L(U.utc),o.tz.setDefault=function(e){if(r<2||r===2&&i<9){j("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+o.version+".")}o.defaultZone=e?P(e):null;return o};var N=o.momentProperties;if(Object.prototype.toString.call(N)==="[object Array]"){N.push("_z");N.push("_a")}else if(N){N._z=null}M({version:"2017b",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Khartoum|EAT|-30|0||51e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|01010|1M2m0 gL0 e10 mn0|15e6","Africa/Casablanca|WET WEST|0 -10|0101010101010101010101010101010101010101010|1H3C0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 Rc0 11A0 e00 e00 U00 11A0 8o0 e00 11A0 11A0 5A0 e00 17c0 1fA0 1a00|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00|11e5","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1GQo0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1GIc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1GIb0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Araguaina|-03 -02|30 20|010|1IdD0 Lz0|14e4","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1GTf0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0|28e5","America/Panama|EST|50|0||15e5","America/Bahia|-02 -03|20 30|01|1GCq0|27e5","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Managua|CST|60|0||22e5","America/La_Paz|-04|40|0||19e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1GI90 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|01010101010101010101010|1GCr0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0|77e4","America/Cancun|CST CDT EST|60 50 50|01010102|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5","America/Chicago|CST CDT|60 50|01010101010101010101010|1GI80 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1GQx0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Phoenix|MST|70|0||42e5","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|15e6","America/New_York|EST EDT|50 40|01010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|21e6","America/Rio_Branco|-04 -05|40 50|01|1KLE0|31e4","America/Fort_Nelson|PST PDT MST|80 70 70|01010102|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1GI60 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02|30 20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|17e3","America/Grand_Turk|EST EDT AST|50 40 40|010101012|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1GQt0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0|21e5","America/Metlakatla|PST AKST AKDT|80 90 80|0121212121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1GI50 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|61e2","America/Montevideo|-02 -03|20 30|01010101|1GI40 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Noronha|-02|20|0||30e2","America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|23e5","Antarctica/Palmer|-03 -04|30 40|010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40","America/Santiago|-03 -04|30 40|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0|62e5","America/Sao_Paulo|-02 -03|20 30|01010101010101010101010|1GCq0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1GI5u 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|010|1GAF0 blz0|10","Antarctica/Davis|+05 +07|-50 -70|01|1GAI0|70","Pacific/Port_Moresby|+10|-a0|0||25e4","Pacific/Guadalcanal|+11|-b0|0||11e4","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|14e5","Asia/Baghdad|+03|-30|0||66e5","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1GPy0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Baku|+04 +05|-40 -50|010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|+07|-70|0||15e6","Asia/Barnaul|+07 +06|-70 -60|010|1N7v0 3rd0","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1GNy0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0|22e5","Asia/Manila|+08|-80|0||24e6","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+10 +08 +09|-a0 -80 -90|012|1N7s0 3re0|33e4","Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1GPy0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Asia/Dili|+09|-90|0||19e4","Asia/Dubai|+04|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|01010101012|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1GPy0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+09 +08|-90 -80|01|1N7t0|60e4","Europe/Istanbul|EET EEST +03|-20 -30 -30|01010101012|1GNB0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1GPA0 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Yakutsk|+10 +09|-a0 -90|01|1N7s0|28e4","Asia/Krasnoyarsk|+08 +07|-80 -70|01|1N7u0|10e5","Asia/Magadan|+12 +10 +11|-c0 -a0 -b0|012|1N7q0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|35e5","Asia/Novosibirsk|+07 +06|-70 -60|010|1N7v0 4eN0|15e5","Asia/Omsk|+07 +06|-70 -60|01|1N7v0|12e5","Asia/Pyongyang|KST KST|-90 -8u|01|1P4D0|29e5","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+11 +10|-b0 -a0|010|1N7r0 3rd0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Srednekolymsk|+12 +11|-c0 -b0|01|1N7q0|35e2","Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1GLUu 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+07 +06|-70 -60|010|1N7v0 3Qp0|10e5","Asia/Vladivostok|+11 +10|-b0 -a0|01|1N7r0|60e4","Asia/Yekaterinburg|+06 +05|-60 -50|01|1N7w0|14e5","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1GQg0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1GQgu 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1GQf0 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1Nb0 Dd0 1Nb0 Ap0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|12e5","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0|","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0|","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/GMT-1|+01|-10|0|","Pacific/Fakaofo|+13|-d0|0||483","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Astrakhan|+04 +03|-40 -30|010|1N7y0 3rd0","Europe/London|GMT BST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|67e4","Europe/Kaliningrad|+03 EET|-30 -20|01|1N7z0|44e4","Europe/Volgograd|+04 +03|-40 -30|01|1N7y0|10e5","Europe/Moscow|MSK MSK|-40 -30|01|1N7y0|16e6","Europe/Saratov|+04 +03|-40 -30|010|1N7y0 5810","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|0101023|1GNB0 1qM0 11A0 1o00 11z0 1nW0|33e4","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|37e3","Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4","Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1Goe0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+1130 +11|-bu -b0|01|1PoCu|25e4","Pacific/Tongatapu|+13 +14|-d0 -e0|01010101010101|1S4d0 s00 1VA0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1VA0 s00 1VA0|75e3"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Khartoum|Africa/Addis_Ababa","Africa/Khartoum|Africa/Asmara","Africa/Khartoum|Africa/Asmera","Africa/Khartoum|Africa/Dar_es_Salaam","Africa/Khartoum|Africa/Djibouti","Africa/Khartoum|Africa/Juba","Africa/Khartoum|Africa/Kampala","Africa/Khartoum|Africa/Mogadishu","Africa/Khartoum|Africa/Nairobi","Africa/Khartoum|Indian/Antananarivo","Africa/Khartoum|Indian/Comoro","Africa/Khartoum|Indian/Mayotte","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/La_Paz|America/Boa_Vista","America/La_Paz|America/Guyana","America/La_Paz|America/Manaus","America/La_Paz|America/Porto_Velho","America/La_Paz|Brazil/West","America/La_Paz|Etc/GMT+4","America/Lima|America/Bogota","America/Lima|America/Guayaquil","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Dawson","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|America/Whitehorse","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Canada/Yukon","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/East-Saskatchewan","America/Managua|Canada/Saskatchewan","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Rio_Branco|America/Eirunepe","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/Palmer|America/Punta_Arenas","Asia/Baghdad|Antarctica/Syowa","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Baghdad|Etc/GMT-3","Asia/Baghdad|Europe/Minsk","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Qyzylorda","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dili|Etc/GMT-9","Asia/Dili|Pacific/Palau","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Samara","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Makassar|Asia/Ujung_Pandang","Asia/Manila|Asia/Brunei","Asia/Manila|Asia/Kuala_Lumpur","Asia/Manila|Asia/Kuching","Asia/Manila|Asia/Singapore","Asia/Manila|Etc/GMT-8","Asia/Manila|Singapore","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Choibalsan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Vladivostok|Asia/Ust-Nera","Asia/Yakutsk|Asia/Khandyga","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Astrakhan|Europe/Ulyanovsk","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Volgograd|Europe/Kirov","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Fakaofo|Etc/GMT-13","Pacific/Fakaofo|Pacific/Enderbury","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guadalcanal|Antarctica/Macquarie","Pacific/Guadalcanal|Etc/GMT-11","Pacific/Guadalcanal|Pacific/Efate","Pacific/Guadalcanal|Pacific/Kosrae","Pacific/Guadalcanal|Pacific/Noumea","Pacific/Guadalcanal|Pacific/Pohnpei","Pacific/Guadalcanal|Pacific/Ponape","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Port_Moresby|Antarctica/DumontDUrville","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga"]})}(e.moment)}((window,document,window.Mango=window.Mango||{})),function(e,t,n){"use strict";var s,o,a,r,i,u,l,c,p,h,f,d,m,y,g,v,b,_,w,A,S,C,k,x,E,P,T,O,M,F,D,j,R,U,I,L,N,B;n.$,n._,n.Promise;o=t,(s=e).PushStream||(r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=function(e){return(e<10?"0":"")+e},(a={}).dateToUTCString=function(e){var t=u(e.getUTCHours())+":"+u(e.getUTCMinutes())+":"+u(e.getUTCSeconds());return r[e.getUTCDay()]+", "+u(e.getUTCDate())+" "+i[e.getUTCMonth()]+" "+e.getUTCFullYear()+" "+t+" GMT"},l=function(){for(var e=arguments[0]||{},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty&&!n.hasOwnProperty(r)||(e[r]=n[r])}return e},c=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,h=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,a.parseJSON=function(t){if(!t||!_(t))return null;if(t=t.replace(/^\s*/,"").replace(/\s*$/,""),s.JSON&&s.JSON.parse)try{return s.JSON.parse(t)}catch(e){throw"Invalid JSON: "+t}if(c.test(t.replace(p,"@").replace(h,"]").replace(f,"")))return new Function("return "+t)();throw"Invalid JSON: "+t},d=function(e){var t={};return t[e.tagArgument]="",t[e.timeArgument]="",t[e.eventIdArgument]="",e.messagesControlByArgument&&(t[e.tagArgument]=Number(e._etag),e._lastModified?t[e.timeArgument]=e._lastModified:e._lastEventId&&(t[e.eventIdArgument]=e._lastEventId)),t},m=function(){return(new Date).getTime()},y=function(){return{_:m()}},g=function(e){var t=e;if("object"==typeof e){for(var n in t="",e)e.hasOwnProperty&&!e.hasOwnProperty(n)||(t+="&"+n+"="+C(e[n]));t=t.substring(1)}return t||""},v=function(e,t){return e+(e.indexOf("?")<0?"?":"&")+g(t)},b=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},_=function(e){return"[object String]"===Object.prototype.toString.call(e)},w=function(e){return"[object Date]"===Object.prototype.toString.call(e)},A={logger:null,debug:function(){"debug"===B.LOG_LEVEL&&A._log.apply(A._log,arguments)},info:function(){"info"!==B.LOG_LEVEL&&"debug"!==B.LOG_LEVEL||A._log.apply(A._log,arguments)},error:function(){A._log.apply(A._log,arguments)},_initLogger:function(){var e=s.console;e&&e.log&&(e.log.apply?A.logger=e.log:"object"==typeof e.log&&Function.prototype.bind?A.logger=Function.prototype.bind.call(e.log,e):"object"==typeof e.log&&Function.prototype.call&&(A.logger=function(){Function.prototype.call.call(e.log,e,Array.prototype.slice.call(arguments))}))},_log:function(){if(A.logger||A._initLogger(),A.logger)try{A.logger.apply(s.console,arguments)}catch(e){A._initLogger(),A.logger&&A.logger.apply(s.console,arguments)}var e=o.getElementById(B.LOG_OUTPUT_ELEMENT_ID);if(e){for(var t="",n=0;n<arguments.length;n++)t+=arguments[n]+" ";e.innerHTML+=t+"\n";var r=e.innerHTML.split("\n");100<r.length&&(e.innerHTML=r.slice(-100).join("\n"))}}},S={_getXHRObject:function(e){var t=!1;if(e){try{t=new s.XDomainRequest}catch(e){}if(t)return t}try{t=new s.XMLHttpRequest}catch(e){try{t=new s.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new s.ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}}return t},_send:function(e,t){(e=e||{}).timeout=e.timeout||3e4;var n=S._getXHRObject(e.crossDomain);if(n&&e.url){S.clear(e),e.xhr=n,s.XDomainRequest&&n instanceof s.XDomainRequest?(n.onload=function(){e.afterReceive&&e.afterReceive(n),e.success&&e.success(n.responseText)},n.onerror=n.ontimeout=function(){e.afterReceive&&e.afterReceive(n),e.error&&e.error(n.status)}):n.onreadystatechange=function(){4===n.readyState&&(S.clear(e),e.afterReceive&&e.afterReceive(n),200===n.status?e.success&&e.success(n.responseText):e.error&&e.error(n.status))},e.beforeOpen&&e.beforeOpen(n);var r={},i=null,o="GET";t?(i=g(e.data),o="POST"):r=e.data||{},n.open(o,v(e.url,l({},r,y())),!0),e.beforeSend&&e.beforeSend(n);return t?n.setRequestHeader&&(n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded")):e.timeoutId=s.setTimeout(function(){S.clear(e);try{n.abort()}catch(e){}e.error(304)},e.timeout+2e3),n.send(i),n}},_clear_xhr:function(e){e&&(e.onreadystatechange=null)},_clear_script:function(e){e&&(e.onerror=e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e))},_clear_timeout:function(e){e.timeoutId=M(e.timeoutId)},_clear_jsonp:function(e){var t=e.data.callback;t&&(s[t]=function(){s[t]=null})},clear:function(e){S._clear_timeout(e),S._clear_jsonp(e),S._clear_script(o.getElementById(e.scriptId)),S._clear_xhr(e.xhr)},jsonp:function(t){t.timeout=t.timeout||3e4,S.clear(t);function n(){S.clear(t);var e=m();t.error(e-i>t.timeout/2?304:403)}var e=o.head||o.getElementsByTagName("head")[0],r=o.createElement("script"),i=m();return r.onerror=n,r.onload=r.onreadystatechange=function(e){r.readyState&&!/loaded|complete/.test(r.readyState)||(t.afterSuccess?(S.clear(t),t.load()):n())},t.beforeOpen&&t.beforeOpen({}),t.beforeSend&&t.beforeSend({}),t.timeoutId=s.setTimeout(n,t.timeout+2e3),t.scriptId=t.scriptId||m(),t.afterSuccess=null,t.data.callback=t.scriptId+"_onmessage_"+m(),s[t.data.callback]=function(){t.afterSuccess=!0,t.success.apply(null,arguments)},r.setAttribute("src",v(t.url,l({},t.data,y()))),r.setAttribute("async","async"),r.setAttribute("id",t.scriptId),e.insertBefore(r,e.firstChild),t},load:function(e){return S._send(e,!1)},post:function(e){return S._send(e,!0)}},C=function(e){return e?s.encodeURIComponent(e):""},k=function(e){return e?s.decodeURIComponent(e):""},a.parseMessage=function(e,t){var n=e;return _(e)&&(n=a.parseJSON(e)),{id:n[t.jsonIdKey],channel:n[t.jsonChannelKey],text:_(n[t.jsonTextKey])?k(n[t.jsonTextKey]):n[t.jsonTextKey],tag:n[t.jsonTagKey],time:n[t.jsonTimeKey],eventid:n[t.jsonEventIdKey]||""}},x=function(e,t){var n,r="";for(var i in e)e.hasOwnProperty&&!e.hasOwnProperty(i)||(r+="/"+i+(t?(n=e[i]).backtrack?".b"+Number(n.backtrack):"":""));return r},E=function(e,t,n,r){var i=e.wrapper.type===R.TYPE,o=e.useSSL,s=T(o,e.port),a=i?o?"wss://":"ws://":o?"https://":"http://";a+=e.host,a+=s?":"+s:"",a+=t;var u,c=x(e.channels,r);return e.channelsByArgument?((u={})[e.channelsArgument]=c.substring(1),n=l({},n,u)):a+=c,v(a,n)},P=function(e){var t=T(e.useSSL,e.port),n=e.useSSL?"https://":"http://";return n+=e.host,n+=t?":"+t:"",n+=e.urlPrefixPublisher,n+="?id="+x(e.channels,!1)},a.extract_xss_domain=function(e){if(e.match(/^(\d{1,3}\.){3}\d{1,3}$/))return e;var t=e.split("."),n=Math.max(t.length-1,e.match(/(\w{4,}\.\w{2}|\.\w{3,})$/)?2:3);return t.slice(-1*n).join(".")},T=function(e,t){return t=Number(t||(e?443:80)),!e&&80===t||e&&443===t?"":t},a.isCrossDomainUrl=function(e){if(!e)return!1;var t=o.createElement("a");t.href=e;var n=T("https:"===s.location.protocol,s.location.port),r=T("https:"===t.protocol,t.port);return s.location.protocol!==t.protocol||s.location.hostname!==t.hostname||n!==r},O=function(e,t){return function(){return e.apply(t,arguments)}},M=function(e){return e&&s.clearTimeout(e),null},F=function(e){A.info("["+this.type+"] message received",arguments);var t=a.parseMessage(e.data,this.pushstream);t.tag&&(this.pushstream._etag=t.tag),t.time&&(this.pushstream._lastModified=t.time),t.eventid&&(this.pushstream._lastEventId=t.eventid),this.pushstream._onmessage(t.text,t.id,t.channel,t.eventid,!0,t.time)},D=function(){this.pushstream._onopen(),A.info("["+this.type+"] connection opened")},j=function(e){A.info("["+this.type+"] error (disconnected by server):",e),this.pushstream.readyState===B.OPEN&&this.type===U.TYPE&&"error"===e.type&&this.connection.readyState===s.EventSource.CONNECTING||(this._closeCurrentConnection(),this.pushstream._onerror({type:e&&("load"===e.type||"close"===e.type&&1006===e.code)||this.pushstream.readyState===B.CONNECTING?"load":"timeout"}))},(R=function(e){if(!s.WebSocket&&!s.MozWebSocket)throw"WebSocket not supported";this.type=R.TYPE,this.pushstream=e,this.connection=null}).TYPE="WebSocket",R.prototype={connect:function(){this._closeCurrentConnection();var e=l({},this.pushstream.extraParams(),y(),d(this.pushstream)),t=E(this.pushstream,this.pushstream.urlPrefixWebsocket,e,!this.pushstream._useControlArguments());this.connection=s.WebSocket?new s.WebSocket(t):new s.MozWebSocket(t),this.connection.onerror=O(j,this),this.connection.onclose=O(j,this),this.connection.onopen=O(D,this),this.connection.onmessage=O(F,this),A.info("[WebSocket] connecting to:",t)},disconnect:function(){this.connection&&(A.debug("[WebSocket] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(e){}this.connection=null}},sendMessage:function(e){this.connection&&this.connection.send(e)}},(U=function(e){if(!s.EventSource)throw"EventSource not supported";this.type=U.TYPE,this.pushstream=e,this.connection=null}).TYPE="EventSource",U.prototype={connect:function(){this._closeCurrentConnection();var e=l({},this.pushstream.extraParams(),y(),d(this.pushstream)),t=E(this.pushstream,this.pushstream.urlPrefixEventsource,e,!this.pushstream._useControlArguments());this.connection=new s.EventSource(t),this.connection.onerror=O(j,this),this.connection.onopen=O(D,this),this.connection.onmessage=O(F,this),A.info("[EventSource] connecting to:",t)},disconnect:function(){this.connection&&(A.debug("[EventSource] closing connection to:",this.connection.url),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(e){}this.connection=null}}},(I=function(e){this.type=I.TYPE,this.pushstream=e,this.connection=null,this.url=null,this.frameloadtimer=null,this.pingtimer=null,this.iframeId="PushStreamManager_"+e.id}).TYPE="Stream",I.prototype={connect:function(){this._closeCurrentConnection();var t=a.extract_xss_domain(this.pushstream.host);try{o.domain=t}catch(e){A.error("[Stream] (warning) problem setting document.domain = "+t+" (OBS: IE8 does not support set IP numbers as domain)")}var e=l({},this.pushstream.extraParams(),y(),{streamid:this.pushstream.id},d(this.pushstream));this.url=E(this.pushstream,this.pushstream.urlPrefixStream,e,!this.pushstream._useControlArguments()),A.debug("[Stream] connecting to:",this.url),this.loadFrame(this.url)},disconnect:function(){this.connection&&(A.debug("[Stream] closing connection to:",this.url),this._closeCurrentConnection(),this.pushstream._onclose())},_clear_iframe:function(){var e=o.getElementById(this.iframeId);e&&(e.onload=null,e.src="about:blank",e.parentNode&&e.parentNode.removeChild(e))},_closeCurrentConnection:function(){this._clear_iframe(),this.connection&&(this.pingtimer=M(this.pingtimer),this.frameloadtimer=M(this.frameloadtimer),this.connection=null,this.transferDoc=null,"function"==typeof s.CollectGarbage&&s.CollectGarbage())},loadFrame:function(e){this._clear_iframe();var t,n=null;"ActiveXObject"in s?((t=new s.ActiveXObject("htmlfile")).open(),t.write("<html><script>document.domain='"+o.domain+"';<\/script>"),t.write("<body><iframe id='"+this.iframeId+"' src='"+e+"'></iframe></body></html>"),t.parentWindow.PushStream=B,t.close(),n=t.getElementById(this.iframeId),this.transferDoc=t):((n=o.createElement("IFRAME")).style.width="1px",n.style.height="1px",n.style.border="none",n.style.position="absolute",n.style.top="-10px",n.style.marginTop="-10px",n.style.zIndex="-20",n.PushStream=B,o.body.appendChild(n),n.setAttribute("src",e),n.setAttribute("id",this.iframeId)),n.onload=O(j,this),this.connection=n,this.frameloadtimer=s.setTimeout(O(j,this),this.pushstream.timeout)},register:function(e){this.frameloadtimer=M(this.frameloadtimer),e.p=O(this.process,this),this.connection.onload=O(this._onframeloaded,this),this.pushstream._onopen(),this.setPingTimer(),A.info("[Stream] frame registered")},process:function(e,t,n,r,i,o){this.pingtimer=M(this.pingtimer),A.info("[Stream] message received",arguments),-1!==e&&(o&&(this.pushstream._etag=o),i&&(this.pushstream._lastModified=i),r&&(this.pushstream._lastEventId=r)),this.pushstream._onmessage(k(n),e,t,r||"",!0,i),this.setPingTimer()},_onframeloaded:function(){A.info("[Stream] frame loaded (disconnected by server)"),this.pushstream._onerror({type:"timeout"}),this.connection.onload=null,this.disconnect()},setPingTimer:function(){this.pingtimer&&M(this.pingtimer),this.pingtimer=s.setTimeout(O(j,this),this.pushstream.pingtimeout)}},(L=function(e){this.type=L.TYPE,this.pushstream=e,this.connection=null,this.opentimer=null,this.messagesQueue=[],this._linkedInternalListen=O(this._internalListen,this),this.xhrSettings={timeout:this.pushstream.timeout,data:{},url:null,success:O(this.onmessage,this),error:O(this.onerror,this),load:O(this.onload,this),beforeSend:O(this.beforeSend,this),afterReceive:O(this.afterReceive,this)}}).TYPE="LongPolling",L.prototype={connect:function(){this.messagesQueue=[],this._closeCurrentConnection(),this.urlWithBacktrack=E(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!0),this.urlWithoutBacktrack=E(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!1),this.xhrSettings.url=this.urlWithBacktrack,this.useJSONP=this.pushstream._crossDomain||this.pushstream.useJSONP,this.xhrSettings.scriptId="PushStreamManager_"+this.pushstream.id,this.useJSONP&&(this.pushstream.messagesControlByArgument=!0),this._listen(),this.opentimer=s.setTimeout(O(D,this),150),A.info("[LongPolling] connecting to:",this.xhrSettings.url)},_listen:function(){this._internalListenTimeout&&M(this._internalListenTimeout),this._internalListenTimeout=s.setTimeout(this._linkedInternalListen,100)},_internalListen:function(){this.pushstream._keepConnected&&(this.xhrSettings.url=this.pushstream._useControlArguments()?this.urlWithoutBacktrack:this.urlWithBacktrack,this.xhrSettings.data=l({},this.pushstream.extraParams(),this.xhrSettings.data,d(this.pushstream)),this.useJSONP?this.connection=S.jsonp(this.xhrSettings):this.connection||(this.connection=S.load(this.xhrSettings)))},disconnect:function(){this.connection&&(A.debug("[LongPolling] closing connection to:",this.xhrSettings.url),this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.opentimer=M(this.opentimer),this.connection){try{this.connection.abort()}catch(e){try{S.clear(this.connection)}catch(e){}}this.connection=null,this.xhrSettings.url=null}},beforeSend:function(e){this.pushstream.messagesControlByArgument||(e.setRequestHeader("If-None-Match",this.pushstream._etag),e.setRequestHeader("If-Modified-Since",this.pushstream._lastModified))},afterReceive:function(e){this.pushstream.messagesControlByArgument||(this.pushstream._etag=e.getResponseHeader("Etag"),this.pushstream._lastModified=e.getResponseHeader("Last-Modified")),this.connection=null},onerror:function(e){this._closeCurrentConnection(),this.pushstream._keepConnected&&(304===e?this._listen():(A.info("[LongPolling] error (disconnected by server):",e),this.pushstream._onerror({type:403===e||this.pushstream.readyState===B.CONNECTING?"load":"timeout"})))},onload:function(){this._listen()},onmessage:function(e){this._internalListenTimeout&&M(this._internalListenTimeout),A.info("[LongPolling] message received",e);for(var t,n=b(e)?e:e.replace(/\}\{/g,"}\r\n{").split("\r\n"),r=0;r<n.length;r++)n[r]&&(t=a.parseMessage(n[r],this.pushstream),this.messagesQueue.push(t),this.pushstream.messagesControlByArgument&&t.time&&(this.pushstream._etag=t.tag,this.pushstream._lastModified=t.time));for(this._listen();0<this.messagesQueue.length;){var i=this.messagesQueue.shift();this.pushstream._onmessage(i.text,i.id,i.channel,i.eventid,0===this.messagesQueue.length,i.time)}}},N=[],(B=function(e){e=e||{},this.id=N.push(this)-1,this.useSSL=e.useSSL||!1,this.host=e.host||s.location.hostname,this.port=Number(e.port||(this.useSSL?443:80)),this.timeout=e.timeout||3e4,this.pingtimeout=e.pingtimeout||3e4,this.reconnectOnTimeoutInterval=e.reconnectOnTimeoutInterval||3e3,this.reconnectOnChannelUnavailableInterval=e.reconnectOnChannelUnavailableInterval||6e4,this.autoReconnect=!1!==e.autoReconnect,this.lastEventId=e.lastEventId||null,this.messagesPublishedAfter=e.messagesPublishedAfter,this.messagesControlByArgument=e.messagesControlByArgument||!1,this.tagArgument=e.tagArgument||"tag",this.timeArgument=e.timeArgument||"time",this.eventIdArgument=e.eventIdArgument||"eventid",this.useJSONP=e.useJSONP||!1,this._reconnecttimer=null,this._etag=0,this._lastModified=null,this._lastEventId=null,this.urlPrefixPublisher=e.urlPrefixPublisher||"/pub",this.urlPrefixStream=e.urlPrefixStream||"/sub",this.urlPrefixEventsource=e.urlPrefixEventsource||"/ev",this.urlPrefixLongpolling=e.urlPrefixLongpolling||"/lp",this.urlPrefixWebsocket=e.urlPrefixWebsocket||"/ws",this.jsonIdKey=e.jsonIdKey||"id",this.jsonChannelKey=e.jsonChannelKey||"channel",this.jsonTextKey=e.jsonTextKey||"text",this.jsonTagKey=e.jsonTagKey||"tag",this.jsonTimeKey=e.jsonTimeKey||"time",this.jsonEventIdKey=e.jsonEventIdKey||"eventid",this.modes=(e.modes||"eventsource|websocket|stream|longpolling").split("|"),this.wrappers=[],this.wrapper=null,this.onchanneldeleted=e.onchanneldeleted||null,this.onmessage=e.onmessage||null,this.onerror=e.onerror||null,this.onstatuschange=e.onstatuschange||null,this.extraParams=e.extraParams||function(){return{}},this.channels={},this.channelsCount=0,this.channelsByArgument=e.channelsByArgument||!1,this.channelsArgument=e.channelsArgument||"channels",this._crossDomain=a.isCrossDomainUrl(P(this));for(var t=0;t<this.modes.length;t++)try{var n=null;switch(this.modes[t]){case"websocket":n=new R(this);break;case"eventsource":n=new U(this);break;case"longpolling":n=new L(this);break;case"stream":n=new I(this)}this.wrappers[this.wrappers.length]=n}catch(e){A.info(e)}this.readyState=0}).LOG_LEVEL="error",B.LOG_OUTPUT_ELEMENT_ID="Log4jsLogOutput",B.CLOSED=0,B.CONNECTING=1,B.OPEN=2,B.prototype={addChannel:function(e,t){if(C(e)!==e)throw"Invalid channel name! Channel has to be a set of [a-zA-Z0-9]";if(A.debug("entering addChannel"),void 0!==this.channels[e])throw"Cannot add channel "+e+": already subscribed";t=t||{},A.info("adding channel",e,t),this.channels[e]=t,this.channelsCount++,this.readyState!==B.CLOSED&&this.connect(),A.debug("leaving addChannel")},removeChannel:function(e){this.channels[e]&&(A.info("removing channel",e),delete this.channels[e],this.channelsCount--)},removeAllChannels:function(){A.info("removing all channels"),this.channels={},this.channelsCount=0},_setState:function(e){this.readyState!==e&&(A.info("status changed",e),this.readyState=e,this.onstatuschange&&this.onstatuschange(this.readyState))},connect:function(){if(A.debug("entering connect"),!this.host)throw"PushStream host not specified";if(isNaN(this.port))throw"PushStream port not specified";if(!this.channelsCount)throw"No channels specified";if(0===this.wrappers.length)throw"No available support for this browser";this._keepConnected=!0,this._lastUsedMode=0,this._connect(),A.debug("leaving connect")},disconnect:function(){A.debug("entering disconnect"),this._keepConnected=!1,this._disconnect(),this._setState(B.CLOSED),A.info("disconnected"),A.debug("leaving disconnect")},_useControlArguments:function(){return this.messagesControlByArgument&&(null!==this._lastModified||null!==this._lastEventId)},_connect:function(){var e,t;null===this._lastEventId&&(this._lastEventId=this.lastEventId),null===this._lastModified&&(e=this.messagesPublishedAfter,w(e)||(0<(t=Number(this.messagesPublishedAfter))?(e=new Date).setTime(e.getTime()-1e3*t):t<0&&(e=new Date(0))),w(e)&&(this._lastModified=a.dateToUTCString(e))),this._disconnect(),this._setState(B.CONNECTING),this.wrapper=this.wrappers[this._lastUsedMode++%this.wrappers.length];try{this.wrapper.connect()}catch(e){this.wrapper&&this.wrapper.disconnect()}},_disconnect:function(){this._reconnecttimer=M(this._reconnecttimer),this.wrapper&&this.wrapper.disconnect()},_onopen:function(){this._reconnecttimer=M(this._reconnecttimer),this._setState(B.OPEN),0<this._lastUsedMode&&this._lastUsedMode--},_onclose:function(){this._reconnecttimer=M(this._reconnecttimer),this._setState(B.CLOSED),this._reconnect(this.reconnectOnTimeoutInterval)},_onmessage:function(e,t,n,r,i,o){A.debug("message",e,t,n,r,i,o),-2===t?this.onchanneldeleted&&this.onchanneldeleted(n):0<t&&this.onmessage&&this.onmessage(e,t,n,r,i,o)},_onerror:function(e){this._setState(B.CLOSED),this._reconnect("timeout"===e.type?this.reconnectOnTimeoutInterval:this.reconnectOnChannelUnavailableInterval),this.onerror&&this.onerror(e)},_reconnect:function(e){this.autoReconnect&&this._keepConnected&&!this._reconnecttimer&&this.readyState!==B.CONNECTING&&(A.info("trying to reconnect in",e),this._reconnecttimer=s.setTimeout(O(this._connect,this),e))},sendMessage:function(e,t,n){e=C(e),this.wrapper.type===R.TYPE?(this.wrapper.sendMessage(e),t&&t()):S.post({url:P(this),data:e,success:t,error:n,crossDomain:this._crossDomain})}},B.sendMessage=function(e,t,n,r){S.post({url:e,data:C(t),success:n,error:r})},B.register=function(e){var t=e.window.location.href.match(/streamid=([0-9]*)&?/);t[1]&&N[t[1]]&&N[t[1]].wrapper.register(e)},B.unload=function(){for(var e=0;e<N.length;e++)try{N[e].disconnect()}catch(e){}},n.PushStream=B,n.PushStreamManager=N,s.attachEvent&&s.attachEvent("onunload",B.unload),s.addEventListener&&s.addEventListener.call(s,"unload",B.unload,!1))}(window,document,window.Mango=window.Mango||{}),function(e){"use strict";!function(e){"use strict";function i(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function t(e,t,n){var r={mm:t?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};if(n==="m"){return t?"минута":"минуту"}else{return e+" "+i(r[n],+e)}}var n=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],r;e.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., HH:mm",LLLL:"dddd, D MMMM YYYY г., HH:mm"},calendar:{sameDay:"[Сегодня]",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(e){if(e.week()!==this.week()){switch(this.day()){case 0:return"[В следующее] dddd [в] LT";case 1:case 2:case 4:return"[В следующий] dddd [в] LT";case 3:case 5:case 6:return"[В следующую] dddd [в] LT"}}else{if(this.day()===2){return"[Во] dddd [в] LT"}else{return"[В] dddd [в] LT"}}},lastWeek:function(e){if(e.week()!==this.week()){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}}else{if(this.day()===2){return"[Во] dddd [в] LT"}else{return"[В] dddd [в] LT"}}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:t,mm:t,h:"час",hh:t,d:"день",dd:t,M:"месяц",MM:t,y:"год",yy:t},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){if(e<4){return"ночи"}else if(e<12){return"утра"}else if(e<17){return"дня"}else{return"вечера"}},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:7}})}(e.Mango.moment)}(window,(document,window.Mango=window.Mango||{})),function(window,document,Mango){"use strict";var $=Mango.$,_=Mango._,Promise=Mango.Promise,kKa;kKa=function(){var define,module,exports;return function o(s,a,u){function c(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[t]={exports:{}};s[t][0].call(i.exports,function(e){return c(s[t][1][e]||e)},i,i.exports,o,s,a,u)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){function s(){}t.exports=function(e,n,r){var i=!1;return r=r||s,0===(o.count=e)?n():o;function o(e,t){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,n(e),n=r):0!==o.count||i||n(null,t)}}},{}],2:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),r<n&&(n=r),r<=t||n<=t||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},{}],3:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(t.exports=r).prototype.duration=function(){var e,t,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*n),n=0==(1&Math.floor(10*e))?n-t:n+t),0|Math.min(n,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],4:[function(e,t,n){!function(){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=new Uint8Array(256),e=0;e<o.length;e++)p[o.charCodeAt(e)]=e;n.encode=function(e){for(var t=new Uint8Array(e),n=t.length,r="",i=0;i<n;i+=3)r+=o[t[i]>>2],r+=o[(3&t[i])<<4|t[i+1]>>4],r+=o[(15&t[i+1])<<2|t[i+2]>>6],r+=o[63&t[i+2]];return n%3==2?r=r.substring(0,r.length-1)+"=":n%3==1&&(r=r.substring(0,r.length-2)+"=="),r},n.decode=function(e){var t,n,r,i,o=.75*e.length,s=e.length,a=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);for(var u=new ArrayBuffer(o),c=new Uint8Array(u),l=0;l<s;l+=4)t=p[e.charCodeAt(l)],n=p[e.charCodeAt(l+1)],r=p[e.charCodeAt(l+2)],i=p[e.charCodeAt(l+3)],c[a++]=t<<2|n>>4,c[a++]=(15&n)<<4|r>>2,c[a++]=(3&r)<<6|63&i;return u}}()},{}],5:[function(e,t,n){n.byteLength=function(e){var t=p(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=p(e),r=n[0],i=n[1],o=new l(function(e,t){return 3*(e+t)/4-t}(r,i)),s=0,a=0<i?r-4:r,u=0;u<a;u+=4)t=c[e.charCodeAt(u)]<<18|c[e.charCodeAt(u+1)]<<12|c[e.charCodeAt(u+2)]<<6|c[e.charCodeAt(u+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===i&&(t=c[e.charCodeAt(u)]<<2|c[e.charCodeAt(u+1)]>>4,o[s++]=255&t);1===i&&(t=c[e.charCodeAt(u)]<<10|c[e.charCodeAt(u+1)]<<4|c[e.charCodeAt(u+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},n.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(function(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(r));return i.join("")}(e,o,s<o+16383?s:o+16383));1==r?(t=e[n-1],i.push(a[t>>2]+a[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return i.join("")};for(var a=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)a[i]=r[i],c[r.charCodeAt(i)]=i;function p(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],6:[function(e,t,n){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),s=r&&r.prototype.append&&r.prototype.getBlob;function a(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t,n=e.buffer;return e.byteLength!==n.byteLength&&((t=new Uint8Array(e.byteLength)).set(new Uint8Array(n,e.byteOffset,e.byteLength)),n=t.buffer),n}return e})}function u(e,t){t=t||{};var n=new r;return a(e).forEach(function(e){n.append(e)}),t.type?n.getBlob(t.type):n.getBlob()}function c(e,t){return new Blob(a(e),t||{})}"undefined"!=typeof Blob&&(u.prototype=Blob.prototype,c.prototype=Blob.prototype),t.exports=i?o?Blob:c:s?u:void 0},{}],7:[function(e,t,n){},{}],8:[function(e,t,n){var a=e("base64-js"),o=e("ieee754");n.Buffer=p,n.SlowBuffer=function(e){+e!=e&&(e=0);return p.alloc(+e)},n.INSPECT_MAX_BYTES=50;var r=2147483647;function s(e){if(r<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=p.prototype,t}function p(e,t,n){if("number"!=typeof e)return i(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}function i(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!p.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=s(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return l(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=p.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return p.from(r,t,n);var i=function(e){if(p.isBuffer(e)){var t=0|h(e.length),n=s(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(void 0!==e.length)return"number"!=typeof e.length||F(e.length)?s(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|h(e))}function l(e){for(var t=e.length<0?0:0|h(e.length),n=s(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(r<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return T(e).length;default:if(i)return r?-1:P(e).length;t=(""+t).toLowerCase(),i=!0}}function d(e,t,n){var r,i,o,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?a.fromByteArray(r):a.fromByteArray(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),F(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=p.from(t,r)),p.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(s<n+a&&(n=s-a),l=n;0<=l;l--){for(var p=!0,h=0;h<a;h++)if(u(e,l+h)!==u(t,h)){p=!1;break}if(p)return l}return-1}function v(e,t,n,r){return O(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return O(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=p}return function(e){var t=e.length;if(t<=w)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=w));return n}(r)}n.kMaxLength=r,(p.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),p.poolSize=8192,p.from=i,p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,p.alloc=function(e,t,n){return i=t,o=n,u(r=e),!(r<=0)&&void 0!==i?"string"==typeof o?s(r).fill(i,o):s(r).fill(i):s(r);var r,i,o},p.allocUnsafe=c,p.allocUnsafeSlow=c,p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(M(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=p.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(M(o,Uint8Array)&&(o=p.from(o)),!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},p.byteLength=f,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):d.apply(this,arguments)},p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},p.prototype.compare=function(e,t,n,r,i){if(M(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},p.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u,c,l,p=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;(!r||i<(r=Number(r)))&&(r=i);var o=t.length;o/2<r&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(F(a))return s;e[n+s]=a}return s}(this,e,t,n);case"utf8":case"utf-8":return c=t,l=n,O(P(e,(u=this).length-c),u,c,l);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return o=this,s=t,a=n,O(T(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var w=4096;function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function S(e,t,n,r,i,o){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(e,t,n,r,i){return t=+t,n>>>=0,i||C(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function x(e,t,n,r,i){return t=+t,n>>>=0,i||C(e,0,n,8),o.write(e,t,n,r,52,8),n+8}p.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=p.prototype,r},p.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},p.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},p.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},p.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},p.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),o.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),o.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),o.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),o.read(this,e,!1,52,8)},p.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},p.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||S(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},p.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeIntLE=function(e,t,n,r){var i;e=+e,t>>>=0,r||S(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},p.prototype.writeIntBE=function(e,t,n,r){var i;e=+e,t>>>=0,r||S(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var o=n-1,s=1,a=0;for(this[t+o]=255&e;0<=--o&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||S(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeFloatLE=function(e,t,n){return k(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return k(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return x(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return x(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,r){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;0<=o;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},p.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===r&&i<128||"latin1"===r)&&(e=i))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(o=t;o<n;++o)this[o]=e;else{var s=p.isBuffer(e)?e:p.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var E=/[^+/0-9A-Za-z-_]/g;function P(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function T(e){return a.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function M(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}},{"base64-js":5,ieee754:40}],9:[function(e,t,n){function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"==r||"number"==r)e.push(n);else if(Array.isArray(n)&&n.length){var i=s.apply(null,n);i&&e.push(i)}else if("object"==r)for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}var a;a={}.hasOwnProperty,void 0!==t&&t.exports?(s.default=s,t.exports=s):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return s}):window.classNames=s},{}],10:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],11:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}void 0!==t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],12:[function(e,t,n){t.exports=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],13:[function(e,t,n){var i=e("./lib/fingerprint.js"),r=e("./lib/pad.js"),o=e("./lib/getRandomValue.js"),s=0,a=4,u=36,c=Math.pow(u,a);function l(){return r((o()*c<<0).toString(u),a)}function p(){return s=s<c?s:0,++s-1}function h(){return"c"+(new Date).getTime().toString(u)+r(p().toString(u),a)+i()+(l()+l())}h.slug=function(){var e=(new Date).getTime().toString(36),t=p().toString(36).slice(-4),n=i().slice(0,1)+i().slice(-1),r=l().slice(-2);return e.slice(-2)+t+n+r},h.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},h.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return 7<=t&&t<=10},h.fingerprint=i,t.exports=h},{"./lib/fingerprint.js":14,"./lib/getRandomValue.js":15,"./lib/pad.js":16}],14:[function(e,t,n){var r=e("./pad.js"),i="object"==typeof window?window:self,o=Object.keys(i).length,s=r(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+o.toString(36),4);t.exports=function(){return s}},{"./pad.js":16}],15:[function(e,t,n){var r,i,o=window.crypto||window.msCrypto;i=o?(r=Math.pow(2,32)-1,function(){return Math.abs(o.getRandomValues(new Uint32Array(1))[0]/r)}):Math.random,t.exports=i},{}],16:[function(e,t,n){t.exports=function(e,t){var n="000000000"+e;return n.substr(n.length-t)}},{}],17:[function(e,t,n){t.exports=function(i,o){if("string"==typeof i){var e=i;if(!(i=window.document.querySelector(i)))throw new Error('"'+e+'" does not match any HTML elements')}if(!i)throw new Error('"'+i+'" is not a valid HTML element');"function"==typeof o&&(o={onDrop:o});var s;return i.addEventListener("dragenter",t,!1),i.addEventListener("dragover",n,!1),i.addEventListener("dragleave",r,!1),i.addEventListener("drop",a,!1),function(){u(),i.removeEventListener("dragenter",t,!1),i.removeEventListener("dragover",n,!1),i.removeEventListener("dragleave",r,!1),i.removeEventListener("drop",a,!1)};function t(e){return o.onDragEnter&&o.onDragEnter(e),e.stopPropagation(),e.preventDefault(),!1}function n(e){if(e.stopPropagation(),e.preventDefault(),e.dataTransfer.items){var t=p(e.dataTransfer.items),n=t.filter(function(e){return"file"===e.kind}),r=t.filter(function(e){return"string"===e.kind});if(0===n.length&&!o.onDropText)return;if(0===r.length&&!o.onDrop)return;if(0===n.length&&0===r.length)return}return i.classList.add("drag"),clearTimeout(s),o.onDragOver&&o.onDragOver(e),!(e.dataTransfer.dropEffect="copy")}function r(e){return e.stopPropagation(),e.preventDefault(),o.onDragLeave&&o.onDragLeave(e),clearTimeout(s),s=setTimeout(u,50),!1}function a(e){e.stopPropagation(),e.preventDefault(),o.onDragLeave&&o.onDragLeave(e),clearTimeout(s),u();var n={x:e.clientX,y:e.clientY},t=e.dataTransfer.getData("text");if(t&&o.onDropText&&o.onDropText(t,n),e.dataTransfer.items){var r=p(e.dataTransfer.items).filter(function(e){return"file"===e.kind});if(0===r.length)return;l(r.map(function(t){return function(e){!function n(t,r){var i=[];{var e;t.isFile?t.file(function(e){e.fullPath=t.fullPath,r(null,e)},function(e){r(e)}):t.isDirectory&&(e=t.createReader(),o())}function o(){e.readEntries(function(e){0<e.length?(i=i.concat(p(e)),o()):s()})}function s(){l(i.map(function(t){return function(e){n(t,e)}}),r)}}(t.webkitGetAsEntry(),e)}}),function(e,t){if(e)throw e;o.onDrop&&o.onDrop(c(t),n)})}else{var i=p(e.dataTransfer.files);if(0===i.length)return;i.forEach(function(e){e.fullPath="/"+e.name}),o.onDrop&&o.onDrop(i,n)}return!1}function u(){i.classList.remove("drag")}};var c=e("flatten"),l=e("run-parallel");function p(e){return Array.prototype.slice.call(e||[],0)}},{flatten:36,"run-parallel":56}],18:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":19,"engine.io-parser":30}],19:[function(t,n,e){(function(r){var i=t("./transports/index"),e=t("component-emitter"),p=t("debug")("engine.io-client:socket"),o=t("indexof"),s=t("engine.io-parser"),a=t("parseuri"),u=t("parseqs");function h(e,t){if(!(this instanceof h))return new h(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=a(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=a(t.host).host),this.secure=null!=t.secure?t.secure:r.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(r.location?location.hostname:"localhost"),this.port=t.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode;var n="object"==typeof r&&r;n.global===n&&(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(n.exports=h).priorWebsocketSuccess=!1,e(h.prototype),h.protocol=s.protocol,(h.Socket=h).Transport=t("./transport"),h.transports=t("./transports/index"),h.parser=t("engine.io-parser"),h.prototype.createTransport=function(e){p('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new i[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0})},h.prototype.open=function(){var e;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},h.prototype.setTransport=function(e){p("setting transport %s",e.name);var t=this;this.transport&&(p("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},h.prototype.probe=function(n){p('probing transport "%s"',n);var r=this.createTransport(n,{probe:1}),i=!1,o=this;function e(){var e;o.onlyBinaryUpgrades&&(e=!this.supportsBinary&&o.transport.supportsBinary,i=i||e),i||(p('probe transport "%s" opened',n),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(p('probe transport "%s" pong',n),o.upgrading=!0,o.emit("upgrading",r),!r)return;h.priorWebsocketSuccess="websocket"===r.name,p('pausing current transport "%s"',o.transport.name),o.transport.pause(function(){i||"closed"!==o.readyState&&(p("changing transport and sending upgrade packet"),l(),o.setTransport(r),r.send([{type:"upgrade"}]),o.emit("upgrade",r),r=null,o.upgrading=!1,o.flush())})}else{p('probe transport "%s" failed',n);var t=new Error("probe error");t.transport=r.name,o.emit("upgradeError",t)}}))}function s(){i||(i=!0,l(),r.close(),r=null)}function t(e){var t=new Error("probe error: "+e);t.transport=r.name,s(),p('probe transport "%s" failed because of error: %s',n,e),o.emit("upgradeError",t)}function a(){t("transport closed")}function u(){t("socket closed")}function c(e){r&&e.name!==r.name&&(p('"%s" works - aborting "%s"',e.name,r.name),s())}function l(){r.removeListener("open",e),r.removeListener("error",t),r.removeListener("close",a),o.removeListener("close",u),o.removeListener("upgrading",c)}h.priorWebsocketSuccess=!1,r.once("open",e),r.once("error",t),r.once("close",a),this.once("close",u),this.once("upgrading",c),r.open()},h.prototype.onOpen=function(){if(p("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){p("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},h.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(p('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else p('packet received with socket readyState "%s"',this.readyState)},h.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},h.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},h.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){p("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},h.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},h.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(p("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},h.prototype.write=h.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},h.prototype.sendPacket=function(e,t,n,r){var i;"function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,i={type:e,data:t,options:n},this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush())},h.prototype.close=function(){var e;function t(){e.onClose("forced close"),p("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(e=this).writeBuffer.length?this.once("drain",function(){(this.upgrading?r:t)()}):(this.upgrading?r:t)()),this},h.prototype.onError=function(e){p("socket error %j",e),h.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},h.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(p('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},h.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~o(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"./transport":20,"./transports/index":21,"component-emitter":11,debug:28,"engine.io-parser":30,indexof:41,parseqs:46,parseuri:47}],20:[function(e,t,n){var r=e("engine.io-parser");function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e("component-emitter")((t.exports=i).prototype),i.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":11,"engine.io-parser":30}],21:[function(t,e,n){(function(s){var a=t("xmlhttprequest-ssl"),u=t("./polling-xhr"),c=t("./polling-jsonp"),e=t("./websocket");n.polling=function(e){var t=!1,n=!1,r=!1!==e.jsonp;{var i,o;s.location&&(i="https:"===location.protocol,o=(o=location.port)||(i?443:80),t=e.hostname!==location.hostname||o!==e.port,n=e.secure!==i)}{if(e.xdomain=t,e.xscheme=n,"open"in new a(e)&&!e.forceJSONP)return new u(e);if(!r)throw new Error("JSONP disabled");return new c(e)}},n.websocket=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"./polling-jsonp":22,"./polling-xhr":23,"./websocket":25,"xmlhttprequest-ssl":26}],22:[function(s,a,e){(function(n){var r=s("./polling"),e=s("component-inherit");a.exports=t;var i,c=/\n/g,l=/\\n/g;function o(){}function t(e){r.call(this,e),this.query=this.query||{},i||(n.___eio||(n.___eio=[]),i=n.___eio),this.index=i.length;var t=this;i.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=o)},!1)}e(t,r),t.prototype.supportsBinary=!1,t.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},t.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},t.prototype.doWrite=function(e,t){var n,r,i,o,s=this;function a(){u(),t()}function u(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+s.iframeId+'">';o=document.createElement(e)}catch(e){(o=document.createElement("iframe")).name=s.iframeId,o.src="javascript:0"}o.id=s.iframeId,s.form.appendChild(o),s.iframe=o}this.form||(n=document.createElement("form"),r=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=i,n.method="POST",n.setAttribute("accept-charset","utf-8"),r.name="d",n.appendChild(r),document.body.appendChild(n),this.form=n,this.area=r),this.form.action=this.uri(),u(),e=e.replace(l,"\\\n"),this.area.value=e.replace(c,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&a()}:this.iframe.onload=a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"./polling":24,"component-inherit":12}],23:[function(l,p,e){(function(i){var o=l("xmlhttprequest-ssl"),r=l("./polling"),e=l("component-emitter"),t=l("component-inherit"),s=l("debug")("engine.io-client:polling-xhr");function n(){}function a(e){var t,n;r.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,i.location&&(t="https:"===location.protocol,n=(n=location.port)||(t?443:80),this.xd=e.hostname!==i.location.hostname||n!==e.port,this.xs=e.secure!==t)}function u(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function c(){for(var e in u.requests)u.requests.hasOwnProperty(e)&&u.requests[e].abort()}p.exports=a,p.exports.Request=u,t(a,r),a.prototype.supportsBinary=!0,a.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new u(e)},a.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},a.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},e(u.prototype),u.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new o(e),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var r in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&t.setRequestHeader(r,this.extraHeaders[r])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");n.supportsBinary&&"application/octet-stream"===e&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout(function(){n.onError(t.status)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){n.onError(e)},0)}i.document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},u.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},u.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(e){}i.document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e="application/octet-stream"===t&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},u.prototype.hasXDR=function(){return void 0!==i.XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},i.document&&(i.attachEvent?i.attachEvent("onunload",c):i.addEventListener&&i.addEventListener("beforeunload",c,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"./polling":24,"component-emitter":11,"component-inherit":12,debug:28,"xmlhttprequest-ssl":26}],24:[function(e,t,n){var r=e("../transport"),i=e("parseqs"),o=e("engine.io-parser"),s=e("component-inherit"),a=e("yeast"),u=e("debug")("engine.io-client:polling");t.exports=l;var c=null!=new(e("xmlhttprequest-ssl"))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}s(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t,n=this;function r(){u("paused"),n.readyState="paused",e()}this.readyState="pausing",this.polling||!this.writable?(t=0,this.polling&&(u("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){u("pre-pause polling complete"),--t||r()})),this.writable||(u("we are currently writing - waiting to pause"),t++,this.once("drain",function(){u("pre-pause writing complete"),--t||r()}))):r()},l.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var r=this;u("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,function(e,t,n){if("opening"===r.readyState&&r.onOpen(),"close"===e.type)return r.onClose(),!1;r.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){u("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;function n(){t.writable=!0,t.emit("drain")}o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!==Number(this.port)||"http"==t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":20,"component-inherit":12,debug:28,"engine.io-parser":30,parseqs:46,"xmlhttprequest-ssl":26,yeast:87}],25:[function(p,h,e){(function(o){var t,n=p("../transport"),s=p("engine.io-parser"),r=p("parseqs"),e=p("component-inherit"),i=p("yeast"),a=p("debug")("engine.io-client:websocket"),u=o.WebSocket||o.MozWebSocket;if(void 0===window)try{t=p("ws")}catch(e){}var c=u;function l(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=u&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(c=t),n.call(this,e)}c||void 0!==window||(c=t),e(h.exports=l,n),l.prototype.name="websocket",l.prototype.supportsBinary=!0,l.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new c(e,t):new c(e):new c(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},l.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},l.prototype.write=function(e){var r=this;this.writable=!1;for(var i=e.length,t=0,n=i;t<n;t++)!function(n){s.encodePacket(n,r.supportsBinary,function(e){var t;r.usingBrowserWebSocket||(t={},n.options&&(t.compress=n.options.compress),r.perMessageDeflate&&("string"==typeof e?o.Buffer.byteLength(e):e.length)<r.perMessageDeflate.threshold&&(t.compress=!1));try{r.usingBrowserWebSocket?r.ws.send(e):r.ws.send(e,t)}catch(e){a("websocket closed before onclose event")}--i||(r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0))})}(e[t])},l.prototype.onClose=function(){n.prototype.onClose.call(this)},l.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!==Number(this.port)||"ws"==t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=i()),this.supportsBinary||(e.b64=1),(e=r.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},l.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===l.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"../transport":20,"component-inherit":12,debug:28,"engine.io-parser":30,parseqs:46,ws:7,yeast:87}],26:[function(e,t,n){(function(i){var o=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||o))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"has-cors":39}],27:[function(e,t,n){function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,r=typeof e;if("string"==r&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"==r&&!1===isNaN(e))return t.long?i(n=e,864e5,"day")||i(n,36e5,"hour")||i(n,6e4,"minute")||i(n,1e3,"second")||n+" ms":function(e){if(864e5<=e)return Math.round(e/864e5)+"d";if(36e5<=e)return Math.round(e/36e5)+"h";if(6e4<=e)return Math.round(e/6e4)+"m";if(1e3<=e)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],28:[function(n,r,o){(function(t){function e(){var e;try{e=o.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(o=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+o.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=e,o.useColors=function(){if(void 0!==window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return void 0!==document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||void 0!==window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(e())}).call(this,n("_process"))},{"./debug":29,_process:51}],29:[function(e,t,u){function n(e){var r;function a(){if(a.enabled){var i=a,e=+new Date,t=e-(r||e);i.diff=t,i.prev=r,i.curr=e,r=e;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=u.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;s++;var n,r=u.formatters[t];return"function"==typeof r&&(n=o[s],e=r.call(i,n),o.splice(s,1),s--),e}),u.formatArgs.call(i,o),(a.log||u.log||console.log.bind(console)).apply(i,o)}}return a.namespace=e,a.enabled=u.enabled(e),a.useColors=u.useColors(),a.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return u.colors[Math.abs(n)%u.colors.length]}(e),a.destroy=i,"function"==typeof u.init&&u.init(a),u.instances.push(a),a}function i(){var e=u.instances.indexOf(this);return-1!==e&&(u.instances.splice(e,1),!0)}(u=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},u.disable=function(){u.enable("")},u.enable=function(e){var t;u.save(e),u.names=[],u.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?u.skips.push(new RegExp("^"+e.substr(1)+"$")):u.names.push(new RegExp("^"+e+"$")));for(t=0;t<u.instances.length;t++){var i=u.instances[t];i.enabled=u.enabled(i.namespace)}},u.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=u.skips.length;t<n;t++)if(u.skips[t].test(e))return!1;for(t=0,n=u.names.length;t<n;t++)if(u.names[t].test(e))return!0;return!1},u.humanize=e("ms"),u.instances=[],u.names=[],u.skips=[],u.formatters={}},{ms:27}],30:[function(e,t,h){var i,n=e("./keys"),o=e("has-binary2"),f=e("arraybuffer.slice"),s=e("after"),c=e("./utf8");"undefined"!=typeof ArrayBuffer&&(i=e("base64-arraybuffer"));var r="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),a="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),l=r||a;h.protocol=3;var p=h.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},u=n(p),d={type:"error",data:"parser error"},m=e("blob");function y(e,t,n){for(var i=new Array(e.length),r=s(e.length,n),o=0;o<e.length;o++)!function(n,e,r){t(e,function(e,t){i[n]=t,r(e,i)})}(o,e[o],r)}h.encodePacket=function(e,t,n,r){"function"==typeof t&&(r=t,t=!1),"function"==typeof n&&(r=n,n=null);var i,o,s,a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(e,t,n){if(!t)return h.encodeBase64Packet(e,n);var r=e.data,i=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=p[e.type];for(var s=0;s<i.length;s++)o[s+1]=i[s];return n(o.buffer)}(e,t,r);if(void 0!==m&&a instanceof m)return function(e,t,n){if(!t)return h.encodeBase64Packet(e,n);if(l)return function(e,t,n){if(!t)return h.encodeBase64Packet(e,n);var r=new FileReader;return r.onload=function(){h.encodePacket({type:e.type,data:r.result},t,!0,n)},r.readAsArrayBuffer(e.data)}(e,t,n);var r=new Uint8Array(1);r[0]=p[e.type];var i=new m([r.buffer,e.data]);return n(i)}(e,t,r);if(a&&a.base64)return i=e,o=r,s="b"+h.packets[i.type]+i.data.data,o(s);var u=p[e.type];return void 0!==e.data&&(u+=n?c.encode(String(e.data),{strict:!1}):String(e.data)),r(""+u)},h.encodeBase64Packet=function(t,n){var r,i="b"+h.packets[t.type];if(void 0!==m&&t.data instanceof m){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];r=String.fromCharCode.apply(null,a)}return i+=btoa(r),n(i)},h.decodePacket=function(e,t,n){if(void 0===e)return d;if("string"==typeof e){if("b"===e.charAt(0))return h.decodeBase64Packet(e.substr(1),t);if(n&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return d;var r=e.charAt(0);return Number(r)==r&&u[r]?1<e.length?{type:u[r],data:e.substring(1)}:{type:u[r]}:d}var r=new Uint8Array(e)[0],i=f(e,1);return m&&"blob"===t&&(i=new m([i])),{type:u[r],data:i}},h.decodeBase64Packet=function(e,t){var n=u[e.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=i.decode(e.substr(1));return"blob"===t&&m&&(r=new m([r])),{type:n,data:r}},h.encodePayload=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=o(e);if(t&&r)return m&&!l?h.encodePayloadAsBlob(e,n):h.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");y(e,function(e,n){h.encodePacket(e,!!r&&t,!1,function(e){var t;n(null,(t=e).length+":"+t)})},function(e,t){return n(t.join(""))})},h.decodePayload=function(e,t,n){if("string"!=typeof e)return h.decodePayloadAsBinary(e,t,n);var r;if("function"==typeof t&&(n=t,t=null),""===e)return n(d,0,1);for(var i,o,s="",a=0,u=e.length;a<u;a++){var c=e.charAt(a);if(":"===c){if(""===s||s!=(i=Number(s)))return n(d,0,1);if(s!=(o=e.substr(a+1,i)).length)return n(d,0,1);if(o.length){if(r=h.decodePacket(o,t,!1),d.type===r.type&&d.data===r.data)return n(d,0,1);if(!1===n(r,a+i,u))return}a+=i,s=""}else s+=c}return""!==s?n(d,0,1):void 0},h.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));y(e,function(e,t){h.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,t){var n=t.reduce(function(e,t){var n="string"==typeof t?t.length:t.byteLength;return e+n.toString().length+n+2},0),s=new Uint8Array(n),a=0;return t.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);n=r.buffer}s[a++]=t?0:1;for(var o=n.byteLength.toString(),i=0;i<o.length;i++)s[a++]=parseInt(o[i]);s[a++]=255;for(r=new Uint8Array(n),i=0;i<r.length;i++)s[a++]=r[i]}),r(s.buffer)})},h.encodePayloadAsBlob=function(e,n){y(e,function(e,a){h.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);e=n.buffer,t[0]=0}for(var i,o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1),r=0;r<o.length;r++)s[r]=parseInt(o[r]);s[o.length]=255,m&&(i=new m([t.buffer,s.buffer,e]),a(null,i))})},function(e,t){return n(new m(t))})},h.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var t=e,i=[];0<t.byteLength;){for(var o=new Uint8Array(t),s=0===o[0],a="",u=1;255!==o[u];u++){if(310<a.length)return r(d,0,1);a+=o[u]}t=f(t,2+a.length),a=parseInt(a);var c=f(t,0,a);if(s)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(e){var l=new Uint8Array(c);c="";for(u=0;u<l.length;u++)c+=String.fromCharCode(l[u])}i.push(c),t=f(t,a)}var p=i.length;i.forEach(function(e,t){r(h.decodePacket(e,n,!0),t,p)})}},{"./keys":31,"./utf8":32,after:1,"arraybuffer.slice":2,"base64-arraybuffer":4,blob:6,"has-binary2":38}],31:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],32:[function(e,t,n){var o,s,a,u=String.fromCharCode;function c(e){for(var t,n,r=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function l(e,t){if(!(55296<=e&&e<=57343))return 1;if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function p(e,t){return u(e>>t&63|128)}function h(){if(s<=a)throw Error("Invalid byte index");var e=255&o[a];if(a++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}t.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=c(e),i=r.length,o=-1,s="";++o<i;)s+=function(e,t){if(0==(4294967168&e))return u(e);var n="";return 0==(4294965248&e)?n=u(e>>6&31|192):0==(4294901760&e)?(l(e,t)||(e=65533),n=u(e>>12&15|224),n+=p(e,6)):0==(4292870144&e)&&(n=u(e>>18&7|240),n+=p(e,12),n+=p(e,6)),n+=u(63&e|128)}(r[o],n);return s},decode:function(e,t){var n=!1!==(t=t||{}).strict;o=c(e),s=o.length,a=0;for(var r,i=[];!1!==(r=function(e){var t,n;if(s<a)throw Error("Invalid byte index");if(a==s)return!1;if(t=255&o[a],a++,0==(128&t))return t;if(192==(224&t)){if(128<=(n=(31&t)<<6|h()))return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(n=(15&t)<<12|h()<<6|h()))return l(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(n=(7&t)<<18|h()<<12|h()<<6|h())&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}(n));)i.push(r);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)65535<(t=e[r])&&(i+=u((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=u(t);return i}(i)}}},{}],33:[function(e,t,n){t.exports=e("./").polyfill()},{"./":34}],34:[function(G,n,r){(function(q,W){var e,t;e=this,t=function(){function c(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,i=void 0,s=function(e,t){h[r]=e,h[r+1]=t,2===(r+=2)&&(i?i(f):v())};var e=void 0!==window?window:void 0,o=e||{},a=o.MutationObserver||o.WebKitMutationObserver,u="undefined"==typeof self&&void 0!==q&&"[object process]"==={}.toString.call(q),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(f,1)}}var h=new Array(1e3);function f(){for(var e=0;e<r;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}r=0}var d,m,y,g,v=void 0;function b(e,t){var n=this,r=new this.constructor(A);void 0===r[w]&&L(r);var i,o=n._state;return o?(i=arguments[o-1],s(function(){return U(o,r,i,n._result)})):j(n,r,e,t),r}function _(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(A);return O(t,e),t}v=u?function(){return q.nextTick(f)}:a?(m=0,y=new a(f),g=document.createTextNode(""),y.observe(g,{characterData:!0}),function(){g.data=m=++m%2}):l?((d=new MessageChannel).port1.onmessage=f,function(){return d.port2.postMessage(0)}):(void 0===e&&"function"==typeof G?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(f)}:p()}catch(e){return p()}}:p)();var w=Math.random().toString(36).substring(2);function A(){}var S=void 0,C=1,k=2,x={error:null};function E(e){try{return e.then}catch(e){return x.error=e,x}}function P(e,r,i){s(function(t){var n=!1,e=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(i,r,function(e){n||(n=!0,(r!==e?O:F)(t,e))},function(e){n||(n=!0,D(t,e))},t._label);!n&&e&&(n=!0,D(t,e))},e)}function T(e,t,n){var r,i;t.constructor===e.constructor&&n===b&&t.constructor.resolve===_?(r=e,(i=t)._state===C?F(r,i._result):i._state===k?D(r,i._result):j(i,void 0,function(e){return O(r,e)},function(e){return D(r,e)})):n===x?(D(e,x.error),x.error=null):void 0!==n&&c(n)?P(e,t,n):F(e,t)}function O(e,t){var n,r;e===t?D(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!=r&&"function"!=r?F(e,t):T(e,t,E(t)))}function M(e){e._onerror&&e._onerror(e._result),R(e)}function F(e,t){e._state===S&&(e._result=t,e._state=C,0!==e._subscribers.length&&s(R,e))}function D(e,t){e._state===S&&(e._state=k,e._result=t,s(M,e))}function j(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+C]=n,i[o+k]=r,0===o&&e._state&&s(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r,i=void 0,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?U(n,r,i,o):i(o);e._subscribers.length=0}}function U(e,t,n,r){var i=c(n),o=void 0,s=void 0,a=void 0,u=void 0;if(i){if((o=function(e,t){try{return e(t)}catch(e){return x.error=e,x}}(n,r))===x?(u=!0,s=o.error,o.error=null):a=!0,t===o)return void D(t,new TypeError("A promises callback cannot return that same promise."))}else o=r,a=!0;t._state!==S||(i&&a?O(t,o):u?D(t,s):e===C?F(t,o):e===k&&D(t,o))}var I=0;function L(e){e[w]=I++,e._state=void 0,e._result=void 0,e._subscribers=[]}var N=(B.prototype._enumerate=function(e){for(var t=0;this._state===S&&t<e.length;t++)this._eachEntry(e[t],t)},B.prototype._eachEntry=function(t,e){var n,r,i=this._instanceConstructor,o=i.resolve;o===_?(n=E(t))===b&&t._state!==S?this._settledAt(t._state,e,t._result):"function"!=typeof n?(this._remaining--,this._result[e]=t):i===z?(T(r=new i(A),t,n),this._willSettleAt(r,e)):this._willSettleAt(new i(function(e){return e(t)}),e):this._willSettleAt(o(t),e)},B.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===S&&(this._remaining--,e===k?D(r,n):this._result[t]=n),0===this._remaining&&F(r,this._result)},B.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){return n._settledAt(C,t,e)},function(e){return n._settledAt(k,t,e)})},B);function B(e,t){this._instanceConstructor=e,this.promise=new e(A),this.promise[w]||L(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?F(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&F(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}var z=(H.prototype.catch=function(e){return this.then(null,e)},H.prototype.finally=function(t){var n=this.constructor;return c(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},H);function H(e){this[w]=I++,this._result=this._state=void 0,this._subscribers=[],A!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(t,e){try{e(function(e){O(t,e)},function(e){D(t,e)})}catch(e){D(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return z.prototype.then=b,z.all=function(e){return new N(this,e).promise},z.race=function(i){var o=this;return n(i)?new o(function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},z.resolve=_,z.reject=function(e){var t=new this(A);return D(t,e),t},z._setScheduler=function(e){i=e},z._setAsap=function(e){s=e},z._asap=s,z.polyfill=function(){var e=void 0;if(void 0!==W)e=W;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=z},z.Promise=z},"object"==typeof r&&void 0!==n?n.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}).call(this,G("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{_process:51}],35:[function(e,t,n){function f(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===o.call(e)}function d(e){if(e&&"[object Object]"===o.call(e)){var t,n=i.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(!e.constructor||n||r){for(t in e);return void 0===t||i.call(e,t)}}}var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString;t.exports=function e(t,n){var r,i,o,s,a,u,c=t,l=1,p=arguments.length,h=!1;for("boolean"==typeof c&&(h=c,c=n||{},l=2),(null==c||"object"!=typeof c&&"function"!=typeof c)&&(c={});l<p;++l)if(null!=(r=arguments[l]))for(i in r)o=c[i],c!==(s=r[i])&&(h&&s&&(d(s)||(a=f(s)))?(u=a?(a=!1,o&&f(o)?o:[]):o&&d(o)?o:{},c[i]=e(h,u,s)):void 0!==s&&(c[i]=s));return c}},{}],36:[function(e,t,n){t.exports=function(e,i){return(i="number"==typeof i?i:1/0)?function n(e,r){return e.reduce(function(e,t){return Array.isArray(t)&&r<i?e.concat(n(t,r+1)):e.concat(t)},[])}(e,1):Array.isArray(e)?e.map(function(e){return e}):e}},{}],37:[function(e,t,n){n.__esModule=!0,n.default=r,n.getFieldData=f;var c={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},h={button:!0,fieldset:!0,reset:!0,submit:!0},s={checkbox:!0,radio:!0},a=/^\s+|\s+$/g,u=Array.prototype.slice,l=Object.prototype.toString;function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{trim:!1};if(!e)throw new Error("A form is required by getFormData, was given form="+e);for(var n={},r=void 0,i=[],o={},s=0,a=e.elements.length;s<a;s++){var u=e.elements[s];h[u.type]||u.disabled||(r=u.name||u.id)&&!o[r]&&(i.push(r),o[r]=!0)}for(var c=0,l=i.length;c<l;c++){var p=f(e,r=i[c],t);null!=p&&(n[r]=p)}return n}function f(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{trim:!1};if(!e)throw new Error("A form is required by getFieldData, was given form="+e);if(!t&&"[object String]"!==l.call(t))throw new Error("A field name is required by getFieldData, was given fieldName="+t);var r=e.elements[t];if(!r||r.disabled)return null;if(!c[l.call(r)])return p(r,n.trim);for(var i,o=[],s=!0,a=0,u=r.length;a<u;a++){r[a].disabled||(s&&"radio"!==r[a].type&&(s=!1),null!=(i=p(r[a],n.trim))&&(o=o.concat(i)))}return s&&1===o.length?o[0]:0<o.length?o:null}function p(e,t){var n=null,r=e.type;if("select-one"===r)return e.options.length&&(n=e.options[e.selectedIndex].value),n;if("select-multiple"!==r)return"file"===r&&"files"in e?e.multiple?0===(n=u.call(e.files)).length&&(n=null):n=e.files[0]:s[r]?e.checked&&(n=e.value):n=t?e.value.replace(a,""):e.value,n;n=[];for(var i=0,o=e.options.length;i<o;i++)e.options[i].selected&&n.push(e.options[i].value);return 0===n.length&&(n=null),n}r.getFieldData=f},{}],38:[function(t,n,e){(function(o){var s=t("isarray"),e=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===e.call(Blob),u="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===e.call(File);n.exports=function e(t){if(!t||"object"!=typeof t)return!1;if(s(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if("function"==typeof o&&o.isBuffer&&o.isBuffer(t)||"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||a&&t instanceof Blob||u&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return!0;return!1}}).call(this,t("buffer").Buffer)},{buffer:8,isarray:42}],39:[function(e,t,n){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},{}],40:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?i-1:0,h=n?-1:1,f=e[t+p];for(p+=h,o=f&(1<<-l)-1,f>>=-l,l+=a;0<l;o=256*o+e[t+p],p+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,p=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),2<=(t+=1<=s+p?h/u:h*Math.pow(2,1-p))*u&&(s++,u/=2),l<=s+p?(a=0,s=l):1<=s+p?(a=(t*u-1)*Math.pow(2,i),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),s=0));8<=i;e[n+f]=255&a,f+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;e[n+f]=255&s,f+=d,s/=256,c-=8);e[n+f-d]|=128*m}},{}],41:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],42:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],43:[function(e,i,t){(function(e){var v="Expected a function",o=NaN,s="[object Symbol]",a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,p=parseInt,t="object"==typeof e&&e&&e.Object===Object&&e,n="object"==typeof self&&self&&self.Object===Object&&self,r=t||n||Function("return this")(),h=Object.prototype.toString,b=Math.max,_=Math.min,w=function(){return r.Date.now()};function f(r,i,e){var o,s,a,u,c,l,p=0,h=!1,f=!1,t=!0;if("function"!=typeof r)throw new TypeError(v);function d(e){var t=o,n=s;return o=s=void 0,p=e,u=r.apply(n,t)}function m(e){var t=e-l;return void 0===l||i<=t||t<0||f&&a<=e-p}function y(){var e,t,n=w();if(m(n))return g(n);c=setTimeout(y,(t=i-((e=n)-l),f?_(t,a-(e-p)):t))}function g(e){return c=void 0,t&&o?d(e):(o=s=void 0,u)}function n(){var e,t=w(),n=m(t);if(o=arguments,s=this,l=t,n){if(void 0===c)return p=e=l,c=setTimeout(y,i),h?d(e):u;if(f)return c=setTimeout(y,i),d(l)}return void 0===c&&(c=setTimeout(y,i)),u}return i=S(i)||0,A(e)&&(h=!!e.leading,f="maxWait"in e,a=f?b(S(e.maxWait)||0,i):a,t="trailing"in e?!!e.trailing:t),n.cancel=function(){void 0!==c&&clearTimeout(c),o=l=s=c=void(p=0)},n.flush=function(){return void 0===c?u:g(w())},n}function A(e){var t=typeof e;return e&&("object"==t||"function"==t)}function S(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||!!(n=t)&&"object"==typeof n&&h.call(t)==s)return o;var t,n,r;if(A(e)&&(e=A(r="function"==typeof e.valueOf?e.valueOf():e)?r+"":r),"string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var i=c.test(e);return i||l.test(e)?p(e.slice(2),i?2:8):u.test(e)?o:+e}i.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(v);return A(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),f(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{}],44:[function(e,t,n){var r=e("wildcard"),i=/[\/\+\.]/;t.exports=function(n,e){function t(e){var t=r(e,n,i);return t&&2<=t.length}return e?t(e.split(";")[0]):t}},{wildcard:86}],45:[function(e,t,n){t.exports=function(){var r={},u=r._fns={};return r.emit=function(e,t,n,r,i,o,s){var a=function(e){var t=u[e]?u[e]:[],n=e.indexOf(":"),r=-1===n?[e]:[e.substring(0,n),e.substring(n+1)],i=Object.keys(u),o=0,s=i.length;for(;o<s;o++){var a=i[o];if("*"===a&&(t=t.concat(u[a])),2===r.length&&r[0]===a){t=t.concat(u[a]);break}}return t}(e);a.length&&function(e,t,n){var r=0,i=t.length;for(;r<i&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,a,[t,n,r,i,o,s])},r.on=function(e,t){u[e]||(u[e]=[]),u[e].push(t)},r.once=function(t,n){this.on(t,function e(){n.apply(this,arguments),r.off(t,e)})},r.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],i=0,o=r?r.length:0;i<o;i++)r[i]!==t&&n.push(r[i]);n.length?this._fns[e]=n:delete this._fns[e]},r}},{}],46:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],47:[function(e,t,n){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=a.exec(e||""),o={},s=14;s--;)o[u[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o}},{}],48:[function(e,t,n){var r,i;r=this,i=function(h){function f(e){return e.attributes&&e.attributes.key}function c(e){return e.base}function d(e){return e&&e.filter(function(e){return null!==e})}function r(e,t){for(var n=e.length;n--;)if(t(e[n]))return!0;return!1}function m(e,t){return r(e,function(e){return f(e)===t})}function y(e,t){return m(e,f(t))}function i(e,t,n){return r(e,function(e){return f(e)===t&&e.props[n]})}function g(e,t,n){return i(e,f(t),n)}var o=/[\n\t\r]+/g;function l(e,t){var n;e.classList?(n=e.classList).add.apply(n,t.split(" ")):e.className+=" "+t}function p(e,t){if(t=t.trim(),e.classList){var n;(n=e.classList).remove.apply(n,t.split(" "))}else{var r=e.className.trim(),i=(" "+r+" ").replace(o," ");for(t=" "+t+" ";0<=i.indexOf(t);)i=i.replace(t," ");e.className=i.trim()}}var s={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},v=[];void 0!==window&&function(){var e=document.createElement("div").style;for(var t in"AnimationEvent"in window||delete s.animationend.animation,"TransitionEvent"in window||delete s.transitionend.transition,s){var n=s[t];for(var r in n)if(r in e){v.push(n[r]);break}}}();function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,b=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},w=(a=h.Component,e(u,a),u.prototype.transition=function(e,r,t){var i=this,o=c(this),s=this.props.name[e]||this.props.name+"-"+e,a=this.props.name[e+"Active"]||s+"-active",u=null;this.endListener&&this.endListener(),this.endListener=function(e){var t,n;e&&e.target!==o||(clearTimeout(u),p(o,s),p(o,a),t=o,n=i.endListener,v.length&&v.forEach(function(e){t.removeEventListener(e,n,!1)}),i.endListener=null,r&&r())},t?(u=setTimeout(this.endListener,t),this.transitionTimeouts.push(u)):function(t,n){if(!v.length)return window.setTimeout(n,0);v.forEach(function(e){t.addEventListener(e,n,!1)})}(o,this.endListener),l(o,s),this.queueClass(a)},u.prototype.queueClass=function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,17))},u.prototype.stop=function(){this.timeout&&(clearTimeout(this.timeout),this.classNameQueue.length=0,this.timeout=null),this.endListener&&this.endListener()},u.prototype.componentWillMount=function(){this.classNameQueue=[],this.transitionTimeouts=[]},u.prototype.componentWillUnmount=function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)})},u.prototype.componentWillEnter=function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},u.prototype.componentWillLeave=function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},u.prototype.render=function(){return(e=this.props.children)&&e[0];var e},u);function u(){var e,t;b(this,u);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t=_(this,a.call.apply(a,[this].concat(r)))).flushClassNameQueue=function(){c(t)&&l(c(t),t.classNameQueue.join(" ")),t.classNameQueue.length=0,t.timeout=null},_(t,e)}var t,n=(t=h.Component,e(A,t),A.prototype.shouldComponentUpdate=function(e,t){return t.children!==this.state.children},A.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},A.prototype.componentWillReceiveProps=function(e){var n,r,i,o,s=this,t=e.children,a=e.exclusive,u=e.showProp,c=d(t||[]).slice(),l=d(a?this.props.children:this.state.children),p=(n=c,r=[],i={},o=[],l.forEach(function(e){var t=f(e);m(n,t)?o.length&&(i[t]=o,o=[]):o.push(e)}),n.forEach(function(e){var t=f(e);i.hasOwnProperty(t)&&(r=r.concat(i[t])),r.push(e)}),r.concat(o));u&&(p=p.map(function(e){var t;return!e.props[u]&&g(l,e,u)&&(e=h.cloneElement(e,((t={})[u]=!0,t))),e})),a&&p.forEach(function(e){return s.stop(f(e))}),this.setState({children:p}),this.forceUpdate(),c.forEach(function(e){var t,n,r=e.key,i=l&&y(l,e);u?i&&(t=g(l,e,u),n=e.props[u],t||!n||s.currentlyTransitioningKeys[r]||s.keysToEnter.push(r)):i||s.currentlyTransitioningKeys[r]||s.keysToEnter.push(r)}),l.forEach(function(e){var t,n,r=e.key,i=c&&y(c,e);u?i&&(t=g(c,e,u),n=e.props[u],t||!n||s.currentlyTransitioningKeys[r]||s.keysToLeave.push(r)):i||s.currentlyTransitioningKeys[r]||s.keysToLeave.push(r)})},A.prototype.performEnter=function(e){var t=this;this.currentlyTransitioningKeys[e]=!0;var n=this.refs[e];n.componentWillEnter?n.componentWillEnter(function(){return t._handleDoneEntering(e)}):this._handleDoneEntering(e)},A.prototype._handleDoneEntering=function(e){delete this.currentlyTransitioningKeys[e];var t=d(this.props.children),n=this.props.showProp;!t||!n&&!m(t,e)||n&&!i(t,e,n)?this.performLeave(e):this.setState({children:t})},A.prototype.stop=function(e){delete this.currentlyTransitioningKeys[e];var t=this.refs[e];t&&t.stop()},A.prototype.performLeave=function(e){var t=this;this.currentlyTransitioningKeys[e]=!0;var n=this.refs[e];n&&n.componentWillLeave?n.componentWillLeave(function(){return t._handleDoneLeaving(e)}):this._handleDoneLeaving(e)},A.prototype._handleDoneLeaving=function(e){delete this.currentlyTransitioningKeys[e];var t=this.props.showProp,n=d(this.props.children);t&&n&&i(n,e,t)||!t&&n&&m(n,e)?this.performEnter(e):this.setState({children:n})},A.prototype.componentDidUpdate=function(){var t=this,e=this.keysToEnter,n=this.keysToLeave;this.keysToEnter=[],e.forEach(function(e){return t.performEnter(e)}),this.keysToLeave=[],n.forEach(function(e){return t.performLeave(e)})},A.prototype.render=function(e,t){var n=e.component,r=(e.transitionName,e.transitionEnter,e.transitionLeave,e.transitionEnterTimeout,e.transitionLeaveTimeout,e.children,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["component","transitionName","transitionEnter","transitionLeave","transitionEnterTimeout","transitionLeaveTimeout","children"])),i=t.children;return h.h(n,r,d(i).map(this.renderChild))},A);function A(e){b(this,A);var u=_(this,t.call(this));return u.renderChild=function(t){var e=u.props,n=e.transitionName,r=e.transitionEnter,i=e.transitionLeave,o=e.transitionEnterTimeout,s=e.transitionLeaveTimeout,a=f(t);return h.h(w,{key:a,ref:function(e){(u.refs[a]=e)||(t=null)},name:n,enter:r,leave:i,enterTimeout:o,leaveTimeout:s},t)},u.refs={},u.state={children:(e.children||[]).slice()},u}return n.defaultProps={component:"span",transitionEnter:!0,transitionLeave:!0},n},"object"==typeof n&&void 0!==t?t.exports=i(e("preact")):"function"==typeof define&&define.amd?define(["preact"],i):r.PreactCSSTransitionGroup=i(r.preact)},{preact:49}],49:[function(e,b,t){!function(){function n(e,t){for(var n,r,i,o=h,s=arguments.length;2<s--;)p.push(arguments[s]);for(t&&null!=t.children&&(p.length||p.push(t.children),delete t.children);p.length;)if((r=p.pop())&&void 0!==r.pop)for(s=r.length;s--;)p.push(r[s]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(i=!1)),i&&n?o[o.length-1]+=r:o===h?o=[r]:o.push(r),n=i;var a=new l;return a.nodeName=e,a.children=o,a.attributes=null==t?void 0:t,a.key=null==t?void 0:t.key,void 0!==R.vnode&&R.vnode(a),a}function x(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){null!=e&&("function"==typeof e?e(t):e.current=t)}function o(e){!e.__d&&(e.__d=!0)&&1==d.push(e)&&(R.debounceRendering||i)(t)}function t(){for(var e;e=d.pop();)e.__d&&D(e)}function A(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function E(e){var t=x({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function S(e){var t=e.parentNode;t&&t.removeChild(e)}function m(e,t,n,r,i){if("className"===t&&(t="class"),"key"!==t)if("ref"===t)u(n,null),u(r,e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===f.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,c,s):e.removeEventListener(t,c,s),(e.__l||(e.__l={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var a=i&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function c(e){return this.__l[e.type](R.event&&R.event(e)||e)}function P(){for(var e;e=U.shift();)R.afterMount&&R.afterMount(e),e.componentDidMount&&e.componentDidMount()}function T(e,t,n,r,i,o){I++||(y=null!=i&&void 0!==i.ownerSVGElement,g=null!=e&&!("__preactattr_"in e));var s=C(e,t,n,r,o);return i&&s.parentNode!==i&&i.appendChild(s),--I||(g=!1,o||P()),s}function C(e,t,n,r,i){var o=e,s=y;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),O(e,!0))),o.__preactattr_=!0,o;var a,u,c=t.nodeName;if("function"==typeof c)return function(e,t,n,r){var i=e&&e._component,o=i,s=e,a=i&&e._componentConstructor===t.nodeName,u=a,c=E(t);for(;i&&!u&&(i=i.__u);)u=i.constructor===t.nodeName;i&&u&&(!r||i._component)?(F(i,c,3,n,r),e=i.base):(o&&!a&&(j(o),e=s=null),i=M(t.nodeName,c,n),e&&!i.__b&&(i.__b=e,s=null),F(i,c,1,n,r),e=i.base,s&&e!==s&&(s._component=null,O(s,!1)));return e}(e,t,n,r);if(y="svg"===c||"foreignObject"!==c&&y,c=String(c),(!e||!A(e,c))&&(a=c,(u=y?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).__n=a,o=u,e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),O(e,!0)}var l=o.firstChild,p=o.__preactattr_,h=t.children;if(null==p){p=o.__preactattr_={};for(var f=o.attributes,d=f.length;d--;)p[f[d].name]=f[d].value}return!g&&h&&1===h.length&&"string"==typeof h[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=h[0]&&(l.nodeValue=h[0]):(h&&h.length||null!=l)&&function(e,t,n,r,i){var o,s,a,u,c,l=e.childNodes,p=[],h={},f=0,d=0,m=l.length,y=0,g=t?t.length:0;if(0!==m)for(var v=0;v<m;v++){var b=l[v],_=b.__preactattr_;null!=(w=g&&_?b._component?b._component.__k:_.key:null)?(f++,h[w]=b):(_||(void 0!==b.splitText?!i||b.nodeValue.trim():i))&&(p[y++]=b)}if(0!==g)for(v=0;v<g;v++){var w;if(u=t[v],(c=null)!=(w=u.key))f&&void 0!==h[w]&&(c=h[w],h[w]=void 0,f--);else if(d<y)for(o=d;o<y;o++)if(void 0!==p[o]&&function(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&A(e,t.nodeName):n||e._componentConstructor===t.nodeName}(s=p[o],u,i)){c=s,p[o]=void 0,o===y-1&&y--,o===d&&d++;break}c=C(c,u,n,r),a=l[v],c&&c!==e&&c!==a&&(null==a?e.appendChild(c):c===a.nextSibling?S(a):e.insertBefore(c,a))}if(f)for(var v in h)void 0!==h[v]&&O(h[v],!1);for(;d<=y;)void 0!==(c=p[y--])&&O(c,!1)}(o,h,n,r,g||null!=p.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||m(e,r,n[r],n[r]=void 0,y);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||m(e,r,n[r],n[r]=t[r],y)}(o,t.attributes,p),y=s,o}function O(e,t){var n=e._component;n?j(n):(null!=e.__preactattr_&&u(e.__preactattr_.ref,null),!1!==t&&null!=e.__preactattr_||S(e),r(e))}function r(e){for(e=e.lastChild;e;){var t=e.previousSibling;O(e,!0),e=t}}function M(e,t,n){var r,i=v.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),a.call(r,t,n)):((r=new a(t,n)).constructor=e,r.render=s);i--;)if(v[i].constructor===e)return r.__b=v[i].__b,v.splice(i,1),r;return r}function s(e,t,n){return this.constructor(e,n)}function F(e,t,n,r,i){e.__x||(e.__x=!0,e.__r=t.ref,e.__k=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.__c||(e.__c=e.context),e.context=r),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===R.syncComponentUpdates&&e.base?o(e):D(e,1,i)),u(e.__r,e))}function D(e,t,n,r){if(!e.__x){var i,o,s=e.props,a=e.state,u=e.context,c=e.__p||s,l=e.__s||a,p=e.__c||u,h=e.base,f=e.__b,d=h||f,m=e._component,y=!1,g=p;if(e.constructor.getDerivedStateFromProps&&(a=x(x({},a),e.constructor.getDerivedStateFromProps(s,a)),e.state=a),h&&(e.props=c,e.state=l,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,a,u)?y=!0:e.componentWillUpdate&&e.componentWillUpdate(s,a,u),e.props=s,e.state=a,e.context=u),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!y){i=e.render(s,a,u),e.getChildContext&&(u=x(x({},u),e.getChildContext())),h&&e.getSnapshotBeforeUpdate&&(g=e.getSnapshotBeforeUpdate(c,l));var v,b,_,w,A,S=i&&i.nodeName;if("function"==typeof S?(_=E(i),(w=m)&&w.constructor===S&&_.key==w.__k?F(w,_,1,u,!1):(v=w,e._component=w=M(S,_,u),w.__b=w.__b||f,w.__u=e,F(w,_,0,u,!1),D(w,1,n,!0)),b=w.base):(o=d,(v=m)&&(o=e._component=null),!d&&1!==t||(o&&(o._component=null),b=T(o,i,u,n||!h,d&&d.parentNode,!0))),!d||b===d||w===m||(A=d.parentNode)&&b!==A&&(A.replaceChild(b,d),v||(d._component=null,O(d,!1))),v&&j(v),(e.base=b)&&!r){for(var C=e,k=e;k=k.__u;)(C=k).base=b;b._component=C,b._componentConstructor=C.constructor}}for(!h||n?U.push(e):y||(e.componentDidUpdate&&e.componentDidUpdate(c,l,g),R.afterUpdate&&R.afterUpdate(e));e.__h.length;)e.__h.pop().call(e);I||r||P()}}function j(e){R.beforeUnmount&&R.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?j(n):t&&(null!=t.__preactattr_&&u(t.__preactattr_.ref,null),S(e.__b=t),v.push(e),r(t)),u(e.__r,null)}function a(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{},this.__h=[]}var l=function(){},R={},p=[],h=[],i="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,d=[],U=[],I=0,y=!1,g=!1,v=[];x(a.prototype,{setState:function(e,t){this.__s||(this.__s=this.state),this.state=x(x({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this.__h.push(t),o(this)},forceUpdate:function(e){e&&this.__h.push(e),D(this,2)},render:function(){}});var e={h:n,createElement:n,cloneElement:function(e,t){return n(e.nodeName,x(x({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)},createRef:function(){return{}},Component:a,render:function(e,t,n){return T(n,e,{},!1,t,!1)},rerender:t,options:R};void 0!==b?b.exports=e:self.preact=e}()},{}],50:[function(e,t,n){t.exports=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];t&&(e=-e);if(e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),n.length-1);e=Number(e/Math.pow(1e3,r));var i=n[r];return 10<=e||e%1==0?(t?"-":"")+e.toFixed(0)+" "+i:(t?"-":"")+e.toFixed(1)+" "+i}},{}],51:[function(e,t,n){var r,i,o=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,l=[],p=!1,h=-1;function f(){p&&c&&(p=!1,c.length?l=c.concat(l):h=-1,l.length&&d())}function d(){if(!p){var e=u(f);p=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,p=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||p||u(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],52:[function(e,t,n){var o=Object.prototype.hasOwnProperty;function s(e){return decodeURIComponent(e.replace(/\+/g," "))}n.stringify=function(e,t){t=t||"";var n,r,i=[];for(r in"string"!=typeof t&&(t="?"),e)o.call(e,r)&&((n=e[r])||null!=n&&!isNaN(n)||(n=""),i.push(encodeURIComponent(r)+"="+encodeURIComponent(n)));return i.length?t+i.join("&"):""},n.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=s(t[1]),o=s(t[2]);i in r||(r[i]=o)}return r}},{}],53:[function(e,t,n){t.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],54:[function(e,n,r){(function(k){var e,t;e=this,t=function(){var r=function(){if("undefined"!=typeof Map)return Map;function r(e,n){var r=-1;return e.some(function(e,t){return e[0]===n&&(r=t,!0)}),r}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=r(this.__entries__,e),n=this.__entries__[t];return n&&n[1]},e.prototype.set=function(e,t){var n=r(this.__entries__,e);~n?this.__entries__[n][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,n=r(t,e);~n&&t.splice(n,1)},e.prototype.has=function(e){return!!~r(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},e;function e(){this.__entries__=[]}}(),n=void 0!==window&&void 0!==document&&window.document===document,t=void 0!==k&&k.Math===Math?k:"undefined"!=typeof self&&self.Math===Math?self:void 0!==window&&window.Math===Math?window:Function("return this")(),u="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(t):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},c=2;var i=["top","right","bottom","left","width","height","size","weight"],e="undefined"!=typeof MutationObserver,o=(s.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},s.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},s.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},s.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},s.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},s.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},s.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;i.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},s.getInstance=function(){return this.instance_||(this.instance_=new s),this.instance_},s.instance_=null,s);function s(){function e(){o&&(o=!1,r()),s&&n()}function t(){u(e)}function n(){var e=Date.now();if(o){if(e-a<c)return;s=!0}else s=!(o=!0),setTimeout(t,i);a=e}var r,i,o,s,a;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(r=this.refresh.bind(this),s=o=!(i=20),a=0,n)}var l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},h=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||t},f=g(0,0,0,0);function d(e){return parseFloat(e)||0}function m(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+d(n["border-"+t+"-width"])},0)}function a(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r,i,o,s=h(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=d(o)}return t}(s),u=a.left+a.right,c=a.top+a.bottom,l=d(s.width),p=d(s.height);return"border-box"===s.boxSizing&&(Math.round(l+u)!==t&&(l-=m(s,"left","right")+u),Math.round(p+c)!==n&&(p-=m(s,"top","bottom")+c)),(o=e)!==h(o).document.documentElement&&(r=Math.round(l+u)-t,i=Math.round(p+c)-n,1!==Math.abs(r)&&(l-=r),1!==Math.abs(i)&&(p-=i)),g(a.left,a.top,l,p)}var p="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof h(e).SVGGraphicsElement}:function(e){return e instanceof h(e).SVGElement&&"function"==typeof e.getBBox};function y(e){return n?p(e)?g(0,0,(t=e.getBBox()).width,t.height):a(e):f;var t}function g(e,t,n,r){return{x:e,y:t,width:n,height:r}}var v=(b.prototype.isActive=function(){var e=y(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},b.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},b);function b(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=e}var _=function(e,t){var n,r,i,o,s,a,u,c=(r=(n=t).x,i=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),l(u,{x:r,y:i,width:o,height:s,top:i,right:r+o,bottom:s+i,left:r}),u);l(this,{target:e,contentRect:c})},w=(A.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new v(e)),this.controller_.addObserver(this),this.controller_.refresh())}},A.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof h(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},A.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},A.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},A.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new _(e.target,e.broadcastRect())}),this.callback_.call(e,t,e),this.clearActive())},A.prototype.clearActive=function(){this.activeObservations_.splice(0)},A.prototype.hasActive=function(){return 0<this.activeObservations_.length},A);function A(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}var S=new("undefined"!=typeof WeakMap?WeakMap:r),C=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=o.getInstance(),r=new w(t,n,this);S.set(this,r)};return["observe","unobserve","disconnect"].forEach(function(t){C.prototype[t]=function(){var e;return(e=S.get(this))[t].apply(e,arguments)}}),void 0!==t.ResizeObserver?t.ResizeObserver:C},"object"==typeof r&&void 0!==n?n.exports=t():"function"==typeof define&&define.amd?define(t):e.ResizeObserver=t()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{}],55:[function(e,t,n){var r,i;r=this,i=function(){return function(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var r,i=document.createElement("a"),o=1;o<e;o++)i.href=arguments[o],r=i.href,t.href=r;return n.removeChild(t),r}},"function"==typeof define&&define.amd?define(i):"object"==typeof n?t.exports=i():r.resolveUrl=i()},{}],56:[function(e,t,n){(function(u){t.exports=function(e,n){var r,i,t,o=!0;i=Array.isArray(e)?(r=[],e.length):(t=Object.keys(e),r={},t.length);function s(e){function t(){n&&n(e,r),n=null}o?u.nextTick(t):t()}function a(e,t,n){r[e]=n,0!=--i&&!t||s(t)}i?t?t.forEach(function(n){e[n](function(e,t){a(n,e,t)})}):e.forEach(function(e,n){e(function(e,t){a(n,e,t)})}):s(null);o=!1}}).call(this,e("_process"))},{_process:51}],57:[function(e,t,n){var u=e("./url"),r=e("socket.io-parser"),c=e("./manager"),l=e("debug")("socket.io-client");t.exports=n=i;var p=n.managers={};function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n=u(e),r=n.source,i=n.id,o=n.path,s=p[i]&&o in p[i].nsps,a=t.forceNew||t["force new connection"]||!1===t.multiplex||s?(l("ignoring socket cache for %s",r),c(r,t)):(p[i]||(l("new io instance for %s",r),p[i]=c(r,t)),p[i]);return n.query&&!t.query&&(t.query=n.query),a.socket(n.path,t)}n.protocol=r.protocol,n.connect=i,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":58,"./socket":60,"./url":61,debug:63,"socket.io-parser":66}],58:[function(e,t,n){var u=e("engine.io-client"),o=e("./socket"),r=e("component-emitter"),i=e("socket.io-parser"),c=e("./on"),s=e("component-bind"),l=e("debug")("socket.io-client:manager"),a=e("indexof"),p=e("backo2"),h=Object.prototype.hasOwnProperty;function f(e,t){if(!(this instanceof f))return new f(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||i;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}(t.exports=f).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},f.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},f.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},r(f.prototype),f.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},f.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},f.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(n,e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=u(this.uri,this.opts);var t=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i,o,s=c(t,"open",function(){r.onopen(),n&&n()}),a=c(t,"error",function(e){var t;l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),n?((t=new Error("Connection error")).data=e,n(t)):r.maybeReconnectOnOpen()});return!1!==this._timeout&&(i=this._timeout,l("connect attempt will timeout after %d",i),o=setTimeout(function(){l("connect attempt timed out after %d",i),s.destroy(),t.close(),t.emit("error","timeout"),r.emitAll("connect_timeout",i)},i),this.subs.push({destroy:function(){clearTimeout(o)}})),this.subs.push(s),this.subs.push(a),this},f.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",s(this,"ondata"))),this.subs.push(c(e,"ping",s(this,"onping"))),this.subs.push(c(e,"pong",s(this,"onpong"))),this.subs.push(c(e,"error",s(this,"onerror"))),this.subs.push(c(e,"close",s(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",s(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(e){this.decoder.add(e)},f.prototype.ondecoded=function(e){this.emit("packet",e)},f.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},f.prototype.socket=function(e,t){var n,r=this.nsps[e];function i(){~a(n.connecting,r)||n.connecting.push(r)}return r||(r=new o(this,e,t),this.nsps[e]=r,n=this,r.on("connecting",i),r.on("connect",function(){r.id=n.generateId(e)}),this.autoConnect&&i()),r},f.prototype.destroy=function(e){var t=a(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},f.prototype.packet=function(n){l("writing packet %j",n);var r=this;n.query&&0===n.type&&(n.nsp+="?"+n.query),r.encoding?r.packetBuffer.push(n):(r.encoding=!0,this.encoder.encode(n,function(e){for(var t=0;t<e.length;t++)r.engine.write(e[t],n.options);r.encoding=!1,r.processPacketQueue()}))},f.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},f.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,n=this;this.backoff.attempts>=this._reconnectionAttempts?(l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),l("will wait %dms before reconnect attempt",e),this.reconnecting=!0,t=setTimeout(function(){n.skipReconnect||(l("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect||n.open(function(e){e?(l("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",e.data)):(l("reconnect success"),n.onreconnect())}))},e),this.subs.push({destroy:function(){clearTimeout(t)}}))},f.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":59,"./socket":60,backo2:3,"component-bind":10,"component-emitter":11,debug:63,"engine.io-client":18,indexof:41,"socket.io-parser":66}],59:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],60:[function(e,t,n){var i=e("socket.io-parser"),r=e("component-emitter"),o=e("to-array"),s=e("./on"),a=e("component-bind"),u=e("debug")("socket.io-client:socket"),c=e("parseqs"),l=e("has-binary2");t.exports=f;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=r.prototype.emit;function f(e,t,n){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}r(f.prototype),f.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))])},f.prototype.open=f.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},f.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},f.prototype.emit=function(e){if(p.hasOwnProperty(e))return h.apply(this,arguments),this;var t=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},f.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},f.prototype.onopen=function(){var e;u("transport is open - connecting"),"/"!==this.nsp&&(this.query?(e="object"==typeof this.query?c.encode(this.query):this.query,u("sending connect packet with query %s",e),this.packet({type:i.CONNECT,query:e})):this.packet({type:i.CONNECT}))},f.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},f.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===i.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},f.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},f.prototype.ack=function(t){var n=this,r=!1;return function(){var e;r||(r=!0,e=o(arguments),u("sending ack %j",e),n.packet({type:l(e)?i.BINARY_ACK:i.ACK,id:t,data:e}))}},f.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(e){return this.flags.compress=e,this},f.prototype.binary=function(e){return this.flags.binary=e,this}},{"./on":59,"component-bind":10,"component-emitter":11,debug:63,"has-binary2":38,parseqs:46,"socket.io-parser":66,"to-array":71}],61:[function(e,t,n){(function(i){var o=e("parseuri"),s=e("debug")("socket.io-client:url");t.exports=function(e,t){var n=e;t=t||i.location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(s("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),s("parse %s",e),n=o(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{debug:63,parseuri:47}],62:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],63:[function(n,r,o){(function(t){function e(){var e;try{e=o.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(o=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+o.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=e,o.useColors=function(){if(void 0!==window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return void 0!==document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||void 0!==window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(e())}).call(this,n("_process"))},{"./debug":64,_process:51}],64:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{dup:29,ms:62}],65:[function(n,e,r){(function(e){var l=n("isarray"),p=n("./is-buffer"),t=Object.prototype.toString,h="function"==typeof e.Blob||"[object BlobConstructor]"===t.call(e.Blob),f="function"==typeof e.File||"[object FileConstructor]"===t.call(e.File);r.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=function e(t,n){if(!t)return t;{if(p(t)){var r={_placeholder:!0,num:n.length};return n.push(t),r}if(l(t)){for(var i=new Array(t.length),o=0;o<t.length;o++)i[o]=e(t[o],n);return i}if("object"==typeof t&&!(t instanceof Date)){var i={};for(var s in t)i[s]=e(t[s],n);return i}}return t}(n,t),r.attachments=t.length,{packet:r,buffers:t}},r.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;{if(t&&t._placeholder)return n[t.num];if(l(t))for(var r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(var i in t)t[i]=e(t[i],n)}return t}(e.data,t),e.attachments=void 0,e},r.removeBlobs=function(e,a){var u=0,c=e;!function e(t,n,r){if(!t)return t;if(h&&t instanceof Blob||f&&t instanceof File){u++;var i=new FileReader;i.onload=function(){r?r[n]=this.result:c=this.result,--u||a(c)},i.readAsArrayBuffer(t)}else if(l(t))for(var o=0;o<t.length;o++)e(t[o],o,t);else if("object"==typeof t&&!p(t))for(var s in t)e(t[s],s,t)}(c),u||a(c)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{"./is-buffer":67,isarray:42}],66:[function(e,t,a){var u=e("debug")("socket.io-parser"),n=e("component-emitter"),o=e("./binary"),c=e("isarray"),r=e("./is-buffer");function i(){}a.protocol=4,a.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],a.CONNECT=0,a.DISCONNECT=1,a.EVENT=2,a.ACK=3,a.ERROR=4,a.BINARY_EVENT=5,a.BINARY_ACK=6,a.Encoder=i,a.Decoder=p;var s=a.ERROR+'"encode error"';function l(e){var t=""+e.type;if(a.BINARY_EVENT!==e.type&&a.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var n=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===n)return s;t+=n}return u("encoded %j as %s",e,t),t}function p(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function f(e){return{type:a.ERROR,data:"parser error: "+e}}i.prototype.encode=function(e,t){var n,i;u("encoding packet %j",e),a.BINARY_EVENT===e.type||a.BINARY_ACK===e.type?(n=e,i=t,o.removeBlobs(n,function(e){var t=o.deconstructPacket(e),n=l(t.packet),r=t.buffers;r.unshift(n),i(r)})):t([l(e)])},n(p.prototype),p.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,n={type:Number(e.charAt(0))};if(null==a.types[n.type])return f("unknown packet type "+n.type);if(a.BINARY_EVENT===n.type||a.BINARY_ACK===n.type){for(var r="";"-"!==e.charAt(++t)&&(r+=e.charAt(t),t!=e.length););if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1))for(n.nsp="";++t;){if(","===(o=e.charAt(t)))break;if(n.nsp+=o,t===e.length)break}else n.nsp="/";var i=e.charAt(t+1);if(""!==i&&Number(i)==i){for(n.id="";++t;){var o;if(null==(o=e.charAt(t))||Number(o)!=o){--t;break}if(n.id+=e.charAt(t),t===e.length)break}n.id=Number(n.id)}if(e.charAt(++t)){var s=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==s&&(n.type===a.ERROR||c(s))))return f("invalid payload");n.data=s}return u("decoded %s as %j",e,n),n}(e),a.BINARY_EVENT===t.type||a.BINARY_ACK===t.type?(this.reconstructor=new h(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!r(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length!==this.reconPack.attachments)return null;var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":65,"./is-buffer":67,"component-emitter":11,debug:69,isarray:42}],67:[function(e,o,t){(function(t){o.exports=function(e){return n&&t.Buffer.isBuffer(e)||r&&(e instanceof t.ArrayBuffer||i(e))};var n="function"==typeof t.Buffer&&"function"==typeof t.Buffer.isBuffer,r="function"==typeof t.ArrayBuffer,i=r&&"function"==typeof t.ArrayBuffer.isView?t.ArrayBuffer.isView:function(e){return e.buffer instanceof t.ArrayBuffer}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{}],68:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],69:[function(n,r,o){(function(t){function e(){var e;try{e=o.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(o=r.exports=n("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+o.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=e,o.useColors=function(){if(void 0!==window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return void 0!==document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||void 0!==window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(e())}).call(this,n("_process"))},{"./debug":70,_process:51}],70:[function(e,t,n){arguments[4][29][0].apply(n,arguments)},{dup:29,ms:68}],71:[function(e,t,n){t.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},{}],72:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){return void 0!==window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}},{}],73:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();n.default=r},{}],74:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=new FileReader;n.onload=function(){t(null,new Uint8Array(n.result))},n.onerror=function(e){t(e)},n.readAsArrayBuffer(e)}},{}],75:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.newRequest=function(){return new window.XMLHttpRequest},n.resolveUrl=function(e,t){return new o.default(t,e).toString()};var r,i=e("url-parse"),o=(r=i)&&r.__esModule?r:{default:r}},{"url-parse":84}],76:[function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.getSource=function(e,t,n){if((o.default||window.__tus__forceReactNative)&&e&&void 0!==e.uri)return void(0,s.default)(e.uri,function(e,t){return e?n(new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+e)):void n(null,new p(t))});if("function"==typeof e.slice&&void 0!==e.size)return void n(null,new p(e));if("function"==typeof e.read)return t=+t,isFinite(t)?void n(null,new f(e,t)):void n(new Error("cannot create source for stream without a finite value for the `chunkSize` option"));n(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))};var o=c(e("./isReactNative")),s=c(e("./uriToBlob")),a=c(e("./isCordova")),u=c(e("./readAsByteArray"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=(r(h,[{key:"slice",value:function(e,t,n){(0,a.default)()?(0,u.default)(this._file.slice(e,t),function(e,t){return e?n(e):void n(null,t)}):n(null,this._file.slice(e,t))}},{key:"close",value:function(){}}]),h);function h(e){l(this,h),this._file=e,this.size=e.size}var f=(r(d,[{key:"slice",value:function(e,t,n){if(!(e<this._bufferOffset))return this._readUntilEnoughDataOrDone(e,t,n);n(new Error("Requested data is before the reader's current offset"))}},{key:"_readUntilEnoughDataOrDone",value:function(n,r,i){var e,o=this,t=r<=this._bufferOffset+m(this._buffer);this._done||t?(e=this._getDataFromBuffer(n,r),i(null,e)):this._reader.read().then(function(e){var t=e.value;e.done?o._done=!0:void 0===o._buffer?o._buffer=t:o._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(o._buffer,t),o._readUntilEnoughDataOrDone(n,r,i)}).catch(function(e){i(new Error("Error during read: "+e))})}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===m(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),d);function d(e,t){l(this,d),this._chunkSize=t,this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}function m(e){return void 0===e?0:void 0!==e.size?e.size:e.length}},{"./isCordova":72,"./isReactNative":73,"./readAsByteArray":74,"./uriToBlob":78}],77:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setItem=function(e,t){if(!r)return;return localStorage.setItem(e,t)},n.getItem=function(e){if(!r)return;return localStorage.getItem(e)};var r=!(n.removeItem=function(e){if(!r)return;return localStorage.removeItem(e)});try{r="localStorage"in window;var i="tusSupport";localStorage.setItem(i,localStorage.getItem(i))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;r=!1}n.canStoreURLs=r},{}],78:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(null,e)},n.onerror=function(e){t(e)},n.open("GET",e),n.send()}},{}],79:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,Error),o);function o(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Object.getPrototypeOf(o).call(this,e.message));r.originalRequest=n,r.causingError=t;var i=e.message;return null!=t&&(i+=", caused by "+t.toString()),null!=n&&(i+=", originated from request (response code: "+n.status+", response text: "+n.responseText+")"),r.message=i,r}n.default=r},{}],80:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return["tus",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-")}},{}],81:[function(e,t,n){var r,i=e("./upload"),o=(r=i)&&r.__esModule?r:{default:r},s=e("./node/storage");var a,u,c=o.default.defaultOptions,l=void 0;l=void 0===window||(a=window.XMLHttpRequest,u=window.Blob,a&&u&&"function"==typeof u.prototype.slice),t.exports={Upload:o.default,isSupported:l,canStoreURLs:s.canStoreURLs,defaultOptions:c}},{"./node/storage":77,"./upload":82}],82:[function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var o=h(e("./fingerprint")),s=h(e("./error")),a=h(e("extend")),u=e("js-base64"),c=e("./node/request"),l=e("./node/source"),p=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(e("./node/storage"));function h(e){return e&&e.__esModule?e:{default:e}}var f={endpoint:null,fingerprint:o.default,resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1},d=(r(m,[{key:"start",value:function(){var n=this,e=this.file;e?this.options.endpoint||this.options.uploadUrl?this._source?this._start(this._source):(0,l.getSource)(e,this.options.chunkSize,function(e,t){e?n._emitError(e):(n._source=t,n._start(t))}):this._emitError(new Error("tus: neither an endpoint or an upload URL is provided")):this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_start",value:function(e){var r=this,t=this.file;if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=e.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));var i,o=this.options.retryDelays;if(null!=o){if("[object Array]"!==Object.prototype.toString.call(o))return void this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));i=r.options.onError,r.options.onError=function(e){r.options.onError=i,null!=r._offset&&r._offset>r._offsetBeforeRetry&&(r._retryAttempt=0);var t,n=!0;void 0!==window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),r._retryAttempt<o.length&&null!=e.originalRequest&&!y(e.originalRequest.status,400)&&n?(t=o[r._retryAttempt++],r._offsetBeforeRetry=r._offset,r.options.uploadUrl=r.url,r._retryTimeout=setTimeout(function(){r.start()},t)):r._emitError(e)}}if(this._aborted=!1,null==this.url){if(null!=this.options.uploadUrl)return this.url=this.options.uploadUrl,void this._resumeUpload();if(this.options.resume){this._fingerprint=this.options.fingerprint(t,this.options);var n=p.getItem(this._fingerprint);if(null!=n)return this.url=n,void this._resumeUpload()}this._createUpload()}else this._resumeUpload()}},{key:"abort",value:function(){null!==this._xhr&&(this._xhr.abort(),this._source.close(),this._aborted=!0),null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null)}},{key:"_emitXhrError",value:function(e,t,n){this._emitError(new s.default(t,n,e))}},{key:"_emitError",value:function(e){if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_setupXHR",value:function(e){(this._xhr=e).setRequestHeader("Tus-Resumable","1.0.0");var t=this.options.headers;for(var n in t)e.setRequestHeader(n,t[n]);e.withCredentials=this.options.withCredentials}},{key:"_createUpload",value:function(){var t,e,n=this;this.options.endpoint?((t=(0,c.newRequest)()).open("POST",this.options.endpoint,!0),t.onload=function(){if(y(t.status,200)){var e=t.getResponseHeader("Location");if(null!=e){if(n.url=(0,c.resolveUrl)(n.options.endpoint,e),0===n._size)return n._emitSuccess(),void n._source.close();n.options.resume&&p.setItem(n._fingerprint,n.url),n._offset=0,n._startUpload()}else n._emitXhrError(t,new Error("tus: invalid or missing Location header"))}else n._emitXhrError(t,new Error("tus: unexpected response while creating upload"))},t.onerror=function(e){n._emitXhrError(t,new Error("tus: failed to create upload"),e)},this._setupXHR(t),this.options.uploadLengthDeferred?t.setRequestHeader("Upload-Defer-Length",1):t.setRequestHeader("Upload-Length",this._size),""!==(e=function(e){var t=[];for(var n in e)t.push(n+" "+u.Base64.encode(e[n]));return t.join(",")}(this.options.metadata))&&t.setRequestHeader("Upload-Metadata",e),t.send(null)):this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var n=this,r=(0,c.newRequest)();r.open("HEAD",this.url,!0),r.onload=function(){if(!y(r.status,200))return n.options.resume&&y(r.status,400)&&p.removeItem(n._fingerprint),423===r.status?void n._emitXhrError(r,new Error("tus: upload is currently locked; retry later")):n.options.endpoint?(n.url=null,void n._createUpload()):void n._emitXhrError(r,new Error("tus: unable to resume upload (new upload cannot be created without an endpoint)"));var e=parseInt(r.getResponseHeader("Upload-Offset"),10);if(isNaN(e))n._emitXhrError(r,new Error("tus: invalid or missing offset value"));else{var t=parseInt(r.getResponseHeader("Upload-Length"),10);if(!isNaN(t)||n.options.uploadLengthDeferred){if(e===t)return n._emitProgress(t,t),void n._emitSuccess();n._offset=e,n._startUpload()}else n._emitXhrError(r,new Error("tus: invalid or missing length value"))}},r.onerror=function(e){n._emitXhrError(r,new Error("tus: failed to resume upload"),e)},this._setupXHR(r),r.send(null)}},{key:"_startUpload",value:function(){var n,r,i,o=this;this._aborted||(n=(0,c.newRequest)(),this.options.overridePatchMethod?(n.open("POST",this.url,!0),n.setRequestHeader("X-HTTP-Method-Override","PATCH")):n.open("PATCH",this.url,!0),n.onload=function(){if(y(n.status,200)){var e=parseInt(n.getResponseHeader("Upload-Offset"),10);if(isNaN(e))o._emitXhrError(n,new Error("tus: invalid or missing offset value"));else{if(o._emitProgress(e,o._size),o._emitChunkComplete(e-o._offset,e,o._size),(o._offset=e)==o._size)return o.options.removeFingerprintOnSuccess&&o.options.resume&&p.removeItem(o._fingerprint),o._emitSuccess(),void o._source.close();o._startUpload()}}else o._emitXhrError(n,new Error("tus: unexpected response while uploading chunk"))},n.onerror=function(e){o._aborted||o._emitXhrError(n,new Error("tus: failed to upload chunk at offset "+o._offset),e)},"upload"in n&&(n.upload.onprogress=function(e){e.lengthComputable&&o._emitProgress(r+e.loaded,o._size)}),this._setupXHR(n),n.setRequestHeader("Upload-Offset",this._offset),n.setRequestHeader("Content-Type","application/offset+octet-stream"),r=this._offset,((i=this._offset+this.options.chunkSize)===1/0||i>this._size)&&!this.options.uploadLengthDeferred&&(i=this._size),this.options.uploadLengthDeferred?this._source.slice(r,i,function(e,t){e?o._emitError(e):null===t?(o._size=o._offset,n.setRequestHeader("Upload-Length",o._offset),n.send()):(n.send(t),o._emitProgress(o._offset,o._size))}):(this._source.slice(r,i,function(e,t){e?o._emitError(new s.default("tus: could not slice file or stream (from "+r+" to "+i+")",e)):n.send(t)}),this._emitProgress(this._offset,this._size)))}}]),m);function m(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this.options=(0,a.default)(!0,{},f,t),this.file=e,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}function y(e,t){return t<=e&&e<t+100}d.defaultOptions=f,n.default=d},{"./error":79,"./fingerprint":80,"./node/request":75,"./node/source":76,"./node/storage":77,extend:35,"js-base64":83}],83:[function(require,module,exports){(function(global){var IDb,JDb;IDb="undefined"!=typeof self?self:void 0!==window?window:void 0!==global?global:this,JDb=function(global){global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(1<e.length?e.charCodeAt(1):0)<<8|(2<e.length?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),2<=t?"=":b64chars.charAt(n>>>6&63),1<=t?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(0<t?b64tab[e.charAt(0)]<<18:0)|(1<t?b64tab[e.charAt(1)]<<12:0)|(2<t?b64tab[e.charAt(2)]<<6:0)|(3<t?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e},noEnum;return global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty&&(noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}},global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}),global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports?module.exports.Base64=global.Base64:"function"==typeof define&&define.amd&&define([],function(){return global.Base64}),{Base64:global.Base64}},"object"==typeof exports&&void 0!==module?module.exports=JDb(IDb):"function"==typeof define&&define.amd?define(JDb):JDb(IDb)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{}],84:[function(e,t,n){(function(s){var f=e("requires-port"),d=e("querystringify"),n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,m=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function y(e){var t,n=void 0!==window?window:void 0!==s?s:"undefined"!=typeof self?self:{},r=n.location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"==o)for(t in i=new v(e,{}),u)delete i[t];else if("object"==o){for(t in e)t in u||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function g(e){var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function v(e,t,n){if(!(this instanceof v))return new v(e,t,n);var r,i,o,s,a,u,c=m.slice(),l=typeof t,p=this,h=0;for("object"!=l&&"string"!=l&&(n=t,t=null),n&&"function"!=typeof n&&(n=d.parse),t=y(t),r=!(i=g(e||"")).protocol&&!i.slashes,p.slashes=i.slashes||r&&t.slashes,p.protocol=i.protocol||t.protocol||"",e=i.rest,i.slashes||(c[3]=[/(.*)/,"pathname"]);h<c.length;h++)"function"!=typeof(s=c[h])?(o=s[0],u=s[1],o!=o?p[u]=e:"string"==typeof o?~(a=e.indexOf(o))&&(e="number"==typeof s[2]?(p[u]=e.slice(0,a),e.slice(a+s[2])):(p[u]=e.slice(a),e.slice(0,a))):(a=o.exec(e))&&(p[u]=a[1],e=e.slice(0,a.index)),p[u]=p[u]||r&&s[3]&&t[u]||"",s[4]&&(p[u]=p[u].toLowerCase())):e=s(e);n&&(p.query=n(p.query)),r&&t.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==t.pathname)&&(p.pathname=function(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(p.pathname,t.pathname)),f(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(s=p.auth.split(":"),p.username=s[0]||"",p.password=s[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}v.prototype={set:function(e,t,n){var r,i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||d.parse)(t)),i[e]=t;break;case"port":i[e]=t,f(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,/:\d+$/.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":t?(r="pathname"===e?"/":"#",i[e]=t.charAt(0)!==r?r+t:t):i[e]=t;break;default:i[e]=t}for(var o=0;o<m.length;o++){var s=m[o];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=d.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},v.extractProtocol=g,v.location=y,v.qs=d,t.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==window?window:{})},{querystringify:52,"requires-port":53}],85:[function(e,t,n){var r,i;r=this,i=function(a){var t,n,r="URLSearchParams"in self,i="Symbol"in self&&"iterator"in Symbol,u="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in self,s="ArrayBuffer"in self;function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function e(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function d(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function m(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:u&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&u&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=m(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||n(e))?this._bodyArrayBuffer=m(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e,t,n,r=h(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=f(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}s&&(t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(e){return e&&-1<t.indexOf(Object.prototype.toString.call(e))}),p.prototype.append=function(e,t){e=c(e),t=l(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[c(e)]},p.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},p.prototype.set=function(e,t){this.map[c(e)]=l(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),e(n)},p.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),e(t)},p.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),e(n)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var n,r,i=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),-1<g.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(e){var i=new FormData;return e.trim().split("&").forEach(function(e){var t,n,r;e&&(n=(t=e.split("=")).shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(r)))}),i}function _(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];_.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},a.DOMException=self.DOMException;try{new a.DOMException}catch(e){a.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function A(i,s){return new Promise(function(r,e){var t=new v(i,s);if(t.signal&&t.signal.aborted)return e(new a.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function n(){o.abort()}o.onload=function(){var e,i,t={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",i=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t,n=e.split(":"),r=n.shift().trim();r&&(t=n.join(":").trim(),i.append(r,t))}),i)};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new _(n,t))},o.onerror=function(){e(new TypeError("Network request failed"))},o.ontimeout=function(){e(new TypeError("Network request failed"))},o.onabort=function(){e(new a.DOMException("Aborted","AbortError"))},o.open(t.method,t.url,!0),"include"===t.credentials?o.withCredentials=!0:"omit"===t.credentials&&(o.withCredentials=!1),"responseType"in o&&u&&(o.responseType="blob"),t.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",n),o.onreadystatechange=function(){4===o.readyState&&t.signal.removeEventListener("abort",n)}),o.send(void 0===t._bodyInit?null:t._bodyInit)})}A.polyfill=!0,self.fetch||(self.fetch=A,self.Headers=p,self.Request=v,self.Response=_),a.Headers=p,a.Request=v,a.Response=_,a.fetch=A,Object.defineProperty(a,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.WHATWGFetch={})},{}],86:[function(e,t,n){function i(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}i.prototype.match=function(e){var t,n,r=!0,i=this.parts,o=i.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;r&&t<o;t++)"*"!==i[t]&&(r=t<n.length&&i[t]===n[t]);r=r&&n}else r=!1;else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var s in r={},e)this.match(s)&&(r[s]=e[s]);return r},t.exports=function(e,t,n){var r=new i(e,n||/[\/\.]/);return void 0!==t?r.match(t):r}},{}],87:[function(e,t,n){var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o=64,s={},a=0,u=0;function c(e){for(var t="";t=i[e%o]+t,0<(e=Math.floor(e/o)););return t}function l(){var e=c(+new Date);return e!==r?(a=0,r=e):e+"."+c(a++)}for(;u<o;u++)s[i[u]]=u;l.encode=c,l.decode=function(e){var t=0;for(u=0;u<e.length;u++)t=t*o+s[e.charAt(u)];return t},t.exports=l},{}],88:[function(e,t,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o={limit:1,onStart:function(){},onProgress:function(){},onPartComplete:function(){},onSuccess:function(){},onError:function(e){throw e}};function s(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var a=(u.prototype._initChunks=function(){for(var e=[],t=Math.max(Math.ceil(this.file.size/1e4),5242880),n=0;n<this.file.size;n+=t){var r=Math.min(this.file.size,n+t);e.push(this.file.slice(n,r))}this.chunks=e,this.chunkState=e.map(function(){return{uploaded:0,busy:!1,done:!1}})},u.prototype._createUpload=function(){var t=this;return Promise.resolve().then(function(){return t.options.createMultipartUpload()}).then(function(e){if(!("object"===(void 0===e?"undefined":i(e))&&e&&"string"==typeof e.uploadId&&"string"==typeof e.key))throw new TypeError("AwsS3/Multipart: Got incorrect result from 'createMultipartUpload()', expected an object '{ uploadId, key }'.");return e}).then(function(e){t.key=e.key,t.uploadId=e.uploadId,t.options.onStart(e)}).then(function(){t._uploadParts()}).catch(function(e){t._onError(e)})},u.prototype._resumeUpload=function(){var n=this;return Promise.resolve().then(function(){return n.options.listParts({uploadId:n.uploadId,key:n.key})}).then(function(e){e.forEach(function(t){var e=t.PartNumber-1;n.chunkState[e]={uploaded:t.Size,etag:t.ETag,done:!0},n.parts.some(function(e){return e.PartNumber===t.PartNumber})||n.parts.push({PartNumber:t.PartNumber,ETag:t.ETag})}),n._uploadParts()}).catch(function(e){n._onError(e)})},u.prototype._uploadParts=function(){var t=this;if(!this.isPaused){var e=this.options.limit-this.uploading.length;if(0!=e)if(this.chunkState.every(function(e){return e.done}))this._completeUpload();else{for(var n=[],r=0;r<this.chunkState.length;r++){var i=this.chunkState[r];if(!i.done&&!i.busy&&(n.push(r),n.length>=e))break}n.forEach(function(e){t._uploadPart(e)})}}},u.prototype._uploadPart=function(n){var r=this,e=this.chunks[n];return this.chunkState[n].busy=!0,Promise.resolve().then(function(){return r.options.prepareUploadPart({key:r.key,uploadId:r.uploadId,body:e,number:n+1})}).then(function(e){if(!("object"===(void 0===e?"undefined":i(e))&&e&&"string"==typeof e.url))throw new TypeError("AwsS3/Multipart: Got incorrect result from 'prepareUploadPart()', expected an object '{ url }'.");return e}).then(function(e){var t=e.url;r._uploadPartBytes(n,t)},function(e){r._onError(e)})},u.prototype._onPartProgress=function(e,t){this.chunkState[e].uploaded=t;var n=this.chunkState.reduce(function(e,t){return e+t.uploaded},0);this.options.onProgress(n,this.file.size)},u.prototype._onPartComplete=function(e,t){this.chunkState[e].etag=t,this.chunkState[e].done=!0;var n={PartNumber:e+1,ETag:t};this.parts.push(n),this.options.onPartComplete(n),this._uploadParts()},u.prototype._uploadPartBytes=function(n,e){var r=this,i=this.chunks[n],t=new XMLHttpRequest;t.open("PUT",e,!0),t.responseType="text",this.uploading.push(t),t.upload.addEventListener("progress",function(e){e.lengthComputable&&r._onPartProgress(n,e.loaded,e.total)}),t.addEventListener("abort",function(e){s(r.uploading,e.target),r.chunkState[n].busy=!1}),t.addEventListener("load",function(e){var t;s(r.uploading,e.target),r.chunkState[n].busy=!1,e.target.status<200||300<=e.target.status?r._onError(new Error("Non 2xx")):(r._onPartProgress(n,i.size,i.size),null!==(t=e.target.getResponseHeader("ETag"))?r._onPartComplete(n,t):r._onError(new Error("AwsS3/Multipart: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. Seee https://uppy.io/docs/aws-s3-multipart#S3-Bucket-Configuration for instructions.")))}),t.addEventListener("error",function(e){s(r.uploading,e.target),r.chunkState[n].busy=!1;var t=new Error("Unknown error");t.source=e.target,r._onError(t)}),t.send(i)},u.prototype._completeUpload=function(){var t=this;return this.parts.sort(function(e,t){return e.PartNumber-t.PartNumber}),Promise.resolve().then(function(){return t.options.completeMultipartUpload({key:t.key,uploadId:t.uploadId,parts:t.parts})}).then(function(e){t.options.onSuccess(e)},function(e){t._onError(e)})},u.prototype._abortUpload=function(){this.uploading.slice().forEach(function(e){e.abort()}),this.options.abortMultipartUpload({key:this.key,uploadId:this.uploadId}),this.uploading=[]},u.prototype._onError=function(e){this.options.onError(e)},u.prototype.start=function(){this.isPaused=!1,this.uploadId?this._resumeUpload():this._createUpload()},u.prototype.pause=function(){this.uploading.slice().forEach(function(e){e.abort()}),this.isPaused=!0},u.prototype.abort=function(e){if(!((0<arguments.length&&void 0!==e?e:{}).really||!1))return this.pause();this._abortUpload()},u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.options=r({},o,t),this.file=e,this.key=this.options.key||null,this.uploadId=this.options.uploadId||null,this.parts=this.options.parts||[],this.isPaused=!1,this.chunks=null,this.chunkState=null,this.uploading=[],this._initChunks()}t.exports=a},{}],89:[function(e,t,n){var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i,r=e("@uppy/core").Plugin,o=e("@uppy/companion-client"),a=o.Socket,u=o.RequestClient,c=e("@uppy/utils/lib/emitSocketProgress"),l=e("@uppy/utils/lib/getSocketHost"),p=e("@uppy/utils/lib/limitPromises"),h=e("./MultipartUploader");function f(r){var n=[];return{on:function(e,t){return n.push([e,t]),r.on(e,t)},remove:function(){n.forEach(function(e){var t=e[0],n=e[1];r.off(t,n)})}}}function d(e){if(e&&e.error){var t=new Error(e.message);throw s(t,e.error),t}return e}function m(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));n.type="uploader",n.id="AwsS3Multipart",n.title="AWS S3 Multipart",n.client=new u(e,t);var r={timeout:3e4,limit:0,createMultipartUpload:n.createMultipartUpload.bind(n),listParts:n.listParts.bind(n),prepareUploadPart:n.prepareUploadPart.bind(n),abortMultipartUpload:n.abortMultipartUpload.bind(n),completeMultipartUpload:n.completeMultipartUpload.bind(n)};return n.opts=s({},r,t),n.upload=n.upload.bind(n),"number"==typeof n.opts.limit&&0!==n.opts.limit?n.limitRequests=p(n.opts.limit):n.limitRequests=function(e){return e},n.uploaders=Object.create(null),n.uploaderEvents=Object.create(null),n.uploaderSockets=Object.create(null),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,i=r),m.prototype.resetUploaderReferences=function(e,t){var n=1<arguments.length&&void 0!==t?t:{};this.uploaders[e]&&(this.uploaders[e].abort({really:n.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},m.prototype.assertHost=function(){if(!this.opts.serverUrl)throw new Error("Expected a `serverUrl` option containing a Companion address.")},m.prototype.createMultipartUpload=function(e){return this.assertHost(),this.client.post("s3/multipart",{filename:e.name,type:e.type}).then(d)},m.prototype.listParts=function(e,t){var n=t.key,r=t.uploadId;this.assertHost();var i=encodeURIComponent(n);return this.client.get("s3/multipart/"+r+"?key="+i).then(d)},m.prototype.prepareUploadPart=function(e,t){var n=t.key,r=t.uploadId,i=t.number;this.assertHost();var o=encodeURIComponent(n);return this.client.get("s3/multipart/"+r+"/"+i+"?key="+o).then(d)},m.prototype.completeMultipartUpload=function(e,t){var n=t.key,r=t.uploadId,i=t.parts;this.assertHost();var o=encodeURIComponent(n),s=encodeURIComponent(r);return this.client.post("s3/multipart/"+s+"/complete?key="+o,{parts:i}).then(d)},m.prototype.abortMultipartUpload=function(e,t){var n=t.key,r=t.uploadId;this.assertHost();var i=encodeURIComponent(n),o=encodeURIComponent(r);return this.client.delete("s3/multipart/"+o+"?key="+i).then(d)},m.prototype.uploadFile=function(i){var o=this;return new Promise(function(n,t){var r=new h(i.data,s({createMultipartUpload:o.limitRequests(o.opts.createMultipartUpload.bind(o,i)),listParts:o.limitRequests(o.opts.listParts.bind(o,i)),prepareUploadPart:o.opts.prepareUploadPart.bind(o,i),completeMultipartUpload:o.limitRequests(o.opts.completeMultipartUpload.bind(o,i)),abortMultipartUpload:o.limitRequests(o.opts.abortMultipartUpload.bind(o,i)),limit:o.opts.limit||5,onStart:function(e){var t=o.uppy.getFile(i.id);o.uppy.setFileState(i.id,{s3Multipart:s({},t.s3Multipart,{key:e.key,uploadId:e.uploadId,parts:[]})})},onProgress:function(e,t){o.uppy.emit("upload-progress",i,{uploader:o,bytesUploaded:e,bytesTotal:t})},onError:function(e){o.uppy.log(e),o.uppy.emit("upload-error",i,e),e.message="Failed because: "+e.message,o.resetUploaderReferences(i.id),t(e)},onSuccess:function(e){var t={uploadURL:e.location};o.uppy.emit("upload-success",i,t),e.location&&o.uppy.log("Download "+r.file.name+" from "+e.location),o.resetUploaderReferences(i.id),n(r)},onPartComplete:function(e){var t=o.uppy.getFile(i.id);t&&(o.uppy.setFileState(i.id,{s3Multipart:s({},t.s3Multipart,{parts:[].concat(t.s3Multipart.parts,[e])})}),o.uppy.emit("s3-multipart:part-uploaded",t,e))}},i.s3Multipart));o.uploaders[i.id]=r,o.uploaderEvents[i.id]=f(o.uppy),o.onFileRemove(i.id,function(e){o.resetUploaderReferences(i.id,{abort:!0}),n("upload "+e.id+" was removed")}),o.onFilePause(i.id,function(e){e?r.pause():r.start()}),o.onPauseAll(i.id,function(){r.pause()}),o.onResumeAll(i.id,function(){r.start()}),i.isPaused||r.start(),i.isRestored||o.uppy.emit("upload-started",i,r)})},m.prototype.uploadRemote=function(n){var r=this;return this.resetUploaderReferences(n.id),new Promise(function(e,t){if(n.serverToken)return r.connectToServerSocket(n).then(function(){return e()}).catch(t);r.uppy.emit("upload-started",n),fetch(n.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s({},n.remote.body,{protocol:"s3-multipart",size:n.data.size,metadata:n.meta}))}).then(function(e){return e.status<200||300<e.status?t(e.statusText):e.json().then(function(e){return r.uppy.setFileState(n.id,{serverToken:e.token}),r.uppy.getFile(n.id)})}).then(function(e){return r.connectToServerSocket(e)}).then(function(){e()}).catch(function(e){t(new Error(e))})})},m.prototype.connectToServerSocket=function(o){var s=this;return new Promise(function(n,t){var e=o.serverToken,r=l(o.remote.serverUrl),i=new a({target:r+"/api/"+e});s.uploaderSockets[i]=i,s.uploaderEvents[o.id]=f(s.uppy),s.onFileRemove(o.id,function(e){s.resetUploaderReferences(o.id,{abort:!0}),n("upload "+o.id+" was removed")}),s.onFilePause(o.id,function(e){i.send(e?"pause":"resume",{})}),s.onPauseAll(o.id,function(){return i.send("pause",{})}),s.onResumeAll(o.id,function(){o.error&&i.send("pause",{}),i.send("resume",{})}),s.onRetry(o.id,function(){i.send("pause",{}),i.send("resume",{})}),s.onRetryAll(o.id,function(){i.send("pause",{}),i.send("resume",{})}),o.isPaused&&i.send("pause",{}),i.on("progress",function(e){return c(s,e,o)}),i.on("error",function(e){s.uppy.emit("upload-error",o,new Error(e.error)),t(new Error(e.error))}),i.on("success",function(e){var t={uploadURL:e.url};s.uppy.emit("upload-success",o,t),n()})})},m.prototype.upload=function(e){var n=this;if(0===e.length)return Promise.resolve();var t=e.map(function(e){var t=n.uppy.getFile(e);return t.isRemote?n.uploadRemote(t):n.uploadFile(t)});return Promise.all(t)},m.prototype.onFileRemove=function(t,n){this.uploaderEvents[t].on("file-removed",function(e){t===e.id&&n(e.id)})},m.prototype.onFilePause=function(n,r){this.uploaderEvents[n].on("upload-pause",function(e,t){n===e&&r(t)})},m.prototype.onRetry=function(t,n){this.uploaderEvents[t].on("upload-retry",function(e){t===e&&n()})},m.prototype.onRetryAll=function(t,n){var r=this;this.uploaderEvents[t].on("retry-all",function(e){r.uppy.getFile(t)&&n()})},m.prototype.onPauseAll=function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",function(){n.uppy.getFile(e)&&t()})},m.prototype.onResumeAll=function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",function(){n.uppy.getFile(e)&&t()})},m.prototype.install=function(){var t=this,e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:s({},e,{resumableUploads:!0})}),this.uppy.addUploader(this.upload),this.uppy.on("cancel-all",function(){t.uppy.getFiles().forEach(function(e){t.resetUploaderReferences(e.id,{abort:!0})})})},m.prototype.uninstall=function(){this.uppy.setState({capabilities:s({},this.uppy.getState().capabilities,{resumableUploads:!1})}),this.uppy.removeUploader(this.upload)},m)},{"./MultipartUploader":88,"@uppy/companion-client":94,"@uppy/core":96,"@uppy/utils/lib/emitSocketProgress":156,"@uppy/utils/lib/getSocketHost":164,"@uppy/utils/lib/limitPromises":171}],90:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,i=e("resolve-url"),s=e("@uppy/core").Plugin,a=e("@uppy/utils/lib/Translator"),u=e("@uppy/utils/lib/limitPromises"),c=e("@uppy/companion-client").RequestClient,l=e("@uppy/xhr-upload");function p(e){var t=e.headers?e.headers["content-type"]:e.getResponseHeader("Content-Type");return"string"==typeof t&&"application/xml"===t.toLowerCase()}function h(e,t){var n=e.indexOf("<"+t+">"),r=e.indexOf("</"+t+">",n);return-1!==n&&-1!==r?e.slice(n+t.length+2,r):""}function f(e){if(e&&e.error){var t=new Error(e.message);throw d(t,e.error),t}return e}function m(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));n.type="uploader",n.id="AwsS3",n.title="AWS S3";var r={strings:{preparingUpload:"Preparing upload..."}},i={timeout:3e4,limit:0,getUploadParameters:n.getUploadParameters.bind(n),locale:r};return n.opts=d({},i,t),n.translator=new a([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n.client=new c(e,t),n.prepareUpload=n.prepareUpload.bind(n),"number"==typeof n.opts.limit&&0!==n.opts.limit?n.limitRequests=u(n.opts.limit):n.limitRequests=function(e){return e},n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,o=s),m.prototype.getUploadParameters=function(e){if(!this.opts.serverUrl)throw new Error("Expected a `serverUrl` option containing a Companion address.");var t=encodeURIComponent(e.meta.name),n=encodeURIComponent(e.meta.type);return this.client.get("s3/params?filename="+t+"&type="+n).then(f)},m.prototype.validateParameters=function(e,t){if("object"===(void 0===t?"undefined":r(t))&&t&&"string"==typeof t.url&&("object"===r(t.fields)||null==t.fields)&&(null==t.method||/^(put|post)$/i.test(t.method)))return t;var n=new TypeError("AwsS3: got incorrect result from 'getUploadParameters()' for file '"+e.name+"', expected an object '{ url, method, fields, headers }'.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.");throw console.error(n),n},m.prototype.prepareUpload=function(e){var f=this;e.forEach(function(e){var t=f.uppy.getFile(e);f.uppy.emit("preprocess-progress",t,{mode:"determinate",message:f.i18n("preparingUpload"),value:0})});var n=this.limitRequests(this.opts.getUploadParameters);return Promise.all(e.map(function(e){var t=f.uppy.getFile(e);return Promise.resolve().then(function(){return n(t)}).then(function(e){return f.validateParameters(t,e)}).then(function(e){return f.uppy.emit("preprocess-progress",t,{mode:"determinate",message:f.i18n("preparingUpload"),value:1}),e}).catch(function(e){f.uppy.emit("upload-error",t,e)})})).then(function(p){var h={};e.forEach(function(e,t){var n,r,i,o,s,a,u,c,l=f.uppy.getFile(e);l.error||(i=void 0===(r=(n=p[t]).method)?"post":r,o=n.url,s=n.fields,a=n.headers,u={method:i,formData:"post"===i.toLowerCase(),endpoint:o,metaFields:Object.keys(s)},a&&(u.headers=a),c=d({},l,{meta:d({},l.meta,s),xhrUpload:u}),h[e]=c)}),f.uppy.setState({files:d({},f.uppy.getState().files,h)}),e.forEach(function(e){var t=f.uppy.getFile(e);f.uppy.emit("preprocess-complete",t)})})},m.prototype.install=function(){var n=this.uppy.log;this.uppy.addPreProcessor(this.prepareUpload);var r=!1;this.uppy.use(l,{fieldName:"file",responseUrlFieldName:"location",timeout:this.opts.timeout,limit:this.opts.limit,responseType:"text",getResponseData:function(e,t){return p(t)?{location:i(t.responseURL,h(e,"Location")),bucket:h(e,"Bucket"),key:h(e,"Key"),etag:h(e,"ETag")}:"POST"===this.method.toUpperCase()?(r||(n("[AwsS3] No response data found, make sure to set the success_action_status AWS SDK option to 201. See https://uppy.io/docs/aws-s3/#POST-Uploads","warning"),r=!0),{location:null}):t.responseURL?{location:t.responseURL.replace(/\?.*$/,"")}:{location:null}},getResponseError:function(e,t){if(p(t)){var n=h(e,"Message");return new Error(n)}}})},m.prototype.uninstall=function(){var e=this.uppy.getPlugin("XHRUpload");this.uppy.removePlugin(e),this.uppy.removePreProcessor(this.prepareUpload)},m)},{"@uppy/companion-client":94,"@uppy/core":96,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/limitPromises":171,"@uppy/xhr-upload":184,"resolve-url":55}],91:[function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s,a=e("./RequestClient"),u=function(e){return e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")};function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t));return n.provider=t.provider,n.id=n.provider,n.authProvider=t.authProvider||n.provider,n.name=n.opts.name||u(n.id),n.tokenKey="companion-"+n.id+"-auth-token",n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=a),c.prototype.setAuthToken=function(e){localStorage.setItem(this.tokenKey,e)},c.prototype.checkAuth=function(){return this.get(this.id+"/authorized").then(function(e){return e.authenticated})},c.prototype.authUrl=function(){return this.hostname+"/"+this.id+"/connect"},c.prototype.fileUrl=function(e){return this.hostname+"/"+this.id+"/get/"+e},c.prototype.list=function(e){return this.get(this.id+"/list/"+(e||""))},c.prototype.logout=function(e){var t=this,n=0<arguments.length&&void 0!==e?e:location.href;return this.get(this.id+"/logout?redirect="+n).then(function(e){return localStorage.removeItem(t.tokenKey),e})},c.initPlugin=function(e,t,n){if(e.type="acquirer",e.files=[],n&&(e.opts=i({},n,t)),t.serverPattern){var r=t.serverPattern;if(!("string"==typeof r||Array.isArray(r)||r instanceof RegExp))throw new TypeError(e.id+': the option "serverPattern" must be one of string, Array, RegExp');e.opts.serverPattern=r}else/^(?!https?:\/\/).*$/.test(t.serverUrl)?e.opts.serverPattern=location.protocol+"//"+t.serverUrl.replace(/^\/\//,""):e.opts.serverPattern=t.serverUrl},r(c,[{key:"defaultHeaders",get:function(){return i({},s.prototype.defaultHeaders,{"uppy-auth-token":localStorage.getItem(this.tokenKey)})}}]),c)},{"./RequestClient":92}],92:[function(e,t,n){var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this)}t.exports=(s.prototype.onReceiveResponse=function(e){var t,n=this.uppy.getState().companion||{},r=this.opts.serverUrl,i=e.headers;return i.has("i-am")&&i.get("i-am")!==n[r]&&this.uppy.setState({companion:o({},n,((t={})[r]=i.get("i-am"),t))}),e},s.prototype._getUrl=function(e){return/^(https?:|)\/\//.test(e)?e:this.hostname+"/"+e},s.prototype.get=function(t){var n=this;return fetch(this._getUrl(t),{method:"get",headers:this.headers,credentials:"same-origin"}).then(this.onReceiveResponse).then(function(e){return e.json()}).catch(function(e){throw new Error("Could not get "+n._getUrl(t)+". "+e)})},s.prototype.post=function(t,e){var n=this;return fetch(this._getUrl(t),{method:"post",headers:this.headers,credentials:"same-origin",body:JSON.stringify(e)}).then(this.onReceiveResponse).then(function(e){if(e.status<200||300<e.status)throw new Error("Could not post "+n._getUrl(t)+". "+e.statusText);return e.json()}).catch(function(e){throw new Error("Could not post "+n._getUrl(t)+". "+e)})},s.prototype.delete=function(t,e){var n=this;return fetch(this.hostname+"/"+t,{method:"delete",headers:this.headers,credentials:"same-origin",body:e?JSON.stringify(e):null}).then(this.onReceiveResponse).then(function(e){return e.json()}).catch(function(e){throw new Error("Could not delete "+n._getUrl(t)+". "+e)})},r(s,[{key:"hostname",get:function(){var e=this.uppy.getState().companion,t=this.opts.serverUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}},{key:"defaultHeaders",get:function(){return{Accept:"application/json","Content-Type":"application/json"}}},{key:"headers",get:function(){return o({},this.defaultHeaders,this.opts.serverHeaders||{})}}]),s)},{}],93:[function(e,t,n){var r=e("namespace-emitter");function i(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.queued=[],this.isOpen=!1,this.socket=new WebSocket(e.target),this.emitter=r(),this.socket.onopen=function(e){for(n.isOpen=!0;0<n.queued.length&&n.isOpen;){var t=n.queued[0];n.send(t.action,t.payload),n.queued=n.queued.slice(1)}},this.socket.onclose=function(e){n.isOpen=!1},this._handleMessage=this._handleMessage.bind(this),this.socket.onmessage=this._handleMessage,this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this)}t.exports=(i.prototype.close=function(){return this.socket.close()},i.prototype.send=function(e,t){this.isOpen?this.socket.send(JSON.stringify({action:e,payload:t})):this.queued.push({action:e,payload:t})},i.prototype.on=function(e,t){this.emitter.on(e,t)},i.prototype.emit=function(e,t){this.emitter.emit(e,t)},i.prototype.once=function(e,t){this.emitter.once(e,t)},i.prototype._handleMessage=function(e){try{var t=JSON.parse(e.data);this.emit(t.action,t.payload)}catch(e){console.log(e)}},i)},{"namespace-emitter":45}],94:[function(e,t,n){var r=e("./RequestClient"),i=e("./Provider"),o=e("./Socket");t.exports={RequestClient:r,Provider:i,Socket:o}},{"./Provider":91,"./RequestClient":92,"./Socket":93}],95:[function(e,t,n){var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var p=e("preact"),h=e("@uppy/utils/lib/findDOMElement");function f(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),this.uppy=e,this.opts=t||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this)}t.exports=(f.prototype.getPluginState=function(){return this.uppy.getState().plugins[this.id]||{}},f.prototype.setPluginState=function(e){var t,n=this.uppy.getState().plugins;this.uppy.setState({plugins:r({},n,((t={})[this.id]=r({},n[this.id],e),t))})},f.prototype.update=function(e){void 0!==this.el&&this._updateUI&&this._updateUI(e)},f.prototype.onMount=function(){},f.prototype.mount=function(e,t){var r,i,o,n=this,s=t.id,a=h(e);if(a)return this.isTargetDOMEl=!0,this.rerender=function(e){n.uppy.getPlugin(n.id)&&(n.el=p.render(n.render(e),a,n.el))},this._updateUI=(r=this.rerender,o=null,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=t,o=o||Promise.resolve().then(function(){return o=null,r.apply(void 0,i)})}),this.uppy.log("Installing "+s+" to a DOM element"),this.opts.replaceTargetContent&&(a.innerHTML=""),this.el=p.render(this.render(this.uppy.getState()),a),this.onMount(),this.el;var u,c=void 0;if("object"===(void 0===e?"undefined":l(e))&&e instanceof f?c=e:"function"==typeof e&&(u=e,this.uppy.iteratePlugins(function(e){if(e instanceof u)return c=e,!1})),c)return this.uppy.log("Installing "+s+" to "+c.id),this.parent=c,this.el=c.addTarget(t),this.onMount(),this.el;throw this.uppy.log("Not installing "+s),new Error("Invalid target option given to "+s+". Please make sure that the element \n      exists on the page, or that the plugin you are targeting has been installed. Check that the <script> tag initializing Uppy \n      comes at the bottom of the page, before the closing </body> tag (see https://github.com/transloadit/uppy/issues/1042).")},f.prototype.render=function(){throw new Error("Extend the render method to add your plugin to a DOM element")},f.prototype.addTarget=function(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")},f.prototype.unmount=function(){this.isTargetDOMEl&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},f.prototype.install=function(){},f.prototype.uninstall=function(){this.unmount()},f)},{"@uppy/utils/lib/findDOMElement":158,preact:49}],96:[function(e,t,n){var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("@uppy/utils/lib/Translator"),s=e("namespace-emitter"),a=e("cuid"),u=e("prettier-bytes"),c=e("mime-match"),l=e("@uppy/store-default"),y=e("@uppy/utils/lib/getFileType"),g=e("@uppy/utils/lib/getFileNameAndExtension"),v=e("@uppy/utils/lib/generateFileID"),p=e("@uppy/utils/lib/getTimeStamp"),h=e("./supportsUploadProgress"),f=e("./Plugin"),b=(_.prototype.on=function(e,t){return this.emitter.on(e,t),this},_.prototype.off=function(e,t){return this.emitter.off(e,t),this},_.prototype.updateAll=function(t){this.iteratePlugins(function(e){e.update(t)})},_.prototype.setState=function(e){this.store.setState(e)},_.prototype.getState=function(){return this.store.getState()},_.prototype.setFileState=function(e,t){var n;if(!this.getState().files[e])throw new Error("Can’t set state for "+e+" (the file could have been removed)");this.setState({files:m({},this.getState().files,((n={})[e]=m({},this.getState().files[e],t),n))})},_.prototype.resetProgress=function(){var n={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:!1},r=m({},this.getState().files),i={};Object.keys(r).forEach(function(e){var t=m({},r[e]);t.progress=m({},t.progress,n),i[e]=t}),this.setState({files:i,totalProgress:0}),this.emit("reset-progress")},_.prototype.addPreProcessor=function(e){this.preProcessors.push(e)},_.prototype.removePreProcessor=function(e){var t=this.preProcessors.indexOf(e);-1!==t&&this.preProcessors.splice(t,1)},_.prototype.addPostProcessor=function(e){this.postProcessors.push(e)},_.prototype.removePostProcessor=function(e){var t=this.postProcessors.indexOf(e);-1!==t&&this.postProcessors.splice(t,1)},_.prototype.addUploader=function(e){this.uploaders.push(e)},_.prototype.removeUploader=function(e){var t=this.uploaders.indexOf(e);-1!==t&&this.uploaders.splice(t,1)},_.prototype.setMeta=function(t){var e=m({},this.getState().meta,t),n=m({},this.getState().files);Object.keys(n).forEach(function(e){n[e]=m({},n[e],{meta:m({},n[e].meta,t)})}),this.log("Adding metadata:"),this.log(t),this.setState({meta:e,files:n})},_.prototype.setFileMeta=function(e,t){var n,r=m({},this.getState().files);r[e]?(n=m({},r[e].meta,t),r[e]=m({},r[e],{meta:n}),this.setState({files:r})):this.log("Was trying to set metadata for a file that’s not with us anymore: ",e)},_.prototype.getFile=function(e){return this.getState().files[e]},_.prototype.getFiles=function(){var t=this.getState().files;return Object.keys(t).map(function(e){return t[e]})},_.prototype._checkMinNumberOfFiles=function(e){var t=this.opts.restrictions.minNumberOfFiles;if(Object.keys(e).length<t)throw new Error(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))},_.prototype._checkRestrictions=function(t){var e=this.opts.restrictions,n=e.maxFileSize,r=e.maxNumberOfFiles,i=e.allowedFileTypes;if(r&&Object.keys(this.getState().files).length+1>r)throw new Error(""+this.i18n("youCanOnlyUploadX",{smart_count:r}));if(i&&!(0<i.filter(function(e){return-1<e.indexOf("/")?!!t.type&&c(t.type,e):"."===e[0]&&t.extension===e.substr(1)?t.extension:void 0}).length)){var o=i.join(", ");throw new Error(this.i18n("youCanOnlyUploadFileTypes")+" "+o)}if(n&&t.data.size>n)throw new Error(this.i18n("exceedsSize")+" "+u(n))},_.prototype.addFile=function(e){function t(e){var t="object"===(void 0===e?"undefined":d(e))?e:new Error(e);throw r.log(t.message),r.info(t.message,"error",5e3),t}var n,r=this,i=this.getState(),o=i.files;!1===i.allowNewUpload&&t(new Error("Cannot add new files: already uploading."));var s=this.opts.onBeforeFileAdded(e,o);if(!1!==s){if("object"===(void 0===s?"undefined":d(s))&&s){if(s.then)throw new TypeError("onBeforeFileAdded() returned a Promise, but this is no longer supported. It must be synchronous.");e=s}var a=y(e),u=void 0,u=e.name?e.name:"image"===a.split("/")[0]?a.split("/")[0]+"."+a.split("/")[1]:"noname",c=g(u).extension,l=e.isRemote||!1,p=v(e),h=e.meta||{};h.name=u,h.type=a;var f={source:e.source||"",id:p,name:u,extension:c||"",meta:m({},this.getState().meta,h),type:a,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:e.data.size||0,uploadComplete:!1,uploadStarted:!1},size:e.data.size||0,isRemote:l,remote:e.remote||"",preview:e.preview};try{this._checkRestrictions(f)}catch(e){t(e)}this.setState({files:m({},o,((n={})[p]=f,n))}),this.emit("file-added",f),this.log("Added file: "+u+", "+p+", mime type: "+a),this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(function(){r.scheduledAutoProceed=null,r.upload().catch(function(e){console.error(e.stack||e.message||e)})},4))}else this.log("Not adding file because onBeforeFileAdded returned false")},_.prototype.removeFile=function(n){var t=this,e=this.getState(),r=e.files,i=e.currentUploads,o=m({},r),s=o[n];delete o[n];var a=m({},i),u=[];Object.keys(a).forEach(function(e){var t=i[e].fileIDs.filter(function(e){return e!==n});0!==t.length?a[e]=m({},i[e],{fileIDs:t}):u.push(e)}),this.setState({currentUploads:a,files:o}),u.forEach(function(e){t._removeUpload(e)}),this._calculateTotalProgress(),this.emit("file-removed",s),this.log("File removed: "+s.id)},_.prototype.pauseResume=function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).uploadComplete){var t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}},_.prototype.pauseAll=function(){var n=m({},this.getState().files);Object.keys(n).filter(function(e){return!n[e].progress.uploadComplete&&n[e].progress.uploadStarted}).forEach(function(e){var t=m({},n[e],{isPaused:!0});n[e]=t}),this.setState({files:n}),this.emit("pause-all")},_.prototype.resumeAll=function(){var n=m({},this.getState().files);Object.keys(n).filter(function(e){return!n[e].progress.uploadComplete&&n[e].progress.uploadStarted}).forEach(function(e){var t=m({},n[e],{isPaused:!1,error:null});n[e]=t}),this.setState({files:n}),this.emit("resume-all")},_.prototype.retryAll=function(){var n=m({},this.getState().files),e=Object.keys(n).filter(function(e){return n[e].error});e.forEach(function(e){var t=m({},n[e],{isPaused:!1,error:null});n[e]=t}),this.setState({files:n,error:null}),this.emit("retry-all",e);var t=this._createUpload(e);return this._runUpload(t)},_.prototype.cancelAll=function(){var t=this;this.emit("cancel-all"),Object.keys(this.getState().files).forEach(function(e){t.removeFile(e)}),this.setState({allowNewUpload:!0,totalProgress:0,error:null})},_.prototype.retryUpload=function(e){var t=m({},this.getState().files),n=m({},t[e],{error:null,isPaused:!1});t[e]=n,this.setState({files:t}),this.emit("upload-retry",e);var r=this._createUpload([e]);return this._runUpload(r)},_.prototype.reset=function(){this.cancelAll()},_.prototype._calculateProgress=function(e,t){this.getFile(e.id)?(this.setFileState(e.id,{progress:m({},this.getFile(e.id).progress,{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:Math.floor((t.bytesUploaded/t.bytesTotal*100).toFixed(2))})}),this._calculateTotalProgress()):this.log("Not setting progress for a file that has been removed: "+e.id)},_.prototype._calculateTotalProgress=function(){var e=this.getFiles().filter(function(e){return e.progress.uploadStarted});if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t,n,r,i,o,s,a,u=e.filter(function(e){return null!=e.progress.bytesTotal}),c=e.filter(function(e){return null==e.progress.bytesTotal});0!==u.length?(t=u.reduce(function(e,t){return e+t.progress.bytesTotal},0),t+=(n=t/u.length)*c.length,r=0,u.forEach(function(e){r+=e.progress.bytesUploaded}),c.forEach(function(e){r+=n*(e.progress.percentage||0)}),i=0===t?0:Math.round(r/t*100),this.setState({totalProgress:i}),this.emit("progress",i)):(o=e.length,s=c.reduce(function(e,t){return e+t.progress.percentage},0),a=Math.round(s/o*100),this.setState({totalProgress:a}))},_.prototype._addListeners=function(){var i=this;this.on("error",function(e){i.setState({error:e.message})}),this.on("upload-error",function(e,t,n){i.setFileState(e.id,{error:t.message,response:n}),i.setState({error:t.message});var r=i.i18n("failedToUpload",{file:e.name});"object"===(void 0===t?"undefined":d(t))&&t.message&&(r={message:r,details:t.message}),i.info(r,"error",5e3)}),this.on("upload",function(){i.setState({error:null})}),this.on("upload-started",function(e,t){i.getFile(e.id)?i.setFileState(e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}}):i.log("Not setting progress for a file that has been removed: "+e.id)}),this.on("upload-progress",this._calculateProgress),this.on("upload-success",function(e,t){var n=i.getFile(e.id).progress;i.setFileState(e.id,{progress:m({},n,{uploadComplete:!0,percentage:100,bytesUploaded:n.bytesTotal}),response:t,uploadURL:t.uploadURL,isPaused:!1}),i._calculateTotalProgress()}),this.on("preprocess-progress",function(e,t){i.getFile(e.id)?i.setFileState(e.id,{progress:m({},i.getFile(e.id).progress,{preprocess:t})}):i.log("Not setting progress for a file that has been removed: "+e.id)}),this.on("preprocess-complete",function(e){var t;i.getFile(e.id)?((t=m({},i.getState().files))[e.id]=m({},t[e.id],{progress:m({},t[e.id].progress)}),delete t[e.id].progress.preprocess,i.setState({files:t})):i.log("Not setting progress for a file that has been removed: "+e.id)}),this.on("postprocess-progress",function(e,t){i.getFile(e.id)?i.setFileState(e.id,{progress:m({},i.getState().files[e.id].progress,{postprocess:t})}):i.log("Not setting progress for a file that has been removed: "+e.id)}),this.on("postprocess-complete",function(e){var t;i.getFile(e.id)?((t=m({},i.getState().files))[e.id]=m({},t[e.id],{progress:m({},t[e.id].progress)}),delete t[e.id].progress.postprocess,i.setState({files:t})):i.log("Not setting progress for a file that has been removed: "+e.id)}),this.on("restored",function(){i._calculateTotalProgress()}),void 0!==window&&window.addEventListener&&(window.addEventListener("online",function(){return i.updateOnlineStatus()}),window.addEventListener("offline",function(){return i.updateOnlineStatus()}),setTimeout(function(){return i.updateOnlineStatus()},3e3))},_.prototype.updateOnlineStatus=function(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)},_.prototype.getID=function(){return this.opts.id},_.prototype.use=function(e,t){if("function"!=typeof e){var n="Expected a plugin class, but got "+(null===e?"null":void 0===e?"undefined":d(e))+". Please verify that the plugin was imported and spelled correctly.";throw new TypeError(n)}var r=new e(this,t),i=r.id;if(this.plugins[r.type]=this.plugins[r.type]||[],!i)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");var o=this.getPlugin(i);if(o){var s="Already found a plugin named '"+o.id+"'. Tried to use: '"+i+"'.\nUppy plugins must have unique 'id' options. See https://uppy.io/docs/plugins/#id.";throw new Error(s)}return this.plugins[r.type].push(r),r.install(),this},_.prototype.getPlugin=function(t){var n=null;return this.iteratePlugins(function(e){if(e.id===t)return n=e,!1}),n},_.prototype.iteratePlugins=function(t){var n=this;Object.keys(this.plugins).forEach(function(e){n.plugins[e].forEach(t)})},_.prototype.removePlugin=function(e){this.log("Removing plugin "+e.id),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();var t=this.plugins[e.type].slice(),n=t.indexOf(e);-1!==n&&(t.splice(n,1),this.plugins[e.type]=t);var r=this.getState();delete r.plugins[e.id],this.setState(r)},_.prototype.close=function(){var t=this;this.log("Closing Uppy instance "+this.opts.id+": removing all files and uninstalling plugins"),this.reset(),this._storeUnsubscribe(),this.iteratePlugins(function(e){t.removePlugin(e)})},_.prototype.info=function(e,t,n){var r=1<arguments.length&&void 0!==t?t:"info",i=2<arguments.length&&void 0!==n?n:3e3,o="object"===(void 0===e?"undefined":d(e));this.setState({info:{isHidden:!1,type:r,message:o?e.message:e,details:o?e.details:null}}),this.emit("info-visible"),clearTimeout(this.infoTimeoutID),this.infoTimeoutID=0!==i?setTimeout(this.hideInfo,i):void 0},_.prototype.hideInfo=function(){var e=m({},this.getState().info,{isHidden:!0});this.setState({info:e}),this.emit("info-hidden")},_.prototype.log=function(e,t){var n;this.opts.debug&&(n="[Uppy] ["+p()+"] "+e,window.uppyLog=window.uppyLog+"\nDEBUG LOG: "+e,"error"!==t?"warning"!==t?e===""+e?console.log(n):(n="[Uppy] ["+p()+"]",console.log(n),console.dir(e)):console.warn(n):console.error(n))},_.prototype.run=function(){return this.log("Calling run() is no longer necessary.","warning"),this},_.prototype.restore=function(e){return this.log('Core: attempting to restore upload "'+e+'"'),this.getState().currentUploads[e]?this._runUpload(e):(this._removeUpload(e),Promise.reject(new Error("Nonexistent upload")))},_.prototype._createUpload=function(e){var t,n=this.getState(),r=n.allowNewUpload,i=n.currentUploads;if(!r)throw new Error("Cannot create a new upload: already uploading.");var o=a();return this.emit("upload",{id:o,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploads,currentUploads:m({},i,((t={})[o]={fileIDs:e,step:0,result:{}},t))}),o},_.prototype._getUpload=function(e){return this.getState().currentUploads[e]},_.prototype.addResultData=function(e,t){var n,r,i;this._getUpload(e)?(r=this.getState().currentUploads,i=m({},r[e],{result:m({},r[e].result,t)}),this.setState({currentUploads:m({},r,((n={})[e]=i,n))})):this.log("Not setting result for an upload that has been removed: "+e)},_.prototype._removeUpload=function(e){var t=m({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})},_.prototype._runUpload=function(o){var s=this,e=this.getState().currentUploads[o].step,t=[].concat(this.preProcessors,this.uploaders,this.postProcessors),n=Promise.resolve();return t.forEach(function(r,i){i<e||(n=n.then(function(){var e,t=s.getState().currentUploads,n=m({},t[o],{step:i});return s.setState({currentUploads:m({},t,((e={})[o]=n,e))}),r(n.fileIDs,o)}).then(function(e){return null}))}),n.catch(function(e){s.emit("error",e,o),s._removeUpload(o)}),n.then(function(){var e,t,n,r=s.getState().currentUploads[o];r?(t=(e=r.fileIDs.map(function(e){return s.getFile(e)})).filter(function(e){return!e.error}),n=e.filter(function(e){return e.error}),s.addResultData(o,{successful:t,failed:n,uploadID:o})):s.log("Not setting result for an upload that has been removed: "+o)}).then(function(){var e=s.getState().currentUploads;if(e[o]){var t=e[o].result;return s.emit("complete",t),s._removeUpload(o),t}s.log("Not setting result for an upload that has been canceled: "+o)})},_.prototype.upload=function(){var o=this;this.plugins.uploader||this.log("No uploader type plugins are used","warning");var t=this.getState().files,e=this.opts.onBeforeUpload(t);if(!1===e)return Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false"));if(e&&"object"===(void 0===e?"undefined":d(e))){if(e.then)throw new TypeError("onBeforeUpload() returned a Promise, but this is no longer supported. It must be synchronous.");t=e}return Promise.resolve().then(function(){return o._checkMinNumberOfFiles(t)}).then(function(){var n=o.getState().currentUploads,r=Object.keys(n).reduce(function(e,t){return e.concat(n[t].fileIDs)},[]),i=[];Object.keys(t).forEach(function(e){var t=o.getFile(e);t.progress.uploadStarted||-1!==r.indexOf(e)||i.push(t.id)});var e=o._createUpload(i);return o._runUpload(e)}).catch(function(e){var t="object"===(void 0===e?"undefined":d(e))?e.message:e,n="object"===(void 0===e?"undefined":d(e))?e.details:null;return o.log(t+" "+n),o.info({message:t,details:n},"error",4e3),Promise.reject("object"===(void 0===e?"undefined":d(e))?e:new Error(e))})},r(_,[{key:"state",get:function(){return this.getState()}}]),_);function _(e){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_);var t={strings:{youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"This file exceeds maximum allowed size of",youCanOnlyUploadFileTypes:"You can only upload:",companionError:"Connection with Companion failed",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectXFiles:{0:"Select %{smart_count} file",1:"Select %{smart_count} files"},cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter"}},n={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,debug:!1,restrictions:{maxFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null},meta:{},onBeforeFileAdded:function(e){return e},onBeforeUpload:function(e){return e},locale:t,store:l()};this.opts=m({},n,e),this.opts.restrictions=m({},n.restrictions,this.opts.restrictions),this.translator=new o([t,this.opts.locale]),this.locale=this.translator.locale,this.i18n=this.translator.translate.bind(this.translator),this.plugins={},this.getState=this.getState.bind(this),this.getPlugin=this.getPlugin.bind(this),this.setFileMeta=this.setFileMeta.bind(this),this.setFileState=this.setFileState.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.hideInfo=this.hideInfo.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.pauseResume=this.pauseResume.bind(this),this._calculateProgress=this._calculateProgress.bind(this),this.updateOnlineStatus=this.updateOnlineStatus.bind(this),this.resetProgress=this.resetProgress.bind(this),this.pauseAll=this.pauseAll.bind(this),this.resumeAll=this.resumeAll.bind(this),this.retryAll=this.retryAll.bind(this),this.cancelAll=this.cancelAll.bind(this),this.retryUpload=this.retryUpload.bind(this),this.upload=this.upload.bind(this),this.emitter=s(),this.on=this.on.bind(this),this.off=this.off.bind(this),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:h(),resumableUploads:!1},totalProgress:0,meta:m({},this.opts.meta),info:{isHidden:!0,type:"info",message:""}}),this._storeUnsubscribe=this.store.subscribe(function(e,t,n){r.emit("state-update",e,t,n),r.updateAll(t)}),this.opts.debug&&void 0!==window&&(window.uppyLog="",window[this.opts.id]=this),this._addListeners()}t.exports=function(e){return new b(e)},t.exports.Uppy=b,t.exports.Plugin=f},{"./Plugin":95,"./supportsUploadProgress":97,"@uppy/store-default":141,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/generateFileID":159,"@uppy/utils/lib/getFileNameAndExtension":161,"@uppy/utils/lib/getFileType":162,"@uppy/utils/lib/getTimeStamp":166,cuid:13,"mime-match":44,"namespace-emitter":45,"prettier-bytes":50}],97:[function(e,t,n){t.exports=function(e){if(null==e&&(e="undefined"!=typeof navigator?navigator.userAgent:null),!e)return!0;var t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;var n=t[1].split("."),r=n[0],i=n[1],r=parseInt(r,10),i=parseInt(i,10);return r<15||15===r&&i<15063||(18<r||18===r&&18218<=i)}},{}],98:[function(e,t,n){var r,i=e("preact"),o=i.h,s=i.Component,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,r=s),u.prototype.handleClick=function(){this.input.click()},u.prototype.render=function(){var t=this,e=o("button",{type:"button",class:"uppy-Dashboard-browse",onclick:this.handleClick},this.props.i18n("browse"));return o("div",{class:"uppy-Dashboard-dropFilesTitle"},0===this.props.acquirers.length?this.props.i18nArray("dropPaste",{browse:e}):this.props.i18nArray("dropPasteImport",{browse:e}),o("input",{class:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabindex:-1,type:"file",name:"files[]",multiple:1!==this.props.maxNumberOfFiles,onchange:this.props.handleInputChange,accept:this.props.allowedFileTypes,value:"",ref:function(e){t.input=e}}))},u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.handleClick=t.handleClick.bind(t),t}t.exports=a},{preact:49}],99:[function(e,t,n){function r(){return u("a",{tabindex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",class:"uppy-Dashboard-poweredBy"},"Powered by ",u("svg",{"aria-hidden":"true",class:"UppyIcon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z","fill-rule":"evenodd"})),u("span",{class:"uppy-Dashboard-poweredByUppy"},"Uppy"))}var i,o=e("./ActionBrowseTagline"),s=e("./icons").localIcon,a=e("preact"),u=a.h,c=a.Component,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,i=c),p.prototype.handleClick=function(){this.input.click()},p.prototype.render=function(){var t=this;return 0!==this.props.acquirers.length?u("div",{class:"uppy-DashboarAddFiles"},u("div",{class:"uppy-DashboardTabs"},u(o,{acquirers:this.props.acquirers,handleInputChange:this.props.handleInputChange,i18n:this.props.i18n,i18nArray:this.props.i18nArray,allowedFileTypes:this.props.allowedFileTypes,maxNumberOfFiles:this.props.maxNumberOfFiles}),u("div",{class:"uppy-DashboardTabs-list",role:"tablist"},u("div",{class:"uppy-DashboardTab",role:"presentation"},u("button",{type:"button",class:"uppy-DashboardTab-btn",role:"tab",tabindex:0,onclick:this.handleClick},s(),u("div",{class:"uppy-DashboardTab-name"},this.props.i18n("myDevice"))),u("input",{class:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabindex:-1,type:"file",name:"files[]",multiple:1!==this.props.maxNumberOfFiles,accept:this.props.allowedFileTypes,onchange:this.props.handleInputChange,value:"",ref:function(e){t.input=e}})),this.props.acquirers.map(function(e){return u("div",{class:"uppy-DashboardTab",role:"presentation"},u("button",{class:"uppy-DashboardTab-btn",type:"button",role:"tab",tabindex:0,"aria-controls":"uppy-DashboardContent-panel--"+e.id,"aria-selected":t.props.activePanel.id===e.id,onclick:function(){return t.props.showPanel(e.id)}},e.icon(),u("div",{class:"uppy-DashboardTab-name"},e.name)))}))),u("div",{class:"uppy-DashboarAddFiles-info"},this.props.note&&u("div",{class:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&r(this.props))):u("div",{class:"uppy-DashboarAddFiles"},u("div",{class:"uppy-DashboardTabs"},u(o,{acquirers:this.props.acquirers,handleInputChange:this.props.handleInputChange,i18n:this.props.i18n,i18nArray:this.props.i18nArray,allowedFileTypes:this.props.allowedFileTypes,maxNumberOfFiles:this.props.maxNumberOfFiles})),u("div",{class:"uppy-DashboarAddFiles-info"},this.props.note&&u("div",{class:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&r(this.props)))},p);function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e));return t.handleClick=t.handleClick.bind(t),t}t.exports=l},{"./ActionBrowseTagline":98,"./icons":109,preact:49}],100:[function(e,t,n){var r=e("preact").h,i=e("./AddFiles");t.exports=function(e){return r("div",{class:"uppy-Dashboard-AddFilesPanel","aria-hidden":e.showAddFilesPanel},r("div",{class:"uppy-DashboardContent-bar"},r("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},e.i18n("addingMoreFiles")),r("button",{class:"uppy-DashboardContent-back",type:"button",onclick:function(){return e.toggleAddFilesPanel(!1)}},e.i18n("back"))),r(i,e))}},{"./AddFiles":99,preact:49}],101:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=e("./FileList"),o=e("./AddFiles"),s=e("./AddFilesPanel"),a=e("./PanelContent"),u=e("./PanelTopBar"),c=e("./FileCard"),l=e("classnames"),p=e("@uppy/utils/lib/isTouchDevice"),h=e("preact").h,f=e("preact-css-transition-group");t.exports=function(t){var e=0===t.totalFileCount,n=l({"uppy-Root":t.isTargetDOMEl},"uppy-Dashboard",{"Uppy--isTouchDevice":p()},{"uppy-Dashboard--animateOpenClose":t.animateOpenClose},{"uppy-Dashboard--isClosing":t.isClosing},{"uppy-Dashboard--modal":!t.inline},{"uppy-size--md":576<t.containerWidth},{"uppy-size--lg":700<t.containerWidth},{"uppy-Dashboard--isAddFilesPanelVisible":t.showAddFilesPanel});return h("div",{class:n,"aria-hidden":t.inline?"false":t.modal.isHidden,"aria-label":t.inline?t.i18n("dashboardTitle"):t.i18n("dashboardWindowTitle"),onpaste:t.handlePaste},h("div",{class:"uppy-Dashboard-overlay",tabindex:-1,onclick:t.handleClickOutside}),h("div",{class:"uppy-Dashboard-inner","aria-modal":!t.inline&&"true",role:!t.inline&&"dialog",style:{width:t.inline&&t.width?t.width:"",height:t.inline&&t.height?t.height:""}},h("button",{class:"uppy-Dashboard-close",type:"button","aria-label":t.i18n("closeModal"),title:t.i18n("closeModal"),onclick:t.closeModal},h("span",{"aria-hidden":"true"},"×")),h("div",{class:"uppy-Dashboard-innerWrap"},!e&&t.showSelectedFiles&&h(u,t),t.showSelectedFiles?h(e?o:i,t):h(o,t),h(f,{transitionName:"uppy-transition-slideDownUp",transitionEnterTimeout:250,transitionLeaveTimeout:250},t.showAddFilesPanel?h(s,r({key:"AddFilesPanel"},t)):null),h(f,{transitionName:"uppy-transition-slideDownUp",transitionEnterTimeout:250,transitionLeaveTimeout:250},t.fileCardFor?h(c,r({key:"FileCard"},t)):null),h(f,{transitionName:"uppy-transition-slideDownUp",transitionEnterTimeout:250,transitionLeaveTimeout:250},t.activePanel?h(a,r({key:"PanelContent"},t)):null),h("div",{class:"uppy-Dashboard-progressindicators"},t.progressindicators.map(function(e){return t.getPlugin(e.id).render(t.state)})))))}},{"./AddFiles":99,"./AddFilesPanel":100,"./FileCard":102,"./FileList":105,"./PanelContent":107,"./PanelTopBar":108,"@uppy/utils/lib/isTouchDevice":170,classnames:9,preact:49,"preact-css-transition-group":48}],102:[function(e,t,n){var r,i=e("../utils/getFileTypeIcon"),o=e("./FilePreview"),s=e("../utils/ignoreEvent.js"),a=e("preact"),u=a.h,c=a.Component,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,r=c),p.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.firstInput&&e.firstInput.focus({preventScroll:!0})},150)},p.prototype.tempStoreMetaOrSubmit=function(e){var t=this.props.files[this.props.fileCardFor];if(13===e.keyCode)return e.stopPropagation(),e.preventDefault(),void this.props.saveFileCard(this.meta,t.id);var n=e.target.value,r=e.target.dataset.name;this.meta[r]=n},p.prototype.renderMetaFields=function(n){var r=this;return(this.props.metaFields||[]).map(function(e,t){return u("fieldset",{class:"uppy-DashboardFileCard-fieldset"},u("label",{class:"uppy-DashboardFileCard-label"},e.name),u("input",{class:"uppy-c-textInput uppy-DashboardFileCard-input",type:"text","data-name":e.id,value:n.meta[e.id],placeholder:e.placeholder,onkeyup:r.tempStoreMetaOrSubmit,onkeydown:r.tempStoreMetaOrSubmit,onkeypress:r.tempStoreMetaOrSubmit,ref:function(e){0===t&&(r.firstInput=e)}}))})},p.prototype.handleSave=function(){var e=this.props.fileCardFor;this.props.saveFileCard(this.meta,e)},p.prototype.handleCancel=function(){this.meta={},this.props.toggleFileCard()},p.prototype.render=function(){var e=this.props.files[this.props.fileCardFor];return u("div",{class:"uppy-DashboardFileCard",onDragOver:s,onDragLeave:s,onDrop:s,onPaste:s},u("div",{class:"uppy-DashboardContent-bar"},u("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},this.props.i18nArray("editing",{file:u("span",{class:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),u("button",{class:"uppy-DashboardContent-back",type:"button",title:this.props.i18n("finishEditingFile"),onclick:this.handleSave},this.props.i18n("done"))),u("div",{class:"uppy-DashboardFileCard-inner"},u("div",{class:"uppy-DashboardFileCard-preview",style:{backgroundColor:i(e.type).color}},u(o,{file:e})),u("div",{class:"uppy-DashboardFileCard-info"},this.renderMetaFields(e)),u("div",{class:"uppy-Dashboard-actions"},u("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-actionsBtn",type:"button",onclick:this.handleSave},this.props.i18n("saveChanges")),u("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-actionsBtn",type:"button",onclick:this.handleCancel},this.props.i18n("cancel")))))},p);function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.meta={},t.tempStoreMetaOrSubmit=t.tempStoreMetaOrSubmit.bind(t),t.renderMetaFields=t.renderMetaFields.bind(t),t.handleSave=t.handleSave.bind(t),t.handleCancel=t.handleCancel.bind(t),t}t.exports=l},{"../utils/getFileTypeIcon":112,"../utils/ignoreEvent.js":113,"./FilePreview":106,preact:49}],103:[function(e,t,n){var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=e("@uppy/utils/lib/getFileNameAndExtension"),m=e("../utils/truncateString"),y=e("../utils/copyToClipboard"),g=e("prettier-bytes"),r=e("./FileItemProgress"),v=e("../utils/getFileTypeIcon"),b=e("./FilePreview"),i=e("./icons"),_=i.iconCopy,o=i.iconRetry,w=e("classnames"),A=e("preact").h;function S(e){if(!e.hideRetryButton||!e.error)return e.isUploaded||e.bundled||e.hidePauseResumeCancelButtons&&!e.error?A("div",{class:"uppy-DashboardItem-progressIndicator"},A(r,{progress:e.file.progress.percentage,fileID:e.file.id,hidePauseResumeCancelButtons:e.hidePauseResumeCancelButtons,bundled:e.bundled})):A("button",{class:"uppy-DashboardItem-progressIndicator",type:"button","aria-label":e.progressIndicatorTitle,title:e.progressIndicatorTitle,onclick:e.onPauseResumeCancelRetry},e.error?e.hideRetryButton?null:o():A(r,{progress:e.file.progress.percentage,fileID:e.file.id,hidePauseResumeCancelButtons:e.hidePauseResumeCancelButtons}))}t.exports=function(t){var n=t.file,e=t.acquirers,r=n.progress.preprocess||n.progress.postprocess,i=n.progress.uploadComplete&&!r&&!n.error,o=n.progress.uploadStarted||r,s=n.progress.uploadStarted&&!n.progress.uploadComplete||r,a=n.isPaused||!1,u=n.error||!1,c=d(n.meta.name).name,l=t.isWide?m(c,30):c;var p,h=w("uppy-DashboardItem",{"is-inprogress":s},{"is-processing":r},{"is-complete":i},{"is-paused":a},{"is-error":u},{"is-resumable":t.resumableUploads},{"is-bundled":t.bundledUpload});return A("li",{class:h,id:"uppy_"+n.id,title:n.meta.name},A("div",{class:"uppy-DashboardItem-preview"},A("div",{class:"uppy-DashboardItem-previewInnerWrap",style:{backgroundColor:v(n.type).color}},t.showLinkToFileUploadResult&&n.uploadURL?A("a",{class:"uppy-DashboardItem-previewLink",href:n.uploadURL,rel:"noreferrer noopener",target:"_blank"}):null,A(b,{file:n})),A("div",{class:"uppy-DashboardItem-progress"},A(S,f({progressIndicatorTitle:(p=t,i?p.i18n("uploadComplete"):u?p.i18n("retryUpload"):p.resumableUploads?n.isPaused?p.i18n("resumeUpload"):p.i18n("pauseUpload"):p.i18n("cancelUpload")),onPauseResumeCancelRetry:function(e){i||(!u||t.hideRetryButton?t.hidePauseResumeCancelButtons||(t.resumableUploads?t.pauseUpload(n.id):t.cancelUpload(n.id)):t.retryUpload(n.id))},file:n,error:u},t)))),A("div",{class:"uppy-DashboardItem-info"},A("div",{class:"uppy-DashboardItem-name",title:c},t.showLinkToFileUploadResult&&n.uploadURL?A("a",{href:n.uploadURL,rel:"noreferrer noopener",target:"_blank"},n.extension?l+"."+n.extension:l):n.extension?l+"."+n.extension:l),A("div",{class:"uppy-DashboardItem-status"},n.data.size?A("div",{class:"uppy-DashboardItem-statusSize"},g(n.data.size)):null,n.source&&n.source!==t.id&&A("div",{class:"uppy-DashboardItem-sourceIcon"},e.map(function(e){if(e.id===n.source)return A("span",{title:t.i18n("fileSource",{name:e.name})},e.icon())})),!o&&t.metaFields&&t.metaFields.length?A("button",{class:"uppy-DashboardItem-edit",type:"button","aria-label":t.i18n("editFile"),title:t.i18n("editFile"),onclick:function(){return t.toggleFileCard(n.id)}},t.i18n("edit")):null,t.showLinkToFileUploadResult&&n.uploadURL?A("button",{class:"uppy-DashboardItem-copyLink",type:"button","aria-label":t.i18n("copyLink"),title:t.i18n("copyLink"),onclick:function(){y(n.uploadURL,t.i18n("copyLinkToClipboardFallback")).then(function(){t.log("Link copied to clipboard."),t.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log)}},_()):"")),A("div",{class:"uppy-DashboardItem-action"},!i&&A("button",{class:"uppy-DashboardItem-remove",type:"button","aria-label":t.i18n("removeFile"),title:t.i18n("removeFile"),onclick:function(){return t.removeFile(n.id)}},A("svg",{"aria-hidden":"true",class:"UppyIcon",width:"60",height:"60",viewBox:"0 0 60 60",xmlns:"http://www.w3.org/2000/svg"},A("path",{stroke:"#FFF","stroke-width":"1","fill-rule":"nonzero","vector-effect":"non-scaling-stroke",d:"M30 1C14 1 1 14 1 30s13 29 29 29 29-13 29-29S46 1 30 1z"}),A("path",{fill:"#FFF","vector-effect":"non-scaling-stroke",d:"M42 39.667L39.667 42 30 32.333 20.333 42 18 39.667 27.667 30 18 20.333 20.333 18 30 27.667 39.667 18 42 20.333 32.333 30z"})))))}},{"../utils/copyToClipboard":111,"../utils/getFileTypeIcon":112,"../utils/truncateString":114,"./FileItemProgress":104,"./FilePreview":106,"./icons":109,"@uppy/utils/lib/getFileNameAndExtension":161,classnames:9,preact:49,"prettier-bytes":50}],104:[function(e,t,n){var r=e("preact").h,i=2*Math.PI*15;t.exports=function(e){return r("svg",{width:"70",height:"70",viewBox:"0 0 36 36",class:"UppyIcon UppyIcon-progressCircle"},r("g",{class:"progress-group"},r("circle",{class:"bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),r("circle",{class:"progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)","stroke-width":"2",fill:"none","stroke-dasharray":i,"stroke-dashoffset":i-i/100*e.progress})),e.hidePauseResumeCancelButtons||e.bundled?null:r("g",null,r("polygon",{class:"play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}),r("g",{class:"pause",transform:"translate(14.5, 13)"},r("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),r("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})),r("polygon",{class:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})),r("polygon",{class:"check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))}},{preact:49}],105:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=e("./FileItem"),o=e("classnames"),s=e("preact").h;t.exports=function(t){var e=0===t.totalFileCount,n=o("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":e});return s("ul",{class:n},Object.keys(t.files).map(function(e){return s(i,r({},t,{acquirers:t.acquirers,file:t.files[e]}))}))}},{"./FileItem":103,classnames:9,preact:49}],106:[function(e,t,n){var o=e("../utils/getFileTypeIcon"),s=e("preact").h;t.exports=function(e){var t=e.file;if(t.preview)return s("img",{class:"uppy-DashboardItem-previewImg",alt:t.name,src:t.preview});var n=o(t.type),r=n.color,i=n.icon;return s("div",{class:"uppy-DashboardItem-previewIconWrap"},s("span",{class:"uppy-DashboardItem-previewIcon",style:{color:r}},i),s("svg",{class:"uppy-DashboardItem-previewIconBg",width:"72",height:"93",viewBox:"0 0 72 93"},s("g",null,s("path",{d:"M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z",fill:"#FFF"}),s("path",{d:"M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z",fill:"#E4E4E4"}))))}},{"../utils/getFileTypeIcon":112,preact:49}],107:[function(e,t,n){var r=e("preact").h,i=e("../utils/ignoreEvent.js");t.exports=function(e){return r("div",{class:"uppy-DashboardContent-panel",role:"tabpanel",id:e.activePanel&&"uppy-DashboardContent-panel--"+e.activePanel.id,onDragOver:i,onDragLeave:i,onDrop:i,onPaste:i},r("div",{class:"uppy-DashboardContent-bar"},r("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},e.i18n("importFrom",{name:e.activePanel.name})),r("button",{class:"uppy-DashboardContent-back",type:"button",onclick:e.hideAllPanels},e.i18n("done"))),r("div",{class:"uppy-DashboardContent-panelBody"},e.getPlugin(e.activePanel.id).render(e.state)))}},{"../utils/ignoreEvent.js":113,preact:49}],108:[function(e,t,n){var r=e("preact").h,c={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function i(e){switch(function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:{};if(e)return c.STATE_ERROR;if(t)return c.STATE_COMPLETE;if(n)return c.STATE_PAUSED;for(var o=c.STATE_WAITING,s=Object.keys(i),a=0;a<s.length;a++){var u=i[s[a]].progress;if(u.uploadStarted&&!u.uploadComplete)return c.STATE_UPLOADING;u.preprocess&&o!==c.STATE_UPLOADING&&(o=c.STATE_PREPROCESSING),u.postprocess&&o!==c.STATE_UPLOADING&&o!==c.STATE_PREPROCESSING&&(o=c.STATE_POSTPROCESSING)}return o}(e.isAllErrored,e.isAllComplete,e.isAllPaused,e.files)){case"uploading":return e.i18n("uploadingXFiles",{smart_count:e.inProgressNotPausedFiles.length});case"preprocessing":case"postprocessing":return e.i18n("processingXFiles",{smart_count:e.processingFiles.length});case"paused":return e.i18n("uploadPaused");case"waiting":return e.i18n("xFilesSelected",{smart_count:e.newFiles.length});case"complete":return e.i18n("uploadComplete")}}t.exports=function(e){var t=e.allowNewUpload;return t&&e.maxNumberOfFiles&&(t=e.totalFileCount<e.maxNumberOfFiles),r("div",{class:"uppy-DashboardContent-bar"},r("div",null,e.isAllComplete?null:r("button",{class:"uppy-DashboardContent-back",type:"button",onclick:e.cancelAll},e.i18n("cancel"))),r("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"h1"},r(i,e)),t&&r("button",{class:"uppy-DashboardContent-addMore",type:"button","aria-label":e.i18n("addMoreFiles"),title:e.i18n("addMoreFiles"),onclick:function(){return e.toggleAddFilesPanel(!0)}},r("svg",{class:"UppyIcon",width:"15",height:"15",viewBox:"0 0 13 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M7,6 L13,6 L13,7 L7,7 L7,13 L6,13 L6,7 L0,7 L0,6 L6,6 L6,0 L7,0 L7,6 Z"}))))}},{preact:49}],109:[function(e,t,n){var r=e("preact").h;t.exports={defaultTabIcon:function(){return r("svg",{"aria-hidden":"true",width:"30",height:"30",viewBox:"0 0 30 30"},r("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))},iconCopy:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",width:"51",height:"51",viewBox:"0 0 51 51"},r("path",{d:"M17.21 45.765a5.394 5.394 0 0 1-7.62 0l-4.12-4.122a5.393 5.393 0 0 1 0-7.618l6.774-6.775-2.404-2.404-6.775 6.776c-3.424 3.427-3.424 9 0 12.426l4.12 4.123a8.766 8.766 0 0 0 6.216 2.57c2.25 0 4.5-.858 6.214-2.57l13.55-13.552a8.72 8.72 0 0 0 2.575-6.213 8.73 8.73 0 0 0-2.575-6.213l-4.123-4.12-2.404 2.404 4.123 4.12a5.352 5.352 0 0 1 1.58 3.81c0 1.438-.562 2.79-1.58 3.808l-13.55 13.55z"}),r("path",{d:"M44.256 2.858A8.728 8.728 0 0 0 38.043.283h-.002a8.73 8.73 0 0 0-6.212 2.574l-13.55 13.55a8.725 8.725 0 0 0-2.575 6.214 8.73 8.73 0 0 0 2.574 6.216l4.12 4.12 2.405-2.403-4.12-4.12a5.357 5.357 0 0 1-1.58-3.812c0-1.437.562-2.79 1.58-3.808l13.55-13.55a5.348 5.348 0 0 1 3.81-1.58c1.44 0 2.792.562 3.81 1.58l4.12 4.12c2.1 2.1 2.1 5.518 0 7.617L39.2 23.775l2.404 2.404 6.775-6.777c3.426-3.427 3.426-9 0-12.426l-4.12-4.12z"}))},iconResume:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",width:"25",height:"25",viewBox:"0 0 44 44"},r("polygon",{class:"play",transform:"translate(6, 5.5)",points:"13 21.6666667 13 11 21 16.3333333"}))},iconPause:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",width:"25px",height:"25px",viewBox:"0 0 44 44"},r("g",{transform:"translate(18, 17)",class:"pause"},r("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),r("rect",{x:"6",y:"0",width:"2",height:"10",rx:"0"})))},iconRetry:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon retry",width:"28",height:"31",viewBox:"0 0 16 19",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),r("path",{d:"M7.9 3H10v2H7.9z"}),r("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),r("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))},localIcon:function(){return r("svg",{"aria-hidden":"true",fill:"#607d8b",width:"27",height:"25",viewBox:"0 0 27 25"},r("path",{d:"M5.586 9.288a.313.313 0 0 0 .282.176h4.84v3.922c0 1.514 1.25 2.24 2.792 2.24 1.54 0 2.79-.726 2.79-2.24V9.464h4.84c.122 0 .23-.068.284-.176a.304.304 0 0 0-.046-.324L13.735.106a.316.316 0 0 0-.472 0l-7.63 8.857a.302.302 0 0 0-.047.325z"}),r("path",{d:"M24.3 5.093c-.218-.76-.54-1.187-1.208-1.187h-4.856l1.018 1.18h3.948l2.043 11.038h-7.193v2.728H9.114v-2.725h-7.36l2.66-11.04h3.33l1.018-1.18H3.907c-.668 0-1.06.46-1.21 1.186L0 16.456v7.062C0 24.338.676 25 1.51 25h23.98c.833 0 1.51-.663 1.51-1.482v-7.062L24.3 5.093z"}))},checkIcon:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon UppyIcon-check",width:"13",height:"9",viewBox:"0 0 13 9"},r("polygon",{points:"5 7.293 1.354 3.647 0.646 4.354 5 8.707 12.354 1.354 11.646 0.647"}))},iconAudio:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",width:"55",height:"55",viewBox:"0 0 55 55"},r("path",{d:"M52.66.25c-.216-.19-.5-.276-.79-.242l-31 4.01a1 1 0 0 0-.87.992V40.622C18.174 38.428 15.273 37 12 37c-5.514 0-10 4.037-10 9s4.486 9 10 9 10-4.037 10-9c0-.232-.02-.46-.04-.687.014-.065.04-.124.04-.192V16.12l29-3.753v18.257C49.174 28.428 46.273 27 43 27c-5.514 0-10 4.037-10 9s4.486 9 10 9c5.464 0 9.913-3.966 9.993-8.867 0-.013.007-.024.007-.037V1a.998.998 0 0 0-.34-.75zM12 53c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zm31-10c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zM22 14.1V5.89l29-3.753v8.21l-29 3.754z"}))},iconVideo:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",viewBox:"0 0 58 58"},r("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),r("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))},iconPDF:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",viewBox:"0 0 342 335"},r("path",{d:"M329.337 227.84c-2.1 1.3-8.1 2.1-11.9 2.1-12.4 0-27.6-5.7-49.1-14.9 8.3-.6 15.8-.9 22.6-.9 12.4 0 16 0 28.2 3.1 12.1 3 12.2 9.3 10.2 10.6zm-215.1 1.9c4.8-8.4 9.7-17.3 14.7-26.8 12.2-23.1 20-41.3 25.7-56.2 11.5 20.9 25.8 38.6 42.5 52.8 2.1 1.8 4.3 3.5 6.7 5.3-34.1 6.8-63.6 15-89.6 24.9zm39.8-218.9c6.8 0 10.7 17.06 11 33.16.3 16-3.4 27.2-8.1 35.6-3.9-12.4-5.7-31.8-5.7-44.5 0 0-.3-24.26 2.8-24.26zm-133.4 307.2c3.9-10.5 19.1-31.3 41.6-49.8 1.4-1.1 4.9-4.4 8.1-7.4-23.5 37.6-39.3 52.5-49.7 57.2zm315.2-112.3c-6.8-6.7-22-10.2-45-10.5-15.6-.2-34.3 1.2-54.1 3.9-8.8-5.1-17.9-10.6-25.1-17.3-19.2-18-35.2-42.9-45.2-70.3.6-2.6 1.2-4.8 1.7-7.1 0 0 10.8-61.5 7.9-82.3-.4-2.9-.6-3.7-1.4-5.9l-.9-2.5c-2.9-6.76-8.7-13.96-17.8-13.57l-5.3-.17h-.1c-10.1 0-18.4 5.17-20.5 12.84-6.6 24.3.2 60.5 12.5 107.4l-3.2 7.7c-8.8 21.4-19.8 43-29.5 62l-1.3 2.5c-10.2 20-19.5 37-27.9 51.4l-8.7 4.6c-.6.4-15.5 8.2-19 10.3-29.6 17.7-49.28 37.8-52.54 53.8-1.04 5-.26 11.5 5.01 14.6l8.4 4.2c3.63 1.8 7.53 2.7 11.43 2.7 21.1 0 45.6-26.2 79.3-85.1 39-12.7 83.4-23.3 122.3-29.1 29.6 16.7 66 28.3 89 28.3 4.1 0 7.6-.4 10.5-1.2 4.4-1.1 8.1-3.6 10.4-7.1 4.4-6.7 5.4-15.9 4.1-25.4-.3-2.8-2.6-6.3-5-8.7z"}))},iconFile:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",width:"44",height:"58",viewBox:"0 0 44 58"},r("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))},iconText:function(){return r("svg",{"aria-hidden":"true",class:"UppyIcon",width:"62",height:"62",viewBox:"0 0 62 62",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M4.309 4.309h24.912v53.382h-6.525v3.559h16.608v-3.559h-6.525V4.309h24.912v10.676h3.559V.75H.75v14.235h3.559z","fill-rule":"nonzero",fill:"#000"}))}}},{preact:49}],110:[function(e,t,n){var w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i,r=e("@uppy/core").Plugin,o=e("@uppy/utils/lib/Translator"),s=e("drag-drop"),A=e("./components/Dashboard"),a=e("@uppy/status-bar"),u=e("@uppy/informer"),c=e("@uppy/thumbnail-generator"),l=e("@uppy/utils/lib/findAllDOMElements"),p=e("@uppy/utils/lib/toArray"),h=e("cuid"),f=e("resize-observer-polyfill").default||e("resize-observer-polyfill"),d=e("./components/icons").defaultTabIcon,m=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function y(){var n={};return n.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),n}function g(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));n.id=n.opts.id||"Dashboard",n.title="Dashboard",n.type="orchestrator",n.modalName="uppy-Dashboard-"+h();var r={target:"body",metaFields:[],trigger:"#uppy-select-files",inline:!1,width:750,height:550,thumbnailWidth:280,defaultTabIcon:d,showLinkToFileUploadResult:!0,showProgressDetails:!1,hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeCancelButtons:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:function(){return n.closeModal()},showSelectedFiles:!0,browserBackButtonClose:!1};return n.opts=w({},r,t),n.translator=new o([{strings:{selectToUpload:"Select files to upload",closeModal:"Close Modal",upload:"Upload",importFrom:"Import from %{name}",addingMoreFiles:"Adding more files",addMoreFiles:"Add more files",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",fileSource:"File source: %{name}",done:"Done",back:"Back",name:"Name",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",edit:"Edit",finishEditingFile:"Finish editing file",saveChanges:"Save changes",cancel:"Cancel",localDisk:"Local Disk",myDevice:"My Device",dropPasteImport:"Drop files here, paste, %{browse} or import from",dropPaste:"Drop files here, paste or %{browse}",browse:"browse",fileProgress:"File progress: upload speed and ETA",numberOfSelectedFiles:"Number of selected files",uploadAllNewFiles:"Upload all new files",emptyFolderAdded:"No files were added from empty folder",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}},n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n.openModal=n.openModal.bind(n),n.closeModal=n.closeModal.bind(n),n.requestCloseModal=n.requestCloseModal.bind(n),n.isModalOpen=n.isModalOpen.bind(n),n.addTarget=n.addTarget.bind(n),n.removeTarget=n.removeTarget.bind(n),n.hideAllPanels=n.hideAllPanels.bind(n),n.showPanel=n.showPanel.bind(n),n.getFocusableNodes=n.getFocusableNodes.bind(n),n.setFocusToFirstNode=n.setFocusToFirstNode.bind(n),n.handlePopState=n.handlePopState.bind(n),n.maintainFocus=n.maintainFocus.bind(n),n.initEvents=n.initEvents.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleFileAdded=n.handleFileAdded.bind(n),n.handleComplete=n.handleComplete.bind(n),n.handleClickOutside=n.handleClickOutside.bind(n),n.toggleFileCard=n.toggleFileCard.bind(n),n.toggleAddFilesPanel=n.toggleAddFilesPanel.bind(n),n.handleDrop=n.handleDrop.bind(n),n.handlePaste=n.handlePaste.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.render=n.render.bind(n),n.install=n.install.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,i=r),g.prototype.removeTarget=function(t){var e=this.getPluginState().targets.filter(function(e){return e.id!==t.id});this.setPluginState({targets:e})},g.prototype.addTarget=function(e){var t=e.id||e.constructor.name,n=e.title||t,r=e.type;if("acquirer"===r||"progressindicator"===r||"presenter"===r){var i={id:t,name:n,type:r},o=this.getPluginState().targets.slice();return o.push(i),this.setPluginState({targets:o}),this.el}this.uppy.log("Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter")},g.prototype.hideAllPanels=function(){this.setPluginState({activePanel:!1,showAddFilesPanel:!1})},g.prototype.showPanel=function(t){var e=this.getPluginState().targets.filter(function(e){return"acquirer"===e.type&&e.id===t})[0];this.setPluginState({activePanel:e})},g.prototype.requestCloseModal=function(){if(this.opts.onRequestCloseModal)return this.opts.onRequestCloseModal();this.closeModal()},g.prototype.getFocusableNodes=function(){var t=this.el.querySelectorAll(m);return Object.keys(t).map(function(e){return t[e]})},g.prototype.setFocusToFirstNode=function(){var e=this.getFocusableNodes();e.length&&e[0].focus()},g.prototype.updateBrowserHistory=function(){var e;history.state&&history.state[this.modalName]||history.pushState(w({},history.state,((e={})[this.modalName]=!0,e)),""),window.addEventListener("popstate",this.handlePopState,!1)},g.prototype.handlePopState=function(e){!this.isModalOpen()||e.state&&e.state[this.modalName]||this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state&&e.state[this.modalName]&&history.go(-1)},g.prototype.setFocusToBrowse=function(){var e=this.el.querySelector(".uppy-Dashboard-browse");e&&e.focus()},g.prototype.maintainFocus=function(e){var t=this.getFocusableNodes(),n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())},g.prototype.openModal=function(){var t=this,e=y(),n=e.promise,r=e.resolve;return this.savedScrollPosition=window.scrollY,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing?this.el.addEventListener("animationend",function e(){t.setPluginState({isHidden:!1}),t.el.removeEventListener("animationend",e,!1),r()},!1):(this.setPluginState({isHidden:!1}),r()),this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDown),this.setFocusToBrowse(),n},g.prototype.closeModal=function(e){var t=this,n=(0<arguments.length&&void 0!==e?e:{}).manualClose,r=void 0===n||n,i=this.getPluginState(),o=i.isHidden,s=i.isClosing;if(!o&&!s){var a=y(),u=a.promise,c=a.resolve;return this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose?(this.setPluginState({isClosing:!0}),this.el.addEventListener("animationend",function e(){t.setPluginState({isHidden:!0,isClosing:!1}),t.el.removeEventListener("animationend",e,!1),c()},!1)):(this.setPluginState({isHidden:!0}),c()),document.removeEventListener("keydown",this.handleKeyDown),this.savedActiveElement.focus(),r&&this.opts.browserBackButtonClose&&history.state&&history.state[this.modalName]&&history.go(-1),u}},g.prototype.isModalOpen=function(){return!this.getPluginState().isHidden||!1},g.prototype.handleKeyDown=function(e){27===e.keyCode&&this.requestCloseModal(e),9===e.keyCode&&this.maintainFocus(e)},g.prototype.handleClickOutside=function(){this.opts.closeModalOnClickOutside&&this.requestCloseModal()},g.prototype.handlePaste=function(e){var n=this;p(e.clipboardData.items).forEach(function(e){if("file"===e.kind){var t=e.getAsFile();if(!t)return n.uppy.log("[Dashboard] File pasted, but the file blob is empty"),void n.uppy.info("Error pasting file","error");n.uppy.log("[Dashboard] File pasted");try{n.uppy.addFile({source:n.id,name:e.name,type:e.type,data:t})}catch(e){}}})},g.prototype.handleInputChange=function(e){var t=this;e.preventDefault(),p(e.target.files).forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},g.prototype.initEvents=function(){var c=this,e=l(this.opts.trigger);!this.opts.inline&&e&&e.forEach(function(e){return e.addEventListener("click",c.openModal)}),this.opts.inline||e||this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options unless you are planning to call openModal() method yourself","error"),this.removeDragDropListener=s(this.el,function(e){c.handleDrop(e)}),this.ro=new f(function(e,t){for(var n,r=e,i=Array.isArray(r),o=0,r=i?r:r[Symbol.iterator]();;){if(i){if(o>=r.length)break;n=r[o++]}else{if((o=r.next()).done)break;n=o.value}var s=n.contentRect,a=s.width,u=s.height;c.uppy.log("[Dashboard] resized: "+a+" / "+u),c.setPluginState({containerWidth:a,containerHeight:u})}}),this.ro.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.handleFileAdded),this.uppy.on("complete",this.handleComplete)},g.prototype.handleFileAdded=function(){this.hideAllPanels()},g.prototype.handleComplete=function(e){var t=e.failed;e.uploadID;this.opts.closeAfterFinish&&0===t.length&&this.requestCloseModal()},g.prototype.removeEvents=function(){var t=this,e=l(this.opts.trigger);!this.opts.inline&&e&&e.forEach(function(e){return e.removeEventListener("click",t.openModal)}),this.ro.unobserve(this.el.querySelector(".uppy-Dashboard-inner")),this.removeDragDropListener(),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.handleFileAdded),this.uppy.off("complete",this.handleComplete)},g.prototype.toggleFileCard=function(e){this.setPluginState({fileCardFor:e||!1})},g.prototype.toggleAddFilesPanel=function(e){this.setPluginState({showAddFilesPanel:e})},g.prototype.handleDrop=function(e){var t=this;this.uppy.log("[Dashboard] Files were dropped"),e.forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},g.prototype.render=function(e){function t(e){var t=r.uppy.getPlugin(e.id);return w({},e,{icon:t.icon||r.opts.defaultTabIcon,render:t.render})}var r=this,n=this.getPluginState(),i=e.files,o=e.capabilities,s=e.allowNewUpload,a=Object.keys(i).filter(function(e){return!i[e].progress.uploadStarted}),u=Object.keys(i).filter(function(e){return i[e].progress.uploadStarted}),c=Object.keys(i).filter(function(e){return i[e].isPaused}),l=Object.keys(i).filter(function(e){return i[e].progress.uploadComplete}),p=Object.keys(i).filter(function(e){return i[e].error}),h=Object.keys(i).filter(function(e){return!i[e].progress.uploadComplete&&i[e].progress.uploadStarted}),f=h.filter(function(e){return!i[e].isPaused}),d=Object.keys(i).filter(function(e){return i[e].progress.preprocess||i[e].progress.postprocess}),m=0<u.length,y=100===e.totalProgress&&l.length===Object.keys(i).length&&0===d.length,g=m&&p.length===u.length,v=0!==h.length&&c.length===h.length,b=n.targets.filter(function(e){return"acquirer"===e.type&&(t=e,"function"!=typeof(n=r.uppy.getPlugin(t.id)).isSupported||n.isSupported());var t,n}).map(t),_=n.targets.filter(function(e){return"progressindicator"===e.type}).map(t);return A({state:e,modal:n,files:i,newFiles:a,uploadStartedFiles:u,completeFiles:l,erroredFiles:p,inProgressFiles:h,inProgressNotPausedFiles:f,processingFiles:d,isUploadStarted:m,isAllComplete:y,isAllErrored:g,isAllPaused:v,totalFileCount:Object.keys(i).length,totalProgress:e.totalProgress,allowNewUpload:s,acquirers:b,activePanel:n.activePanel,animateOpenClose:this.opts.animateOpenClose,isClosing:n.isClosing,getPlugin:this.uppy.getPlugin,progressindicators:_,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,log:this.uppy.log,i18n:this.i18n,i18nArray:this.i18nArray,addFile:this.uppy.addFile,removeFile:this.uppy.removeFile,info:this.uppy.info,note:this.opts.note,metaFields:n.metaFields,resumableUploads:o.resumableUploads||!1,bundled:o.bundled||!1,startUpload:function(){r.uppy.upload().catch(function(e){r.uppy.log(e.stack||e.message||e)})},pauseUpload:this.uppy.pauseResume,retryUpload:this.uppy.retryUpload,cancelUpload:function(e){r.uppy.removeFile(e)},cancelAll:this.uppy.cancelAll,fileCardFor:n.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:function(e,t){r.uppy.setFileMeta(t,e),r.toggleFileCard()},width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,currentWidth:n.containerWidth,isWide:400<n.containerWidth,containerWidth:n.containerWidth,isTargetDOMEl:this.isTargetDOMEl,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,showSelectedFiles:this.opts.showSelectedFiles})},g.prototype.discoverProviderPlugins=function(){var t=this;this.uppy.iteratePlugins(function(e){e&&!e.target&&e.opts&&e.opts.target===t.constructor&&t.addTarget(e)})},g.prototype.install=function(){var n=this;this.setPluginState({isHidden:!0,showFileCard:!1,showAddFilesPanel:!1,activePanel:!1,metaFields:this.opts.metaFields,targets:[]});var e=this.opts,t=e.inline,r=e.closeAfterFinish;if(t&&r)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");this.uppy.opts.allowMultipleUploads&&r&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploads` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");var i=this.opts.target;i&&this.mount(i,this),(this.opts.plugins||[]).forEach(function(e){var t=n.uppy.getPlugin(e);t&&t.mount(n,t)}),this.opts.disableStatusBar||this.uppy.use(a,{id:this.id+":StatusBar",target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale}),this.opts.disableInformer||this.uppy.use(u,{id:this.id+":Informer",target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(c,{id:this.id+":ThumbnailGenerator",thumbnailWidth:this.opts.thumbnailWidth}),this.discoverProviderPlugins(),this.initEvents()},g.prototype.uninstall=function(){var e,t,n,r=this;this.opts.disableInformer||(e=this.uppy.getPlugin(this.id+":Informer"))&&this.uppy.removePlugin(e),this.opts.disableStatusBar||(t=this.uppy.getPlugin(this.id+":StatusBar"))&&this.uppy.removePlugin(t),this.opts.disableThumbnailGenerator||(n=this.uppy.getPlugin(this.id+":ThumbnailGenerator"))&&this.uppy.removePlugin(n),(this.opts.plugins||[]).forEach(function(e){var t=r.uppy.getPlugin(e);t&&t.unmount()}),this.unmount(),this.removeEvents()},g)},{"./components/Dashboard":101,"./components/icons":109,"@uppy/core":96,"@uppy/informer":125,"@uppy/status-bar":140,"@uppy/thumbnail-generator":143,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/findAllDOMElements":157,"@uppy/utils/lib/toArray":176,cuid:13,"drag-drop":17,"resize-observer-polyfill":54}],111:[function(e,t,n){t.exports=function(r,i){return i=i||"Copy the URL below",new Promise(function(e){var t=document.createElement("textarea");t.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),t.value=r,document.body.appendChild(t),t.select();function n(){document.body.removeChild(t),window.prompt(i,r),e()}try{return document.execCommand("copy")?(document.body.removeChild(t),e()):n()}catch(e){return document.body.removeChild(t),n()}})}},{}],112:[function(e,t,n){var r=e("../components/icons"),i=r.iconText,o=r.iconAudio,s=r.iconVideo,a=r.iconPDF;t.exports=function(e){var t={color:"#cbcbcb",icon:""};if(!e)return t;var n=e.split("/")[0],r=e.split("/")[1];return"text"===n?{color:"#cbcbcb",icon:i()}:"audio"===n?{color:"#1abc9c",icon:o()}:"video"===n?{color:"#2980b9",icon:s()}:"application"===n&&"pdf"===r?{color:"#e74c3c",icon:a()}:"image"===n?{color:"#f2f2f2",icon:""}:t}},{"../components/icons":109}],113:[function(e,t,n){t.exports=function(e){var t=e.target.tagName;"INPUT"!==t&&"TEXTAREA"!==t&&e.preventDefault(),e.stopPropagation()}},{}],114:[function(e,t,n){t.exports=function(e,t){return e.length>t?e.substr(0,t/2)+"..."+e.substr(e.length-t/4,e.length):e}},{}],115:[function(e,t,n){var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s,r=e("@uppy/core").Plugin,a=e("@uppy/utils/lib/Translator"),i=e("@uppy/utils/lib/toArray"),u=e("drag-drop"),c=e("preact").h;function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t));n.type="acquirer",n.id=n.opts.id||"DragDrop",n.title="Drag & Drop";var r={strings:{dropHereOr:"Drop files here or %{browse}",browse:"browse"}},i={target:null,inputName:"files[]",width:"100%",height:"100%",note:null,locale:r};return n.opts=o({},i,t),n.isDragDropSupported=n.checkDragDropSupport(),n.translator=new a([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n.handleDrop=n.handleDrop.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.checkDragDropSupport=n.checkDragDropSupport.bind(n),n.render=n.render.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s=r),l.prototype.checkDragDropSupport=function(){var e=document.createElement("div");return"draggable"in e&&"ondragstart"in e&&"ondrop"in e&&("FormData"in window&&"FileReader"in window)},l.prototype.handleDrop=function(e){var t=this;this.uppy.log("[DragDrop] Files dropped"),e.forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},l.prototype.handleInputChange=function(e){var t=this;this.uppy.log("[DragDrop] Files selected through input"),i(e.target.files).forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},l.prototype.render=function(){var t=this,e="uppy-Root uppy-DragDrop-container "+(this.isDragDropSupported?"uppy-DragDrop--is-dragdrop-supported":""),n={width:this.opts.width,height:this.opts.height},r=this.uppy.opts.restrictions;return c("div",{class:e,style:n},c("div",{class:"uppy-DragDrop-inner"},c("svg",{"aria-hidden":"true",class:"UppyIcon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},c("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0","fill-rule":"evenodd"})),c("label",{class:"uppy-DragDrop-label"},c("input",{style:{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},class:"uppy-DragDrop-input",type:"file",name:this.opts.inputName,multiple:1!==r.maxNumberOfFiles,accept:r.allowedFileTypes,ref:function(e){t.input=e},onchange:this.handleInputChange,value:""}),this.i18nArray("dropHereOr",{browse:c("span",{class:"uppy-DragDrop-dragText"},this.i18n("browse"))})),c("span",{class:"uppy-DragDrop-note"},this.opts.note)))},l.prototype.install=function(){var t=this,e=this.opts.target;e&&this.mount(e,this),this.removeDragDropListener=u(this.el,function(e){t.handleDrop(e),t.uppy.log(e)})},l.prototype.uninstall=function(){this.unmount(),this.removeDragDropListener()},l)},{"@uppy/core":96,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/toArray":176,"drag-drop":17,preact:49}],116:[function(e,t,n){var r,i=e("@uppy/core").Plugin,o=e("@uppy/companion-client").Provider,s=e("@uppy/provider-views"),a=e("preact").h;function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.id=n.opts.id||"Dropbox",o.initPlugin(n,t),n.title=n.opts.title||"Dropbox",n.icon=function(){return a("svg",{"aria-hidden":"true",fill:"#0060ff",width:"128",height:"118",viewBox:"0 0 128 118"},a("path",{d:"M38.145.777L1.108 24.96l25.608 20.507 37.344-23.06z"}),a("path",{d:"M1.108 65.975l37.037 24.183L64.06 68.525l-37.343-23.06zM64.06 68.525l25.917 21.633 37.036-24.183-25.61-20.51z"}),a("path",{d:"M127.014 24.96L89.977.776 64.06 22.407l37.345 23.06zM64.136 73.18l-25.99 21.567-11.122-7.262v8.142l37.112 22.256 37.114-22.256v-8.142l-11.12 7.262z"}))},n.provider=new o(e,{serverUrl:n.opts.serverUrl,serverHeaders:n.opts.serverHeaders,provider:"dropbox"}),n.onAuth=n.onAuth.bind(n),n.render=n.render.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,r=i),u.prototype.install=function(){this.view=new s(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},u.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},u.prototype.onAuth=function(e){this.setPluginState({authenticated:e}),e&&this.view.getFolder()},u.prototype.render=function(e){return this.view.render(e)},u)},{"@uppy/companion-client":94,"@uppy/core":96,"@uppy/provider-views":136,preact:49}],117:[function(e,t,n){var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s,r=e("@uppy/core").Plugin,i=e("@uppy/utils/lib/toArray"),a=e("@uppy/utils/lib/Translator"),u=e("preact").h;function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t));n.id=n.opts.id||"FileInput",n.title="File Input",n.type="acquirer";var r={strings:{chooseFiles:"Choose files"}},i={target:null,pretty:!0,inputName:"files[]",locale:r};return n.opts=o({},i,t),n.translator=new a([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n.render=n.render.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleClick=n.handleClick.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=r),c.prototype.handleInputChange=function(e){var t=this;this.uppy.log("[FileInput] Something selected through input..."),i(e.target.files).forEach(function(e){try{t.uppy.addFile({source:t.id,name:e.name,type:e.type,data:e})}catch(e){}})},c.prototype.handleClick=function(){this.input.click()},c.prototype.render=function(){var t=this,e=this.uppy.opts.restrictions,n=e.allowedFileTypes?e.allowedFileTypes.join(","):null;return u("div",{class:"uppy-Root uppy-FileInput-container"},u("input",{class:"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onchange:this.handleInputChange,multiple:1!==e.maxNumberOfFiles,accept:n,ref:function(e){t.input=e},value:""}),this.opts.pretty&&u("button",{class:"uppy-FileInput-btn",type:"button",onclick:this.handleClick},this.i18n("chooseFiles")))},c.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},c.prototype.uninstall=function(){this.unmount()},c)},{"@uppy/core":96,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/toArray":176,preact:49}],118:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i,o=e("@uppy/core").Plugin,s=e("@uppy/utils/lib/findDOMElement"),a=e("@uppy/utils/lib/toArray"),u=e("get-form-data").default||e("get-form-data");function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));n.type="acquirer",n.id="Form",n.title="Form";return n.opts=r({},{target:null,resultName:"uppyResult",getMetaFromForm:!0,addResultToForm:!0,submitOnSuccess:!1,triggerUploadOnSubmit:!1},t),n.handleFormSubmit=n.handleFormSubmit.bind(n),n.handleUploadStart=n.handleUploadStart.bind(n),n.handleSuccess=n.handleSuccess.bind(n),n.addResultToForm=n.addResultToForm.bind(n),n.getMetaFromForm=n.getMetaFromForm.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i=o),c.prototype.handleUploadStart=function(){this.opts.getMetaFromForm&&this.getMetaFromForm()},c.prototype.handleSuccess=function(e){this.opts.addResultToForm&&this.addResultToForm(e),this.opts.submitOnSuccess&&this.form.submit()},c.prototype.handleFormSubmit=function(e){var t,n,r=this;this.opts.triggerUploadOnSubmit&&(e.preventDefault(),t=a(e.target.elements),n=[],t.forEach(function(e){"BUTTON"!==e.tagName&&("INPUT"!==e.tagName||"submit"!==e.type)||e.disabled||(e.disabled=!0,n.push(e))}),this.uppy.upload().then(function(){n.forEach(function(e){e.disabled=!1})},function(e){return n.forEach(function(e){e.disabled=!1}),Promise.reject(e)}).catch(function(e){r.uppy.log(e.stack||e.message||e)}))},c.prototype.addResultToForm=function(e){this.uppy.log("[Form] Adding result to the original form:"),this.uppy.log(e);var t=this.form.querySelector('[name="'+this.opts.resultName+'"]');t?t.value=JSON.stringify(e):((t=document.createElement("input")).name=this.opts.resultName,t.type="hidden",t.value=JSON.stringify(e),this.form.appendChild(t))},c.prototype.getMetaFromForm=function(){var e=u(this.form);this.uppy.setMeta(e)},c.prototype.install=function(){this.form=s(this.opts.target),this.form&&"FORM"!==!this.form.nodeName?(this.form.addEventListener("submit",this.handleFormSubmit),this.uppy.on("upload",this.handleUploadStart),this.uppy.on("complete",this.handleSuccess)):console.error("Form plugin requires a <form> target element passed in options to operate, none was found","error")},c.prototype.uninstall=function(){this.form.removeEventListener("submit",this.handleFormSubmit),this.uppy.off("upload",this.handleUploadStart),this.uppy.off("complete",this.handleSuccess)},c)},{"@uppy/core":96,"@uppy/utils/lib/findDOMElement":158,"@uppy/utils/lib/toArray":176,"get-form-data":37}],119:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o=e("prettier-bytes"),i=void 0!==window&&(window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB),s=!!i,a="uppy-blobs",u="files",c=864e5,l=3;function p(e){var t=i.open(e,l);return new Promise(function(i,e){t.onupgradeneeded=function(e){var t,n=e.target.result,r=e.currentTarget.transaction;e.oldVersion<2&&n.createObjectStore(u,{keyPath:"id"}).createIndex("store","store",{unique:!1}),e.oldVersion<3&&((t=r.objectStore(u)).createIndex("expires","expires",{unique:!1}),t.openCursor().onsuccess=function(e){var t,n=e.target.result;n&&((t=n.value).expires=Date.now()+c,n.update(t))}),r.oncomplete=function(){i(n)}},t.onsuccess=function(e){i(e.target.result)},t.onerror=e})}function h(n){return new Promise(function(t,e){n.onsuccess=function(e){t(e.target.result)},n.onerror=e})}var f=!1,d=(m.prototype.key=function(e){return this.name+"!"+e},m.prototype.list=function(){var t=this;return this.ready.then(function(e){return h(e.transaction([u],"readonly").objectStore(u).index("store").getAll(IDBKeyRange.only(t.name)))}).then(function(e){var t={};return e.forEach(function(e){t[e.fileID]=e.data}),t})},m.prototype.get=function(t){var n=this;return this.ready.then(function(e){return h(e.transaction([u],"readonly").objectStore(u).get(n.key(t)))}).then(function(e){return{id:e.data.fileID,data:e.data.data}})},m.prototype.getSize=function(){var n=this;return this.ready.then(function(e){var t=e.transaction([u],"readonly").objectStore(u).index("store").openCursor(IDBKeyRange.only(n.name));return new Promise(function(n,e){var r=0;t.onsuccess=function(e){var t=e.target.result;t?(r+=t.value.data.size,t.continue()):n(r)},t.onerror=function(){e(new Error("Could not retrieve stored blobs size"))}})})},m.prototype.put=function(t){var n=this;return t.data.size>this.opts.maxFileSize?Promise.reject(new Error("File is too big to store.")):this.getSize().then(function(e){return e>n.opts.maxTotalSize?Promise.reject(new Error("No space left")):n.ready}).then(function(e){return h(e.transaction([u],"readwrite").objectStore(u).add({id:n.key(t.id),fileID:t.id,store:n.name,expires:Date.now()+n.opts.expires,data:t.data}))})},m.prototype.delete=function(t){var n=this;return this.ready.then(function(e){return h(e.transaction([u],"readwrite").objectStore(u).delete(n.key(t)))})},m.cleanup=function(){return p(a).then(function(i){var t=i.transaction([u],"readwrite").objectStore(u).index("expires").openCursor(IDBKeyRange.upperBound(Date.now()));return new Promise(function(r,e){t.onsuccess=function(e){var t,n=e.target.result;n?(t=n.value,console.log("[IndexedDBStore] Deleting record",t.fileID,"of size",o(t.data.size),"- expired on",new Date(t.expires)),n.delete(),n.continue()):r(i)},t.onerror=e})}).then(function(e){e.close()})},m);function m(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this.opts=r({dbName:a,storeName:"default",expires:c,maxFileSize:10485760,maxTotalSize:314572800},e),this.name=this.opts.storeName;function n(){return p(t.opts.dbName)}f?this.ready=n():(f=!0,this.ready=m.cleanup().then(n,n))}d.isSupported=s,t.exports=d},{"prettier-bytes":50}],120:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){try{return JSON.parse(e)}catch(e){return null}}var o=!1;function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.opts=r({expires:864e5},e),this.name="uppyState:"+e.storeName,o||(o=!0,s.cleanup())}t.exports=(s.prototype.load=function(){var e=localStorage.getItem(this.name);if(!e)return null;var t=i(e);return t?t.metadata?t.metadata:(this.save(t),t):null},s.prototype.save=function(e){var t=Date.now()+this.opts.expires,n=JSON.stringify({metadata:e,expires:t});localStorage.setItem(this.name,n)},s.cleanup=function(){var e=function(){for(var e=[],t=0;t<localStorage.length;t++){var n=localStorage.key(t);/^uppyState:/.test(n)&&e.push(n.slice("uppyState:".length))}return e}(),r=Date.now();e.forEach(function(e){var t=localStorage.getItem("uppyState:"+e);if(!t)return null;var n=i(t);if(!n)return null;n.expires&&n.expires<r&&localStorage.removeItem("uppyState:"+e)})},s)},{}],121:[function(e,t,n){var r="undefined"!=typeof navigator&&"serviceWorker"in navigator;var i=(o.prototype.list=function(){var t=this,n={},e=new Promise(function(e,t){n.resolve=e,n.reject=t});console.log("Loading stored blobs from Service Worker");function r(e){if(e.data.store===t.name)switch(e.data.type){case"uppy/ALL_FILES":n.resolve(e.data.files),navigator.serviceWorker.removeEventListener("message",r)}}return this.ready.then(function(){navigator.serviceWorker.addEventListener("message",r),navigator.serviceWorker.controller.postMessage({type:"uppy/GET_FILES",store:t.name})}),e},o.prototype.put=function(e){var t=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/ADD_FILE",store:t.name,file:e})})},o.prototype.delete=function(e){var t=this;return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"uppy/REMOVE_FILE",store:t.name,fileID:e})})},o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.ready=new Promise(function(e,t){r?navigator.serviceWorker.controller?e():navigator.serviceWorker.addEventListener("controllerchange",function(){e()}):t(new Error("Unsupported"))}),this.name=e.storeName}i.isSupported=r,t.exports=i},{}],122:[function(e,t,n){var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var r,i=e("@uppy/core").Plugin,o=e("./ServiceWorkerStore"),s=e("./IndexedDBStore"),a=e("./MetaDataStore");function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));n.type="debugger",n.id="GoldenRetriever",n.title="Golden Retriever";return n.opts=u({},{expires:864e5,serviceWorker:!1},t),n.MetaDataStore=new a({expires:n.opts.expires,storeName:e.getID()}),n.ServiceWorkerStore=null,n.opts.serviceWorker&&(n.ServiceWorkerStore=new o({storeName:e.getID()})),n.IndexedDBStore=new s(u({expires:n.opts.expires},t.indexedDB||{},{storeName:e.getID()})),n.saveFilesStateToLocalStorage=n.saveFilesStateToLocalStorage.bind(n),n.loadFilesStateFromLocalStorage=n.loadFilesStateFromLocalStorage.bind(n),n.loadFileBlobsFromServiceWorker=n.loadFileBlobsFromServiceWorker.bind(n),n.loadFileBlobsFromIndexedDB=n.loadFileBlobsFromIndexedDB.bind(n),n.onBlobsLoaded=n.onBlobsLoaded.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,r=i),c.prototype.loadFilesStateFromLocalStorage=function(){var e=this.MetaDataStore.load();e&&(this.uppy.log("[GoldenRetriever] Recovered some state from Local Storage"),this.uppy.setState({currentUploads:e.currentUploads||{},files:e.files||{}}),this.savedPluginData=e.pluginData)},c.prototype.getWaitingFiles=function(){var t={};return this.uppy.getFiles().forEach(function(e){e.progress&&e.progress.uploadStarted||(t[e.id]=e)}),t},c.prototype.getUploadingFiles=function(){var t=this,n={},r=this.uppy.getState().currentUploads;return r&&Object.keys(r).forEach(function(e){r[e].fileIDs.forEach(function(e){n[e]=t.uppy.getFile(e)})}),n},c.prototype.saveFilesStateToLocalStorage=function(){var e=u(this.getWaitingFiles(),this.getUploadingFiles()),t={};this.uppy.emit("restore:get-data",function(e){u(t,e)});var n=this.uppy.getState().currentUploads;this.MetaDataStore.save({currentUploads:n,files:e,pluginData:t})},c.prototype.loadFileBlobsFromServiceWorker=function(){var n=this;this.ServiceWorkerStore.list().then(function(e){var t=Object.keys(e).length;return t===n.uppy.getFiles().length?(n.uppy.log("[GoldenRetriever] Successfully recovered "+t+" blobs from Service Worker!"),n.uppy.info("Successfully recovered "+t+" files","success",3e3),n.onBlobsLoaded(e)):(n.uppy.log("[GoldenRetriever] No blobs found in Service Worker, trying IndexedDB now..."),n.loadFileBlobsFromIndexedDB())}).catch(function(e){n.uppy.log("[GoldenRetriever] Failed to recover blobs from Service Worker","warning"),n.uppy.log(e)})},c.prototype.loadFileBlobsFromIndexedDB=function(){var n=this;this.IndexedDBStore.list().then(function(e){var t=Object.keys(e).length;if(0<t)return n.uppy.log("[GoldenRetriever] Successfully recovered "+t+" blobs from IndexedDB!"),n.uppy.info("Successfully recovered "+t+" files","success",3e3),n.onBlobsLoaded(e);n.uppy.log("[GoldenRetriever] No blobs found in IndexedDB")}).catch(function(e){n.uppy.log("[GoldenRetriever] Failed to recover blobs from IndexedDB","warning"),n.uppy.log(e)})},c.prototype.onBlobsLoaded=function(i){var o=this,s=[],a=u({},this.uppy.getState().files);Object.keys(i).forEach(function(e){var t,n,r=o.uppy.getFile(e);r?(t=i[e],n=u({},r,{data:t,isRestored:!0}),a[e]=n):s.push(e)}),this.uppy.setState({files:a}),this.uppy.emit("restored",this.savedPluginData),s.length&&this.deleteBlobs(s).then(function(){o.uppy.log("[GoldenRetriever] Cleaned up "+s.length+" old files")}).catch(function(e){o.uppy.log("[GoldenRetriever] Could not clean up "+s.length+" old files","warning"),o.uppy.log(e)})},c.prototype.deleteBlobs=function(e){var t=this,n=[];return e.forEach(function(e){t.ServiceWorkerStore&&n.push(t.ServiceWorkerStore.delete(e)),t.IndexedDBStore&&n.push(t.IndexedDBStore.delete(e))}),Promise.all(n)},c.prototype.install=function(){var r=this;this.loadFilesStateFromLocalStorage(),0<this.uppy.getFiles().length?this.ServiceWorkerStore?(this.uppy.log("[GoldenRetriever] Attempting to load files from Service Worker..."),this.loadFileBlobsFromServiceWorker()):(this.uppy.log("[GoldenRetriever] Attempting to load files from Indexed DB..."),this.loadFileBlobsFromIndexedDB()):(this.uppy.log("[GoldenRetriever] No files need to be loaded, only restoring processing state..."),this.onBlobsLoaded([])),this.uppy.on("file-added",function(e){e.isRemote||(r.ServiceWorkerStore&&r.ServiceWorkerStore.put(e).catch(function(e){r.uppy.log("[GoldenRetriever] Could not store file","warning"),r.uppy.log(e)}),r.IndexedDBStore.put(e).catch(function(e){r.uppy.log("[GoldenRetriever] Could not store file","warning"),r.uppy.log(e)}))}),this.uppy.on("file-removed",function(e){r.ServiceWorkerStore&&r.ServiceWorkerStore.delete(e.id).catch(function(e){r.uppy.log("[GoldenRetriever] Failed to remove file","warning"),r.uppy.log(e)}),r.IndexedDBStore.delete(e.id).catch(function(e){r.uppy.log("[GoldenRetriever] Failed to remove file","warning"),r.uppy.log(e)})}),this.uppy.on("complete",function(e){var t=e.successful,n=t.map(function(e){return e.id});r.deleteBlobs(n).then(function(){r.uppy.log("[GoldenRetriever] Removed "+t.length+" files that finished uploading")}).catch(function(e){r.uppy.log("[GoldenRetriever] Could not remove "+t.length+" files that finished uploading","warning"),r.uppy.log(e)})}),this.uppy.on("state-update",this.saveFilesStateToLocalStorage),this.uppy.on("restored",function(){var t=r.uppy.getState().currentUploads;t&&Object.keys(t).forEach(function(e){r.uppy.restore(e,t[e])})})},c)},{"./IndexedDBStore":119,"./MetaDataStore":120,"./ServiceWorkerStore":121,"@uppy/core":96}],123:[function(e,t,n){var r,i=e("@uppy/provider-views");function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.apply(this,arguments))}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r=i),o.prototype.toggleCheckbox=function(e,t){e.stopPropagation(),e.preventDefault(),t.custom.isTeamDrive||r.prototype.toggleCheckbox.call(this,e,t)},o)},{"@uppy/provider-views":136}],124:[function(e,t,n){var r,i=e("@uppy/core").Plugin,o=e("@uppy/companion-client").Provider,s=e("./DriveProviderViews"),a=e("preact").h;function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.id=n.opts.id||"GoogleDrive",n.title=n.opts.title||"Google Drive",o.initPlugin(n,t),n.title=n.opts.title||"Google Drive",n.icon=function(){return a("svg",{"aria-hidden":"true",width:"18px",height:"16px",viewBox:"0 0 18 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},a("g",{"fill-rule":"evenodd"},a("polygon",{fill:"#3089FC",points:"6.32475 10.2 18 10.2 14.999625 15.3 3.324375 15.3"}),a("polygon",{fill:"#00A85D",points:"3.000375 15.3 0 10.2 5.83875 0.275974026 8.838 5.37597403 5.999625 10.2"}),a("polygon",{fill:"#FFD024",points:"11.838375 9.92402597 5.999625 0 12.000375 0 17.839125 9.92402597"})))},n.provider=new o(e,{serverUrl:n.opts.serverUrl,serverHeaders:n.opts.serverHeaders,provider:"drive",authProvider:"google"}),n.onAuth=n.onAuth.bind(n),n.render=n.render.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,r=i),u.prototype.install=function(){this.view=new s(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1,hasTeamDrives:!1,teamDrives:[],teamDriveId:""});var e=this.opts.target;e&&this.mount(e,this)},u.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},u.prototype.onAuth=function(e){this.setPluginState({authenticated:e}),e&&this.view.getFolder("root","/")},u.prototype.render=function(e){return this.view.render(e)},u)},{"./DriveProviderViews":123,"@uppy/companion-client":94,"@uppy/core":96,preact:49}],125:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i,o=e("@uppy/core").Plugin,s=e("preact").h;function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));n.type="progressindicator",n.id=n.opts.id||"Informer",n.title="Informer";return n.opts=r({},{typeColors:{info:{text:"#fff",bg:"#000"},warning:{text:"#fff",bg:"#F6A623"},error:{text:"#fff",bg:"#D32F2F"},success:{text:"#fff",bg:"#1BB240"}}},t),n.render=n.render.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i=o),a.prototype.render=function(e){var t=e.info,n=t.isHidden,r=t.message,i=t.details;return s("div",{class:"uppy uppy-Informer","aria-hidden":n},s("p",{role:"alert"},r," ",i&&s("span",{"aria-label":i,"data-microtip-position":"top","data-microtip-size":"large",role:"tooltip"},"?")))},a.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},a)},{"@uppy/core":96,preact:49}],126:[function(e,t,n){var r,i=e("@uppy/core").Plugin,o=e("@uppy/companion-client").Provider,s=e("@uppy/provider-views"),a=e("preact").h;function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));return n.id=n.opts.id||"Instagram",o.initPlugin(n,t),n.title=n.opts.title||"Instagram",n.icon=function(){return a("svg",{"aria-hidden":"true",fill:"#DE3573",width:"28",height:"28",viewBox:"0 0 512 512"},a("path",{d:"M256,49.471c67.266,0,75.233.257,101.8,1.469,24.562,1.121,37.9,5.224,46.778,8.674a78.052,78.052,0,0,1,28.966,18.845,78.052,78.052,0,0,1,18.845,28.966c3.45,8.877,7.554,22.216,8.674,46.778,1.212,26.565,1.469,34.532,1.469,101.8s-0.257,75.233-1.469,101.8c-1.121,24.562-5.225,37.9-8.674,46.778a83.427,83.427,0,0,1-47.811,47.811c-8.877,3.45-22.216,7.554-46.778,8.674-26.56,1.212-34.527,1.469-101.8,1.469s-75.237-.257-101.8-1.469c-24.562-1.121-37.9-5.225-46.778-8.674a78.051,78.051,0,0,1-28.966-18.845,78.053,78.053,0,0,1-18.845-28.966c-3.45-8.877-7.554-22.216-8.674-46.778-1.212-26.564-1.469-34.532-1.469-101.8s0.257-75.233,1.469-101.8c1.121-24.562,5.224-37.9,8.674-46.778A78.052,78.052,0,0,1,78.458,78.458a78.053,78.053,0,0,1,28.966-18.845c8.877-3.45,22.216-7.554,46.778-8.674,26.565-1.212,34.532-1.469,101.8-1.469m0-45.391c-68.418,0-77,.29-103.866,1.516-26.815,1.224-45.127,5.482-61.151,11.71a123.488,123.488,0,0,0-44.62,29.057A123.488,123.488,0,0,0,17.3,90.982C11.077,107.007,6.819,125.319,5.6,152.134,4.369,179,4.079,187.582,4.079,256S4.369,333,5.6,359.866c1.224,26.815,5.482,45.127,11.71,61.151a123.489,123.489,0,0,0,29.057,44.62,123.486,123.486,0,0,0,44.62,29.057c16.025,6.228,34.337,10.486,61.151,11.71,26.87,1.226,35.449,1.516,103.866,1.516s77-.29,103.866-1.516c26.815-1.224,45.127-5.482,61.151-11.71a128.817,128.817,0,0,0,73.677-73.677c6.228-16.025,10.486-34.337,11.71-61.151,1.226-26.87,1.516-35.449,1.516-103.866s-0.29-77-1.516-103.866c-1.224-26.815-5.482-45.127-11.71-61.151a123.486,123.486,0,0,0-29.057-44.62A123.487,123.487,0,0,0,421.018,17.3C404.993,11.077,386.681,6.819,359.866,5.6,333,4.369,324.418,4.079,256,4.079h0Z"}),a("path",{d:"M256,126.635A129.365,129.365,0,1,0,385.365,256,129.365,129.365,0,0,0,256,126.635Zm0,213.338A83.973,83.973,0,1,1,339.974,256,83.974,83.974,0,0,1,256,339.973Z"}),a("circle",{cx:"390.476",cy:"121.524",r:"30.23"}))},n.provider=new o(e,{serverUrl:n.opts.serverUrl,serverHeaders:n.opts.serverHeaders,provider:"instagram",authProvider:"instagram"}),n.onAuth=n.onAuth.bind(n),n.render=n.render.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,r=i),u.prototype.install=function(){this.view=new s(this,{provider:this.provider,viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},u.prototype.uninstall=function(){this.view.tearDown(),this.unmount()},u.prototype.onAuth=function(e){this.setPluginState({authenticated:e}),e&&this.view.getFolder("recent")},u.prototype.render=function(e){return this.view.render(e)},u)},{"@uppy/companion-client":94,"@uppy/core":96,"@uppy/provider-views":136,preact:49}],127:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i,o=e("@uppy/core").Plugin,s=e("preact").h;function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));n.id=n.opts.id||"ProgressBar",n.title="Progress Bar",n.type="progressindicator";return n.opts=r({},{target:"body",replaceTargetContent:!1,fixed:!1,hideAfterFinish:!0},t),n.render=n.render.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i=o),a.prototype.render=function(e){var t=e.totalProgress||0,n=100===t&&this.opts.hideAfterFinish;return s("div",{class:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":n},s("div",{class:"uppy-ProgressBar-inner",style:{width:t+"%"}}),s("div",{class:"uppy-ProgressBar-percentage"},t))},a.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},a.prototype.uninstall=function(){this.unmount()},a)},{"@uppy/core":96,preact:49}],128:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,a=e("./Loader"),u=e("preact"),c=u.h,l=u.Component,p=(o(h,s=l),h.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.connectButton&&e.connectButton.focus({preventScroll:!0})},150)},h.prototype.render=function(){var t=this;return c("div",{class:"uppy-Provider-auth"},c("div",{class:"uppy-Provider-authIcon"},this.props.pluginIcon()),c("h1",{class:"uppy-Provider-authTitle"},"Please authenticate with ",c("span",{class:"uppy-Provider-authTitleName"},this.props.pluginName),c("br",null)," to select files"),c("button",{type:"button",class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onclick:this.props.handleAuth,ref:function(e){t.connectButton=e}},"Connect to ",this.props.pluginName),this.props.demo&&c("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onclick:this.props.handleDemoAuth},"Proceed with Demo Account"))},h);function h(){return r(this,h),i(this,s.apply(this,arguments))}var f,d=(o(m,f=l),m.prototype.componentDidMount=function(){this.props.checkAuth()},m.prototype.render=function(){return this.props.checkAuthInProgress?c(a,null):c(p,this.props)},m);function m(){return r(this,m),i(this,f.apply(this,arguments))}t.exports=d},{"./Loader":135,preact:49}],129:[function(e,t,n){var i=e("preact").h;t.exports=function(r){return i("div",{class:"uppy-Provider-breadcrumbs"},i("div",{class:"uppy-Provider-breadcrumbsIcon"},r.breadcrumbsIcon),r.directories.map(function(e,t){return n={getFolder:function(){return r.getFolder(e.id)},title:0===t?r.title:e.title,isLast:t+1===r.directories.length},i("span",null,i("button",{type:"button",class:"uppy-u-reset",onclick:n.getFolder},n.title),n.isLast?"":" / ");var n}))}},{preact:49}],130:[function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=e("classnames"),s=e("./Breadcrumbs"),a=e("./Filter"),u=e("./ItemList"),c=e("./FooterActions"),l=e("preact").h;t.exports=function(e){var t=e.folders,n=e.files;""!==e.filterInput&&(t=e.filterItems(e.folders),n=e.filterItems(e.files));var r=e.currentSelection.length;return l("div",{class:o("uppy-ProviderBrowser","uppy-ProviderBrowser-viewType--"+e.viewType)},l("div",{class:"uppy-ProviderBrowser-header"},l("div",{class:o("uppy-ProviderBrowser-headerBar",!e.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},e.showBreadcrumbs&&s({getFolder:e.getFolder,directories:e.directories,breadcrumbsIcon:e.pluginIcon&&e.pluginIcon(),title:e.title}),l("span",{class:"uppy-ProviderBrowser-user"},e.username),l("button",{type:"button",onclick:e.logout,class:"uppy-ProviderBrowser-userLogout"},e.i18n("logOut")))),e.showFilter&&l(a,e),l(u,{columns:[{name:"Name",key:"title"}],folders:t,files:n,activeRow:e.isActiveRow,sortByTitle:e.sortByTitle,sortByDate:e.sortByDate,isChecked:e.isChecked,handleFolderClick:e.getNextFolder,toggleCheckbox:e.toggleCheckbox,handleScroll:e.handleScroll,title:e.title,showTitles:e.showTitles,i18n:e.i18n}),0<r&&l(c,i({selected:r},e)))}},{"./Breadcrumbs":129,"./Filter":131,"./FooterActions":132,"./ItemList":134,classnames:9,preact:49}],131:[function(e,t,n){var r,i=e("preact"),o=i.h,s=i.Component;function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.handleKeyPress=t.handleKeyPress.bind(t),t}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r=s),a.prototype.handleKeyPress=function(e){if(13===e.keyCode)return e.stopPropagation(),void e.preventDefault();this.props.filterQuery(e)},a.prototype.render=function(){var t=this;return o("div",{class:"uppy-ProviderBrowser-search"},o("svg",{"aria-hidden":"true",class:"UppyIcon uppy-ProviderBrowser-searchIcon",viewBox:"0 0 100 100"},o("path",{d:"M87.533 80.03L62.942 55.439c3.324-4.587 5.312-10.207 5.312-16.295 0-.312-.043-.611-.092-.908.05-.301.093-.605.093-.922 0-15.36-12.497-27.857-27.857-27.857-.273 0-.536.043-.799.08-.265-.037-.526-.08-.799-.08-15.361 0-27.858 12.497-27.858 27.857 0 .312.042.611.092.909a5.466 5.466 0 0 0-.093.921c0 15.36 12.496 27.858 27.857 27.858.273 0 .535-.043.8-.081.263.038.524.081.798.081 5.208 0 10.071-1.464 14.245-3.963L79.582 87.98a5.603 5.603 0 0 0 3.976 1.647 5.621 5.621 0 0 0 3.975-9.597zM39.598 55.838c-.265-.038-.526-.081-.8-.081-9.16 0-16.612-7.452-16.612-16.612 0-.312-.042-.611-.092-.908.051-.301.093-.605.093-.922 0-9.16 7.453-16.612 16.613-16.612.272 0 .534-.042.799-.079.263.037.525.079.799.079 9.16 0 16.612 7.452 16.612 16.612 0 .312.043.611.092.909-.05.301-.094.604-.094.921 0 9.16-7.452 16.612-16.612 16.612-.274 0-.536.043-.798.081z"})),o("input",{class:"uppy-u-reset uppy-ProviderBrowser-searchInput",type:"text",placeholder:this.props.i18n("filter"),"aria-label":this.props.i18n("filter"),onkeyup:this.handleKeyPress,onkeydown:this.handleKeyPress,onkeypress:this.handleKeyPress,value:this.props.filterInput,ref:function(e){t.input=e}}),this.props.filterInput&&o("button",{class:"uppy-u-reset uppy-ProviderBrowser-searchClose",type:"button","aria-label":this.props.i18n("resetFilter"),title:this.props.i18n("resetFilter"),onclick:this.props.filterQuery},o("svg",{"aria-hidden":"true",class:"UppyIcon",viewBox:"0 0 19 19"},o("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))},a)},{preact:49}],132:[function(e,t,n){var r=e("preact").h;t.exports=function(e){return r("div",{class:"uppy-ProviderBrowser-footer"},r("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onclick:e.done},e.i18n("selectXFiles",{smart_count:e.selected})),r("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onclick:e.cancel},e.i18n("cancel")))}},{preact:49}],133:[function(e,t,n){var r=e("preact").h;t.exports=function(t){function e(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault())}var n=t.getItemIcon();return r("li",{class:"uppy-ProviderBrowserItem"+(t.isChecked?" uppy-ProviderBrowserItem--selected":"")+("video"===n?" uppy-ProviderBrowserItem--noPreview":"")},r("div",{class:"uppy-ProviderBrowserItem-checkbox"},r("input",{type:"checkbox",role:"option",tabindex:0,"aria-label":"Select "+t.title,id:t.id,checked:t.isChecked,disabled:t.isDisabled,onchange:t.handleClick,onkeyup:e,onkeydown:e,onkeypress:e}),r("label",{for:t.id,onclick:t.handleClick})),r("button",{type:"button",class:"uppy-ProviderBrowserItem-inner","aria-label":"Select "+t.title,tabindex:0,onclick:function(e){if(e.preventDefault(),"folder"===t.type)return t.handleFolderClick(e);t.handleClick(e)}},function(e){if(null!==e)switch(e){case"file":return r("svg",{"aria-hidden":"true",class:"UppyIcon",width:11,height:14.5,viewBox:"0 0 44 58"},r("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}));case"folder":return r("svg",{"aria-hidden":"true",class:"UppyIcon",style:{width:16,marginRight:3},viewBox:"0 0 276.157 276.157"},r("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}));case"video":return r("svg",{"aria-hidden":"true",viewBox:"0 0 58 58"},r("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),r("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}));default:return r("img",{src:e})}}(t.getItemIcon()),t.showTitles&&t.title))}},{preact:49}],134:[function(e,t,n){var i=e("./Item"),o=e("preact").h;t.exports=function(r){return r.folders.length||r.files.length?o("div",{class:"uppy-ProviderBrowser-body"},o("ul",{class:"uppy-ProviderBrowser-list",onscroll:r.handleScroll,role:"listbox","aria-label":"List of files from "+r.title},r.folders.map(function(t){var e=!1,n=r.isChecked(t);return n&&(e=n.loading),i({title:t.name,id:t.id,type:"folder",getItemIcon:function(){return t.icon},isDisabled:e,isChecked:n,handleFolderClick:function(){return r.handleFolderClick(t)},handleClick:function(e){return r.toggleCheckbox(e,t)},columns:r.columns,showTitles:r.showTitles})}),r.files.map(function(t){return i({title:t.name,id:t.id,type:"file",getItemIcon:function(){return t.icon},isDisabled:!1,isChecked:r.isChecked(t),handleClick:function(e){return r.toggleCheckbox(e,t)},columns:r.columns,showTitles:r.showTitles})}))):o("div",{class:"uppy-Provider-empty"},r.i18n("noFilesFound"))}},{"./Item":133,preact:49}],135:[function(e,t,n){var r=e("preact").h;t.exports=function(e){return r("div",{class:"uppy-Provider-loading"},r("span",null,"Loading..."))}},{preact:49}],136:[function(e,t,n){var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e("preact"),o=i.h,a=i.Component,u=e("./AuthView"),c=e("./Browser"),l=e("./Loader"),p=e("@uppy/utils/lib/generateFileID"),h=e("@uppy/utils/lib/getFileType"),f=e("@uppy/utils/lib/isPreviewSupported");var d,m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,d=a),y.prototype.componentWillUnmount=function(){this.props.onUnmount()},y.prototype.render=function(){return this.props.children[0]},y);function y(){return r(this,y),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,d.apply(this,arguments))}function g(e,t){r(this,g),this.plugin=e,this.provider=t.provider;this.opts=s({},{viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0},t),this.addFile=this.addFile.bind(this),this.filterItems=this.filterItems.bind(this),this.filterQuery=this.filterQuery.bind(this),this.toggleSearch=this.toggleSearch.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.checkAuth=this.checkAuth.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleDemoAuth=this.handleDemoAuth.bind(this),this.sortByTitle=this.sortByTitle.bind(this),this.sortByDate=this.sortByDate.bind(this),this.isActiveRow=this.isActiveRow.bind(this),this.isChecked=this.isChecked.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelPicking=this.cancelPicking.bind(this),this.clearSelection=this.clearSelection.bind(this),this.render=this.render.bind(this),this.clearSelection()}t.exports=(g.prototype.tearDown=function(){},g.prototype._updateFilesAndFolders=function(e,t,n){this.nextPagePath=e.nextPagePath,e.items.forEach(function(e){e.isFolder?n.push(e):t.push(e)}),this.plugin.setPluginState({folders:n,files:t})},g.prototype.checkAuth=function(){var t=this;this.plugin.setPluginState({checkAuthInProgress:!0}),this.provider.checkAuth().then(function(e){t.plugin.setPluginState({checkAuthInProgress:!1}),t.plugin.onAuth(e)}).catch(function(e){t.plugin.setPluginState({checkAuthInProgress:!1}),t.handleError(e)})},g.prototype.getFolder=function(i,o){var s=this;return this._loaderWrapper(this.provider.list(i),function(e){var t=void 0,n=s.plugin.getPluginState(),r=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(n.directories,function(e){return i===e.id}),t=-1!==r?n.directories.slice(0,r+1):n.directories.concat([{id:i,title:o}]);s.username=s.username?s.username:e.username,s._updateFilesAndFolders(e,[],[]),s.plugin.setPluginState({directories:t})},this.handleError)},g.prototype.getNextFolder=function(e){this.getFolder(e.requestPath,e.name),this.lastCheckbox=void 0},g.prototype.addFile=function(e){var t={id:this.providerFileToId(e),source:this.plugin.id,data:e,name:e.name||e.id,type:e.mimeType,isRemote:!0,body:{fileId:e.id},remote:{serverUrl:this.plugin.opts.serverUrl,url:""+this.provider.fileUrl(e.requestPath),body:{fileId:e.id},providerOptions:this.provider.opts}},n=h(t);n&&f(n)&&(t.preview=e.thumbnail),this.plugin.uppy.log("Adding remote file");try{this.plugin.uppy.addFile(t)}catch(e){}},g.prototype.removeFile=function(t){var e=this.plugin.getPluginState().currentSelection;this.plugin.setPluginState({currentSelection:e.filter(function(e){return e.id!==t})})},g.prototype.logout=function(){var t=this;this.provider.logout(location.href).then(function(e){e.ok&&t.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[]})}).catch(this.handleError)},g.prototype.filterQuery=function(e){var t=this.plugin.getPluginState();this.plugin.setPluginState(s({},t,{filterInput:e?e.target.value:""}))},g.prototype.toggleSearch=function(){var e=this.plugin.getPluginState();this.plugin.setPluginState({isSearchVisible:!e.isSearchVisible,filterInput:""})},g.prototype.filterItems=function(e){var t=this.plugin.getPluginState();return""===t.filterInput?e:e.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.filterInput.toLowerCase())})},g.prototype.sortByTitle=function(){var e=s({},this.plugin.getPluginState()),t=e.files,n=e.folders,r=e.sorting,i=t.sort(function(e,t){return"titleDescending"===r?t.name.localeCompare(e.name):e.name.localeCompare(t.name)}),o=n.sort(function(e,t){return"titleDescending"===r?t.name.localeCompare(e.name):e.name.localeCompare(t.name)});this.plugin.setPluginState(s({},e,{files:i,folders:o,sorting:"titleDescending"===r?"titleAscending":"titleDescending"}))},g.prototype.sortByDate=function(){var e=s({},this.plugin.getPluginState()),t=e.files,n=e.folders,i=e.sorting,r=t.sort(function(e,t){var n=new Date(e.modifiedDate),r=new Date(t.modifiedDate);return"dateDescending"===i?r<n?-1:n<r?1:0:r<n?1:n<r?-1:0}),o=n.sort(function(e,t){var n=new Date(e.modifiedDate),r=new Date(t.modifiedDate);return"dateDescending"===i?r<n?-1:n<r?1:0:r<n?1:n<r?-1:0});this.plugin.setPluginState(s({},e,{files:r,folders:o,sorting:"dateDescending"===i?"dateAscending":"dateDescending"}))},g.prototype.sortBySize=function(){var e,t=s({},this.plugin.getPluginState()),n=t.files,i=t.sorting;n.length&&this.plugin.getItemData(n[0]).size&&(e=n.sort(function(e,t){var n=e.size,r=t.size;return"sizeDescending"===i?r<n?-1:n<r?1:0:r<n?1:n<r?-1:0}),this.plugin.setPluginState(s({},t,{files:e,sorting:"sizeDescending"===i?"sizeAscending":"sizeDescending"})))},g.prototype.isActiveRow=function(e){return this.plugin.getPluginState().activeRow===this.plugin.getItemId(e)},g.prototype.isChecked=function(t){return this.plugin.getPluginState().currentSelection.some(function(e){return e===t})},g.prototype.addFolder=function(i){var o=this,s=this.providerFileToId(i),a=this.plugin.getPluginState(),u=a.selectedFolders||{};if(!(s in u&&u[s].loading))return u[s]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:u}),this.provider.list(i.requestPath).then(function(e){var t=[];e.items.forEach(function(e){e.isFolder||(o.addFile(e),t.push(o.providerFileToId(e)))}),(a=o.plugin.getPluginState()).selectedFolders[s]={loading:!1,files:t},o.plugin.setPluginState({selectedFolders:u});var n=o.plugin.uppy.getPlugin("Dashboard"),r=void 0,r=t.length?n.i18n("folderAdded",{smart_count:t.length,folder:i.name}):n.i18n("emptyFolderAdded");o.plugin.uppy.info(r)}).catch(function(e){delete(a=o.plugin.getPluginState()).selectedFolders[s],o.plugin.setPluginState({selectedFolders:a.selectedFolders}),o.handleError(e)})},g.prototype.toggleCheckbox=function(e,t){e.stopPropagation(),e.preventDefault();var n,r,i,o,s=this.plugin.getPluginState(),a=s.folders,u=s.files,c=this.filterItems(a.concat(u));this.lastCheckbox&&e.shiftKey?(i=void 0,i=(n=c.indexOf(this.lastCheckbox))<(r=c.indexOf(t))?c.slice(n,r+1):c.slice(r,n+1),this.plugin.setPluginState({currentSelection:i})):(this.lastCheckbox=t,o=this.plugin.getPluginState().currentSelection,this.isChecked(t)?this.plugin.setPluginState({currentSelection:o.filter(function(e){return e!==t})}):this.plugin.setPluginState({currentSelection:o.concat([t])}))},g.prototype.providerFileToId=function(e){return p({data:e,name:e.name||e.id,type:e.mimeType})},g.prototype.handleDemoAuth=function(){var e=this.plugin.getPluginState();this.plugin.setPluginState({},e,{authenticated:!0})},g.prototype.handleAuth=function(){var n=this,e=btoa(JSON.stringify({origin:location.origin})),t=this.provider.authUrl()+"?state="+e,r=window.open(t,"_blank");window.addEventListener("message",function e(t){n._isOriginAllowed(t.origin,n.plugin.opts.serverPattern)&&t.source===r?(r.close(),window.removeEventListener("message",e),n.provider.setAuthToken(t.data.token),n._loaderWrapper(n.provider.checkAuth(),n.plugin.onAuth,n.handleError)):n.plugin.uppy.log("rejecting event from "+t.origin+" vs allowed pattern "+n.plugin.opts.serverPattern)})},g.prototype._isOriginAllowed=function(t,e){function n(e){return"string"==typeof e?new RegExp("^"+e+"$"):e instanceof RegExp?e:void 0}return(Array.isArray(e)?e.map(n):[n(e)]).filter(function(e){return null!==e}).some(function(e){return e.test(t)})},g.prototype.handleError=function(e){var t=this.plugin.uppy,n=t.i18n("companionError");t.log(e.toString()),t.info({message:n,details:e.toString()},"error",5e3)},g.prototype.handleScroll=function(e){var i=this,t=e.target.scrollHeight-(e.target.scrollTop+e.target.offsetHeight),n=this.nextPagePath||null;t<50&&n&&!this._isHandlingScroll&&(this.provider.list(n).then(function(e){var t=i.plugin.getPluginState(),n=t.files,r=t.folders;i._updateFilesAndFolders(e,n,r)}).catch(this.handleError).then(function(){i._isHandlingScroll=!1}),this._isHandlingScroll=!0)},g.prototype.donePicking=function(){var t=this,e=this.plugin.getPluginState().currentSelection.map(function(e){return e.isFolder?t.addFolder(e):t.addFile(e)});this._loaderWrapper(Promise.all(e),function(){t.clearSelection()},function(){})},g.prototype.cancelPicking=function(){this.clearSelection();var e=this.plugin.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()},g.prototype.clearSelection=function(){this.plugin.setPluginState({currentSelection:[]})},g.prototype._loaderWrapper=function(e,t,n){var r=this;e.then(function(e){r.plugin.setPluginState({loading:!1}),t(e)}).catch(function(e){r.plugin.setPluginState({loading:!1}),n(e)}),this.plugin.setPluginState({loading:!0})},g.prototype.render=function(){var e=this.plugin.getPluginState(),t=e.authenticated,n=e.checkAuthInProgress;if(e.loading)return o(m,{onUnmount:this.clearSelection},o(l,null));if(!t)return o(m,{onUnmount:this.clearSelection},o(u,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,demo:this.plugin.opts.demo,checkAuth:this.checkAuth,handleAuth:this.handleAuth,handleDemoAuth:this.handleDemoAuth,checkAuthInProgress:n}));var r=s({},this.plugin.getPluginState(),{username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,filterItems:this.filterItems,filterQuery:this.filterQuery,toggleSearch:this.toggleSearch,sortByTitle:this.sortByTitle,sortByDate:this.sortByDate,logout:this.logout,demo:this.plugin.opts.demo,isActiveRow:this.isActiveRow,isChecked:this.isChecked,toggleCheckbox:this.toggleCheckbox,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,title:this.plugin.title,viewType:this.opts.viewType,showTitles:this.opts.showTitles,showFilter:this.opts.showFilter,showBreadcrumbs:this.opts.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n});return o(m,{onUnmount:this.clearSelection},o(c,r))},g)},{"./AuthView":128,"./Browser":130,"./Loader":135,"@uppy/utils/lib/generateFileID":159,"@uppy/utils/lib/getFileType":162,"@uppy/utils/lib/isPreviewSupported":169,preact:49}],137:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i,o=e("@uppy/core").Plugin;function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));n.type="debugger",n.id="ReduxDevTools",n.title="Redux DevTools";return n.opts=r({},{},t),n.handleStateChange=n.handleStateChange.bind(n),n.initDevTools=n.initDevTools.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i=o),s.prototype.handleStateChange=function(e,t){this.devTools.send("UPPY_STATE_UPDATE",t)},s.prototype.initDevTools=function(){var n=this;this.devTools=window.devToolsExtension.connect(),this.devToolsUnsubscribe=this.devTools.subscribe(function(e){if("DISPATCH"===e.type)switch(console.log(e.payload.type),e.payload.type){case"RESET":return void n.uppy.reset();case"IMPORT_STATE":var t=e.payload.nextLiftedState.computedStates;return n.uppy.store.state=r({},n.uppy.getState(),t[t.length-1].state),void n.uppy.updateAll(n.uppy.getState());case"JUMP_TO_STATE":case"JUMP_TO_ACTION":n.uppy.store.state=r({},n.uppy.getState(),JSON.parse(e.state)),n.uppy.updateAll(n.uppy.getState())}})},s.prototype.install=function(){this.withDevTools=void 0!==window&&window.__REDUX_DEVTOOLS_EXTENSION__,this.withDevTools&&(this.initDevTools(),this.uppy.on("state-update",this.handleStateChange))},s.prototype.uninstall=function(){this.withDevTools&&(this.devToolsUnsubscribe(),this.uppy.off("state-update",this.handleStateUpdate))},s)},{"@uppy/core":96}],138:[function(e,t,n){var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=e("lodash.throttle"),k=e("classnames"),x=e("./StatusBarStates"),i=e("prettier-bytes"),o=e("@uppy/utils/lib/prettyETA"),E=e("preact").h;function P(n){var r=[];Object.keys(n).forEach(function(e){var t=n[e].progress;t.preprocess&&r.push(t.preprocess),t.postprocess&&r.push(t.postprocess)});var e=r[0];return{mode:e.mode,message:e.message,value:r.filter(function(e){return"determinate"===e.mode}).reduce(function(e,t,n,r){return e+t.value/r.length},0)}}t.exports=function(e){var t,n=(e=e||{}).newFiles,r=e.allowNewUpload,i=e.isUploadInProgress,o=e.isAllPaused,s=e.resumableUploads,a=e.error,u=e.hideUploadButton,c=e.hidePauseResumeButton,l=e.hideCancelButton,p=e.hideRetryButton,h=e.uploadState,f=e.totalProgress,d=void 0,m=void 0;h===x.STATE_PREPROCESSING||h===x.STATE_POSTPROCESSING?("determinate"===(d=(t=P(e.files)).mode)&&(f=100*t.value),m=D(t)):h===x.STATE_COMPLETE?m=R(e):h===x.STATE_UPLOADING?(e.supportsUploadProgress||(d="indeterminate",f=null),m=j(e)):h===x.STATE_ERROR&&(f=void 0,m=U(e));var y="number"==typeof f?f:100,g=h===x.STATE_WAITING&&e.hideUploadButton||h===x.STATE_WAITING&&0<!e.newFiles||h===x.STATE_COMPLETE&&e.hideAfterFinish,v=!a&&n&&!i&&!o&&r&&!u,b=!l&&h!==x.STATE_WAITING&&h!==x.STATE_COMPLETE,_=s&&!c&&h!==x.STATE_WAITING&&h!==x.STATE_PREPROCESSING&&h!==x.STATE_POSTPROCESSING&&h!==x.STATE_COMPLETE,w=a&&!p,A="uppy-StatusBar-progress\n                           "+(d?"is-"+d:""),S=k({"uppy-Root":e.isTargetDOMEl},"uppy-StatusBar","is-"+h);return E("div",{class:S,"aria-hidden":g},E("div",{class:A,style:{width:y+"%"},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":f}),m,E("div",{class:"uppy-StatusBar-actions"},v?E(T,C({},e,{uploadState:h})):null,w?E(O,e):null,_?E(F,e):null,b?E(M,e):null))};function s(){return E("svg",{class:"uppy-StatusBar-spinner",width:"14",height:"14",xmlns:"http://www.w3.org/2000/svg"},E("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0","fill-rule":"evenodd"}))}function a(e){return E("div",{class:"uppy-StatusBar-statusSecondary"},e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads}))}function u(e){var t=k("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn");return E("div",{class:"uppy-StatusBar-statusSecondary"},E("div",{class:"uppy-StatusBar-statusSecondaryHint"},e.i18n("xMoreFilesAdded",{smart_count:e.newFiles})),E("button",{type:"button",class:t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onclick:e.startUpload},e.i18n("upload")))}var T=function(e){var t=k("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":e.uploadState===x.STATE_WAITING});return E("button",{type:"button",class:t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onclick:e.startUpload},e.newFiles&&e.isUploadStarted?e.i18n("uploadXNewFiles",{smart_count:e.newFiles}):e.i18n("uploadXFiles",{smart_count:e.newFiles}))},O=function(e){return E("button",{type:"button",class:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e.i18n("retryUpload"),onclick:e.retryAll},e.i18n("retry"))},M=function(e){return E("button",{type:"button",class:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e.i18n("cancel"),"aria-label":e.i18n("cancel"),onclick:e.cancelAll},E("svg",{"aria-hidden":"true",class:"UppyIcon",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},E("path",{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm1.414-8l2.122-2.121-1.415-1.415L8 6.586 5.879 4.464 4.464 5.88 6.586 8l-2.122 2.121 1.415 1.415L8 9.414l2.121 2.122 1.415-1.415L9.414 8z",fill:"#949494","fill-rule":"evenodd"})))},F=function(e){var t=e.isAllPaused,n=e.i18n,r=n(t?"resume":"pause");return E("button",{title:r,"aria-label":r,class:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onclick:function(){return function(e){if(!e.isAllComplete)return e.resumableUploads?e.isAllPaused?e.resumeAll():e.pauseAll():e.cancelAll()}(e)}},E("svg",{"aria-hidden":"true",class:"UppyIcon",width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},E("path",t?{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM6 5v6l5-3-5-3z",fill:"#949494","fill-rule":"evenodd"}:{d:"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zM5 5v6h2V5H5zm4 0v6h2V5H9z",fill:"#949494","fill-rule":"evenodd"})))},D=function(e){var t=Math.round(100*e.value);return E("div",{class:"uppy-StatusBar-content"},E(s,e),"determinate"===e.mode?t+"% · ":"",e.message)},c=r(function(e){return E("div",{class:"uppy-StatusBar-statusSecondary"},1<e.numUploads&&e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads})+" · ",e.i18n("dataUploadedOfTotal",{complete:i(e.totalUploadedSize),total:i(e.totalSize)})+" · ",e.i18n("xTimeLeft",{time:o(e.totalETA)}))},500,{leading:!0,trailing:!0}),j=function(e){if(!e.isUploadStarted||e.isAllComplete)return null;var t=e.isAllPaused?e.i18n("paused"):e.i18n("uploading"),n=e.newFiles&&e.isUploadStarted;return E("div",{class:"uppy-StatusBar-content","aria-label":t,title:t},e.isAllPaused?null:E(s,e),E("div",{class:"uppy-StatusBar-status"},E("div",{class:"uppy-StatusBar-statusPrimary"},e.supportsUploadProgress?t+": "+e.totalProgress+"%":t),e.isAllPaused||n||!e.showProgressDetails?null:e.supportsUploadProgress?E(c,e):E(a,e),n?E(u,e):null))},R=function(e){e.totalProgress;var t=e.i18n;return E("div",{class:"uppy-StatusBar-content",role:"status",title:t("complete")},E("svg",{"aria-hidden":"true",class:"uppy-StatusBar-statusIndicator UppyIcon",width:"18",height:"17",viewBox:"0 0 23 17"},E("path",{d:"M8.944 17L0 7.865l2.555-2.61 6.39 6.525L20.41 0 23 2.645z"})),t("complete"))},U=function(e){var t=e.error,n=(e.retryAll,e.hideRetryButton,e.i18n);return E("div",{class:"uppy-StatusBar-content",role:"alert"},E("span",{class:"uppy-StatusBar-contentPadding"},n("uploadFailed"),"."),E("span",{class:"uppy-StatusBar-details","aria-label":t,"data-microtip-position":"top","data-microtip-size":"large",role:"tooltip"},"?"))}},{"./StatusBarStates":139,"@uppy/utils/lib/prettyETA":173,classnames:9,"lodash.throttle":43,preact:49,"prettier-bytes":50}],139:[function(e,t,n){t.exports={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"}},{}],140:[function(e,t,n){var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s,r=e("@uppy/core").Plugin,a=e("@uppy/utils/lib/Translator"),x=e("./StatusBar"),u=e("./StatusBarStates"),i=e("@uppy/utils/lib/getSpeed"),c=e("@uppy/utils/lib/getBytesRemaining");function l(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t));n.id=n.opts.id||"StatusBar",n.title="StatusBar";var r={strings:{uploading:"Uploading",upload:"Upload",complete:"Complete",uploadFailed:"Upload failed",pleasePressRetry:"Please press Retry to upload again",paused:"Paused",error:"Error",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",pressToRetry:"Press to retry",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"}}},i={target:"body",hideUploadButton:!(n.type="progressindicator"),hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,locale:r,hideAfterFinish:!0};return n.opts=o({},i,t),n.translator=new a([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.startUpload=n.startUpload.bind(n),n.render=n.render.bind(n),n.install=n.install.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s=r),l.prototype.getTotalSpeed=function(e){var t=0;return e.forEach(function(e){t+=i(e.progress)}),t},l.prototype.getTotalETA=function(e){var t=this.getTotalSpeed(e);if(0===t)return 0;var n=e.reduce(function(e,t){return e+c(t.progress)},0);return Math.round(n/t*10)/10},l.prototype.startUpload=function(){var t=this;return this.uppy.upload().catch(function(e){t.uppy.log(e.stack||e.message||e)})},l.prototype.getUploadingState=function(e,t,n){if(e)return u.STATE_ERROR;if(t)return u.STATE_COMPLETE;for(var r=u.STATE_WAITING,i=Object.keys(n),o=0;o<i.length;o++){var s=n[i[o]].progress;if(s.uploadStarted&&!s.uploadComplete)return u.STATE_UPLOADING;s.preprocess&&r!==u.STATE_UPLOADING&&(r=u.STATE_PREPROCESSING),s.postprocess&&r!==u.STATE_UPLOADING&&r!==u.STATE_PREPROCESSING&&(r=u.STATE_POSTPROCESSING)}return r},l.prototype.render=function(e){var t=e.capabilities,n=e.files,r=e.allowNewUpload,i=e.totalProgress,o=e.error,s=Object.keys(n).filter(function(e){return!n[e].progress.uploadStarted&&!n[e].progress.preprocess&&!n[e].progress.postprocess}),a=Object.keys(n).filter(function(e){return n[e].progress.uploadStarted}),u=a.filter(function(e){return n[e].isPaused}),c=Object.keys(n).filter(function(e){return n[e].progress.uploadComplete}),l=Object.keys(n).filter(function(e){return n[e].error}),p=Object.keys(n).filter(function(e){return!n[e].progress.uploadComplete&&n[e].progress.uploadStarted}),h=p.filter(function(e){return!n[e].isPaused}),f=Object.keys(n).filter(function(e){return n[e].progress.uploadStarted||n[e].progress.preprocess||n[e].progress.postprocess}),d=Object.keys(n).filter(function(e){return n[e].progress.preprocess||n[e].progress.postprocess}),m=h.map(function(e){return n[e]}),y=this.getTotalETA(m),g=0,v=0;m.forEach(function(e){g+=e.progress.bytesTotal||0,v+=e.progress.bytesUploaded||0});var b=0<a.length,_=100===i&&c.length===Object.keys(n).length&&0===d.length,w=b&&l.length===a.length,A=0!==p.length&&u.length===p.length,S=0<p.length,C=t.resumableUploads||!1,k=!1!==t.uploadProgress;return x({error:o,uploadState:this.getUploadingState(w,_,e.files||{}),allowNewUpload:r,totalProgress:i,totalSize:g,totalUploadedSize:v,isAllComplete:_,isAllPaused:A,isAllErrored:w,isUploadStarted:b,isUploadInProgress:S,complete:c.length,newFiles:s.length,numUploads:f.length,totalETA:y,files:n,i18n:this.i18n,pauseAll:this.uppy.pauseAll,resumeAll:this.uppy.resumeAll,retryAll:this.uppy.retryAll,cancelAll:this.uppy.cancelAll,startUpload:this.startUpload,resumableUploads:C,supportsUploadProgress:k,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})},l.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},l.prototype.uninstall=function(){this.unmount()},l)},{"./StatusBar":138,"./StatusBarStates":139,"@uppy/core":96,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/getBytesRemaining":160,"@uppy/utils/lib/getSpeed":165}],141:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=(o.prototype.getState=function(){return this.state},o.prototype.setState=function(e){var t=r({},this.state),n=r({},this.state,e);this.state=n,this._publish(t,n,e)},o.prototype.subscribe=function(e){var t=this;return this.callbacks.push(e),function(){t.callbacks.splice(t.callbacks.indexOf(e),1)}},o.prototype._publish=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callbacks.forEach(function(e){e.apply(void 0,t)})},o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.state={},this.callbacks=[]}t.exports=function(){return new i}},{}],142:[function(e,t,n){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var r=e("cuid"),o="uppy/STATE_UPDATE",s=function(t){return function(e){return e.uppy[t]}},a=(u.prototype.setState=function(e){this._store.dispatch({type:o,id:this._id,payload:e})},u.prototype.getState=function(){return this._selector(this._store.getState())},u.prototype.subscribe=function(o){var s=this,a=this.getState();return this._store.subscribe(function(){var t,n,e,r,i=s.getState();a!==i&&(t=a,n=i,e=Object.keys(n),r={},e.forEach(function(e){t[e]!==n[e]&&(r[e]=n[e])}),o(a,i,r),a=i)})},u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this._store=e.store,this._id=e.id||r(),this._selector=e.selector||s(this._id),this.setState({})}t.exports=function(e){return new a(e)},t.exports.STATE_UPDATE=o,t.exports.reducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(t.type!==o)return e;var n,r=i({},e[t.id],t.payload);return i({},e,((n={})[t.id]=r,n))},t.exports.middleware=function(){return function(){return function(t){return function(e){t(e)}}}}},{cuid:13}],143:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i,o=e("@uppy/core").Plugin,s=e("@uppy/utils/lib/dataURItoBlob"),a=e("@uppy/utils/lib/isObjectURL"),u=e("@uppy/utils/lib/isPreviewSupported");function c(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,i.call(this,e,t));n.type="thumbnail",n.id=n.opts.id||"ThumbnailGenerator",n.title="Thumbnail Generator",n.queue=[],n.queueProcessing=!1,n.defaultThumbnailDimension=200;return n.opts=r({},{thumbnailWidth:null,thumbnailHeight:null},t),n.onFileAdded=n.onFileAdded.bind(n),n.onFileRemoved=n.onFileRemoved.bind(n),n.onRestored=n.onRestored.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i=o),c.prototype.createThumbnail=function(e,r,i){var o=this,s=URL.createObjectURL(e.data);return new Promise(function(e,t){var n=new Image;n.src=s,n.addEventListener("load",function(){URL.revokeObjectURL(s),e(n)}),n.addEventListener("error",function(e){URL.revokeObjectURL(s),t(e.error||new Error("Could not create thumbnail"))})}).then(function(e){var t=o.getProportionalDimensions(e,r,i),n=o.resizeImage(e,t.width,t.height);return o.canvasToBlob(n,"image/png")}).then(function(e){return URL.createObjectURL(e)})},c.prototype.getProportionalDimensions=function(e,t,n){var r=e.width/e.height;return null!=t?{width:t,height:Math.round(t/r)}:null!=n?{width:Math.round(n*r),height:n}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}},c.prototype.protect=function(e){var t,n=e.width/e.height,r=Math.floor(Math.sqrt(5e6*n)),i=Math.floor(5e6/Math.sqrt(5e6*n));return 4096<r&&(r=4096,i=Math.round(r/n)),4096<i&&(i=4096,r=Math.round(n*i)),e.width>r&&((t=document.createElement("canvas")).width=r,t.height=i,t.getContext("2d").drawImage(e,0,0,r,i),e=t),e},c.prototype.resizeImage=function(e,t,n){e=this.protect(e);var r=Math.ceil(Math.log(e.width/t)*Math.LOG2E);r<1&&(r=1);for(var i=t*Math.pow(2,r-1),o=n*Math.pow(2,r-1);r--;){var s=document.createElement("canvas");s.width=i,s.height=o,s.getContext("2d").drawImage(e,0,0,i,o),e=s,i=Math.round(i/2),o=Math.round(o/2)}return e},c.prototype.canvasToBlob=function(t,n,r){return t.toBlob?new Promise(function(e){t.toBlob(e,n,r)}):Promise.resolve().then(function(){return s(t.toDataURL(n,r),{})})},c.prototype.setPreviewURL=function(e,t){this.uppy.setFileState(e,{preview:t})},c.prototype.addToQueue=function(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()},c.prototype.processQueue=function(){var e=this;if(this.queueProcessing=!0,0<this.queue.length){var t=this.queue.shift();return this.requestThumbnail(t).catch(function(e){}).then(function(){return e.processQueue()})}this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated")},c.prototype.requestThumbnail=function(t){var n=this;return u(t.type)&&!t.isRemote?this.createThumbnail(t,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(function(e){n.setPreviewURL(t.id,e),n.uppy.log("[ThumbnailGenerator] Generated thumbnail for "+t.id),n.uppy.emit("thumbnail:generated",n.uppy.getFile(t.id),e)}).catch(function(e){n.uppy.log("[ThumbnailGenerator] Failed thumbnail for "+t.id),n.uppy.log(e,"warning"),n.uppy.emit("thumbnail:error",n.uppy.getFile(t.id),e)}):Promise.resolve()},c.prototype.onFileAdded=function(e){e.preview||this.addToQueue(e)},c.prototype.onFileRemoved=function(e){var t=this.queue.indexOf(e);-1!==t&&this.queue.splice(t,1),e.preview&&a(e.preview)&&URL.revokeObjectURL(e.preview)},c.prototype.onRestored=function(){var n=this,e=this.uppy.getState().files;Object.keys(e).forEach(function(e){var t=n.uppy.getFile(e);t.isRestored&&(t.preview&&!a(t.preview)||n.addToQueue(t))})},c.prototype.install=function(){this.uppy.on("file-added",this.onFileAdded),this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("restored",this.onRestored)},c.prototype.uninstall=function(){this.uppy.off("file-added",this.onFileAdded),this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("restored",this.onRestored)},c)},{"@uppy/core":96,"@uppy/utils/lib/dataURItoBlob":155,"@uppy/utils/lib/isObjectURL":168,"@uppy/utils/lib/isPreviewSupported":169}],144:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var i=function(){a=a||e("socket.io-client");return a},o=e("component-emitter"),s=e("./parseUrl"),a=void 0;var u="ASSEMBLY_EXECUTING",c="ASSEMBLY_COMPLETED",l=["ASSEMBLY_UPLOADING",u,c];function p(e,t){return l.indexOf(e)>=l.indexOf(t)}var h,f=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,h=o),d.prototype.connect=function(){this._connectSocket(),this._beginPolling()},d.prototype._onFinished=function(){this.emit("finished"),this.close()},d.prototype._connectSocket=function(){var n=this,e=s(this.status.websocket_url),t=i().connect(e.origin,{transports:["websocket"],path:e.pathname});t.on("connect",function(){t.emit("assembly_connect",{id:n.status.assembly_id}),n.emit("connect")}),t.on("error",function(){t.disconnect(),n.socket=null}),t.on("assembly_finished",function(){n._onFinished()}),t.on("assembly_upload_finished",function(e){n.emit("upload",e),n._fetchStatus({diff:!1})}),t.on("assembly_uploading_finished",function(){n.emit("executing"),n._fetchStatus({diff:!1})}),t.on("assembly_upload_meta_data_extracted",function(){n.emit("metadata"),n._fetchStatus({diff:!1})}),t.on("assembly_result_finished",function(e,t){n.emit("result",e,t),n._fetchStatus({diff:!1})}),t.on("assembly_error",function(e){n._onError(e),n._fetchStatus({diff:!1})}),this.socket=t},d.prototype._onError=function(e){this.emit("error",r(new Error(e.message),e))},d.prototype._beginPolling=function(){var e=this;this.pollInterval=setInterval(function(){e.socket&&e.socket.connected||e._fetchStatus()},2e3)},d.prototype._fetchStatus=function(e){var t=this,n=(0<arguments.length&&void 0!==e?e:{}).diff,r=void 0===n||n;return fetch(this.status.assembly_ssl_url).then(function(e){return e.json()}).then(function(e){t.closed||(t.emit("status",e),r?t.updateStatus(e):t.status=e)})},d.prototype.update=function(){return this._fetchStatus({diff:!0})},d.prototype.updateStatus=function(e){this._diffStatus(this.status,e),this.status=e},d.prototype._diffStatus=function(r,i){var o=this,e=r.ok,t=i.ok;if(i.error&&!r.error)return this._onError(i);var n=p(t,u)&&!p(e,u);n&&this.emit("executing"),Object.keys(i.uploads).filter(function(e){return!r.uploads.hasOwnProperty(e)}).map(function(e){return i.uploads[e]}).forEach(function(e){o.emit("upload",e)}),n&&this.emit("metadata"),Object.keys(i.results).forEach(function(t){var e=i.results[t],n=r.results[t];e.filter(function(t){return!n||!n.some(function(e){return e.id===t.id})}).forEach(function(e){o.emit("result",t,e)})}),p(t,c)&&!p(e,c)&&this.emit("finished")},d.prototype.close=function(){this.closed=!0,this.socket&&(this.socket.disconnect(),this.socket=null),clearInterval(this.pollInterval)},d);function d(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,h.call(this));return t.status=e,t.socket=null,t.pollInterval=null,t.closed=!1,t}t.exports=f},{"./parseUrl":149,"component-emitter":11,"socket.io-client":57}],145:[function(e,t,n){function r(e){if(!e)throw new Error("Transloadit: The `params` option is required.");if("string"==typeof e)try{e=JSON.parse(e)}catch(e){throw e.message="Transloadit: The `params` option is a malformed JSON string: "+e.message,e}if(!e.auth||!e.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/account/api-settings.")}var i=(o.prototype._normalizeAssemblyOptions=function(t,n){var e;return Array.isArray(n.fields)&&(e=n.fields,n.fields={},e.forEach(function(e){n.fields[e]=t.meta[e]})),n.fields||(n.fields={}),n},o.prototype._getAssemblyOptions=function(t){var n=this,e=this.opts;return Promise.resolve().then(function(){return e.getAssemblyOptions(t,e)}).then(function(e){return n._normalizeAssemblyOptions(t,e)}).then(function(e){return r(e.params),{fileIDs:[t.id],options:e}})},o.prototype._dedupe=function(e){var o=Object.create(null);return e.forEach(function(e){var t,n=e.fileIDs,r=e.options,i=JSON.stringify(r);o[i]?(t=o[i].fileIDs).push.apply(t,n):o[i]={options:r,fileIDs:[].concat(n)}}),Object.keys(o).map(function(e){return o[e]})},o.prototype.build=function(){var t=this,e=this.opts;return 0<this.files.length?Promise.all(this.files.map(function(e){return t._getAssemblyOptions(e)})).then(function(e){return t._dedupe(e)}):e.alwaysRunAssembly?Promise.resolve(e.getAssemblyOptions(null,e)).then(function(e){return r(e.params),[{fileIDs:t.files.map(function(e){return e.id}),options:e}]}):Promise.resolve([])},o);function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.files=e,this.opts=t}t.exports=i,t.exports.validateParams=r},{}],146:[function(e,t,n){var r,i=e("component-emitter"),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,r=i),s.prototype._watching=function(e){return-1!==this._assemblyIDs.indexOf(e)},s.prototype._onAssemblyComplete=function(e){this._watching(e.assembly_id)&&(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly finish "+e.assembly_id),this.emit("assembly-complete",e.assembly_id),this._checkAllComplete())},s.prototype._onAssemblyError=function(e,t){this._watching(e.assembly_id)&&(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly error "+e.assembly_id),this._uppy.log(t),this.emit("assembly-error",e.assembly_id,t),this._checkAllComplete())},s.prototype._onImportError=function(e,t,n){this._watching(e.assembly_id)&&this._onAssemblyError(e,n)},s.prototype._checkAllComplete=function(){--this._remaining,0===this._remaining&&(this._removeListeners(),this._resolve())},s.prototype._removeListeners=function(){this._uppy.off("transloadit:complete",this._onAssemblyComplete),this._uppy.off("transloadit:assembly-error",this._onAssemblyError),this._uppy.off("transloadit:import-error",this._onImportError)},s.prototype._addListeners=function(){this._uppy.on("transloadit:complete",this._onAssemblyComplete),this._uppy.on("transloadit:assembly-error",this._onAssemblyError),this._uppy.on("transloadit:import-error",this._onImportError)},s);function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this));return n._uppy=e,n._assemblyIDs=t,n._remaining=t.length,n.promise=new Promise(function(e,t){n._resolve=e,n._reject=t}),n._onAssemblyComplete=n._onAssemblyComplete.bind(n),n._onAssemblyError=n._onAssemblyError.bind(n),n._onImportError=n._onImportError.bind(n),n._addListeners(),n}t.exports=o},{"component-emitter":11}],147:[function(e,t,n){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.opts=e}t.exports=(r.prototype.createAssembly=function(e){e.templateId;var t=e.params,n=e.fields,r=e.signature,i=e.expectedFiles,o=new FormData;return o.append("params","string"==typeof t?t:JSON.stringify(t)),r&&o.append("signature",r),Object.keys(n).forEach(function(e){o.append(e,n[e])}),o.append("num_expected_upload_files",i),fetch(this.opts.service+"/assemblies",{method:"post",body:o}).then(function(e){return e.json()}).then(function(e){if(e.error){var t=new Error(e.error);throw t.message=e.error,t.details=e.reason,t}return e})},r.prototype.reserveFile=function(e,t){var n=encodeURIComponent(t.size);return fetch(e.assembly_ssl_url+"/reserve_file?size="+n,{method:"post"}).then(function(e){return e.json()})},r.prototype.addFile=function(e,t){if(!t.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));var n=encodeURIComponent(t.size),r=encodeURIComponent(t.uploadURL),i="size="+n+"&filename="+encodeURIComponent(t.name)+"&fieldname=file&s3Url="+r;return fetch(e.assembly_ssl_url+"/add_file?"+i,{method:"post"}).then(function(e){return e.json()})},r.prototype.getAssemblyStatus=function(e){return fetch(e).then(function(e){return e.json()})},r)},{}],148:[function(e,t,n){var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s=e("@uppy/utils/lib/Translator"),r=e("@uppy/core").Plugin,i=e("@uppy/tus"),d=e("./Assembly"),a=e("./Client"),u=e("./AssemblyOptions"),c=e("./AssemblyWatcher");function l(e,t){return{params:t.params,signature:t.signature,fields:t.fields}}var p,o="https://api2.transloadit.com/companion",h=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/,m=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/uppy-server/;function y(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,p.call(this,e,t));n.type="uploader",n.id="Transloadit";var r={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create Assembly",encoding:"Encoding..."}},i={service:"https://api2.transloadit.com",waitForEncoding:!(n.title="Transloadit"),waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:l,locale:r};n.opts=f({},i,t),n.translator=new s([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n._prepareUpload=n._prepareUpload.bind(n),n._afterUpload=n._afterUpload.bind(n),n._handleError=n._handleError.bind(n),n._onFileUploadURLAvailable=n._onFileUploadURLAvailable.bind(n),n._onRestored=n._onRestored.bind(n),n._getPersistentData=n._getPersistentData.bind(n);var o=n.opts.getAssemblyOptions!==i.getAssemblyOptions;return n.opts.params?u.validateParams(n.opts.params):o||u.validateParams(null),n.client=new a({service:n.opts.service}),n.activeAssemblies={},n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,p=r),y.prototype._attachAssemblyMetadata=function(e,t){var n,r,i=f({},e.meta,{assembly_url:t.assembly_url,filename:e.name,fieldname:"file"}),o=f({},e.tus,{endpoint:t.tus_url}),s=e.remote;if(e.remote&&m.test(e.remote.serverUrl)){var a=new Error("The https://api2.transloadit.com/uppy-server endpoint was renamed to https://api2.transloadit.com/companion, please update your `serverUrl` options accordingly.");throw this.uppy.log(a),a}e.remote&&h.test(e.remote.serverUrl)&&(n=t.companion_url.replace(/\/$/,""),r=e.remote.url.replace(e.remote.serverUrl,"").replace(/^\//,""),s=f({},e.remote,{serverUrl:n,url:n+"/"+r}));var u=f({},e,{transloadit:{assembly:t.assembly_id}});return this.opts.importFromUploadURLs||f(u,{meta:i,tus:o,remote:s}),u},y.prototype._createAssembly=function(l,p,e){var h=this;return this.uppy.log("[Transloadit] create Assembly"),this.client.createAssembly({params:e.params,fields:e.fields,expectedFiles:l.length,signature:e.signature}).then(function(e){var t,n,r=new d(e),i=r.status,o=h.getPluginState(),s=o.assemblies,a=o.uploadsAssemblies;h.setPluginState({assemblies:f({},s,((t={})[i.assembly_id]=i,t)),uploadsAssemblies:f({},a,((n={})[p]=[].concat(a[p],[i.assembly_id]),n))});var u=h.uppy.getState().files,c={};return l.forEach(function(e){c[e]=h._attachAssemblyMetadata(h.uppy.getFile(e),i)}),h.uppy.setState({files:f({},u,c)}),h.uppy.emit("transloadit:assembly-created",i,l),h._connectAssembly(r),h.uppy.log("[Transloadit] Created Assembly "+i.assembly_id),r}).catch(function(e){throw e.message=h.i18n("creatingAssemblyFailed")+": "+e.message,e})},y.prototype._shouldWaitAfterUpload=function(){return this.opts.waitForEncoding||this.opts.waitForMetadata},y.prototype._reserveFiles=function(n,e){var r=this;return Promise.all(e.map(function(e){var t=r.uppy.getFile(e);return r.client.reserveFile(n,t)}))},y.prototype._onFileUploadURLAvailable=function(t){var n,r=this;t&&t.transloadit&&t.transloadit.assembly&&(n=this.getPluginState().assemblies[t.transloadit.assembly],this.client.addFile(n,t).catch(function(e){r.uppy.log(e),r.uppy.emit("transloadit:import-error",n,t.id,e)}))},y.prototype._findFile=function(e){for(var t=this.uppy.getFiles(),n=0;n<t.length;n++){var r=t[n];if(r.uploadURL===e.tus_upload_url)return r;if(r.tus&&r.tus.uploadUrl===e.tus_upload_url)return r;if(!e.is_tus_file&&r.name===e.name&&r.size===e.size)return r}},y.prototype._onFileUploadComplete=function(e,t){var n,r=this.getPluginState(),i=this._findFile(t);i?(this.setPluginState({files:f({},r.files,((n={})[t.id]={assembly:e,id:i.id,uploadedFile:t},n))}),this.uppy.emit("transloadit:upload",t,this.getAssembly(e))):this.uppy.log("[Transloadit] Couldn’t file the file, it was likely removed in the process")},y.prototype._onResult=function(e,t,n){var r=this.getPluginState(),i=r.files[n.original_id];n.localId=i?i.id:null;var o={result:n,stepName:t,id:n.id,assembly:e};this.setPluginState({results:[].concat(r.results,[o])}),this.uppy.emit("transloadit:result",t,n,this.getAssembly(e))},y.prototype._onAssemblyFinished=function(e){var r=this,t=e.assembly_ssl_url;this.client.getAssemblyStatus(t).then(function(e){var t,n=r.getPluginState();r.setPluginState({assemblies:f({},n.assemblies,((t={})[e.assembly_id]=e,t))}),r.uppy.emit("transloadit:complete",e)})},y.prototype._getPersistentData=function(e){var t,n=this.getPluginState(),r=n.assemblies,i=n.uploadsAssemblies;e(((t={})[this.id]={assemblies:r,uploadsAssemblies:i},t))},y.prototype._onRestored=function(e){var s=this,t=e&&e[this.id]?e[this.id]:{},i=t.assemblies||{},a=t.uploadsAssemblies||{};0!==Object.keys(a).length&&(this.restored=Promise.resolve().then(function(){var t,n,o,r,e;return t=i,n={},o=[],Object.keys(t).forEach(function(r){var e=t[r];e.uploads.forEach(function(e){var t=s._findFile(e);n[e.id]={id:t.id,assembly:r,uploadedFile:e}});var i=s.getPluginState();Object.keys(e.results).forEach(function(n){e.results[n].forEach(function(e){var t=i.files[e.original_id];e.localId=t?t.id:null,o.push({id:e.id,result:e,stepName:n,assembly:r})})})}),s.setPluginState({assemblies:t,files:n,results:o,uploadsAssemblies:a}),r=s.getPluginState().assemblies,Object.keys(r).forEach(function(e){var t=new d(r[e]);s._connectAssembly(t)}),e=s.getPluginState().assemblies,Promise.all(Object.keys(e).map(function(e){return s.activeAssemblies[e].update()}))}),this.restored.then(function(){s.restored=null}))},y.prototype._connectAssembly=function(n){var r=this,i=n.status.assembly_id;if((this.activeAssemblies[i]=n).on("status",function(e){var t,n=r.getPluginState().assemblies;r.setPluginState({assemblies:f({},n,((t={})[i]=e,t))})}),n.on("upload",function(e){r._onFileUploadComplete(i,e)}),n.on("error",function(e){r.uppy.emit("transloadit:assembly-error",n.status,e)}),n.on("executing",function(){r.uppy.emit("transloadit:assembly-executing",n.status)}),this.opts.waitForEncoding&&n.on("result",function(e,t){r._onResult(i,e,t)}),this.opts.waitForEncoding?n.on("finished",function(){r._onAssemblyFinished(n.status)}):this.opts.waitForMetadata&&n.on("metadata",function(){r._onAssemblyFinished(n.status)}),"ASSEMBLY_COMPLETE"===n.ok)return n;new Promise(function(e,t){n.once("connect",e),n.once("status",e),n.once("error",t)}).then(function(){r.uppy.log("[Transloadit] Socket is ready")});return n.connect(),n},y.prototype._prepareUpload=function(e,r){var t,i=this;(e=e.filter(function(e){return!e.error})).forEach(function(e){var t=i.uppy.getFile(e);i.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:i.i18n("creatingAssembly")})});function n(e){var t=e.fileIDs,n=e.options;return i._createAssembly(t,r,n).then(function(e){if(i.opts.importFromUploadURLs)return i._reserveFiles(e,t)}).then(function(){t.forEach(function(e){var t=i.uppy.getFile(e);i.uppy.emit("preprocess-complete",t)})}).catch(function(n){throw t.forEach(function(e){var t=i.uppy.getFile(e);i.uppy.emit("preprocess-complete",t),i.uppy.emit("upload-error",t,n)}),n})}var o=this.getPluginState().uploadsAssemblies;this.setPluginState({uploadsAssemblies:f({},o,((t={})[r]=[],t))});var s=e.map(function(e){return i.uppy.getFile(e)});return new u(s,this.opts).build().then(function(e){return Promise.all(e.map(n))},function(n){throw e.forEach(function(e){var t=i.uppy.getFile(e);i.uppy.emit("preprocess-complete",t),i.uppy.emit("upload-error",t,n)}),n})},y.prototype._afterUpload=function(e,r){var i=this;e=e.filter(function(e){return!e.error});var t=this.getPluginState();if(this.restored)return this.restored.then(function(){return i._afterUpload(e,r)});var o=t.uploadsAssemblies[r];if(!this._shouldWaitAfterUpload()){o.forEach(function(e){i.activeAssemblies[e].close(),delete i.activeAssemblies[e]});var n=o.map(function(e){return i.getAssembly(e)});return this.uppy.addResultData(r,{transloadit:n}),Promise.resolve()}if(0===o.length)return this.uppy.addResultData(r,{transloadit:[]}),Promise.resolve();var s=new c(this.uppy,o);return e.forEach(function(e){var t=i.uppy.getFile(e);i.uppy.emit("postprocess-progress",t,{mode:"indeterminate",message:i.i18n("encoding")})}),s.on("assembly-complete",function(e){i.getAssemblyFiles(e).forEach(function(e){i.uppy.emit("postprocess-complete",e)})}),s.on("assembly-error",function(e,t){i.getAssemblyFiles(e).forEach(function(e){i.uppy.emit("upload-error",e,t),i.uppy.emit("postprocess-complete",e)})}),s.promise.then(function(){var e=o.map(function(e){return i.getAssembly(e)}),t=i.getPluginState(),n=f({},t.uploadsAssemblies);delete n[r],i.setPluginState({uploadsAssemblies:n}),i.uppy.addResultData(r,{transloadit:e})})},y.prototype._handleError=function(e,t){var n=this;this.uppy.log("[Transloadit] _handleError in upload "+t),this.uppy.log(e),this.getPluginState().uploadsAssemblies[t].forEach(function(e){n.activeAssemblies[e]&&n.activeAssemblies[e].close()})},y.prototype.install=function(){this.uppy.addPreProcessor(this._prepareUpload),this.uppy.addPostProcessor(this._afterUpload),this.uppy.on("error",this._handleError),this.opts.importFromUploadURLs?this.uppy.on("upload-success",this._onFileUploadURLAvailable):this.uppy.use(i,{resume:!1,useFastRemoteRetry:!1,metaFields:["assembly_url","filename","fieldname"]}),this.uppy.on("restore:get-data",this._getPersistentData),this.uppy.on("restored",this._onRestored),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]})},y.prototype.uninstall=function(){this.uppy.removePreProcessor(this._prepareUpload),this.uppy.removePostProcessor(this._afterUpload),this.uppy.off("error",this._handleError),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",this._onFileUploadURLAvailable)},y.prototype.getAssembly=function(e){return this.getPluginState().assemblies[e]},y.prototype.getAssemblyFiles=function(t){return this.uppy.getFiles().filter(function(e){return e&&e.transloadit&&e.transloadit.assembly===t})},y),t.exports.COMPANION=o,t.exports.UPPY_SERVER=o,t.exports.COMPANION_PATTERN=/\.transloadit\.com$/},{"./Assembly":144,"./AssemblyOptions":145,"./AssemblyWatcher":146,"./Client":147,"@uppy/core":96,"@uppy/tus":150,"@uppy/utils/lib/Translator":153}],149:[function(e,t,n){t.exports=function(e){var t=/^\w+:\/\//.exec(e),n=0;t&&(n=t[0].length+1);var r=e.indexOf("/",n);return-1===r?{origin:e,pathname:"/"}:{origin:e.slice(0,r),pathname:e.slice(r)}}},{}],150:[function(e,t,n){var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var r,i=e("@uppy/core").Plugin,c=e("tus-js-client"),o=e("@uppy/companion-client"),s=o.Provider,a=o.RequestClient,l=o.Socket,p=e("@uppy/utils/lib/emitSocketProgress"),h=e("@uppy/utils/lib/getSocketHost"),f=e("@uppy/utils/lib/settle"),d=e("@uppy/utils/lib/limitPromises"),m={endpoint:"",resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null};function y(r){var n=[];return{on:function(e,t){return n.push([e,t]),r.on(e,t)},remove:function(){n.forEach(function(e){var t=e[0],n=e[1];r.off(t,n)})}}}function g(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e,t));n.type="uploader",n.id="Tus",n.title="Tus";return n.opts=u({},{resume:!0,autoRetry:!0,useFastRemoteRetry:!0,limit:0,retryDelays:[0,1e3,3e3,5e3]},t),"number"==typeof n.opts.limit&&0!==n.opts.limit?n.limitUploads=d(n.opts.limit):n.limitUploads=function(e){return e},n.uploaders=Object.create(null),n.uploaderEvents=Object.create(null),n.uploaderSockets=Object.create(null),n.handleResetProgress=n.handleResetProgress.bind(n),n.handleUpload=n.handleUpload.bind(n),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,r=i),g.prototype.handleResetProgress=function(){var n=u({},this.uppy.getState().files);Object.keys(n).forEach(function(e){var t;n[e].tus&&n[e].tus.uploadUrl&&(delete(t=u({},n[e].tus)).uploadUrl,n[e]=u({},n[e],{tus:t}))}),this.uppy.setState({files:n})},g.prototype.resetUploaderReferences=function(e){this.uploaders[e]&&(this.uploaders[e].abort(),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},g.prototype.upload=function(s){var a=this;return this.resetUploaderReferences(s.id),new Promise(function(t,n){var e=u({},m,a.opts,s.tus||{});e.onError=function(e){a.uppy.log(e),a.uppy.emit("upload-error",s,e),e.message="Failed because: "+e.message,a.resetUploaderReferences(s.id),n(e)},e.onProgress=function(e,t){a.onReceiveUploadUrl(s,o.url),a.uppy.emit("upload-progress",s,{uploader:a,bytesUploaded:e,bytesTotal:t})},e.onSuccess=function(){var e={uploadURL:o.url};a.uppy.emit("upload-success",s,e),o.url&&a.uppy.log("Download "+o.file.name+" from "+o.url),a.resetUploaderReferences(s.id),t(o)};function r(e,t,n){Object.prototype.hasOwnProperty.call(e,t)&&!Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=e[t])}var i=u({},s.meta);r(i,"type","filetype"),r(i,"name","filename"),e.metadata=i;var o=new c.Upload(s.data,e);a.uploaders[s.id]=o,a.uploaderEvents[s.id]=y(a.uppy),a.onFileRemove(s.id,function(e){a.resetUploaderReferences(s.id),t("upload "+e+" was removed")}),a.onPause(s.id,function(e){e?o.abort():o.start()}),a.onPauseAll(s.id,function(){o.abort()}),a.onCancelAll(s.id,function(){a.resetUploaderReferences(s.id)}),a.onResumeAll(s.id,function(){s.error&&o.abort(),o.start()}),s.isPaused||o.start()})},g.prototype.uploadRemote=function(n){var r=this;this.resetUploaderReferences(n.id);var i=u({},this.opts,n.tus||{});return new Promise(function(e,t){if(r.uppy.log(n.remote.url),n.serverToken)return r.connectToServerSocket(n).then(function(){return e()}).catch(t);r.uppy.emit("upload-started",n),new(n.remote.providerOptions.provider?s:a)(r.uppy,n.remote.providerOptions).post(n.remote.url,u({},n.remote.body,{endpoint:i.endpoint,uploadUrl:i.uploadUrl,protocol:"tus",size:n.data.size,metadata:n.meta})).then(function(e){return r.uppy.setFileState(n.id,{serverToken:e.token}),n=r.uppy.getFile(n.id)}).then(function(e){return r.connectToServerSocket(e)}).then(function(){e()}).catch(function(e){t(new Error(e))})})},g.prototype.connectToServerSocket=function(o){var s=this;return new Promise(function(n,r){var e=o.serverToken,t=h(o.remote.serverUrl),i=new l({target:t+"/api/"+e});s.uploaderSockets[o.id]=i,s.uploaderEvents[o.id]=y(s.uppy),s.onFileRemove(o.id,function(){i.send("pause",{}),n("upload "+o.id+" was removed")}),s.onPause(o.id,function(e){e?i.send("pause",{}):i.send("resume",{})}),s.onPauseAll(o.id,function(){return i.send("pause",{})}),s.onCancelAll(o.id,function(){return i.send("pause",{})}),s.onResumeAll(o.id,function(){o.error&&i.send("pause",{}),i.send("resume",{})}),s.onRetry(o.id,function(){i.send("pause",{}),i.send("resume",{})}),s.onRetryAll(o.id,function(){i.send("pause",{}),i.send("resume",{})}),o.isPaused&&i.send("pause",{}),i.on("progress",function(e){return p(s,e,o)}),i.on("error",function(e){var t=e.error.message,n=u(new Error(t),{cause:e.error});s.opts.useFastRemoteRetry||(s.resetUploaderReferences(o.id),s.uppy.setFileState(o.id,{serverToken:null})),s.uppy.emit("upload-error",o,n),r(n)}),i.on("success",function(e){var t={uploadURL:e.url};s.uppy.emit("upload-success",o,t),s.resetUploaderReferences(o.id),n()})})},g.prototype.onReceiveUploadUrl=function(e,t){var n=this.uppy.getFile(e.id);n&&(n.tus&&n.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(n.id,{tus:u({},n.tus,{uploadUrl:t})})))},g.prototype.onFileRemove=function(t,n){this.uploaderEvents[t].on("file-removed",function(e){t===e.id&&n(e.id)})},g.prototype.onPause=function(n,r){this.uploaderEvents[n].on("upload-pause",function(e,t){n===e&&r(t)})},g.prototype.onRetry=function(t,n){this.uploaderEvents[t].on("upload-retry",function(e){t===e&&n()})},g.prototype.onRetryAll=function(t,n){var r=this;this.uploaderEvents[t].on("retry-all",function(e){r.uppy.getFile(t)&&n()})},g.prototype.onPauseAll=function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",function(){n.uppy.getFile(e)&&t()})},g.prototype.onCancelAll=function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",function(){n.uppy.getFile(e)&&t()})},g.prototype.onResumeAll=function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",function(){n.uppy.getFile(e)&&t()})},g.prototype.uploadFiles=function(i){var o=this,e=i.map(function(e,t){var n=parseInt(t,10)+1,r=i.length;return e.error?function(){return Promise.reject(new Error(e.error))}:e.isRemote?(o.uppy.emit("upload-started",e),o.uploadRemote.bind(o,e,n,r)):(o.uppy.emit("upload-started",e),o.upload.bind(o,e,n,r))}).map(function(e){return o.limitUploads(e)()});return f(e)},g.prototype.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("Tus: no files to upload!"),Promise.resolve();this.uppy.log("Tus is uploading...");var n=e.map(function(e){return t.uppy.getFile(e)});return this.uploadFiles(n).then(function(){return null})},g.prototype.install=function(){this.uppy.setState({capabilities:u({},this.uppy.getState().capabilities,{resumableUploads:!0})}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress),this.opts.autoRetry&&this.uppy.on("back-online",this.uppy.retryAll)},g.prototype.uninstall=function(){this.uppy.setState({capabilities:u({},this.uppy.getState().capabilities,{resumableUploads:!1})}),this.uppy.removeUploader(this.handleUpload),this.opts.autoRetry&&this.uppy.off("back-online",this.uppy.retryAll)},g)},{"@uppy/companion-client":94,"@uppy/core":96,"@uppy/utils/lib/emitSocketProgress":156,"@uppy/utils/lib/getSocketHost":164,"@uppy/utils/lib/limitPromises":171,"@uppy/utils/lib/settle":175,"tus-js-client":81}],151:[function(e,t,n){var r,i=e("preact"),o=i.h,s=i.Component,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,r=s),u.prototype.componentDidMount=function(){var e=this;this.input.value="",setTimeout(function(){e.input&&e.input.focus({preventScroll:!0})},150)},u.prototype.handleKeyPress=function(e){13===e.keyCode&&this.props.addFile(this.input.value)},u.prototype.handleClick=function(){this.props.addFile(this.input.value)},u.prototype.render=function(){var t=this;return o("div",{class:"uppy-Url"},o("input",{class:"uppy-c-textInput uppy-Url-input",type:"text","aria-label":this.props.i18n("enterUrlToImport"),placeholder:this.props.i18n("enterUrlToImport"),onkeyup:this.handleKeyPress,ref:function(e){t.input=e}}),o("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"button",onclick:this.handleClick},this.props.i18n("import")))},u);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,r.call(this,e));return t.handleKeyPress=t.handleKeyPress.bind(t),t.handleClick=t.handleClick.bind(t),t}t.exports=a},{preact:49}],152:[function(e,t,n){var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s,r=e("@uppy/core").Plugin,a=e("@uppy/utils/lib/Translator"),u=e("preact").h,c=e("@uppy/companion-client").RequestClient,i=e("./UrlUI.js"),l=e("@uppy/utils/lib/toArray");function p(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t));n.id=n.opts.id||"Url",n.title=n.opts.title||"Link",n.type="acquirer",n.icon=function(){return u("svg",{"aria-hidden":"true",width:"23",height:"23",viewBox:"0 0 23 23",xmlns:"http://www.w3.org/2000/svg"},u("path",{d:"M20.485 11.236l-2.748 2.737c-.184.182-.367.365-.642.547-1.007.73-2.107 1.095-3.298 1.095-1.65 0-3.298-.73-4.398-2.19-.275-.365-.183-1.003.183-1.277.367-.273 1.008-.182 1.283.183 1.191 1.642 3.482 1.915 5.13.73a.714.714 0 0 0 .367-.365l2.75-2.737c1.373-1.46 1.373-3.74-.093-5.108a3.72 3.72 0 0 0-5.13 0L12.33 6.4a.888.888 0 0 1-1.283 0 .88.88 0 0 1 0-1.277l1.558-1.55a5.38 5.38 0 0 1 7.605 0c2.29 2.006 2.382 5.564.274 7.662zm-8.979 6.294L9.95 19.081a3.72 3.72 0 0 1-5.13 0c-1.467-1.368-1.467-3.74-.093-5.108l2.75-2.737.366-.365c.824-.547 1.74-.82 2.748-.73 1.008.183 1.833.639 2.382 1.46.275.365.917.456 1.283.182.367-.273.458-.912.183-1.277-.916-1.186-2.199-1.915-3.573-2.098-1.374-.273-2.84.091-4.031 1.004l-.55.547-2.749 2.737c-2.107 2.189-2.015 5.655.092 7.753C4.727 21.453 6.101 22 7.475 22c1.374 0 2.749-.547 3.848-1.55l1.558-1.551a.88.88 0 0 0 0-1.278c-.367-.364-1.008-.456-1.375-.09z",fill:"#FF814F","fill-rule":"nonzero"}))};var r={strings:{import:"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it’s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}},i={locale:r};if(n.opts=o({},i,t),n.translator=new a([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n.hostname=n.opts.serverUrl,!n.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");return n.getMeta=n.getMeta.bind(n),n.addFile=n.addFile.bind(n),n.handleDrop=n.handleDrop.bind(n),n.handleDragOver=n.handleDragOver.bind(n),n.handleDragLeave=n.handleDragLeave.bind(n),n.handlePaste=n.handlePaste.bind(n),n.client=new c(e,{serverUrl:n.opts.serverUrl,serverHeaders:n.opts.serverHeaders}),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,s=r),p.prototype.getFileNameFromUrl=function(e){return e.substring(e.lastIndexOf("/")+1)},p.prototype.checkIfCorrectURL=function(e){if(!e)return!1;var t=e.match(/^([a-z0-9]+):\/\//)[1];return"http"===t||"https"===t},p.prototype.addProtocolToURL=function(e){return/^[a-z0-9]+:\/\//.test(e)?e:"http://"+e},p.prototype.getMeta=function(e){var t=this;return this.client.post("url/meta",{url:e}).then(function(e){if(e.error)throw t.uppy.log("[URL] Error:"),t.uppy.log(e.error),new Error("Failed to fetch the file");return e})},p.prototype.addFile=function(t){var n=this;return t=this.addProtocolToURL(t),this.checkIfCorrectURL(t)?this.getMeta(t).then(function(e){return{source:n.id,name:n.getFileNameFromUrl(t),type:e.type,data:{size:e.size},isRemote:!0,body:{url:t},remote:{serverUrl:n.opts.serverUrl,url:n.hostname+"/url/get",body:{fileId:t,url:t},providerOptions:n.client.opts}}}).then(function(e){n.uppy.log("[Url] Adding remote file");try{n.uppy.addFile(e)}catch(e){}}).then(function(){}).catch(function(e){n.uppy.log(e),n.uppy.info({message:n.i18n("failedToFetch"),details:e},"error",4e3)}):(this.uppy.log("[URL] Incorrect URL entered: "+t),void this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3))},p.prototype.handleDrop=function(e){var t=this;e.preventDefault(),e.dataTransfer.items&&l(e.dataTransfer.items).forEach(function(e){"string"===e.kind&&"text/uri-list"===e.type&&e.getAsString(function(e){t.uppy.log("[URL] Adding file from dropped url: "+e),t.addFile(e)})})},p.prototype.handleDragOver=function(e){e.preventDefault(),this.el.classList.add("drag")},p.prototype.handleDragLeave=function(e){e.preventDefault(),this.el.classList.remove("drag")},p.prototype.handlePaste=function(e){var t,n=this;e.clipboardData.items&&(0<(t=l(e.clipboardData.items)).filter(function(e){return"file"===e.kind}).length||t.forEach(function(e){"string"===e.kind&&"text/plain"===e.type&&e.getAsString(function(e){n.uppy.log("[URL] Adding file from pasted url: "+e),n.addFile(e)})}))},p.prototype.render=function(){return u(i,{i18n:this.i18n,addFile:this.addFile})},p.prototype.onMount=function(){this.el&&(this.el.addEventListener("drop",this.handleDrop),this.el.addEventListener("dragover",this.handleDragOver),this.el.addEventListener("dragleave",this.handleDragLeave),this.el.addEventListener("paste",this.handlePaste))},p.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},p.prototype.uninstall=function(){this.el&&(this.el.removeEventListener("drop",this.handleDrop),this.el.removeEventListener("dragover",this.handleDragOver),this.el.removeEventListener("dragleave",this.handleDragLeave),this.el.removeEventListener("paste",this.handlePaste)),this.unmount()},p)},{"./UrlUI.js":151,"@uppy/companion-client":94,"@uppy/core":96,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/toArray":176,preact:49}],153:[function(e,t,n){var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.locale={strings:{},pluralize:function(e){return 1===e?0:1}},Array.isArray(e)?e.forEach(function(e){return t._apply(e)}):this._apply(e)}t.exports=(i.prototype._apply=function(e){var t;e&&e.strings&&(t=this.locale,this.locale=r({},t,{strings:r({},t.strings,e.strings)}),this.locale.pluralize=e.pluralize||t.pluralize)},i.prototype.interpolate=function(e,t){var n,r=String.prototype,o=r.split,i=r.replace,s=/\$/g,a=[e];for(var u in t){"_"!==u&&t.hasOwnProperty(u)&&("string"==typeof(n=t[u])&&(n=i.call(t[u],s,"$$$$")),a=function(e,t,r){var i=[];return e.forEach(function(e){o.call(e,t).forEach(function(e,t,n){""!==e&&i.push(e),t<n.length-1&&i.push(r)})}),i}(a,new RegExp("%\\{"+u+"\\}","g"),n))}return a},i.prototype.translate=function(e,t){return this.translateArray(e,t).join("")},i.prototype.translateArray=function(e,t){if(t&&void 0!==t.smart_count){var n=this.locale.pluralize(t.smart_count);return this.interpolate(this.locale.strings[e][n],t)}return this.interpolate(this.locale.strings[e],t)},i)},{}],154:[function(e,t,n){var i=e("./dataURItoBlob");t.exports=function(t,n,r){return t.toBlob?new Promise(function(e){t.toBlob(e,n,r)}):Promise.resolve().then(function(){return i(t.toDataURL(n,r),{})})}},{"./dataURItoBlob":155}],155:[function(e,t,n){t.exports=function(e,t,n){var r=e.split(",")[1],i=t.mimeType||e.split(",")[0].split(":")[1].split(";")[0];null==i&&(i="plain/text");for(var o=atob(r),s=[],a=0;a<o.length;a++)s.push(o.charCodeAt(a));return n?new File([new Uint8Array(s)],t.name||"",{type:i}):new Blob([new Uint8Array(s)],{type:i})}},{}],156:[function(e,t,n){var r=e("lodash.throttle");t.exports=r(function(e,t,n){var r=t.progress,i=t.bytesUploaded,o=t.bytesTotal;r&&(e.uppy.log("Upload progress: "+r),e.uppy.emit("upload-progress",n,{uploader:e,bytesUploaded:i,bytesTotal:o}))},300,{leading:!0,trailing:!0})},{"lodash.throttle":43}],157:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./isDOMElement");t.exports=function(e){if("string"==typeof e){var t=[].slice.call(document.querySelectorAll(e));return 0<t.length?t:null}if("object"===(void 0===e?"undefined":r(e))&&i(e))return[e]}},{"./isDOMElement":167}],158:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=e("./isDOMElement");t.exports=function(e,t){return"string"==typeof e?(1<arguments.length&&void 0!==t?t:document).querySelector(e):"object"===(void 0===e?"undefined":r(e))&&i(e)?e:void 0}},{"./isDOMElement":167}],159:[function(e,t,n){t.exports=function(e){return["uppy",e.name?e.name.toLowerCase().replace(/[^A-Z0-9]/gi,""):"",e.type,e.data.size,e.data.lastModified].filter(function(e){return e}).join("-")}},{}],160:[function(e,t,n){t.exports=function(e){return e.bytesTotal-e.bytesUploaded}},{}],161:[function(e,t,n){t.exports=function(e){var t=/(?:\.([^.]+))?$/.exec(e)[1];return{name:e.replace("."+t,""),extension:t}}},{}],162:[function(e,t,n){var r=e("./getFileNameAndExtension"),i=e("./mimeTypes");t.exports=function(e){var t=(t=e.name?r(e.name).extension:null)?t.toLowerCase():null;return e.isRemote?e.type?e.type:i[t]:e.type?e.type:t&&i[t]?i[t]:"application/octet-stream"}},{"./getFileNameAndExtension":161,"./mimeTypes":172}],163:[function(e,t,n){var r={"video/ogg":"ogv","audio/ogg":"ogg","video/webm":"webm","audio/webm":"webm","video/x-matroska":"mkv","video/mp4":"mp4","audio/mp3":"mp3"};t.exports=function(e){return e=e.replace(/;.*$/,""),r[e]||null}},{}],164:[function(e,t,n){t.exports=function(e){var t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/.exec(e)[1];return("https:"===location.protocol?"wss":"ws")+"://"+t}},{}],165:[function(e,t,n){t.exports=function(e){if(!e.bytesUploaded)return 0;var t=new Date-e.uploadStarted;return e.bytesUploaded/(t/1e3)}},{}],166:[function(e,t,n){function r(e){return 2!==e.length?0+e:e}t.exports=function(){var e=new Date;return r(e.getHours().toString())+":"+r(e.getMinutes().toString())+":"+r(e.getSeconds().toString())}},{}],167:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e){return e&&"object"===(void 0===e?"undefined":r(e))&&e.nodeType===Node.ELEMENT_NODE}},{}],168:[function(e,t,n){t.exports=function(e){return 0===e.indexOf("blob:")}},{}],169:[function(e,t,n){t.exports=function(e){if(!e)return!1;var t=e.split("/")[1];return!!/^(jpe?g|gif|png|svg|svg\+xml|bmp)$/.test(t)}},{}],170:[function(e,t,n){t.exports=function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{}],171:[function(e,t,n){t.exports=function(o){var s=0,a=[];return function(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){s++;var e=i.apply(void 0,t);return e.then(u,u),e}return o<=s?new Promise(function(e,t){a.push(function(){r().then(e,t)})}):r()}};function u(){s--;var e=a.shift();e&&e()}}},{}],172:[function(e,t,n){t.exports={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel"}},{}],173:[function(e,t,n){var i=e("./secondsToTime");t.exports=function(e){var t=i(e),n=t.hours?t.hours+"h ":"",r=t.hours?("0"+t.minutes).substr(-2):t.minutes;return n+(r?r+"m ":"")+((r?("0"+t.seconds).substr(-2):t.seconds)+"s")}},{"./secondsToTime":174}],174:[function(e,t,n){t.exports=function(e){return{hours:Math.floor(e/3600)%24,minutes:Math.floor(e/60)%60,seconds:Math.floor(e%60)}}},{}],175:[function(e,t,n){t.exports=function(e){var t=[],n=[];function r(e){t.push(e)}function i(e){n.push(e)}return Promise.all(e.map(function(e){return e.then(r,i)})).then(function(){return{successful:t,failed:n}})}},{}],176:[function(e,t,n){t.exports=function(e){return Array.prototype.slice.call(e||[],0)}},{}],177:[function(e,t,n){var r=e("preact").h;t.exports=function(e){return r("svg",{"aria-hidden":"true",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z","fill-rule":"evenodd"}))}},{preact:49}],178:[function(e,t,n){var r=e("preact"),i=r.h,o=r.Component,s=e("./SnapshotButton"),a=e("./RecordButton");function u(e,t){return-1!==e.indexOf(t)}var c,l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,c=o),p.prototype.componentDidMount=function(){this.props.onFocus(),this.btnContainer.firstChild.focus()},p.prototype.componentWillUnmount=function(){this.props.onStop()},p.prototype.render=function(){var t=this,e=this.props.supportsRecording&&(u(this.props.modes,"video-only")||u(this.props.modes,"audio-only")||u(this.props.modes,"video-audio")),n=u(this.props.modes,"picture");return i("div",{class:"uppy uppy-Webcam-container"},i("div",{class:"uppy-Webcam-videoContainer"},i("video",{class:"uppy-Webcam-video  "+(this.props.mirror?"uppy-Webcam-video--mirrored":""),autoplay:!0,muted:!0,playsinline:!0,srcObject:this.props.src||""})),i("div",{class:"uppy-Webcam-buttonContainer",ref:function(e){t.btnContainer=e}},n?s(this.props):null," ",e?a(this.props):null))},p);function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,c.apply(this,arguments))}t.exports=l},{"./RecordButton":180,"./SnapshotButton":181,preact:49}],179:[function(e,t,n){var r=e("preact").h;t.exports=function(e){return r("div",{class:"uppy-Webcam-permissons"},r("div",{class:"uppy-Webcam-permissonsIcon"},e.icon()),r("h1",{class:"uppy-Webcam-title"},e.i18n("allowAccessTitle")),r("p",null,e.i18n("allowAccessDescription")))}},{preact:49}],180:[function(e,t,n){var o=e("preact").h;t.exports=function(e){var t=e.recording,n=e.onStartRecording,r=e.onStopRecording,i=e.i18n;return console.log("is recording",t),t?o("button",{class:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:i("stopRecording"),"aria-label":i("stopRecording"),onclick:r},o("svg",{"aria-hidden":"true",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},o("rect",{x:"15",y:"15",width:"70",height:"70"}))):o("button",{class:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:i("startRecording"),"aria-label":i("startRecording"),onclick:n},o("svg",{"aria-hidden":"true",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},o("circle",{cx:"50",cy:"50",r:"40"})))}},{preact:49}],181:[function(e,t,n){var r=e("preact").h,i=e("./CameraIcon");t.exports=function(e){var t=e.onSnapshot,n=e.i18n;return r("button",{class:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:n("takePicture"),"aria-label":n("takePicture"),onclick:t},i())}},{"./CameraIcon":177,preact:49}],182:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s,i=e("preact").h,a=e("@uppy/core").Plugin,u=e("@uppy/utils/lib/Translator"),c=e("@uppy/utils/lib/getFileTypeExtension"),l=e("@uppy/utils/lib/canvasToBlob"),p=e("./supportsMediaRecorder"),h=e("./CameraIcon"),f=e("./CameraScreen"),d=e("./PermissionsScreen");function m(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e,t));n.mediaDevices=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var r=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return r?{getUserMedia:function(n){return new Promise(function(e,t){r.call(navigator,n,e,t)})}}:null}(),n.supportsUserMedia=!!n.mediaDevices,n.protocol=location.protocol.match(/https/i)?"https":"http",n.id=n.opts.id||"Webcam",n.title=n.opts.title||"Camera",n.type="acquirer",n.icon=h;var r={strings:{smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}},i={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,locale:r,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,facingMode:"user"};return n.opts=o({},i,t),n.translator=new u([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n.install=n.install.bind(n),n.setPluginState=n.setPluginState.bind(n),n.render=n.render.bind(n),n.start=n.start.bind(n),n.stop=n.stop.bind(n),n.takeSnapshot=n.takeSnapshot.bind(n),n.startRecording=n.startRecording.bind(n),n.stopRecording=n.stopRecording.bind(n),n.oneTwoThreeSmile=n.oneTwoThreeSmile.bind(n),n.focus=n.focus.bind(n),n.webcamActive=!1,n.opts.countdown&&(n.opts.onBeforeSnapshot=n.oneTwoThreeSmile),n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,s=a),m.prototype.isSupported=function(){return!!this.mediaDevices},m.prototype.getConstraints=function(){return{audio:-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),video:(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture"))&&{facingMode:this.opts.facingMode}}},m.prototype.start=function(){var t=this;if(!this.isSupported())return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0;var e=this.getConstraints();return this.mediaDevices.getUserMedia(e).then(function(e){t.stream=e,t.setPluginState({cameraReady:!0})}).catch(function(e){t.setPluginState({cameraError:e})})},m.prototype.startRecording=function(){var t=this;this.recorder=new MediaRecorder(this.stream),this.recordingChunks=[],this.recorder.addEventListener("dataavailable",function(e){t.recordingChunks.push(e.data)}),this.recorder.start(),this.setPluginState({isRecording:!0})},m.prototype.stopRecording=function(){var n=this;return new Promise(function(e,t){n.recorder.addEventListener("stop",function(){e()}),n.recorder.stop()}).then(function(){return n.setPluginState({isRecording:!1}),n.getVideo()}).then(function(e){try{n.uppy.addFile(e)}catch(e){}}).then(function(){n.recordingChunks=null,n.recorder=null},function(e){throw n.recordingChunks=null,n.recorder=null,e})},m.prototype.stop=function(){this.stream.getAudioTracks().forEach(function(e){e.stop()}),this.stream.getVideoTracks().forEach(function(e){e.stop()}),this.webcamActive=!1,this.stream=null},m.prototype.getVideoElement=function(){return this.el.querySelector(".uppy-Webcam-video")},m.prototype.oneTwoThreeSmile=function(){var i=this;return new Promise(function(e,t){var n=i.opts.countdown,r=setInterval(function(){return i.webcamActive?void(0<n?(i.uppy.info(n+"...","warning",800),n--):(clearInterval(r),i.uppy.info(i.i18n("smile"),"success",1500),setTimeout(function(){return e()},1500))):(clearInterval(r),i.captureInProgress=!1,t(new Error("Webcam is not active")))},1e3)})},m.prototype.takeSnapshot=function(){var n=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(e){var t="object"===(void 0===e?"undefined":r(e))?e.message:e;return n.uppy.info(t,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: "+t))}).then(function(){return n.getImage()}).then(function(e){n.captureInProgress=!1;try{n.uppy.addFile(e)}catch(e){}},function(e){throw n.captureInProgress=!1,e}))},m.prototype.getImage=function(){var t=this,e=this.getVideoElement();if(!e)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var n="webcam-"+Date.now()+".jpg",r="image/jpeg",i=e.videoWidth,o=e.videoHeight,s=document.createElement("canvas");return s.width=i,s.height=o,s.getContext("2d").drawImage(e,0,0),l(s,r).then(function(e){return{source:t.id,name:n,data:new Blob([e],{type:r}),type:r}})},m.prototype.getVideo=function(){var e=this.recordingChunks[0].type,t=c(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'+e+'"'));var n="webcam-"+Date.now()+"."+t,r=new Blob(this.recordingChunks,{type:e}),i={source:this.id,name:n,data:new Blob([r],{type:e}),type:e};return Promise.resolve(i)},m.prototype.focus=function(){var e=this;this.opts.countdown||setTimeout(function(){e.uppy.info(e.i18n("smile"),"success",1500)},1e3)},m.prototype.render=function(){this.webcamActive||this.start();var e=this.getPluginState();return e.cameraReady?i(f,o({},e,{onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,supportsRecording:p(),recording:e.isRecording,mirror:this.opts.mirror,src:this.stream})):i(d,{icon:h,i18n:this.i18n})},m.prototype.install=function(){this.setPluginState({cameraReady:!1});var e=this.opts.target;e&&this.mount(e,this)},m.prototype.uninstall=function(){this.stream&&this.stop(),this.unmount()},m)},{"./CameraIcon":177,"./CameraScreen":178,"./PermissionsScreen":179,"./supportsMediaRecorder":183,"@uppy/core":96,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/canvasToBlob":154,"@uppy/utils/lib/getFileTypeExtension":163,preact:49}],183:[function(e,t,n){t.exports=function(){return"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start}},{}],184:[function(e,t,n){var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var o,r=e("@uppy/core").Plugin,i=e("cuid"),s=e("@uppy/utils/lib/Translator"),a=e("@uppy/companion-client"),l=a.Provider,p=a.Socket,h=e("@uppy/utils/lib/emitSocketProgress"),f=e("@uppy/utils/lib/getSocketHost"),u=e("@uppy/utils/lib/settle"),d=e("@uppy/utils/lib/limitPromises");function m(e,t){return"string"==typeof(t=t||new Error("Upload error"))&&(t=new Error(t)),t instanceof Error||(t=c(new Error("Upload error"),{data:t})),t.request=e,t}function y(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e,t));n.type="uploader",n.id="XHRUpload";var r={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}},i={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!(n.title="XHRUpload"),headers:{},locale:r,timeout:3e4,limit:0,withCredentials:!1,responseType:"",getResponseData:function(e){var t={};try{t=JSON.parse(e)}catch(e){console.log(e)}return t},getResponseError:function(){return new Error("Upload error")}};if(n.opts=c({},i,t),n.translator=new s([r,n.uppy.locale,n.opts.locale]),n.i18n=n.translator.translate.bind(n.translator),n.i18nArray=n.translator.translateArray.bind(n.translator),n.handleUpload=n.handleUpload.bind(n),"number"==typeof n.opts.limit&&0!==n.opts.limit?n.limitUploads=d(n.opts.limit):n.limitUploads=function(e){return e},n.opts.bundle&&!n.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");return n}t.exports=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,o=r),y.prototype.getOptions=function(e){var t=this.uppy.getState().xhrUpload,n=c({},this.opts,t||{},e.xhrUpload||{});return n.headers={},c(n.headers,this.opts.headers),t&&c(n.headers,t.headers),e.xhrUpload&&c(n.headers,e.xhrUpload.headers),n},y.prototype.createProgressTimeout=function(t,n){var r=this.uppy,i=this,e=!1;function o(){r.log("[XHRUpload] timed out");var e=new Error(i.i18n("timedOut",{seconds:Math.ceil(t/1e3)}));n(e)}var s=null;return{progress:function(){e||0<t&&(s&&clearTimeout(s),s=setTimeout(o,t))},done:function(){r.log("[XHRUpload] timer done"),s&&(clearTimeout(s),s=null),e=!0}}},y.prototype.createFormDataUpload=function(t,e){var n=new FormData;return(Array.isArray(e.metaFields)?e.metaFields:Object.keys(t.meta)).forEach(function(e){n.append(e,t.meta[e])}),t.name?n.append(e.fieldName,t.data,t.name):n.append(e.fieldName,t.data),n},y.prototype.createBareUpload=function(e){return e.data},y.prototype.upload=function(h,e,t){var f=this,d=this.getOptions(h);return this.uppy.log("uploading "+e+" of "+t),new Promise(function(a,u){var e=d.formData?f.createFormDataUpload(h,d):f.createBareUpload(h,d),c=f.createProgressTimeout(d.timeout,function(e){l.abort(),f.uppy.emit("upload-error",h,e),u(e)}),l=new XMLHttpRequest,p=i();l.upload.addEventListener("loadstart",function(e){f.uppy.log("[XHRUpload] "+p+" started")}),l.upload.addEventListener("progress",function(e){f.uppy.log("[XHRUpload] "+p+" progress: "+e.loaded+" / "+e.total),c.progress(),e.lengthComputable&&f.uppy.emit("upload-progress",h,{uploader:f,bytesUploaded:e.loaded,bytesTotal:e.total})}),l.addEventListener("load",function(e){if(f.uppy.log("[XHRUpload] "+p+" finished"),c.done(),200<=e.target.status&&e.target.status<300){var t=d.getResponseData(l.responseText,l),n=t[d.responseUrlFieldName],r={status:e.target.status,body:t,uploadURL:n};return f.uppy.emit("upload-success",h,r),n&&f.uppy.log("Download "+h.name+" from "+h.uploadURL),a(h)}var i=d.getResponseData(l.responseText,l),o=m(l,d.getResponseError(l.responseText,l)),s={status:e.target.status,body:i};return f.uppy.emit("upload-error",h,o,s),u(o)}),l.addEventListener("error",function(e){f.uppy.log("[XHRUpload] "+p+" errored"),c.done();var t=m(l,d.getResponseError(l.responseText,l));return f.uppy.emit("upload-error",h,t),u(t)}),l.open(d.method.toUpperCase(),d.endpoint,!0),l.withCredentials=d.withCredentials,""!==d.responseType&&(l.responseType=d.responseType),Object.keys(d.headers).forEach(function(e){l.setRequestHeader(e,d.headers[e])}),l.send(e),f.uppy.on("file-removed",function(e){e.id===h.id&&(c.done(),l.abort())}),f.uppy.on("cancel-all",function(){c.done(),l.abort()})})},y.prototype.uploadRemote=function(s){var a=this,u=this.getOptions(s);return new Promise(function(o,r){var t={};(Array.isArray(u.metaFields)?u.metaFields:Object.keys(s.meta)).forEach(function(e){t[e]=s.meta[e]}),new l(a.uppy,s.remote.providerOptions).post(s.remote.url,c({},s.remote.body,{endpoint:u.endpoint,size:s.data.size,fieldname:u.fieldName,metadata:t,headers:u.headers})).then(function(e){var t=e.token,n=f(s.remote.serverUrl),i=new p({target:n+"/api/"+t});i.on("progress",function(e){return h(a,e,s)}),i.on("success",function(e){var t=u.getResponseData(e.response.responseText,e.response),n=t[u.responseUrlFieldName],r={status:e.response.status,body:t,uploadURL:n};return a.uppy.emit("upload-success",s,r),i.close(),o()}),i.on("error",function(e){var t=e.response,n=t?u.getResponseError(t.responseText,t):c(new Error(e.error.message),{cause:e.error});a.uppy.emit("upload-error",s,n),r(n)})})})},y.prototype.uploadBundle=function(c){var l=this;return new Promise(function(i,o){var e=l.opts.endpoint,t=l.opts.method,r=new FormData;c.forEach(function(e,t){var n=l.getOptions(e);r.append(n.fieldName,e.data)});var s=new XMLHttpRequest,a=l.createProgressTimeout(l.opts.timeout,function(e){s.abort(),u(e),o(e)}),u=function(t){c.forEach(function(e){l.uppy.emit("upload-error",e,t)})};s.upload.addEventListener("loadstart",function(e){l.uppy.log("[XHRUpload] started uploading bundle"),a.progress()}),s.upload.addEventListener("progress",function(t){a.progress(),t.lengthComputable&&c.forEach(function(e){l.uppy.emit("upload-progress",e,{uploader:l,bytesUploaded:t.loaded/t.total*e.size,bytesTotal:e.size})})}),s.addEventListener("load",function(e){if(a.done(),200<=e.target.status&&e.target.status<300){var t=l.opts.getResponseData(s.responseText,s),n={status:e.target.status,body:t};return c.forEach(function(e){l.uppy.emit("upload-success",e,n)}),i()}var r=l.opts.getResponseError(s.responseText,s)||new Error("Upload error");return r.request=s,u(r),o(r)}),s.addEventListener("error",function(e){a.done();var t=l.opts.getResponseError(s.responseText,s)||new Error("Upload error");return u(t),o(t)}),l.uppy.on("cancel-all",function(){a.done(),s.abort()}),s.open(t.toUpperCase(),e,!0),s.withCredentials=l.opts.withCredentials,""!==l.opts.responseType&&(s.responseType=l.opts.responseType),Object.keys(l.opts.headers).forEach(function(e){s.setRequestHeader(e,l.opts.headers[e])}),s.send(r),c.forEach(function(e){l.uppy.emit("upload-started",e)})})},y.prototype.uploadFiles=function(i){var o=this,e=i.map(function(e,t){var n=parseInt(t,10)+1,r=i.length;return e.error?function(){return Promise.reject(new Error(e.error))}:e.isRemote?(o.uppy.emit("upload-started",e),o.uploadRemote.bind(o,e,n,r)):(o.uppy.emit("upload-started",e),o.upload.bind(o,e,n,r))}).map(function(e){return o.limitUploads(e)()});return u(e)},y.prototype.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("[XHRUpload] No files to upload!"),Promise.resolve();this.uppy.log("[XHRUpload] Uploading...");var n=e.map(function(e){return t.uppy.getFile(e)});return this.opts.bundle?this.uploadBundle(n):this.uploadFiles(n).then(function(){return null})},y.prototype.install=function(){this.opts.bundle&&this.uppy.setState({capabilities:c({},this.uppy.getState().capabilities,{bundled:!0})}),this.uppy.addUploader(this.handleUpload)},y.prototype.uninstall=function(){this.opts.bundle&&this.uppy.setState({capabilities:c({},this.uppy.getState().capabilities,{bundled:!0})}),this.uppy.removeUploader(this.handleUpload)},y)},{"@uppy/companion-client":94,"@uppy/core":96,"@uppy/utils/lib/Translator":153,"@uppy/utils/lib/emitSocketProgress":156,"@uppy/utils/lib/getSocketHost":164,"@uppy/utils/lib/limitPromises":171,"@uppy/utils/lib/settle":175,cuid:13}],185:[function(e,t,n){e("es6-promise/auto"),e("whatwg-fetch"),t.exports=e("./")},{"./":186,"es6-promise/auto":33,"whatwg-fetch":85}],186:[function(e,t,n){n.Core=e("@uppy/core"),n.server=e("@uppy/companion-client"),n.views={ProviderView:e("@uppy/provider-views")},n.DefaultStore=e("@uppy/store-default"),n.ReduxStore=e("@uppy/store-redux"),n.Dashboard=e("@uppy/dashboard"),n.DragDrop=e("@uppy/drag-drop"),n.FileInput=e("@uppy/file-input"),n.Informer=e("@uppy/informer"),n.ProgressBar=e("@uppy/progress-bar"),n.StatusBar=e("@uppy/status-bar"),n.Dropbox=e("@uppy/dropbox"),n.GoogleDrive=e("@uppy/google-drive"),n.Instagram=e("@uppy/instagram"),n.Url=e("@uppy/url"),n.Webcam=e("@uppy/webcam"),n.AwsS3=e("@uppy/aws-s3"),n.AwsS3Multipart=e("@uppy/aws-s3-multipart"),n.Transloadit=e("@uppy/transloadit"),n.Tus=e("@uppy/tus"),n.XHRUpload=e("@uppy/xhr-upload"),n.Form=e("@uppy/form"),n.GoldenRetriever=e("@uppy/golden-retriever"),n.ReduxDevTools=e("@uppy/redux-dev-tools"),n.ThumbnailGenerator=e("@uppy/thumbnail-generator")},{"@uppy/aws-s3":90,"@uppy/aws-s3-multipart":89,"@uppy/companion-client":94,"@uppy/core":96,"@uppy/dashboard":110,"@uppy/drag-drop":115,"@uppy/dropbox":116,"@uppy/file-input":117,"@uppy/form":118,"@uppy/golden-retriever":122,"@uppy/google-drive":124,"@uppy/informer":125,"@uppy/instagram":126,"@uppy/progress-bar":127,"@uppy/provider-views":136,"@uppy/redux-dev-tools":137,"@uppy/status-bar":140,"@uppy/store-default":141,"@uppy/store-redux":142,"@uppy/thumbnail-generator":143,"@uppy/transloadit":148,"@uppy/tus":150,"@uppy/url":152,"@uppy/webcam":182,"@uppy/xhr-upload":184}]},{},[185])(185)},window.Mango.Uppy=kKa()}(window,document,window.Mango=window.Mango||{}),function(c){"use strict";c.Mango.VMasker=function(){var r="9",i="A",o="S",s=[9,16,17,18,36,37,38,39,40,91,92,93],a=function(e){for(var t=0,n=s.length;t<n;t++){if(e==s[t]){return false}}return true},v=function(e){e=e||{};e={precision:e.hasOwnProperty("precision")?e.precision:2,separator:e.separator||",",delimiter:e.delimiter||".",unit:e.unit&&e.unit.replace(/[\s]/g,"")+" "||"",suffixUnit:e.suffixUnit&&" "+e.suffixUnit.replace(/[\s]/g,"")||"",zeroCents:e.zeroCents,lastOutput:e.lastOutput};e.moneyPrecision=e.zeroCents?0:e.precision;return e},p=function(e,t,n){for(;t<e.length;t++){if(e[t]===r||e[t]===i||e[t]===o){e[t]=n}}return e},n=function(e){this.elements=e};n.prototype.unbindElementToMask=function(){for(var e=0,t=this.elements.length;e<t;e++){this.elements[e].lastOutput="";this.elements[e].onkeyup=false;this.elements[e].onkeydown=false;if(this.elements[e].value.length){this.elements[e].value=this.elements[e].value.replace(/\D/g,"")}}},n.prototype.bindElementToMask=function(n){var r=this,e=function(e){e=e||c.event;var t=e.target||e.srcElement;if(a(e.keyCode)){setTimeout(function(){r.opts.lastOutput=t.lastOutput;t.value=u[n](t.value,r.opts);t.lastOutput=t.value;if(t.setSelectionRange&&r.opts.suffixUnit){t.setSelectionRange(t.value.length,t.value.length-r.opts.suffixUnit.length)}},0)}};for(var t=0,i=this.elements.length;t<i;t++){this.elements[t].lastOutput="";this.elements[t].onkeyup=e;if(this.elements[t].value.length){this.elements[t].value=u[n](this.elements[t].value,this.opts)}}},n.prototype.maskMoney=function(e){this.opts=v(e);this.bindElementToMask("toMoney")},n.prototype.maskNumber=function(){this.opts={};this.bindElementToMask("toNumber")},n.prototype.maskAlphaNum=function(){this.opts={};this.bindElementToMask("toAlphaNumeric")},n.prototype.maskPattern=function(e){this.opts={pattern:e};this.bindElementToMask("toPattern")},n.prototype.unMask=function(){this.unbindElementToMask()};var u=function(e){if(!e){throw new Error("VanillaMasker: There is no element to bind.")}var t="length"in e?e.length?e:[]:[e];return new n(t)};return u.toMoney=function(e,t){var n,r,i,o;(t=v(t)).zeroCents&&(t.lastOutput=t.lastOutput||"",n="("+t.separator+"[0]{0,"+t.precision+"})",r=new RegExp(n,"g"),i=e.toString().replace(/[\D]/g,"").length||0,o=t.lastOutput.toString().replace(/[\D]/g,"").length||0,e=e.toString().replace(r,""),i<o&&(e=e.slice(0,e.length-1)));for(var s,a,u,c,l=e.toString().replace(/[\D]/g,""),p=new RegExp("^(0|\\"+t.delimiter+")"),h=new RegExp("(\\"+t.separator+")$"),f=l.substr(0,l.length-t.moneyPrecision),d=f.substr(0,f.length%3),m=new Array(t.precision+1).join("0"),y=0,g=(f=f.substr(f.length%3,f.length)).length;y<g;y++)y%3==0&&(d+=t.delimiter),d+=f[y];return d=(d=d.replace(p,"")).length?d:"0",t.zeroCents||(s=l.length-t.precision,u=(a=l.substr(s,t.precision)).length,c=t.precision>u?t.precision:u,m=(m+a).slice(-c)),(t.unit+d+t.separator+m+t.suffixUnit).replace(h,"")},u.toPattern=function(e,t){for(var n="object"==typeof t?t.pattern:t,r=n.replace(/\W/g,""),i=n.split(""),o=e.toString().replace(/\W/g,""),s=o.replace(/\W/g,""),a=0,u=i.length,c="object"==typeof t?t.placeholder:void 0,l=0;l<u;l++){if(a>=o.length){if(r.length==s.length)return i.join("");if(void 0!==c&&r.length>s.length)return p(i,l,c).join("");break}if("9"===i[l]&&o[a].match(/[0-9]/)||"A"===i[l]&&o[a].match(/[a-zA-Z]/)||"S"===i[l]&&o[a].match(/[0-9a-zA-Z]/))i[l]=o[a++];else if("9"===i[l]||"A"===i[l]||"S"===i[l])return void 0!==c?p(i,l,c).join(""):i.slice(0,l).join("")}return i.join("").substr(0,l)},u.toNumber=function(e){return e.toString().replace(/(?!^-)[^0-9]/g,"")},u.toAlphaNumeric=function(e){return e.toString().replace(/[^a-z0-9 ]+/i,"")},u}()}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._,e.Promise;e.ClientConfig={calltrackingHost:"dct.mango-office.ru",umaHost:"uma.mango-office.ru",emtHost:"emt.mango-office.ru",callbackHost:"widgets.mango-office.ru",multichannelHost:"mcw.mango-office.ru",multichannelStaticHost:"widgets-mcw.mango-office.ru",pushStreamModuleHost:"mcw.mango-office.ru",fs4talkHost:"chatfs.mango-office.ru"},e.version="20.39"}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";var r=e.$;e._,e.Promise;e.Common=e.Common||{},e.Common.Http=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return r.ajax({type:"GET",url:e,data:n,dataType:"jsonp",jsonpCallback:"mgo"+(new Date).getTime(),cache:!1})}},{key:"getJson",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return r.ajax({type:"GET",url:e,data:n,dataType:"json"})}},{key:"postJson",value:function(e,t){return r.ajax({type:"POST",global:!1,url:e,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t)})}},{key:"sendGet",value:function(e,t){return r.ajax({type:"GET",url:e,global:!1,data:t})}},{key:"handleResponse",value:function(e,n,r){return e.then(function(e){var t=e.data;return e.error?n(r):n(t)},function(e){return n(r)})}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(t,y){"use strict";y.$,y._,y.Promise;y.Common=y.Common||{};var g="mgo_sid",i="mgo_cnt",o=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=parseInt("x00",36);function r(e,t,n){for(var r=2<arguments.length&&void 0!==n?n:" ";e.length<t;)e+=r;return e}y.Common.Session=function(){function e(){_classCallCheck(this,e),this.isNew=!1,this.isNewUser=!1,this.domain=t.location.hostname}return _createClass(e,[{key:"getSessionCount",value:function(){return parseInt(y.Cookies.get(i),10)||0}},{key:"incrementSessionCount",value:function(){var e=this.getSessionCount(),t=o,n=this._getDomain();if(0===e&&!this.isNewUser)return y.Cookies.set(i,s,{expires:t,domain:n}),s;this.isNewUser&&0<e&&(e=0),this.isNew=0===e;var r=e+1;return y.Cookies.set(i,r,{expires:t,domain:n}),r}},{key:"getUserId",value:function(){return y.Cookies.get("mgo_uid")||this._createUserId()}},{key:"getUserIp",value:function(){return y.Cookies.get("mgo_uip")}},{key:"getSessionId",value:function(){return y.Cookies.get(g)||this._createSessionId()}},{key:"setDomain",value:function(e){this._validateDomain(e)&&(this.domain=e)}},{key:"_createUserId",value:function(){var e=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}();return y.Cookies.set("mgo_uid",e,{expires:n,domain:this._getDomain()}),this.isNewUser=!0,e}},{key:"_createSessionId",value:function(){var e,t,n,r,i,o,s,a,u,c,l,p,h,f,d=this,m=(t=(e={sessionsCountGetter:function(){return d.incrementSessionCount()}}).randomPartSize,n=void 0===t?4:t,r=e.secondRandomPartSize,i=void 0===r?5:r,o=e.currDate,s=void 0===o?new Date:o,a=e.sessionsCountGetter,u=_(n),c=Math.round(s.getTime()/1e3).toString(36),l=v.toString(),p=b.toString(),h=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:" ";for(;e.length<t;)e=n+e;return e}(a().toString(36),3,"0"),f=_(i),"".concat(u).concat(c).concat(l).concat(p).concat(h).concat(f));return y.Cookies.set(g,m,{expires:1800,domain:this._getDomain()}),m}},{key:"refreshSession",value:function(e){var t=this.getSessionId(),n=e||1800;y.Cookies.set(g,t,{expires:n,domain:this._getDomain()})}},{key:"_getDomain",value:function(){return this.domain.match(/[а-яё]/)?"":"."+this.domain.replace("www.","")}},{key:"_validateDomain",value:function(e){return/^[a-zA-Z0-9]+([-.][a-zA-Z0-9]{2,})+$/.test(e)&&-1<t.location.hostname.indexOf(e)}}]),e}();var v=1,b=1,_=function(e){return t=parseInt(r("1",e,"0"),36),n=parseInt(r("",e,"z"),36),(Math.floor(Math.random()*(n-t))+t).toString(36);var t,n}}((window,document),window.Mango=window.Mango||{}),function(s,e){"use strict";e.$,e._,e.Promise;e.Utils=e.Utils||{},e.Utils.Dom={MAIL_PREFIX:"mailto:",PHONE_PREFIX:"tel:",findAndReplaceContent:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:"*",i=s.body.querySelectorAll(r),o=Array.from(i).filter(function(e){return e.textContent===t});return 0!==o.length&&(this._replaceContent(o,e),!0)},_replaceContent:function(e,t){var n=this,r=1<arguments.length?t:void 0;(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){e.hasAttribute("href")&&n._replaceAttributes(e,r),e.textContent=r})},_replaceAttributes:function(e,t){var n=this._getHrefPrefix(e);n&&e.setAttribute("href","".concat(n).concat(t))},_getHrefPrefix:function(e){return this._isEmailLink(e)?this.MAIL_PREFIX:this._isPhoneLink(e)?this.PHONE_PREFIX:""},_isEmailLink:function(e){return-1<e.getAttribute("href").indexOf(this.MAIL_PREFIX)},_isPhoneLink:function(e){return-1<e.getAttribute("href").indexOf(this.PHONE_PREFIX)}}}((window,document),window.Mango=window.Mango||{}),function(e){"use strict";e.$,e._,e.Promise;e.Utils=e.Utils||{},e.Utils.EventChannels={UPDATE_CID:"updateCid"},e.Utils.EventBus={channels:new Map,subscribe:function(e,t){this.channels.has(e)||this.channels.set(e,[]),this.channels.get(e).push(t)},publish:function(e,t){this.channels.has(e)&&this.channels.get(e).forEach(function(e){return e(t)})}}}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._,e.Promise;e.Utils=e.Utils||{};var n=new Map,r={LOAD_SCRIPT_TIME:"loadScript",BEFORE_LOAD_SCRIPT_TIME:"beforeLoadScript",BEFORE_LOAD_NUMBER_TIME:"beforeLoadNumber",LOAD_NUMBER_TIME:"loadNumber",SHOW_NUMBER_TIME:"showNumber"},i={MARKS:{MAIN_START:"main:start",GET_NUMBER:"getNumber",GOT_NUMBER:"gotNumber",SHOWED_NUMBER:"showedNumber"},MEASURES:r},o={INITIAL:"initial"};e.Utils.PF_REPORTS=o,e.Utils.PF_METRICS=i,e.Utils.Performance={mark:function(e){performance.mark(e)},measure:function(e,t,n){performance.measure(e,t,n)},getMeasure:function(e){var t=this.getByName(e,"measure");return t?t.pop():null},getMeasures:function(){return performance.getEntriesByType("measure")},getMark:function(e){var t=this.getByName(e,"mark");return t?t.pop():null},getMarks:function(){return performance.getEntriesByType("mark")},getResources:function(){return performance.getEntries().filter(function(e){return"resource"===e.entryType})},getByName:function(e,t){return performance.getEntriesByName(e,t)},_getMainScript:function(){return this.getResources().find(function(e){return e.name.includes("widgets/mango.js")})||{}},_calcMeasure:function(e,t,n){return this.measure(e,t,n),this.getMeasure(e)||{}},saveReport:function(e){if(n.has(e))return null;var t=this._calculateReport(e);return t&&n.set(e,t),t},getReport:function(e){return e?n.has(e)?n.get(e):null:Object.fromEntries(n)},_calculateReport:function(e){switch(e){case o.INITIAL:var t=this._getMainScript(),n={};return _defineProperty(n,r.BEFORE_LOAD_SCRIPT_TIME,t.startTime),_defineProperty(n,r.LOAD_SCRIPT_TIME,t.duration),_defineProperty(n,r.BEFORE_LOAD_NUMBER_TIME,this._calcMeasure(r.BEFORE_LOAD_NUMBER_TIME,i.MARKS.MAIN_START,i.MARKS.GET_NUMBER).duration),_defineProperty(n,r.LOAD_NUMBER_TIME,this._calcMeasure(r.LOAD_NUMBER_TIME,i.MARKS.GET_NUMBER,i.MARKS.GOT_NUMBER).duration),_defineProperty(n,r.SHOW_NUMBER_TIME,this._calcMeasure(r.SHOW_NUMBER_TIME,i.MARKS.GOT_NUMBER,i.MARKS.SHOWED_NUMBER).duration),n;default:return null}}}}((window,document,window.Mango=window.Mango||{})),function(e,n){"use strict";var r=n.$,i=n._;n.Promise;n.Analytics=n.Analytics||{};n.Analytics.ActivitySpy=function(){function t(e){_classCallCheck(this,t),i.extend(this,n.Backbone.Events),this.isActive=!1,this.isSpying=!1,this.startTime=e}return _createClass(t,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,this._updateActivityHandler=i.bind(this._updateActivity,this),r(e).on("mousemove scroll keydown",this._updateActivityHandler),this._intervalId=setInterval(i.bind(this._onInterval,this),1e3),this.startTime=this.startTime||this._getCurrentTime(),this.activeTimeArray=[],this._activate()}},{key:"stop",value:function(){this.isActive=!1,r(e).off("mousemove scroll keydown",this._updateActivityHandler),clearInterval(this._intervalId),this.isSpying=!1}},{key:"_activate",value:function(){this.isActive=!0,this.startActivityTime=this._getCurrentTime(),this.trigger("activity:on")}},{key:"_deactivate",value:function(){this.isActive=!1,this.activeTimeArray.push({start:this.startActivityTime,end:this._getCurrentTime()}),this.trigger("activity:off")}},{key:"_updateActivity",value:function(){this.lastActivityTime=this._getCurrentTime()}},{key:"_onInterval",value:function(){var e=this._getCurrentTime()-this.lastActivityTime;this.isActive&&3e4<=e&&this._deactivate(),!this.isActive&&e<3e4&&this._activate(),this.trigger("tick",this.getTotalTime(),this.getActiveTime(),this)}},{key:"getTotalTime",value:function(){return this._getCurrentTime()-this.startTime}},{key:"getActiveTime",value:function(){var t=0;return i(this.activeTimeArray).forEach(function(e){t+=e.end-e.start}),this.isActive&&(t+=this._getCurrentTime()-this.startActivityTime),t}},{key:"getTimeSinceLastActive",value:function(){return this.isActive?0:this._getCurrentTime()-i.last(this.activeTimeArray).end}},{key:"_getCurrentTime",value:function(){return(new Date).getTime()}}]),t}()}((window,document),window.Mango=window.Mango||{}),function(e,t,i){"use strict";var n=i.$,o=i._;i.Promise;i.Analytics=i.Analytics||{};var s=100,a=200,u=100;i.Analytics.CursorSpy=function(){function r(e,t,n){_classCallCheck(this,r),o.extend(this,i.Backbone.Events),this.isSpying=!1,this.pageY=0,this.oldPageY=0,this.diffPageY=0,this.scrollTopArea=0,this._intervalId="",this.speed=e||s,this.top=t||a,this.interval=n||u}return _createClass(r,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,this._mouseMoveHandler=o.bind(this._onMouseSpy,this),n(t).on("mousemove",this._mouseMoveHandler),this._intervalId=setInterval(o.bind(this._onInterval,this),this.interval)}},{key:"stop",value:function(){this._mouseMoveHandler&&(n(t).off("mousemove",this._mouseMoveHandler),this._mouseMoveHandler=null),clearInterval(this._intervalId),this.isSpying=!1}},{key:"_onInterval",value:function(){this.diffPageY=this.oldPageY>this.pageY?this.oldPageY-this.pageY:0,this.scrollTopArea=n(e).scrollTop()+this.top,0<this.diffPageY&&this.diffPageY>this.speed&&this.pageY<this.scrollTopArea&&this.trigger("cursor:up"),this._updateCoords()}},{key:"_onMouseSpy",value:function(e){this.pageY=e.pageY}},{key:"_updateCoords",value:function(){this.oldPageY=this.pageY}}]),r}()}(window,document,window.Mango=window.Mango||{}),function(n,r,t){"use strict";var i=t.$,o=t._;t.Promise;t.Analytics=t.Analytics||{};t.Analytics.ScrollSpy=function(){function e(){_classCallCheck(this,e),o.extend(this,t.Backbone.Events),this.isSpying=!1}return _createClass(e,[{key:"_initVariables",value:function(){this.scrollTop=0,this.scrollHeight=0,this.clientHeight=0,this.scrollStep=0,this.currentScroll=0,this.scrollPercent=0,this.currentScrollPercent=0,this.scrollTopStep=0,this.currentScrollTopStep=0}},{key:"start",value:function(){this._initVariables(),this.isSpying&&this.stop(),this.isSpying=!0,this._scrollEventHandler()}},{key:"stop",value:function(){this._scrollHandler&&(i(n).off("scroll",this._scrollHandler),this._scrollHandler=null),this.isSpying=!1}},{key:"_scrollEventHandler",value:function(){var e=r.body,t=r.documentElement;this.scrollHeight=Math.max(e.scrollHeight,t.scrollHeight),this.clientHeight=i(n).height(),this.scrollStep=10*this.scrollHeight/100,this._getScrollParams(),0==i(n).scrollTop()&&this._getScrollPercent(),this._scrollHandler=o.bind(this._onScroll,this),i(n).on("scroll",this._scrollHandler)}},{key:"_onScroll",value:function(){this._getScrollParams(),this.scrollTop>this.currentScroll&&this.scrollTopStep>this.currentScrollTopStep&&this._getScrollPercent(!0)}},{key:"_getScrollParams",value:function(){this.scrollTop=i(n).scrollTop()+this.clientHeight,this.scrollTopStep=Math.floor(this.scrollTop/this.scrollStep)}},{key:"_getScrollPercent",value:function(e){e&&(this.currentScroll=this.scrollTop,this.currentScrollTopStep=this.scrollTopStep),this.currentScrollPercent=this.scrollPercent,this.scrollPercent=Math.floor(this.scrollTop/(this.scrollHeight/100)),this.scrollPercent=this.scrollPercent-this.scrollPercent%10,this.currentScrollPercent!=this.scrollPercent&&this.trigger("scroll",this.scrollPercent)}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(t,n){"use strict";var r=n.$,i=n._;n.Promise;n.Analytics=n.Analytics||{};var o=[".mango-call-site > button",".mango-call-site > a"].join(","),s=[".mango-callback > button.button-widget-open",".mango-callback > a.button-widget-open",".mango-callback > .selected-label button.button-widget-open"].join(",");n.Analytics.WidgetSpy=function(){function e(){_classCallCheck(this,e),i.extend(this,n.Backbone.Events),this.isSpying=!1}return _createClass(e,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,r(t).on("click",o,i.bind(this._callSiteHandler,this)),r(t).on("click",s,i.bind(this._callBackHandler,this))}},{key:"stop",value:function(){this.isSpying=!1,r(t).off("click",o,this._callSiteHandler),r(t).off("click",s,this._callBackHandler)}},{key:"_callSiteHandler",value:function(){this.trigger("callsite:open")}},{key:"_callBackHandler",value:function(t){setTimeout(i.bind(function(){var e=r(t.target).parent(".selected-label");(1==e.length&&e.hasClass("widget-show")||0==e.length)&&this.trigger("callback:open")},this),10)}}]),e}()}((window,document),window.Mango=window.Mango||{}),function(t){"use strict";t.$,t._,t.Promise;t.Analytics=t.Analytics||{},t.Analytics.Information=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getPageTitle",value:function(){var e=t.$("title");return e?e.text():""}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(t,n,o){"use strict";o.$;var s=o._;o.Promise;o.Analytics=o.Analytics||{},o.Analytics.Tracker=function(){function e(){_classCallCheck(this,e),this.session=o.session,this.http=o.http}return _createClass(e,[{key:"track",value:function(e,t){var n=s.extend(e,{sid:this.session.getSessionId(),uid:this.session.getUserId(),title:this._getPageTitle(),referrer:this._getReferrerUrl()});this.session.isNewUser&&(n.nu=Number(this.session.isNewUser));var r=this.session.getUserIp();r&&(n.uip=r),s.isEmpty(n.url)&&(n.url=this._getPageUrl());var i=t?o.Urls.times():o.Urls.track();this.http.get(i,n)}},{key:"hit",value:function(e){var t=s.extend(e,{type:"hit"});this.track(t)}},{key:"times",value:function(e){this.track(e,!0)}},{key:"form",value:function(e){var t=s.extend(e,{type:"form"});this.track(t)}},{key:"pageview",value:function(e){var t={type:"pageview"};e&&(t.url=e),this.track(t)}},{key:"event",value:function(e,t,n){var r={type:"event",event:e};s.isNumber(t)&&(r.value=t),n&&s.each(n,function(e,t){r["p_"+t]=e}),this.track(r)}},{key:"_getPageUrl",value:function(){return t.location.href}},{key:"_getPageTitle",value:function(){var e=o.$("head title");return e?e.text():""}},{key:"_getPageDomain",value:function(){return t.location.hostname}},{key:"_getPagePath",value:function(){return t.location.pathname}},{key:"_getReferrerUrl",value:function(){return n.referrer}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(t){"use strict";t.$;var n=t._;t.Promise;t.Analytics=t.Analytics||{};t.Analytics.Module=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"start",value:function(){this._initTracker(),this._initActivitySpy(),this._initScrollSpy(),this._initCursorSpy(),this._initWidgetSpy(),this.tracker.pageview()}},{key:"_initTracker",value:function(){this.tracker=new t.Analytics.Tracker}},{key:"_initScrollSpy",value:function(){var e=new t.Analytics.ScrollSpy;e.on("scroll",function(e){100==e&&this.tracker.event("scroll",e)},this),e.start()}},{key:"_initCursorSpy",value:function(){var e=new t.Analytics.CursorSpy;e.on("cursor:up",function(){this.tracker.hit()},this),e.start()}},{key:"_initActivitySpy",value:function(){var e=new t.Analytics.ActivitySpy(t.startTime);e.on("activity:on",function(){this._startLifecycle()},this),e.on("activity:off",function(){this._clearLifecycle()},this),e.start()}},{key:"_initWidgetSpy",value:function(){var e=new t.Analytics.WidgetSpy;e.on("callsite:open",function(){this.tracker.event("callsite")},this),e.on("callback:open",function(){this.tracker.event("callback")},this),e.start()}},{key:"_startLifecycle",value:function(){this.lifecycleId&&this._clearLifecycle(),this.lifecycleId=setInterval(n.bind(this._onLifecycle,this),3e4)}},{key:"_clearLifecycle",value:function(){clearInterval(this.lifecycleId)}},{key:"_onLifecycle",value:function(){this.tracker.hit()}},{key:"getTracker",value:function(){return this.tracker||this._initTracker(),this.tracker}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(n){"use strict";n.$,n._,n.Promise;n.CallTracking=n.CallTracking||{};n.CallTracking.clientIdsProvider=function(){function e(){_classCallCheck(this,e),this.ga=new n.CallTracking.GAProvider,this.metrika=new n.CallTracking.MetrikaProvider,this.roistat=new n.CallTracking.RoiStatProvider,this.jivo=new n.CallTracking.JivoProvider,this._collectClientIds()}return _createClass(e,[{key:"getAll",value:function(){return{gaCid:this.ga.cId,yaCid:this.metrika.cId,rsCid:this.roistat.cId,jsCid:this.jivo.cId,gaUid:this.ga.uId}}},{key:"_collectClientIds",value:function(){var t=this;n.Helpers.wait(1e4,this.ga.check).then(function(e){return t.ga.ready(e,300)}).then(function(){return t.ga.updateClientId()}),n.Helpers.wait(1e4,this.metrika.check).then(function(){return t.metrika.updateClientId()}),n.Helpers.wait(1e4,this.roistat.check).then(function(){return t.roistat.updateClientId()}),n.Helpers.wait(1e4,this.jivo.check).then(function(){return t.jivo.updateClientId()})}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(u,c){"use strict";c.$,c._;var t=c.Promise;c.CallTracking=c.CallTracking||{};c.CallTracking.GAProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"uId",get:function(){var e=this.getTrackers()[0];return e&&e.get?e.get("userId"):null}}]),_createClass(e,[{key:"check",value:function(){var e=u.GoogleAnalyticsObject;return u[e]||u._gaq}},{key:"ready",value:function(s,a){return new t(function(e){if(!s)return e();var t,n,r,i=u.GoogleAnalyticsObject,o=u[i];o?(t=setTimeout(e,a),c.Helpers.safeExec(function(){o(function(){clearTimeout(t),e()})},function(){return e()})):(n=u._gaq)?(r=setTimeout(e,a),c.Helpers.safeExec(function(){n.push(function(){clearTimeout(r),e()})},function(){return e()})):e()})}},{key:"getTracker",value:function(){var e=u.GoogleAnalyticsObject;return u[e]}},{key:"getTrackers",value:function(){var e=this.getTracker();return e&&e.getAll?e.getAll():[]}},{key:"updateClientId",value:function(){var e=c.Cookies.get("_ga");if(e){var t=c.Helpers.safeExec(function(){return e.split(".")},function(){return[]});if(3<t.length)return void this.updateCid(t[2]+"."+t[3])}var n,r=c.Cookies.get("__utma");!r||2<(n=r.split(".")).length&&this.updateCid(n[1]+"."+n[2])}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,c.Utils.EventBus.publish(c.Utils.EventChannels.UPDATE_CID,{gaCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(t,r){"use strict";r.$,r._,r.Promise;r.CallTracking=r.CallTracking||{},r.CallTracking.JivoProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"check",value:function(){return Boolean(t.jivo_api)}},{key:"updateClientId",value:function(){var n=this,e=t.jivo_api;e&&r.Helpers.safeExec(function(){e.getVisitorNumber(function(e,t){n.updateCid(t)})},function(){})}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,r.Utils.EventBus.publish(r.Utils.EventChannels.UPDATE_CID,{jsCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(i,o){"use strict";o.$,o._,o.Promise;o.CallTracking=o.CallTracking||{};o.CallTracking.MetrikaProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"check",value:function(){return Boolean(i.Ya)}},{key:"updateClientId",value:function(){var e=o.Cookies.get("_ym_uid");if(e)this.updateCid(e);else{var t={};i.Ya&&i.Ya._metrika&&i.Ya._metrika.counters&&(t=i.Ya._metrika.counters);var n=Object.keys(t);if(n.length)for(var r in n)if(t[n[r]].getClientID())return void this.updateCid(t[n[r]].getClientID())}}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,o.Utils.EventBus.publish(o.Utils.EventChannels.UPDATE_CID,{yaCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._,e.Promise;e.CallTracking=e.CallTracking||{};var h=["8 (xxx) xxx-xxxx","8 (xxx) xxx-xx-xx","8 (xxx) xxx xxxx","8 (xxx) xxx xx xx","8 (xxxx) xx-xx-xx","8 (xxxx) xx xx xx","8 xxx xxx xxxx","8 xxx xxx xx xx","+7 (xxx) xxx-xxxx","+7 (xxx) xxx-xx-xx","+7 (xxx) xxx xxxx","+7 (xxx) xxx xx xx","+7 (xxxx) xx-xx-xx","+7 (xxxx) xx xx xx","+7 xxx xxx xxxx","+7 xxx xxx xx xx","7 (xxx) xxx-xxxx","7 (xxx) xxx-xx-xx","7 (xxx) xxx xxxx","7 (xxx) xxx xx xx","7 (xxxx) xx-xx-xx","7 (xxxx) xx xx xx","7 xxx xxx xxxx","7 xxx xxx xx xx"];e.CallTracking.NumberFormatter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"format",value:function(e,t){if(!e)return"";h.indexOf(t)<0&&(t=h[0]);var n=e.replace(/[^0-9]/g,"");if(n.length<10)return e;var r=n.substr(0,n.length-10),i=(n=n.substr(n.length-10,10)).substr(0,3),o=n.substr(3,3),s=n.substr(6,2),a=n.substr(8,2),u=n.substr(0,4),c=n.substr(4,2),l=n.substr(6,2),p=n.substr(8,2);switch(t){case"8 (xxx) xxx-xxxx":return"8 (".concat(i,") ").concat(o,"-").concat(s).concat(a);case"8 (xxx) xxx-xx-xx":return"8 (".concat(i,") ").concat(o,"-").concat(s,"-").concat(a);case"8 (xxx) xxx xxxx":return"8 (".concat(i,") ").concat(o," ").concat(s).concat(a);case"8 (xxx) xxx xx xx":return"8 (".concat(i,") ").concat(o," ").concat(s," ").concat(a);case"8 (xxxx) xx-xx-xx":return"8 (".concat(u,") ").concat(c,"-").concat(l,"-").concat(p);case"8 (xxxx) xx xx xx":return"8 (".concat(u,") ").concat(c," ").concat(l," ").concat(p);case"8 xxx xxx xxxx":return"8 ".concat(i," ").concat(o," ").concat(s).concat(a);case"8 xxx xxx xx xx":return"8 ".concat(i," ").concat(o," ").concat(s," ").concat(a);case"+7 (xxx) xxx-xxxx":return"+".concat(r," (").concat(i,") ").concat(o,"-").concat(s).concat(a);case"+7 (xxx) xxx-xx-xx":return"+".concat(r," (").concat(i,") ").concat(o,"-").concat(s,"-").concat(a);case"+7 (xxx) xxx xxxx":return"+".concat(r," (").concat(i,") ").concat(o," ").concat(s).concat(a);case"+7 (xxx) xxx xx xx":return"+".concat(r," (").concat(i,") ").concat(o," ").concat(s," ").concat(a);case"+7 (xxxx) xx-xx-xx":return"+".concat(r," (").concat(u,") ").concat(c,"-").concat(l,"-").concat(p);case"+7 (xxxx) xx xx xx":return"+".concat(r," (").concat(u,") ").concat(c," ").concat(l," ").concat(p);case"+7 xxx xxx xxxx":return"+".concat(r," ").concat(i," ").concat(o," ").concat(s).concat(a);case"+7 xxx xxx xx xx":return"+".concat(r," ").concat(i," ").concat(o," ").concat(s," ").concat(a);case"7 (xxx) xxx-xxxx":return"".concat(r," (").concat(i,") ").concat(o,"-").concat(s).concat(a);case"7 (xxx) xxx-xx-xx":return"".concat(r," (").concat(i,") ").concat(o,"-").concat(s,"-").concat(a);case"7 (xxx) xxx xxxx":return"".concat(r," (").concat(i,") ").concat(o," ").concat(s).concat(a);case"7 (xxx) xxx xx xx":return"".concat(r," (").concat(i,") ").concat(o," ").concat(s," ").concat(a);case"7 (xxxx) xx-xx-xx":return"".concat(r," (").concat(u,") ").concat(c,"-").concat(l,"-").concat(p);case"7 (xxxx) xx xx xx":return"".concat(r," (").concat(u,") ").concat(c," ").concat(l," ").concat(p);case"7 xxx xxx xxxx":return"".concat(r," ").concat(i," ").concat(o," ").concat(s).concat(a);case"7 xxx xxx xx xx":return"".concat(r," ").concat(i," ").concat(o," ").concat(s," ").concat(a);default:return e}}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(t,n){"use strict";n.$,n._,n.Promise;n.CallTracking=n.CallTracking||{};n.CallTracking.RoiStatProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"check",value:function(){return Boolean(t.roistat)}},{key:"updateClientId",value:function(){var e=n.Cookies.get("roistat_visit");e?this.updateCid(e):t.roistat&&this.updateCid(t.roistat.getVisit())}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,n.Utils.EventBus.publish(n.Utils.EventChannels.UPDATE_CID,{rsCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(n){"use strict";n.$;var r=n._;n.Promise;n.CallTracking=n.CallTracking||{},n.CallTracking.UtmProvider=function(){function t(e){_classCallCheck(this,t),this.params=e||{},this.session=n.session,this.sb=n.sbjs,this.sb.init(this._getSourceBusterConfig())}return _createClass(t,[{key:"getCurrent",value:function(){var e=r.pick(this.sb.get.current,["src","mdm","cmp","cnt","trm","mango"]);try{e.trm="undefined"!==decodeURIComponent(e.trm)?decodeURIComponent(e.trm):"(none)"}catch(e){}return e}},{key:"_getSourceBusterConfig",value:function(){var e={lifetime:6,session_length:30,timezone_offset:3};return e.domain={host:this.session.domain},e}}]),t}()}((window,document,window.Mango=window.Mango||{})),function(p,h){"use strict";var s=h.$,f=h._;h.Promise;h.CallTracking=h.CallTracking||{},h.CallTracking.Widget=function(){function n(e){var t=this;_classCallCheck(this,n),this.params=e=e||{},this.id=e.id,this.ctRequestOptions={},this.params.domain&&h.session.setDomain(this.params.domain),h.Utils.EventBus.subscribe(h.Utils.EventChannels.UPDATE_CID,h.Helpers.debounce(this._updateCid.bind(this),3e3)),this.cookies=h.Cookies,this.ids=new h.CallTracking.clientIdsProvider,this.utm=new h.CallTracking.UtmProvider,this.activitySpy=new h.Analytics.ActivitySpy,this.intervalId=null,this.tracking=h.Analytics.Module.prototype.getTracker(),this.numbers=[],this.activitySpy.on("activity:on",function(){return t._requestSettings({noct:!t._isAutoLoad()})}),this.previousPhoneTextReplace={}}return _createClass(n,[{key:"start",value:function(){this.activitySpy.start()}},{key:"_isAutoLoad",value:function(){return!(!this.params.elements&&!this.params.onReady)}},{key:"postForm",value:function(n){var r={};["name","number","email","subject","comment"].forEach(function(e){var t;n.hasOwnProperty(e)&&(t="form"+e.substring(0,1).toUpperCase()+e.substring(1),r[t]=n[e])}),n.customParam&&(r.customParam=n.customParam),r=f.extend(r,{wid:this.id,url:p.location.href},this.utm.getCurrent()),this.tracking.form(r)}},{key:"getNumber",value:function(e,t){return e?"function"==typeof e?(t=e,e={}):"string"==typeof e&&(e={hash:e}):e={},"string"!=typeof e.hash&&(e.hash=""),e.regionCode&&(e.region=e.regionCode,delete e.regionCode),this._requestSettings(e,t)}},{key:"getNumberByRegion",value:function(e,t,n){return"function"==typeof t&&(n=t,t=""),this._requestSettings({hash:t,region:e},n)}},{key:"getNumberWithRedirect",value:function(e,t,n){return"function"==typeof t&&(n=t,t=""),this._requestSettings({hash:t,redirectNumber:e},n)}},{key:"getExistsNumbers",value:function(e){this._executeCallback(this.numbers,e)}},{key:"trackTime",value:function(){var e;!h.session.isNew||(e=h.Utils.Performance.saveReport(h.Utils.PF_REPORTS.INITIAL))&&this.tracking.times(f.extend({wid:this.id},e))}},{key:"getUtm",value:function(){return this.utm.getCurrent()}},{key:"_collectRequestParams",value:function(e){var t=this.ids.getAll(),n=f.extend({uid:h.session.getUserId(),sid:h.session.getSessionId(),url:p.location.href,title:h.$("head title").text()||"",is_cookies:this.cookies.enabled},this._ensureOptions(e));h.session.isNewUser&&(n.nu=Number(h.session.isNewUser));var r=h.session.getUserIp();return r&&(n.uip=r),this.params.customParam&&(n.custom=this.params.customParam),f.extend(n,this.utm.getCurrent(),t)}},{key:"_requestSettings",value:function(e,t){var n=this,r=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length&&void 0!==t?t:null,o=h.Urls.calltracking(this.id);this.ctRequestOptions=this._collectRequestParams(r),h.Utils.Performance.mark(h.Utils.PF_METRICS.MARKS.GET_NUMBER),h.http.get(o,this.ctRequestOptions).then(function(e){h.Utils.Performance.mark(h.Utils.PF_METRICS.MARKS.GOT_NUMBER),n._onSettingsLoad(e,n._ensureOptions(r),i)})}},{key:"_ensureOptions",value:function(e){var t={};return(e=e||{}).hash&&(t.hash=e.hash),(e.region||this.params.region)&&(t.region=e.region||this.params.region,t.country="RU"),e.redirectNumber&&(t.redirect_number=e.redirectNumber),e.noct&&(t.noct=e.noct),t}},{key:"_onSettingsLoad",value:function(e,t,n){if(!f.isEmpty(e)){for(var r,i,o,s,a,u=e.service||[],c={id:e.widget.widget_id,widget:e.widget,session:e.session},l=0;l<u.length;l++){var p=u[l];h.modules.add(p,c),h.modules.start(p)}e.number&&(this.settings=e.widget,r=e.number,i=e.type,o=t.redirect_number,a=void 0===(s=t.hash)?"":s,o&&1!==i&&(i=3,r=o),this._saveNumber(r,i,a),h.session.refreshSession(60*this.settings.expire),!a&&this._isAutoLoad()&&(this._populateElementsByNumber(r),this._executeCallback({number:r,type:i,hash:a},this.params.onReady)),h.Utils.Performance.mark(h.Utils.PF_METRICS.MARKS.SHOWED_NUMBER),this.trackTime(),!0===this.params.visitEvents&&this._notifyGA(r,e.type),this._executeCallback({number:r,type:i,hash:a},n))}}},{key:"_populateElementsByNumber",value:function(i){var e=new h.CallTracking.NumberFormatter,o=f.isFunction(this.params.formatNumber)?this.params.formatNumber:e.format;f.each(this.params.elements,f.bind(function(e){var t,n,r=o(i,this.settings.number_template);e.selector?(t=s(e.selector),this._tagType(t,i),t.html(r)):e.numberText&&(n=this.previousPhoneTextReplace[e.numberText]||e.numberText,this._replacePhoneText(p.body.firstChild,n,r),this.previousPhoneTextReplace[e.numberText]=r&&r.replace(/[ \(\)-]/g,""))},this))}},{key:"_saveNumber",value:function(e,t,n){n=n||"";var r=f.find(this.numbers,{hash:n});r?(r.number=e,r.type=t):this.numbers.push({hash:n,number:e,type:t})}},{key:"_executeCallback",value:function(e,t){if(f.isFunction(t))try{t(e)}catch(e){h.Log.error("[mango.js] Failed to execute callback.",e)}}},{key:"_getPhoneInfo",value:function(e){if(!e||!e.length)return[];for(var t,n=[],r=/(\([+0-9][\) 0-9\-]{3,19}[0-9])|([+0-9][\(\) 0-9\-]{3,19}[0-9])/g;t=r.exec(e);)n.push({phone:this._cleanPhone(t[0]),startPosition:t.index,endPosition:t[0].length+t.index});return n}},{key:"_cleanPhone",value:function(e){var t=e.replace(/[ \(\)-]/g,""),n="8"===t[0]?"7"+t.slice(1):"+"===t[0]?t.slice(1):t;return n}},{key:"_getNext",value:function(e){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;for(var t=e;t.parentNode&&t.parentNode!==p.body&&!t.parentNode.nextSibling;)t=t.parentNode;return t.parentNode===p.body?null:t.parentNode&&t.parentNode.nextSibling}},{key:"_replacePhoneText",value:function(e,t,n){for(var r=e,i=this;r;){var o=this._getNext(r);if(3===r.nodeType&&r.data&&r.data.trim){var s=r.data,a=this._getPhoneInfo(s).filter(function(e){return e.phone===i._cleanPhone(t)});if(a.length){for(var u=s.substring(0,a[0].startPosition),c=0;c<a.length-1;c++)u+=n+s.substring(a[c].endPosition,a[c+1].startPosition);u+=n+s.substring(a[a.length-1].endPosition);for(var l=r.parentNode;l&&l!==p.body;){if("A"===l.tagName){l.href&&0===l.href.indexOf("tel:")&&(l.href="tel:"+n);break}l=l.parentNode}["parentElement","parentNode"].forEach(function(e){r[e]&&(r[e].insertBefore(p.createTextNode(u),r),r[e].removeChild(r))})}}r=o}}},{key:"_tagType",value:function(e,t){if(t="+7"+t.toString().substr(1,11),e.length)for(var n=0;n<e.length;n++)if(s(e[n]).is("a"))this._telMatch(s(e[n]),t);else for(var r=s(e[n]).parent(),i=0;i<3;i++)if(r.is("a")){if(this._telMatch(r,t))break}else r=r.parent()}},{key:"_telMatch",value:function(e,t){var n=e.attr("href");return!(!n||!n.match(/^tel:/))&&(e.attr("href","tel:"+t),!0)}},{key:"_notifyGA",value:function(t,e){var n;switch(e){case 1:n="dynamic visit";break;case 2:n="static visit";break;case 3:n="default visit"}n&&t&&this.ids.ga.getTrackers().forEach(function(e){e.send("event",n,"visit",t)})}},{key:"_updateCid",value:function(e){var t;e&&(t=h.Urls.calltracking(this.id),h.http.get(t,f.extend(this.ctRequestOptions,this.ids.getAll())))}}]),n}()}((window,document),window.Mango=window.Mango||{}),function(r){"use strict";r.$;var s=r._;r.Promise;r.CallTracking=r.CallTracking||{},r.CallTracking.Module=function(){function n(e){_classCallCheck(this,n);var t=this.widgets={};s.each(e,function(e){e.id=parseInt(e.id,10),e.id&&(t[e.id]=new r.CallTracking.Widget(e))})}return _createClass(n,[{key:"start",value:function(){s.each(this.widgets,function(e){e.start()})}},{key:"exec",value:function(e,t){var n=e?this.widgets[e]:s.first(s.values(this.widgets));if(n&&"function"==typeof n[t]){for(var r=arguments.length,i=new Array(2<r?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n[t].apply(n,i)}return!1}}]),n}()}((window,document,window.Mango=window.Mango||{})),window,document,window.Mango=window.Mango||{},function(o){"use strict";o.$,o._,o.Promise;o.EMT=o.EMT||{},o.EMT.Widget=function(){function t(e){_classCallCheck(this,t),this._params=e}return _createClass(t,[{key:"start",value:function(){this._requestSettings()}},{key:"_requestSettings",value:function(){var t=this,e=this._params.id,n=o.Urls.emt(e);o.http.getJson(n,{uid:o.session.getUserId(),sid:o.session.getSessionId()}).then(function(e){t._onSettingsLoad(e.data)}).fail(console.error)}},{key:"_onSettingsLoad",value:function(e){e&&0!==e.length&&this._replaceEmails(e)}},{key:"_replaceEmails",value:function(e){e.forEach(function(e){var t=e.email,n=e.subEmail,r=e.substitution,i=r.classNames?r.classNames.join(", "):void 0;o.Utils.Dom.findAndReplaceContent(t,n,i)})}}]),t}()}((window,document,window.Mango=window.Mango||{})),function(r){"use strict";r.$;var s=r._;r.Promise;r.EMT=r.EMT||{},r.EMT.Module=function(){function e(t){_classCallCheck(this,e);var n=this._widgets={};s.each(t,function(e){n[t.id]=new r.EMT.Widget(e)})}return _createClass(e,[{key:"start",value:function(){s.each(this._widgets,function(e){e.start()})}},{key:"exec",value:function(e,t){var n=e?this._widgets[e]:s.first(s.values(this._widgets));if(n&&"function"==typeof n[t]){for(var r=arguments.length,i=new Array(2<r?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n[t].apply(n,i)}return!1}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(s,t){"use strict";var a;t.$,t._,t.Promise;t.SEO=t.SEO||{},t.SEO.events={mch_chat_established:"mch_chat_established",mch_chat_created:"mch_chat_created",mch_chat_propose:"mch_chat_propose",mch_callback_created:"mch_callback_created",mch_callback_established:"mch_callback_established",mch_callback_lead:"mch_callback_lead",mch_leadgen_shown:"mch_leadgen_shown",mch_leadgen_created:"mch_leadgen_created",mch_leadgen_established:"mch_leadgen_established",widget_callback_created:"widget_callback_created",widget_callback_established:"widget_callback_established",widget_leadgen_shown:"widget_leadgen_shown",widget_leadgen_created:"widget_leadgen_created"},t.SEO.Yandex={reachGoal:function(t){try{var n=s.ym;if(!n||!n.a)return;var e=n.a.map(function(e){return e[0]});_toConsumableArray(new Set(e)).forEach(function(e){return n(e,"reachGoal",t)})}catch(e){}}},t.SEO.Google=(a={mch_chat_established:{category:"mch_chat",action:"established"},mch_chat_created:{category:"mch_chat",action:"created"},mch_chat_propose:{category:"mch_chat",action:"propose"},mch_callback_created:{category:"mch_callback",action:"created"},mch_callback_established:{category:"mch_callback",action:"established"},mch_callback_lead:{category:"mch_callback",action:"lead"},mch_leadgen_shown:{category:"mch_leadgen",action:"shown"},mch_leadgen_created:{category:"mch_leadgen",action:"created"},mch_leadgen_established:{category:"mch_leadgen",action:"established"},widget_callback_created:{category:"widget_callback",action:"created"},widget_callback_established:{category:"widget_callback",action:"established"},widget_leadgen_shown:{category:"widget_leadgen",action:"shown"},widget_leadgen_created:{category:"widget_leadgen",action:"created"}},{sendEvent:function(e){try{var t=a[e];if(!t)return;var n=t.action,r=t.category,i=s.GoogleAnalyticsObject;if(!i)return;var o=s[i];if(!o||!o.getAll)return;(o.getAll()||[]).forEach(function(e){e.send({hitType:"event",eventCategory:r,eventAction:n})})}catch(e){}}}),t.SEO.sendEvent=function(e){t.SEO.Yandex&&t.SEO.Yandex.reachGoal(e),t.SEO.Google&&t.SEO.Google.sendEvent(e)}}(window,(document,window.Mango=window.Mango||{})),function(r,i){"use strict";i.$;var e=i._,o=(i.Promise,"debug info warn error".split(" "));i.Log={enabled:!0,level:"info"},e.each(o,function(n){i.Log[n]=function(){var e,t;e=n,t=arguments,i.Log.enabled&&r.console&&o.indexOf(e)>=o.indexOf(i.Log.level)&&r.console[e].apply(r.console,t)}})}(window,(document,window.Mango=window.Mango||{})),function(s){"use strict";s.$,s._,s.Promise;s.Urls={track:function(){return this.url(s.ClientConfig.calltrackingHost,"track")},times:function(){return this.url(s.ClientConfig.calltrackingHost,"track","times")},module:function(e){return this.url("widgets",e+".js")},umaModule:function(e){return this.url(s.ClientConfig.umaHost,"js","".concat(e,".js"))},umaUrl:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.url.apply(this,[s.ClientConfig.umaHost].concat(t))},orderCall:function(e){return this.url(s.ClientConfig.callbackHost,"widget","order-call",e)},mcwModule:function(e){return this.url(s.ClientConfig.multichannelStaticHost,"widgets","".concat(e,".js"))},calltracking:function(e){return this.url(s.ClientConfig.calltrackingHost,"calltracking",e)},emt:function(e){return this.url(s.ClientConfig.emtHost,"api","emailtracking",e)},multichannel:function(e){return this.url(s.ClientConfig.multichannelHost,"multichannel",e)},pushstream:function(){return this.pushstreamUrl()},url:function(e){for(var t=0<arguments.length&&void 0!==e?e:s.host,n=s.schema?s.schema+":":"",r=arguments.length,i=new Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return"".concat(n,"//").concat(t,"/").concat(i.join("/"))},multichannelStaticUrl:function(){return this.url(s.ClientConfig.multichannelStaticHost)},fs4talkUrl:function(e,t){return"https://"+(s.ClientConfig&&s.ClientConfig.fs4talkHost?s.ClientConfig.fs4talkHost:s.host)+"/upload_chunk.php?toAccount="+e+"&localId="+t},pushstreamUrl:function(){return s.ClientConfig&&s.ClientConfig.pushStreamModuleHost?s.ClientConfig.pushStreamModuleHost:s.host}}}((window,document,window.Mango=window.Mango||{})),function(e,t){"use strict";t.$,t._;var n=t.Promise;t.Helpers={makeId:function(e){for(var t=0<arguments.length&&void 0!==e?e:20,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",i=0;i<t;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},isPortraitOrientation:function(){return e.matchMedia("(orientation: portrait)").matches},isMobileViewMode:function(){return e.matchMedia("only screen and (max-width: 414px)").matches},wait:function(r,i){return new n(function(n){setTimeout(function e(){var t=i();t?n(t):(r-=100)<0?n(null):setTimeout(e,100)},100)})},debounce:function(r,i,o){var s;return function(){var e=this,t=arguments,n=o&&!s;clearTimeout(s),s=setTimeout(function(){s=null,o||r.apply(e,t)},i),n&&r.apply(e,t)}},safeExec:function(e,t){var n=1<arguments.length&&void 0!==t?t:function(){};try{return e()}catch(e){return n()}}}}(window,(document,window.Mango=window.Mango||{})),function(o,s){"use strict";s.$;var l=s._,p=(s.Promise,{calltracking:{namespace:"CallTracking",filename:"mango.calltracking"},multichannel:{namespace:"MultiChannel",from:"mcwModule",filename:"mango.multichannel",dependsOn:[]},uma:{namespace:"UMA",from:"umaModule",filename:"mango-uma",dependsOn:["calltracking","popup"],passParams:["id"]},popup:{namespace:"Popup",from:"umaModule",filename:"mango-popup",dependsOn:[]},emt:{namespace:"EMT",dependsOn:["calltracking"],passParams:["id"],from:"emtModule",filename:"mango-emt"}}),h={};s.Modules=function(){function e(){_classCallCheck(this,e),l.extend(this,s.Backbone.Events),this._loading=!1,this._modules={}}return _createClass(e,[{key:"add",value:function(e,t){var n=p[e];return n?(this._modules[e]?this._modules[e].params.push(t):this._modules[e]=l.extend({},n,{name:e,params:[t],instance:null}),n):null}},{key:"start",value:function(e){e?this._modules[e]&&this._loadModule(this._modules[e]):l.isEmpty(this._modules)||l.each(this._modules,l.bind(this._loadModule,this))}},{key:"getModule",value:function(e){return this._modules[e]?this._modules[e].instance:null}},{key:"_loadModule",value:function(a){var u=this;if(2===h[a.name])return this._initializeModule(a);if(3<=h[a.name])return this._startModule(a);var c=!0;if(((p[a.name]||{}).dependsOn||[]).forEach(function(e){if(c=c&&4===h[e],!h[e])for(var t=a.params||[],n=0;n<t.length;n++){for(var r=t[n],i={},o=a.passParams||[],s=0;s<o.length;s++)i[o[s]]=r[o[s]];u.add(e,i),u.start(e)}}),c){if(s[a.namespace])return h[a.name]=2,this._initializeModule(a);h[a.name]=1;var e,t,n="mango-"+a.name+"-js",r=o.getElementById(n);r||(r=o.createElement("script"),e=o.getElementsByTagName("script")[0],r.charset="utf-8",r.async=!0,r.id=n,t="module","function"==typeof s.Urls[a.from]&&(t=a.from),r.src=s.Urls[t](a.filename),e.parentNode.insertBefore(r,e));var i=l.bind(function(){r.removeEventListener("load",i),h[a.name]=2,this._initializeModule(a)},this);r.addEventListener("load",i)}}},{key:"_initializeModule",value:function(e){var t;2!==h[e.name]||(t=s[e.namespace]?s[e.namespace].Module:null)&&(this._modules[e.name].instance=new t(e.params),h[e.name]=3,this._startModule(e))}},{key:"_startModule",value:function(e){this._modules[e.name].instance.start(),h[e.name]=4,this._tryToStartDependingModules(e.name);for(var t=Object.keys(h),n=0;n<t.length;n++)if(4!==h[t[n]])return;this.trigger("started")}},{key:"_tryToStartDependingModules",value:function(t){for(var e=Object.keys(p),n=0;n<e.length;n++){var r,i=e[n],o=this._modules[i];o&&(r=(p[i]||{}).dependsOn||[],l.find(r,function(e){return e===t})&&this._loadModule(o))}}}]),e}()}((window,document),window.Mango=window.Mango||{}),function(i){"use strict";i.$;var t=i._,n=(i.Promise,"productId"),o=["calltracking","multichannel","uma","emt"];i.Starter=function(){function e(){_classCallCheck(this,e),t.extend(this,i.Backbone.Events),this.init()}return _createClass(e,[{key:"init",value:function(){i.session=new i.Common.Session,i.http=new i.Common.Http,i.modules=new i.Modules,i.modules.once("started",t.bind(this._onModulesReady,this))}},{key:"load",value:function(e){for(var t=0;t<o.length;t++){var n=o[t],r=e[n];r&&i.modules.add(n,r)}}},{key:"_checkProductId",value:function(e){t.isNumber(e[n])&&(t.isNumber(i.productId)&&i.productId!==e[n]?i.Log.warn('[mango.js] Cannot set two different parameters "productId".'):i.productId=e[n])}},{key:"start",value:function(){this._validate()&&i.modules.start()}},{key:"_validate",value:function(){return!0}},{key:"_onModulesReady",value:function(){i.isReady=!0,this.trigger("started")}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(c){"use strict";c.$;var t=c._;c.Promise;c.Api=function(){function e(){_classCallCheck(this,e),t.extend(this,c.Backbone.Events)}return _createClass(e,[{key:"exec",value:function(e,t){var n=_slicedToArray(e.split(":"),2),r=n[0],i=n[1];if("string"!=typeof t)return!1;if("_"===t[0])return!1;var o=c.modules.getModule(r);if(o&&"function"==typeof o.exec){for(var s=arguments.length,a=new Array(2<s?s-2:0),u=2;u<s;u++)a[u-2]=arguments[u];return o.exec.apply(o,[+i,t].concat(a))}return!1}},{key:"postForm",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","postForm"].concat(Array.prototype.slice.call(arguments)))}},{key:"getNumber",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getNumber"].concat(Array.prototype.slice.call(arguments)))}},{key:"getNumberByRegion",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getNumberByRegion"].concat(Array.prototype.slice.call(arguments)))}},{key:"getNumberWithRedirect",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getNumberWithRedirect"].concat(Array.prototype.slice.call(arguments)))}},{key:"getExistsNumbers",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getExistsNumbers"].concat(Array.prototype.slice.call(arguments)))}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(u,c,l){"use strict";var e=l.$,p=l._;l.Promise;function h(e,t){p.each(e,function(e){p.each(e,function(e){p.isFunction(e)&&e.call(u,t)})})}e(function(){l.Utils.Performance.mark(l.Utils.PF_METRICS.MARKS.MAIN_START);var e,t,n,r,i=u.MangoObject,o=u[i],s=o.q||[];function a(){l.api.isReady?h([arguments]):s.push(arguments)}l.startTime=o.t,l.host=(e=o.u,(t=c.createElement("a")).href=e,t.host),l.starter=new l.Starter,l.api=new l.Api,a.__proto__=l.api,u[i]=a,n=s,r=l.starter,p.each(n,function(e){p.each(e,function(e){p.isObject(e)&&r.load(e)})}),l.starter.once("started",function(){l.api.isReady=!0,h(s,a)}),l.starter.start()})}(window,document,window.Mango=window.Mango||{});